<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ERIS CORE: import syntax</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ERIS CORE
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('d3/d2c/md__e_r_i_s_core_lib_wren_doc_notes_import_syntax.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">import syntax </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>So we need some syntax to distinguish between a relative import and a logical import. I'm not sure which way to go, and I'd like some feedback (or possibly other alternate ideas I haven't considered).</p>
<p>My two favorites are:</p>
<div class="fragment"><div class="line">// Use</div>
<div class="line">use &quot;relative/path&quot;</div>
<div class="line">import &quot;logical/path&quot;</div>
<div class="line"> </div>
<div class="line">// Node-style</div>
<div class="line">import &quot;./relative/path&quot;</div>
<div class="line">import &quot;logical/path&quot;</div>
</div><!-- fragment --><p>If you folks are OK with "use", that's my preference. But otherwise, the Node style will definitely work too. I'm open to other ideas as well, including a few below, but I'd like to not bikeshed this forever.</p>
<h2><a class="anchor" id="autotoc_md15"></a>
Background</h2>
<p>There are four general approaches we can take:</p>
<h3><a class="anchor" id="autotoc_md16"></a>
Use a modifier ("modifier")</h3>
<p>Both kinds of imports start with <code>import</code>, but then we use a second keyword afterwards to identify either a relative or logical import. We could use <em>two</em> keywords &ndash; one for each kind &ndash; but that's unnecessarily verbose. Instead, we use the presence or absence of the keyword to distinguish. In other words:</p>
<div class="fragment"><div class="line">import foo &quot;string&quot;</div>
<div class="line">import &quot;string&quot;</div>
</div><!-- fragment --><p>The specific questions we have to answer are:</p>
<ol type="1">
<li>Which kind of import gets the keyword? Ideally, the most common kind of import would be the one that doesn't need an extra keyword.</li>
<li>What keyword? This is surprisingly hard. Probably some kind of preposition.</li>
</ol>
<h3><a class="anchor" id="autotoc_md17"></a>
Use different keywords ("keyword")</h3>
<p>Instead of using <code>import</code> for both logical and relative imports, we could have two keywords, one for each kind. The specific questions to answer then are:</p>
<ol type="1">
<li>Which kind of import gets <code>import</code>?</li>
<li>What's the other keyword?</li>
</ol>
<h3><a class="anchor" id="autotoc_md18"></a>
Use different syntax for the path ("syntax")</h3>
<p>Instead of always using a string literal to identify what's being imported, we could use a different kind of token or tokens for the different kinds of import. For example, a string literal for one kind, and an identifier token for the other:</p>
<p>import identifier import "string literal"</p>
<p>The specific questions are:</p>
<ol type="1">
<li>Which kind of import uses a string literal?</li>
<li>What's the syntax for the other kind?</li>
</ol>
<h3><a class="anchor" id="autotoc_md19"></a>
Use a signifier in the import string itself to distinguish ("string")</h3>
<p>An import is always <code>import</code> followed by a string literal. Then we use some specific markers inside the string literal itself to distinguish the two kinds. For example, Node says that an import string starting with "./" or "../" is relative and other import strings are logical.</p>
<p>The specific question to answer is what kind of signifier we'd use. I think Node's convention is the only real contender here, though.</p>
<p>One feature this style has that none of the others do is that it means the language syntax itself has no notion of logical and relative imports. This means there is no overhead or complexity for host applications where that distinction isn't meaningful.</p>
<h2><a class="anchor" id="autotoc_md20"></a>
Contenders</h2>
<p>These are options I'm open to, in roughly descending order of preference:</p>
<h3><a class="anchor" id="autotoc_md21"></a>
Node-style (string)</h3>
<p>If the string starts with "./" or "../", it's relative.</p>
<div class="fragment"><div class="line">import &quot;./relative/path&quot;</div>
<div class="line">import &quot;logical/path&quot;</div>
</div><!-- fragment --><p>This is how Node works, so there's prior art. It keeps the language completely simple. It does feel sort of arbitrary and magical to me, but it's the simplest, most expedient solution.</p>
<h3><a class="anchor" id="autotoc_md22"></a>
Use (keyword)</h3>
<p>The <code>use</code> keyword is for relative imports, <code>import</code> is for logical.</p>
<div class="fragment"><div class="line">use &quot;relative/path&quot;</div>
<div class="line">import &quot;logical/path&quot;</div>
</div><!-- fragment --><p>The <code>use</code> keyword comes from Pascal, but that's not very widely known. I kind of like this. It's short, and <code>use</code> feels "nearer" to me than "import" so it has the right connotation. (You can't "use" something unless you have it near to hand.)</p>
<p>It adds a little complexity to the language and VM. We have to support both keywords and pass that "use versus import" bit through the name resolution process. But that's pretty minor.</p>
<h3><a class="anchor" id="autotoc_md23"></a>
Slashes (syntax)</h3>
<p>If the path is a string literal, it's relative. Otherwise, it is a slash-separated series of unquoted identifiers.</p>
<div class="fragment"><div class="line">import &quot;relative/path&quot;</div>
<div class="line">import logical/path</div>
</div><!-- fragment --><p>This means you can't (easily) use reserved words as names of logical imports. This was my initial pitch. I still like how it looks, but I seem to be in the minority.</p>
<h3><a class="anchor" id="autotoc_md24"></a>
Relative (modifier)</h3>
<p>The <code>relative</code> modifier is for relative imports.</p>
<div class="fragment"><div class="line">import relative &quot;relative/path&quot;</div>
<div class="line">import &quot;logical/path&quot;</div>
</div><!-- fragment --><p>It's explicit, which is good. It is unfortunately verbose. I think <code>relative</code> is too useful of a word to make into a reserved word, which means it would have to be a contextual keyword (i.e. treated like a reserved word after <code>import</code> but behaving like a regular identifier elsewhere). I'm not generally a fan of contextual keywords—they tend to make things like syntax highlighters more difficult to create—so I try to avoid them.</p>
<h2><a class="anchor" id="autotoc_md25"></a>
Rejected</h2>
<p>I considered these ideas, but don't think they are good enough approaches for various reasons:</p>
<h3><a class="anchor" id="autotoc_md26"></a>
Package identifier (syntax)</h3>
<p>If an unquoted identifier appears before the import string, then it's a logical import within that package. Otherwise, it's relative.</p>
<div class="fragment"><div class="line">import &quot;relative/path&quot;</div>
<div class="line">import logical &quot;path&quot;</div>
</div><!-- fragment --><p>This was one of my initial ideas. It has the same problem as other unquoted imports in that it makes it harder to have odd package names. It means the VM has to understand this syntax and figure out how to display package names in stack traces and stuff, so there is some extra complexity involved.</p>
<p>The form where you have both a package name and a relative path within that package is pretty unusual and likely unintuitive to users.</p>
<h3><a class="anchor" id="autotoc_md27"></a>
Dotted (syntax)</h3>
<p>If the path is a string literal, it's relative. Otherwise, it is a dot-separated series of unquoted identifiers.</p>
<div class="fragment"><div class="line">import &quot;relative/path&quot;</div>
<div class="line">import logical.path</div>
</div><!-- fragment --><p>Similar to slashes, but using dots. This helps make logical imports look more visually distinct from relative ones. But it also makes them look more similar to getter calls, which they aren't related to at all.</p>
<h3><a class="anchor" id="autotoc_md28"></a>
Include (keyword)</h3>
<p>The <code>include</code> keyword is for relative imports, <code>import</code> is for logical.</p>
<div class="fragment"><div class="line">include &quot;relative/path&quot;</div>
<div class="line">import &quot;logical/path&quot;</div>
</div><!-- fragment --><p>Ruby uses <code>include</code> for applying mixins. "Include" reads to me more like some kind of transclusion thing, so it feels a little weird.</p>
<h3><a class="anchor" id="autotoc_md29"></a>
Require (keyword)</h3>
<p>The <code>require</code> keyword is for relative imports, <code>import</code> is for logical.</p>
<div class="fragment"><div class="line">require &quot;relative/path&quot;</div>
<div class="line">import &quot;logical/path&quot;</div>
</div><!-- fragment --><p>Node uses "require" and ES6 uses "import" so this is kind of confusing. Ruby uses <code>require</code> and <code>require_relative</code>, so using <code>require</code> for a relative import is kind of confusing. Lua also uses <code>require</code>, but for both relative and logical. Overall, this feels murky and unhelpful to me.</p>
<h3><a class="anchor" id="autotoc_md30"></a>
Angle-brackets (syntax)</h3>
<p>As in C/C++, an import string can be in angle brackets or quotes. Angle brackets are for logical imports, quotes for relative.</p>
<div class="fragment"><div class="line">import &quot;relative/path&quot;</div>
<div class="line">import &lt;logical/path&gt;</div>
</div><!-- fragment --><p>Hard pass. It requires context-sensitive tokenization (!) in C and we definitely don't want to go there.</p>
<h3><a class="anchor" id="autotoc_md31"></a>
URI scheme (string)</h3>
<p>An import string starting with "package:" and maybe "wren:" is treated as logical, like they are URIs with an explicit scheme. Others are relative.</p>
<div class="fragment"><div class="line">import &quot;relative/path&quot;</div>
<div class="line">import &quot;package:logical/path&quot;</div>
<div class="line">import &quot;wren:random&quot;</div>
</div><!-- fragment --><p>This is (roughly) how Dart works. I'm not a fan. I think it's too verbose for logical imports.</p>
<h3><a class="anchor" id="autotoc_md32"></a>
Package (modifier)</h3>
<p>A <code>package</code> modifier indicates a logical import. Others are relative.</p>
<div class="fragment"><div class="line">import &quot;relative/path&quot;</div>
<div class="line">import package &quot;logical/path&quot;</div>
</div><!-- fragment --><p>Pretty long, and I'm not too crazy about baking "package" into the language and VM.</p>
<h3><a class="anchor" id="autotoc_md33"></a>
From (modifier)</h3>
<p>A <code>from</code> modifier indicates, uh, one kind of import.</p>
<div class="fragment"><div class="line">import &quot;some/path&quot;</div>
<div class="line">import from &quot;other/path&quot;</div>
</div><!-- fragment --><p>It looks nice, but it's totally unclear to me whether logical imports should get <code>from</code> or relative ones. Also kind of confusing in that Python and ES6 use <code>from</code> in their notation for importing explicit variables from a module (where Wren uses <code>for</code>). </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
