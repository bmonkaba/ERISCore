<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ERIS CORE: wren_compiler.c Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ERIS CORE
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('d4/de2/wren__compiler_8c_source.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">wren_compiler.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="../../d4/de2/wren__compiler_8c.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="preprocessor">#include &lt;errno.h&gt;</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="preprocessor">#include &lt;stdbool.h&gt;</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="preprocessor">#include &lt;string.h&gt;</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160; </div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d3/d72/wren__common_8h.html">wren_common.h</a>&quot;</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d7/db9/wren__compiler_8h.html">wren_compiler.h</a>&quot;</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d5/db1/wren__vm_8h.html">wren_vm.h</a>&quot;</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160; </div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="preprocessor">#if WREN_DEBUG_DUMP_COMPILED_CODE</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">  #include &quot;<a class="code" href="../../dd/df7/wren__debug_8h.html">wren_debug.h</a>&quot;</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160; </div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">// This is written in bottom-up order, so the tokenization comes first, then</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">// parsing/code generation. This minimizes the number of explicit forward</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">// declarations needed.</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160; </div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">// The maximum number of local (i.e. not module level) variables that can be</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">// declared in a single function, method, or chunk of top level code. This is</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">// the maximum number of variables in scope at one time, and spans block scopes.</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment">// Note that this limitation is also explicit in the bytecode. Since</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">// `CODE_LOAD_LOCAL` and `CODE_STORE_LOCAL` use a single argument byte to</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment">// identify the local, only 256 can be in scope at one time.</span></div>
<div class="line"><a name="l00025"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#a0a12e0946596048fabb91bc99d33c1a5">   25</a></span>&#160;<span class="preprocessor">#define MAX_LOCALS 256</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160; </div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment">// The maximum number of upvalues (i.e. variables from enclosing functions)</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment">// that a function can close over.</span></div>
<div class="line"><a name="l00029"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#ab71a28cb5b340c1121e54aa887f96d60">   29</a></span>&#160;<span class="preprocessor">#define MAX_UPVALUES 256</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160; </div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="comment">// The maximum number of distinct constants that a function can contain. This</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="comment">// value is explicit in the bytecode since `CODE_CONSTANT` only takes a single</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="comment">// two-byte argument.</span></div>
<div class="line"><a name="l00034"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#ae6988eadccdfeea0f29b0c2d0d7323ae">   34</a></span>&#160;<span class="preprocessor">#define MAX_CONSTANTS (1 &lt;&lt; 16)</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160; </div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="comment">// The maximum distance a CODE_JUMP or CODE_JUMP_IF instruction can move the</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="comment">// instruction pointer.</span></div>
<div class="line"><a name="l00038"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#a9f6b2894f12ed04b498c982012563dd0">   38</a></span>&#160;<span class="preprocessor">#define MAX_JUMP (1 &lt;&lt; 16)</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160; </div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="comment">// The maximum depth that interpolation can nest. For example, this string has</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="comment">// three levels:</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="comment">//      &quot;outside %(one + &quot;%(two + &quot;%(three)&quot;)&quot;)&quot;</span></div>
<div class="line"><a name="l00044"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#a3cb62dee3888b5a3edadbd01d13ac723">   44</a></span>&#160;<span class="preprocessor">#define MAX_INTERPOLATION_NESTING 8</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160; </div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="comment">// The buffer size used to format a compile error message, excluding the header</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="comment">// with the module name and error location. Using a hardcoded buffer for this</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="comment">// is kind of hairy, but fortunately we can control what the longest possible</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="comment">// message is and handle that. Ideally, we&#39;d use `snprintf()`, but that&#39;s not</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="comment">// available in standard C++98.</span></div>
<div class="line"><a name="l00051"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#adfb08e31817eba31a39cbab6810f5756">   51</a></span>&#160;<span class="preprocessor">#define ERROR_MESSAGE_SIZE (80 + MAX_VARIABLE_NAME + 15)</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160; </div>
<div class="line"><a name="l00053"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921">   53</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">enum</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;{</div>
<div class="line"><a name="l00055"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921ab958e67632477fb20b223edfef5a4a3f">   55</a></span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921ab958e67632477fb20b223edfef5a4a3f">TOKEN_LEFT_PAREN</a>,</div>
<div class="line"><a name="l00056"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a7db8f1fe352e6cf1ed6b880432b585d5">   56</a></span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a7db8f1fe352e6cf1ed6b880432b585d5">TOKEN_RIGHT_PAREN</a>,</div>
<div class="line"><a name="l00057"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a60e4bab14680522185007fe87240e707">   57</a></span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a60e4bab14680522185007fe87240e707">TOKEN_LEFT_BRACKET</a>,</div>
<div class="line"><a name="l00058"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921aa42fbee15a56484e7cc6daaaa552107a">   58</a></span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921aa42fbee15a56484e7cc6daaaa552107a">TOKEN_RIGHT_BRACKET</a>,</div>
<div class="line"><a name="l00059"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921abb75564bfe995225a6d177446540c352">   59</a></span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921abb75564bfe995225a6d177446540c352">TOKEN_LEFT_BRACE</a>,</div>
<div class="line"><a name="l00060"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a1c897c05771e2ebb01729d415d99308c">   60</a></span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a1c897c05771e2ebb01729d415d99308c">TOKEN_RIGHT_BRACE</a>,</div>
<div class="line"><a name="l00061"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a92a35ac6329421e77882bf3739a75e47">   61</a></span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a92a35ac6329421e77882bf3739a75e47">TOKEN_COLON</a>,</div>
<div class="line"><a name="l00062"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921ab565ebfaaa53dcee6ddda201e270733e">   62</a></span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921ab565ebfaaa53dcee6ddda201e270733e">TOKEN_DOT</a>,</div>
<div class="line"><a name="l00063"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921afe0f79003a508c29b6f1312a28102a4c">   63</a></span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921afe0f79003a508c29b6f1312a28102a4c">TOKEN_DOTDOT</a>,</div>
<div class="line"><a name="l00064"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921aec8baaf1a4cefc29ecae2da1ae2aa557">   64</a></span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921aec8baaf1a4cefc29ecae2da1ae2aa557">TOKEN_DOTDOTDOT</a>,</div>
<div class="line"><a name="l00065"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a8d265e17914bc733c8b9a880dd097a9e">   65</a></span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a8d265e17914bc733c8b9a880dd097a9e">TOKEN_COMMA</a>,</div>
<div class="line"><a name="l00066"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a1109083cbeff0c33b619eb9b3177940a">   66</a></span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a1109083cbeff0c33b619eb9b3177940a">TOKEN_STAR</a>,</div>
<div class="line"><a name="l00067"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a7bb488da02f984b2c055687da13856e2">   67</a></span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a7bb488da02f984b2c055687da13856e2">TOKEN_SLASH</a>,</div>
<div class="line"><a name="l00068"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a7ffecbddda5a17a256351520595ff925">   68</a></span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a7ffecbddda5a17a256351520595ff925">TOKEN_PERCENT</a>,</div>
<div class="line"><a name="l00069"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a221bd5c5f9c87bfb8bd33243a49b2f54">   69</a></span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a221bd5c5f9c87bfb8bd33243a49b2f54">TOKEN_HASH</a>,</div>
<div class="line"><a name="l00070"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a7f0601b40fea37f0d4598b0a61f828f2">   70</a></span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a7f0601b40fea37f0d4598b0a61f828f2">TOKEN_PLUS</a>,</div>
<div class="line"><a name="l00071"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a160171b541dcf45a3bd712598963ea39">   71</a></span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a160171b541dcf45a3bd712598963ea39">TOKEN_MINUS</a>,</div>
<div class="line"><a name="l00072"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a5c0ace9d9e5399a93f5603e145cc48d4">   72</a></span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a5c0ace9d9e5399a93f5603e145cc48d4">TOKEN_LTLT</a>,</div>
<div class="line"><a name="l00073"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921ac39dbc9a4fa9be2e062e38ff7a5764f4">   73</a></span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921ac39dbc9a4fa9be2e062e38ff7a5764f4">TOKEN_GTGT</a>,</div>
<div class="line"><a name="l00074"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a93000ce4e0f00f6f294a98192f705910">   74</a></span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a93000ce4e0f00f6f294a98192f705910">TOKEN_PIPE</a>,</div>
<div class="line"><a name="l00075"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a7f752de15cbf51e0933afbddd6ad8d82">   75</a></span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a7f752de15cbf51e0933afbddd6ad8d82">TOKEN_PIPEPIPE</a>,</div>
<div class="line"><a name="l00076"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a5ad99434caa3395bb10d41afcb7305f8">   76</a></span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a5ad99434caa3395bb10d41afcb7305f8">TOKEN_CARET</a>,</div>
<div class="line"><a name="l00077"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a16431c3218c17195ca372d1a9ac55c09">   77</a></span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a16431c3218c17195ca372d1a9ac55c09">TOKEN_AMP</a>,</div>
<div class="line"><a name="l00078"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921abfb5ad8d3eb3f9245ce9f0beede5b5aa">   78</a></span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921abfb5ad8d3eb3f9245ce9f0beede5b5aa">TOKEN_AMPAMP</a>,</div>
<div class="line"><a name="l00079"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a48b74bd21671b5a4a713dd8ddf57c917">   79</a></span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a48b74bd21671b5a4a713dd8ddf57c917">TOKEN_BANG</a>,</div>
<div class="line"><a name="l00080"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921aeb355a0f42c7b11efb9be89700b1d502">   80</a></span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921aeb355a0f42c7b11efb9be89700b1d502">TOKEN_TILDE</a>,</div>
<div class="line"><a name="l00081"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921ae9d8c03a94ac5b659addd3bd0a69072c">   81</a></span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921ae9d8c03a94ac5b659addd3bd0a69072c">TOKEN_QUESTION</a>,</div>
<div class="line"><a name="l00082"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921aeba19c29eb600289d1e973bf335139fe">   82</a></span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921aeba19c29eb600289d1e973bf335139fe">TOKEN_EQ</a>,</div>
<div class="line"><a name="l00083"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921aa3aef76940413ed1a121e71fa1b82519">   83</a></span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921aa3aef76940413ed1a121e71fa1b82519">TOKEN_LT</a>,</div>
<div class="line"><a name="l00084"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921aa5d81c076968a75a50ec61593495d894">   84</a></span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921aa5d81c076968a75a50ec61593495d894">TOKEN_GT</a>,</div>
<div class="line"><a name="l00085"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a92a2f9e402c2beb509fe0d879017eae4">   85</a></span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a92a2f9e402c2beb509fe0d879017eae4">TOKEN_LTEQ</a>,</div>
<div class="line"><a name="l00086"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a9215d0c00f6467e5491576492e73bbec">   86</a></span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a9215d0c00f6467e5491576492e73bbec">TOKEN_GTEQ</a>,</div>
<div class="line"><a name="l00087"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921ab2be2b4740bdcc2c060f7e31d128567e">   87</a></span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921ab2be2b4740bdcc2c060f7e31d128567e">TOKEN_EQEQ</a>,</div>
<div class="line"><a name="l00088"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921adb8474a4aab7093a6fa4f4e2f8ed4d35">   88</a></span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921adb8474a4aab7093a6fa4f4e2f8ed4d35">TOKEN_BANGEQ</a>,</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160; </div>
<div class="line"><a name="l00090"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921aa9d81762207f9f71bc650cbd9a0c4202">   90</a></span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921aa9d81762207f9f71bc650cbd9a0c4202">TOKEN_BREAK</a>,</div>
<div class="line"><a name="l00091"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a733edc9ed5eee3298868693b3bce7561">   91</a></span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a733edc9ed5eee3298868693b3bce7561">TOKEN_CONTINUE</a>,</div>
<div class="line"><a name="l00092"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a710fd04fc31582717222d447b5985a1f">   92</a></span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a710fd04fc31582717222d447b5985a1f">TOKEN_CLASS</a>,</div>
<div class="line"><a name="l00093"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921af510cb3065af330dd089ba71aba43756">   93</a></span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921af510cb3065af330dd089ba71aba43756">TOKEN_CONSTRUCT</a>,</div>
<div class="line"><a name="l00094"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921af1444e318c1d452a3c6dbb924a7e932a">   94</a></span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921af1444e318c1d452a3c6dbb924a7e932a">TOKEN_ELSE</a>,</div>
<div class="line"><a name="l00095"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a6aaf2e9d817fd7cd807c6fc2f6f6fe5c">   95</a></span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a6aaf2e9d817fd7cd807c6fc2f6f6fe5c">TOKEN_FALSE</a>,</div>
<div class="line"><a name="l00096"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921aaca94097ec53cbcf93cdc0a493251040">   96</a></span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921aaca94097ec53cbcf93cdc0a493251040">TOKEN_FOR</a>,</div>
<div class="line"><a name="l00097"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921af7597f04537d607509a57ce101c3a6de">   97</a></span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921af7597f04537d607509a57ce101c3a6de">TOKEN_FOREIGN</a>,</div>
<div class="line"><a name="l00098"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a6d39f93a351e0b853977018d48c47ca2">   98</a></span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a6d39f93a351e0b853977018d48c47ca2">TOKEN_IF</a>,</div>
<div class="line"><a name="l00099"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a00a4852749fa7e7e4675f7843ae16642">   99</a></span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a00a4852749fa7e7e4675f7843ae16642">TOKEN_IMPORT</a>,</div>
<div class="line"><a name="l00100"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921afb4035e70eacef7155e4c38833f93cbc">  100</a></span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921afb4035e70eacef7155e4c38833f93cbc">TOKEN_AS</a>,</div>
<div class="line"><a name="l00101"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921aab6505c0fd8126a58622ad931de3ce86">  101</a></span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921aab6505c0fd8126a58622ad931de3ce86">TOKEN_IN</a>,</div>
<div class="line"><a name="l00102"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a5ebaf8c36b5d84b1a717dfce0df266a8">  102</a></span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a5ebaf8c36b5d84b1a717dfce0df266a8">TOKEN_IS</a>,</div>
<div class="line"><a name="l00103"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921ae4def7ca080dbd4f6bcaac5a6889a37a">  103</a></span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921ae4def7ca080dbd4f6bcaac5a6889a37a">TOKEN_NULL</a>,</div>
<div class="line"><a name="l00104"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921ae52dd0b54e9522dc1dce5f6294f26b08">  104</a></span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921ae52dd0b54e9522dc1dce5f6294f26b08">TOKEN_RETURN</a>,</div>
<div class="line"><a name="l00105"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921afca69b5a56f15fbc4af6ad4b99e35296">  105</a></span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921afca69b5a56f15fbc4af6ad4b99e35296">TOKEN_STATIC</a>,</div>
<div class="line"><a name="l00106"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a1217e03cafd8282f9f0cf7709f6b04b1">  106</a></span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a1217e03cafd8282f9f0cf7709f6b04b1">TOKEN_SUPER</a>,</div>
<div class="line"><a name="l00107"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921af902561d021c19798c960f45d013575b">  107</a></span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921af902561d021c19798c960f45d013575b">TOKEN_THIS</a>,</div>
<div class="line"><a name="l00108"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a2dd89e6192a4d3a7aee35c99a5f88075">  108</a></span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a2dd89e6192a4d3a7aee35c99a5f88075">TOKEN_TRUE</a>,</div>
<div class="line"><a name="l00109"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a7a01d5885def4a924f815ab4afdb477b">  109</a></span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a7a01d5885def4a924f815ab4afdb477b">TOKEN_VAR</a>,</div>
<div class="line"><a name="l00110"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921acc13b68e6911dd0080248030ecb95cd6">  110</a></span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921acc13b68e6911dd0080248030ecb95cd6">TOKEN_WHILE</a>,</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160; </div>
<div class="line"><a name="l00112"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921afbb543acd52617c9616c3c4e0c6093d0">  112</a></span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921afbb543acd52617c9616c3c4e0c6093d0">TOKEN_FIELD</a>,</div>
<div class="line"><a name="l00113"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a1331d6f8b29f0469958ccb3ac34fc335">  113</a></span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a1331d6f8b29f0469958ccb3ac34fc335">TOKEN_STATIC_FIELD</a>,</div>
<div class="line"><a name="l00114"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a56d9afac7a1508302f85a77d1f3ba8b2">  114</a></span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a56d9afac7a1508302f85a77d1f3ba8b2">TOKEN_NAME</a>,</div>
<div class="line"><a name="l00115"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921ab2af03662d780038284bc9c09e11c452">  115</a></span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921ab2af03662d780038284bc9c09e11c452">TOKEN_NUMBER</a>,</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;  </div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;  <span class="comment">// A string literal without any interpolation, or the last section of a</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  <span class="comment">// string following the last interpolated expression.</span></div>
<div class="line"><a name="l00119"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921afcaa8f23ed1d21aa5779451ed3c243ef">  119</a></span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921afcaa8f23ed1d21aa5779451ed3c243ef">TOKEN_STRING</a>,</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;  </div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;  <span class="comment">// A portion of a string literal preceding an interpolated expression. This</span></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;  <span class="comment">// string:</span></div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  <span class="comment">//     &quot;a %(b) c %(d) e&quot;</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;  <span class="comment">// is tokenized to:</span></div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  <span class="comment">//     TOKEN_INTERPOLATION &quot;a &quot;</span></div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;  <span class="comment">//     TOKEN_NAME          b</span></div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;  <span class="comment">//     TOKEN_INTERPOLATION &quot; c &quot;</span></div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;  <span class="comment">//     TOKEN_NAME          d</span></div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;  <span class="comment">//     TOKEN_STRING        &quot; e&quot;</span></div>
<div class="line"><a name="l00133"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a6b3f6ac3cbe7a3bacd547075bd7212d4">  133</a></span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a6b3f6ac3cbe7a3bacd547075bd7212d4">TOKEN_INTERPOLATION</a>,</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160; </div>
<div class="line"><a name="l00135"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921aa3667833295e7097424957cf261b2527">  135</a></span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921aa3667833295e7097424957cf261b2527">TOKEN_LINE</a>,</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160; </div>
<div class="line"><a name="l00137"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921abbfc577192f2423b39a5f693e260b615">  137</a></span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921abbfc577192f2423b39a5f693e260b615">TOKEN_ERROR</a>,</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921aa130df27256cd45f5781fc74deeb50dc">TOKEN_EOF</a></div>
<div class="line"><a name="l00139"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921aa130df27256cd45f5781fc74deeb50dc">  139</a></span>&#160;} <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921">TokenType</a>;</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160; </div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct</span></div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;{</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921">TokenType</a> type;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160; </div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;  <span class="comment">// The beginning of the token, pointing directly into the source.</span></div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* start;</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160; </div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;  <span class="comment">// The length of the token in characters.</span></div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;  <span class="keywordtype">int</span> length;</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160; </div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;  <span class="comment">// The 1-based line where the token appears.</span></div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;  <span class="keywordtype">int</span> line;</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;  </div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;  <span class="comment">// The parsed value if the token is a literal.</span></div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;  <a class="code" href="../../d2/d0a/wren__value_8h.html#ad777bf08d8e2b01df17ba5e3c51ae11f">Value</a> value;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;} Token;</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160; </div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct</span></div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;{</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;  <a class="code" href="../../d7/ddb/struct_wren_v_m.html">WrenVM</a>* vm;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160; </div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;  <span class="comment">// The module being parsed.</span></div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;  <a class="code" href="../../df/d81/struct_obj_module.html">ObjModule</a>* module;</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160; </div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;  <span class="comment">// The source code being parsed.</span></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="../../dd/df8/lz4_8h.html#a0211201f992ec3f0b641c9ceff5f837a">source</a>;</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160; </div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;  <span class="comment">// The beginning of the currently-being-lexed token in [source].</span></div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* tokenStart;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160; </div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;  <span class="comment">// The current character being lexed in [source].</span></div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* currentChar;</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160; </div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;  <span class="comment">// The 1-based line number of [currentChar].</span></div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;  <span class="keywordtype">int</span> currentLine;</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160; </div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;  <span class="comment">// The upcoming token.</span></div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;  Token next;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160; </div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;  <span class="comment">// The most recently lexed token.</span></div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;  Token current;</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160; </div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;  <span class="comment">// The most recently consumed/advanced token.</span></div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;  Token previous;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;  </div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;  <span class="comment">// Tracks the lexing state when tokenizing interpolated strings.</span></div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;  <span class="comment">// Interpolated strings make the lexer not strictly regular: we don&#39;t know</span></div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;  <span class="comment">// whether a &quot;)&quot; should be treated as a RIGHT_PAREN token or as ending an</span></div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;  <span class="comment">// interpolated expression unless we know whether we are inside a string</span></div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;  <span class="comment">// interpolation and how many unmatched &quot;(&quot; there are. This is particularly</span></div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;  <span class="comment">// complex because interpolation can nest:</span></div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;  <span class="comment">//     &quot; %( &quot; %( inner ) &quot; ) &quot;</span></div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;  <span class="comment">// This tracks that state. The parser maintains a stack of ints, one for each</span></div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;  <span class="comment">// level of current interpolation nesting. Each value is the number of</span></div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;  <span class="comment">// unmatched &quot;(&quot; that are waiting to be closed.</span></div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;  <span class="keywordtype">int</span> parens[<a class="code" href="../../d4/de2/wren__compiler_8c.html#a3cb62dee3888b5a3edadbd01d13ac723">MAX_INTERPOLATION_NESTING</a>];</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;  <span class="keywordtype">int</span> numParens;</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160; </div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;  <span class="comment">// Whether compile errors should be printed to stderr or discarded.</span></div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;  <span class="keywordtype">bool</span> printErrors;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160; </div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;  <span class="comment">// If a syntax or compile error has occurred.</span></div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;  <span class="keywordtype">bool</span> hasError;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;} Parser;</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160; </div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct</span></div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;{</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;  <span class="comment">// The name of the local variable. This points directly into the original</span></div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;  <span class="comment">// source code string.</span></div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="../../d4/de2/wren__compiler_8c.html#a59935c559e6df5f8a5f95110a971014d">name</a>;</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160; </div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;  <span class="comment">// The length of the local variable&#39;s name.</span></div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;  <span class="keywordtype">int</span> length;</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160; </div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;  <span class="comment">// The depth in the scope chain that this variable was declared at. Zero is</span></div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;  <span class="comment">// the outermost scope--parameters for a method, or the first local block in</span></div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;  <span class="comment">// top level code. One is the scope within that, etc.</span></div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;  <span class="keywordtype">int</span> depth;</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160; </div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;  <span class="comment">// If this local variable is being used as an upvalue.</span></div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;  <span class="keywordtype">bool</span> isUpvalue;</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;} Local;</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160; </div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct</span></div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;{</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;  <span class="comment">// True if this upvalue is capturing a local variable from the enclosing</span></div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;  <span class="comment">// function. False if it&#39;s capturing an upvalue.</span></div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;  <span class="keywordtype">bool</span> isLocal;</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160; </div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;  <span class="comment">// The index of the local or upvalue being captured in the enclosing function.</span></div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;  <span class="keywordtype">int</span> index;</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;} CompilerUpvalue;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160; </div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;<span class="comment">// Bookkeeping information for the current loop being compiled.</span></div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>sLoop</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;{</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;  <span class="comment">// Index of the instruction that the loop should jump back to.</span></div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;  <span class="keywordtype">int</span> start;</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160; </div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;  <span class="comment">// Index of the argument for the CODE_JUMP_IF instruction used to exit the</span></div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;  <span class="comment">// loop. Stored so we can patch it once we know where the loop ends.</span></div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;  <span class="keywordtype">int</span> exitJump;</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160; </div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;  <span class="comment">// Index of the first instruction of the body of the loop.</span></div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;  <span class="keywordtype">int</span> body;</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160; </div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;  <span class="comment">// Depth of the scope(s) that need to be exited if a break is hit inside the</span></div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;  <span class="comment">// loop.</span></div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;  <span class="keywordtype">int</span> scopeDepth;</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160; </div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;  <span class="comment">// The loop enclosing this one, or NULL if this is the outermost loop.</span></div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;  <span class="keyword">struct </span>sLoop* enclosing;</div>
<div class="line"><a name="l00256"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#a2160d6b03577cf35a7df0a4044fab492">  256</a></span>&#160;} <a class="code" href="../../d4/de2/wren__compiler_8c.html#a2160d6b03577cf35a7df0a4044fab492">Loop</a>;</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160; </div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;<span class="comment">// The different signature syntaxes for different kinds of methods.</span></div>
<div class="line"><a name="l00259"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#a7456a1be27da2089f984a0ede62c6c50">  259</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">enum</span></div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;{</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;  <span class="comment">// A name followed by a (possibly empty) parenthesized parameter list. Also</span></div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;  <span class="comment">// used for binary operators.</span></div>
<div class="line"><a name="l00263"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#a7456a1be27da2089f984a0ede62c6c50af379038c458f7331b34fc5f3a05bea1b">  263</a></span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a7456a1be27da2089f984a0ede62c6c50af379038c458f7331b34fc5f3a05bea1b">SIG_METHOD</a>,</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;  </div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;  <span class="comment">// Just a name. Also used for unary operators.</span></div>
<div class="line"><a name="l00266"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#a7456a1be27da2089f984a0ede62c6c50a886e5cbc219aebd4f2677c108af4f769">  266</a></span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a7456a1be27da2089f984a0ede62c6c50a886e5cbc219aebd4f2677c108af4f769">SIG_GETTER</a>,</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;  </div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;  <span class="comment">// A name followed by &quot;=&quot;.</span></div>
<div class="line"><a name="l00269"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#a7456a1be27da2089f984a0ede62c6c50a3c6a70ee605e103ae81714939f123c44">  269</a></span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a7456a1be27da2089f984a0ede62c6c50a3c6a70ee605e103ae81714939f123c44">SIG_SETTER</a>,</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;  </div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;  <span class="comment">// A square bracketed parameter list.</span></div>
<div class="line"><a name="l00272"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#a7456a1be27da2089f984a0ede62c6c50a9f38bc394cbcd1405be8094564da7324">  272</a></span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a7456a1be27da2089f984a0ede62c6c50a9f38bc394cbcd1405be8094564da7324">SIG_SUBSCRIPT</a>,</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;  </div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;  <span class="comment">// A square bracketed parameter list followed by &quot;=&quot;.</span></div>
<div class="line"><a name="l00275"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#a7456a1be27da2089f984a0ede62c6c50ae0dd8195094045c31d6456d0838c8020">  275</a></span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a7456a1be27da2089f984a0ede62c6c50ae0dd8195094045c31d6456d0838c8020">SIG_SUBSCRIPT_SETTER</a>,</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;  </div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;  <span class="comment">// A constructor initializer function. This has a distinct signature to</span></div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;  <span class="comment">// prevent it from being invoked directly outside of the constructor on the</span></div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;  <span class="comment">// metaclass.</span></div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a7456a1be27da2089f984a0ede62c6c50acc229831cb9cfa74b1ad2d11a37fe214">SIG_INITIALIZER</a></div>
<div class="line"><a name="l00281"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#a7456a1be27da2089f984a0ede62c6c50acc229831cb9cfa74b1ad2d11a37fe214">  281</a></span>&#160;} <a class="code" href="../../d4/de2/wren__compiler_8c.html#a7456a1be27da2089f984a0ede62c6c50">SignatureType</a>;</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160; </div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct</span></div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;{</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="../../d4/de2/wren__compiler_8c.html#a59935c559e6df5f8a5f95110a971014d">name</a>;</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;  <span class="keywordtype">int</span> length;</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a7456a1be27da2089f984a0ede62c6c50">SignatureType</a> type;</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;  <span class="keywordtype">int</span> arity;</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;} Signature;</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160; </div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;<span class="comment">// Bookkeeping information for compiling a class definition.</span></div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct</span></div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;{</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;  <span class="comment">// The name of the class.</span></div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;  <a class="code" href="../../d1/d25/structs_obj_string.html">ObjString</a>* <a class="code" href="../../d4/de2/wren__compiler_8c.html#a59935c559e6df5f8a5f95110a971014d">name</a>;</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;  </div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;  <span class="comment">// Attributes for the class itself</span></div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;  <a class="code" href="../../d4/db1/struct_obj_map.html">ObjMap</a>* classAttributes;</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;  <span class="comment">// Attributes for methods in this class</span></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;  <a class="code" href="../../d4/db1/struct_obj_map.html">ObjMap</a>* methodAttributes;</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160; </div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;  <span class="comment">// Symbol table for the fields of the class.</span></div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;  <a class="code" href="../../d1/df1/wren__utils_8h.html#a05bef0ea62f4104514bea6af6fdef135">SymbolTable</a> fields;</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160; </div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;  <span class="comment">// Symbols for the methods defined by the class. Used to detect duplicate</span></div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;  <span class="comment">// method definitions.</span></div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;  IntBuffer methods;</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;  IntBuffer staticMethods;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160; </div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;  <span class="comment">// True if the class being compiled is a foreign class.</span></div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;  <span class="keywordtype">bool</span> isForeign;</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;  </div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;  <span class="comment">// True if the current method being compiled is static.</span></div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;  <span class="keywordtype">bool</span> inStatic;</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160; </div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;  <span class="comment">// The signature of the method being compiled.</span></div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;  Signature* signature;</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;} ClassInfo;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160; </div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;<span class="keyword">struct </span>sCompiler</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;{</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;  Parser* parser;</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160; </div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;  <span class="comment">// The compiler for the function enclosing this one, or NULL if it&#39;s the</span></div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;  <span class="comment">// top level.</span></div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;  <span class="keyword">struct </span>sCompiler* parent;</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160; </div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;  <span class="comment">// The currently in scope local variables.</span></div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;  Local locals[<a class="code" href="../../d4/de2/wren__compiler_8c.html#a0a12e0946596048fabb91bc99d33c1a5">MAX_LOCALS</a>];</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160; </div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;  <span class="comment">// The number of local variables currently in scope.</span></div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;  <span class="keywordtype">int</span> numLocals;</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160; </div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;  <span class="comment">// The upvalues that this function has captured from outer scopes. The count</span></div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;  <span class="comment">// of them is stored in [numUpvalues].</span></div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;  CompilerUpvalue upvalues[<a class="code" href="../../d4/de2/wren__compiler_8c.html#ab71a28cb5b340c1121e54aa887f96d60">MAX_UPVALUES</a>];</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160; </div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;  <span class="comment">// The current level of block scope nesting, where zero is no nesting. A -1</span></div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;  <span class="comment">// here means top-level code is being compiled and there is no block scope</span></div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;  <span class="comment">// in effect at all. Any variables declared will be module-level.</span></div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;  <span class="keywordtype">int</span> scopeDepth;</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;  </div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;  <span class="comment">// The current number of slots (locals and temporaries) in use.</span></div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;  <span class="comment">// We use this and maxSlots to track the maximum number of additional slots</span></div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;  <span class="comment">// a function may need while executing. When the function is called, the</span></div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;  <span class="comment">// fiber will check to ensure its stack has enough room to cover that worst</span></div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;  <span class="comment">// case and grow the stack if needed.</span></div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;  <span class="comment">// This value here doesn&#39;t include parameters to the function. Since those</span></div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;  <span class="comment">// are already pushed onto the stack by the caller and tracked there, we</span></div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;  <span class="comment">// don&#39;t need to double count them here.</span></div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;  <span class="keywordtype">int</span> numSlots;</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160; </div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;  <span class="comment">// The current innermost loop being compiled, or NULL if not in a loop.</span></div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a2160d6b03577cf35a7df0a4044fab492">Loop</a>* <a class="code" href="../../d6/dd8/_eris_core_8cpp.html#a0b33edabd7f1c4e4a0bf32c67269be2f">loop</a>;</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160; </div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;  <span class="comment">// If this is a compiler for a method, keeps track of the class enclosing it.</span></div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;  ClassInfo* enclosingClass;</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160; </div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;  <span class="comment">// The function being compiled.</span></div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;  <a class="code" href="../../df/d87/struct_obj_fn.html">ObjFn</a>* <a class="code" href="../../d0/de9/receiver-less_01calls_012_8txt.html#a5d69482e1e5c9b54df78b8f9595d7952">fn</a>;</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;  </div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;  <span class="comment">// The constants for the function being compiled.</span></div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;  <a class="code" href="../../d4/db1/struct_obj_map.html">ObjMap</a>* constants;</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160; </div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;  <span class="comment">// Whether or not the compiler is for a constructor initializer</span></div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;  <span class="keywordtype">bool</span> isInitializer;</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160; </div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;  <span class="comment">// The number of attributes seen while parsing.</span></div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;  <span class="comment">// We track this separately as compile time attributes</span></div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;  <span class="comment">// are not stored, so we can&#39;t rely on attributes-&gt;count</span></div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;  <span class="comment">// to enforce an error message when attributes are used</span></div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;  <span class="comment">// anywhere other than methods or classes.</span></div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;  <span class="keywordtype">int</span> numAttributes;</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;  <span class="comment">// Attributes for the next class or method.</span></div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;  <a class="code" href="../../d4/db1/struct_obj_map.html">ObjMap</a>* attributes;</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;};</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160; </div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;<span class="comment">// Describes where a variable is declared.</span></div>
<div class="line"><a name="l00381"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#aaecc53892786f2fa11e682f633af84c6">  381</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">enum</span></div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;{</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;  <span class="comment">// A local variable in the current function.</span></div>
<div class="line"><a name="l00384"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#aaecc53892786f2fa11e682f633af84c6af828bc82c537119c89b55d2db41ec75b">  384</a></span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aaecc53892786f2fa11e682f633af84c6af828bc82c537119c89b55d2db41ec75b">SCOPE_LOCAL</a>,</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;  </div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;  <span class="comment">// A local variable declared in an enclosing function.</span></div>
<div class="line"><a name="l00387"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#aaecc53892786f2fa11e682f633af84c6a9c17ce3e01d23ef646abc7a330a1244a">  387</a></span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aaecc53892786f2fa11e682f633af84c6a9c17ce3e01d23ef646abc7a330a1244a">SCOPE_UPVALUE</a>,</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;  </div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;  <span class="comment">// A top-level module variable.</span></div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aaecc53892786f2fa11e682f633af84c6aa4cd1d716be5988e72bb08902f33270e">SCOPE_MODULE</a></div>
<div class="line"><a name="l00391"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#aaecc53892786f2fa11e682f633af84c6aa4cd1d716be5988e72bb08902f33270e">  391</a></span>&#160;} <a class="code" href="../../d4/de2/wren__compiler_8c.html#aaecc53892786f2fa11e682f633af84c6">Scope</a>;</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160; </div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;<span class="comment">// A reference to a variable and the scope where it is defined. This contains</span></div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;<span class="comment">// enough information to emit correct code to load or store the variable.</span></div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct</span></div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;{</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;  <span class="comment">// The stack slot, upvalue slot, or module symbol defining the variable.</span></div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;  <span class="keywordtype">int</span> index;</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;  </div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;  <span class="comment">// Where the variable is declared.</span></div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aaecc53892786f2fa11e682f633af84c6">Scope</a> scope;</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;} Variable;</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160; </div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;<span class="comment">// Forward declarations</span></div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a576b164c108737d8d82019ec54a0d533">disallowAttributes</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler);</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#ad7cf94c2202263aa2f1c991b8ed0c933">addToAttributeGroup</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler, <a class="code" href="../../d2/d0a/wren__value_8h.html#ad777bf08d8e2b01df17ba5e3c51ae11f">Value</a> group, <a class="code" href="../../d2/d0a/wren__value_8h.html#ad777bf08d8e2b01df17ba5e3c51ae11f">Value</a> key, <a class="code" href="../../d2/d0a/wren__value_8h.html#ad777bf08d8e2b01df17ba5e3c51ae11f">Value</a> value);</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#ad596cab10744611b6321d2f883acf5f1">emitClassAttributes</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler, ClassInfo* classInfo);</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#ad26f260d12aca9c0b1bd0ae201f760c1">copyAttributes</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler, <a class="code" href="../../d4/db1/struct_obj_map.html">ObjMap</a>* into);</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a2bd516d902a9b63aa8529ab50b938b03">copyMethodAttributes</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler, <span class="keywordtype">bool</span> isForeign, </div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;            <span class="keywordtype">bool</span> isStatic, <span class="keyword">const</span> <span class="keywordtype">char</span>* fullSignature, int32_t length);</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160; </div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;<span class="comment">// The stack effect of each opcode. The index in the array is the opcode, and</span></div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;<span class="comment">// the value is the stack effect of that instruction.</span></div>
<div class="line"><a name="l00414"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#a05c8d00faddc01e19b4e0655b0e917d9">  414</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a05c8d00faddc01e19b4e0655b0e917d9">stackEffects</a>[] = {</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;<span class="preprocessor">  #define OPCODE(_, effect) effect,</span></div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;<span class="preprocessor">  #include &quot;<a class="code" href="../../da/dc1/wren__opcodes_8h.html">wren_opcodes.h</a>&quot;</span></div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;<span class="preprocessor">  #undef OPCODE</span></div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;};</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160; </div>
<div class="line"><a name="l00420"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#a22c495e9344a9dc8eff660fcba96d843">  420</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a22c495e9344a9dc8eff660fcba96d843">printError</a>(Parser* parser, <span class="keywordtype">int</span> line, <span class="keyword">const</span> <span class="keywordtype">char</span>* label,</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;                       <span class="keyword">const</span> <span class="keywordtype">char</span>* format, va_list args)</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;{</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;  parser-&gt;hasError = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;  <span class="keywordflow">if</span> (!parser-&gt;printErrors) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160; </div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;  <span class="comment">// Only report errors if there is a WrenErrorFn to handle them.</span></div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;  <span class="keywordflow">if</span> (parser-&gt;vm-&gt;config.errorFn == <a class="code" href="../../da/d2d/_stdio_stream_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160; </div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;  <span class="comment">// Format the label and message.</span></div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;  <span class="keywordtype">char</span> message[<a class="code" href="../../d4/de2/wren__compiler_8c.html#adfb08e31817eba31a39cbab6810f5756">ERROR_MESSAGE_SIZE</a>];</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;  <span class="keywordtype">int</span> length = sprintf(message, <span class="stringliteral">&quot;%s: &quot;</span>, label);</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;  length += vsprintf(message + length, format, args);</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;  <a class="code" href="../../d3/d72/wren__common_8h.html#aa06eedd6f738a415870e97a375337d51">ASSERT</a>(length &lt; <a class="code" href="../../d4/de2/wren__compiler_8c.html#adfb08e31817eba31a39cbab6810f5756">ERROR_MESSAGE_SIZE</a>, <span class="stringliteral">&quot;Error should not exceed buffer.&quot;</span>);</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160; </div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;  <a class="code" href="../../d1/d25/structs_obj_string.html">ObjString</a>* module = parser-&gt;module-&gt;name;</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* module_name = module ? module-&gt;<a class="code" href="../../d1/d25/structs_obj_string.html#a7d929e9bea31c7ee928fb1db26fe2fe9">value</a> : <span class="stringliteral">&quot;&lt;unknown&gt;&quot;</span>;</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160; </div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;  parser-&gt;vm-&gt;config.errorFn(parser-&gt;vm, <a class="code" href="../../dd/d19/wren_8h.html#ab1c7acdbcc2c71e81c92d6b1b060f971a4d8e7d0210dea8b187e040d7e6ca6ca3">WREN_ERROR_COMPILE</a>,</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;                             module_name, line, message);</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;}</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160; </div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;<span class="comment">// Outputs a lexical error.</span></div>
<div class="line"><a name="l00443"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#a2c404ef1792908a05d45d110401e9443">  443</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a2c404ef1792908a05d45d110401e9443">lexError</a>(Parser* parser, <span class="keyword">const</span> <span class="keywordtype">char</span>* format, ...)</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;{</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;  va_list args;</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;  va_start(args, format);</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a22c495e9344a9dc8eff660fcba96d843">printError</a>(parser, parser-&gt;currentLine, <span class="stringliteral">&quot;Error&quot;</span>, format, args);</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;  va_end(args);</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;}</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160; </div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;<span class="comment">// Outputs a compile or syntax error. This also marks the compilation as having</span></div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;<span class="comment">// an error, which ensures that the resulting code will be discarded and never</span></div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;<span class="comment">// run. This means that after calling error(), it&#39;s fine to generate whatever</span></div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;<span class="comment">// invalid bytecode you want since it won&#39;t be used.</span></div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;<span class="comment">// You&#39;ll note that most places that call error() continue to parse and compile</span></div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;<span class="comment">// after that. That&#39;s so that we can try to find as many compilation errors in</span></div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;<span class="comment">// one pass as possible instead of just bailing at the first one.</span></div>
<div class="line"><a name="l00459"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#ae74f1b74c02154518d7162a728d6118a">  459</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#ae74f1b74c02154518d7162a728d6118a">error</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler, <span class="keyword">const</span> <span class="keywordtype">char</span>* format, ...)</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;{</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;  Token* <a class="code" href="../../dd/dbe/svc_serial_command_interface_8cpp.html#a1d71425d9df28667d528833a4db10432">token</a> = &amp;compiler-&gt;parser-&gt;previous;</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160; </div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;  <span class="comment">// If the parse error was caused by an error token, the lexer has already</span></div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;  <span class="comment">// reported it.</span></div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../dd/dbe/svc_serial_command_interface_8cpp.html#a1d71425d9df28667d528833a4db10432">token</a>-&gt;type == <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921abbfc577192f2423b39a5f693e260b615">TOKEN_ERROR</a>) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;  </div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;  va_list args;</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;  va_start(args, format);</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../dd/dbe/svc_serial_command_interface_8cpp.html#a1d71425d9df28667d528833a4db10432">token</a>-&gt;type == <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921aa3667833295e7097424957cf261b2527">TOKEN_LINE</a>)</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;  {</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#a22c495e9344a9dc8eff660fcba96d843">printError</a>(compiler-&gt;parser, <a class="code" href="../../dd/dbe/svc_serial_command_interface_8cpp.html#a1d71425d9df28667d528833a4db10432">token</a>-&gt;line, <span class="stringliteral">&quot;Error at newline&quot;</span>, format, args);</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;  }</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../dd/dbe/svc_serial_command_interface_8cpp.html#a1d71425d9df28667d528833a4db10432">token</a>-&gt;type == <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921aa130df27256cd45f5781fc74deeb50dc">TOKEN_EOF</a>)</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;  {</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#a22c495e9344a9dc8eff660fcba96d843">printError</a>(compiler-&gt;parser, <a class="code" href="../../dd/dbe/svc_serial_command_interface_8cpp.html#a1d71425d9df28667d528833a4db10432">token</a>-&gt;line,</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;               <span class="stringliteral">&quot;Error at end of file&quot;</span>, format, args);</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;  }</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;  {</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;    <span class="comment">// Make sure we don&#39;t exceed the buffer with a very long token.</span></div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;    <span class="keywordtype">char</span> label[10 + <a class="code" href="../../d3/d72/wren__common_8h.html#aa692dbf91cd4e231e40dea73887e02ce">MAX_VARIABLE_NAME</a> + 4 + 1];</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../dd/dbe/svc_serial_command_interface_8cpp.html#a1d71425d9df28667d528833a4db10432">token</a>-&gt;length &lt;= <a class="code" href="../../d3/d72/wren__common_8h.html#aa692dbf91cd4e231e40dea73887e02ce">MAX_VARIABLE_NAME</a>)</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    {</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;      sprintf(label, <span class="stringliteral">&quot;Error at &#39;%.*s&#39;&quot;</span>, <a class="code" href="../../dd/dbe/svc_serial_command_interface_8cpp.html#a1d71425d9df28667d528833a4db10432">token</a>-&gt;length, <a class="code" href="../../dd/dbe/svc_serial_command_interface_8cpp.html#a1d71425d9df28667d528833a4db10432">token</a>-&gt;start);</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    }</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    {</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;      sprintf(label, <span class="stringliteral">&quot;Error at &#39;%.*s...&#39;&quot;</span>, <a class="code" href="../../d3/d72/wren__common_8h.html#aa692dbf91cd4e231e40dea73887e02ce">MAX_VARIABLE_NAME</a>, <a class="code" href="../../dd/dbe/svc_serial_command_interface_8cpp.html#a1d71425d9df28667d528833a4db10432">token</a>-&gt;start);</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    }</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#a22c495e9344a9dc8eff660fcba96d843">printError</a>(compiler-&gt;parser, <a class="code" href="../../dd/dbe/svc_serial_command_interface_8cpp.html#a1d71425d9df28667d528833a4db10432">token</a>-&gt;line, label, format, args);</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;  }</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;  va_end(args);</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;}</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160; </div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;<span class="comment">// Adds [constant] to the constant pool and returns its index.</span></div>
<div class="line"><a name="l00496"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#a0dc46acbdd511af1c3de1a937dca02b3">  496</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a0dc46acbdd511af1c3de1a937dca02b3">addConstant</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler, <a class="code" href="../../d2/d0a/wren__value_8h.html#ad777bf08d8e2b01df17ba5e3c51ae11f">Value</a> constant)</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;{</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;  <span class="keywordflow">if</span> (compiler-&gt;parser-&gt;hasError) <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;  </div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;  <span class="comment">// See if we already have a constant for the value. If so, reuse it.</span></div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;  <span class="keywordflow">if</span> (compiler-&gt;constants != <a class="code" href="../../da/d2d/_stdio_stream_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;  {</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    <a class="code" href="../../d2/d0a/wren__value_8h.html#ad777bf08d8e2b01df17ba5e3c51ae11f">Value</a> existing = <a class="code" href="../../da/dbe/wren__value_8c.html#a63b1d03d675e5e424c68640c88420ccf">wrenMapGet</a>(compiler-&gt;constants, constant);</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d2/d0a/wren__value_8h.html#a513670ecdc3cb3fce1d696b5892aa691">IS_NUM</a>(existing)) <span class="keywordflow">return</span> (<span class="keywordtype">int</span>)<a class="code" href="../../d2/d0a/wren__value_8h.html#a254dfa03c8d1065fcef554fc8763e65f">AS_NUM</a>(existing);</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;  }</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;  </div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;  <span class="comment">// It&#39;s a new constant.</span></div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;  <span class="keywordflow">if</span> (compiler-&gt;fn-&gt;constants.count &lt; <a class="code" href="../../d4/de2/wren__compiler_8c.html#ae6988eadccdfeea0f29b0c2d0d7323ae">MAX_CONSTANTS</a>)</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;  {</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d2/d0a/wren__value_8h.html#a4da06c994a3591d379aca99d26b7e7f5">IS_OBJ</a>(constant)) <a class="code" href="../../de/db2/wren__vm_8c.html#ab604556ed8a6be6d88e7b4ddf4efd2e8">wrenPushRoot</a>(compiler-&gt;parser-&gt;vm, <a class="code" href="../../d2/d0a/wren__value_8h.html#ae834650cc20489e3a20ebfca0d2a61bf">AS_OBJ</a>(constant));</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    wrenValueBufferWrite(compiler-&gt;parser-&gt;vm, &amp;compiler-&gt;fn-&gt;constants,</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;                         constant);</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d2/d0a/wren__value_8h.html#a4da06c994a3591d379aca99d26b7e7f5">IS_OBJ</a>(constant)) <a class="code" href="../../de/db2/wren__vm_8c.html#a70c4570a3862c0981f165f4c08b94f3a">wrenPopRoot</a>(compiler-&gt;parser-&gt;vm);</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    </div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;    <span class="keywordflow">if</span> (compiler-&gt;constants == <a class="code" href="../../da/d2d/_stdio_stream_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    {</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;      compiler-&gt;constants = <a class="code" href="../../da/dbe/wren__value_8c.html#a12dd4cef62629e819f9eecb3e002a3da">wrenNewMap</a>(compiler-&gt;parser-&gt;vm);</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    }</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;    <a class="code" href="../../da/dbe/wren__value_8c.html#a10e46c257fbf0a57bb2acef361bff562">wrenMapSet</a>(compiler-&gt;parser-&gt;vm, compiler-&gt;constants, constant,</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;               <a class="code" href="../../d2/d0a/wren__value_8h.html#a9ace511b01bc4d6263defc40aae2d7bf">NUM_VAL</a>(compiler-&gt;fn-&gt;constants.count - 1));</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;  }</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;  {</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#ae74f1b74c02154518d7162a728d6118a">error</a>(compiler, <span class="stringliteral">&quot;A function may only contain %d unique constants.&quot;</span>,</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;          <a class="code" href="../../d4/de2/wren__compiler_8c.html#ae6988eadccdfeea0f29b0c2d0d7323ae">MAX_CONSTANTS</a>);</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;  }</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160; </div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;  <span class="keywordflow">return</span> compiler-&gt;fn-&gt;constants.count - 1;</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;}</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160; </div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;<span class="comment">// Initializes [compiler].</span></div>
<div class="line"><a name="l00532"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#a9cd38e83591679b9d3f9079885746744">  532</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a9cd38e83591679b9d3f9079885746744">initCompiler</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler, Parser* parser, <a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* parent,</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;                         <span class="keywordtype">bool</span> isMethod)</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;{</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;  compiler-&gt;parser = parser;</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;  compiler-&gt;parent = parent;</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;  compiler-&gt;loop = <a class="code" href="../../da/d2d/_stdio_stream_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;  compiler-&gt;enclosingClass = <a class="code" href="../../da/d2d/_stdio_stream_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;  compiler-&gt;isInitializer = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;  </div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;  <span class="comment">// Initialize these to NULL before allocating in case a GC gets triggered in</span></div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;  <span class="comment">// the middle of initializing the compiler.</span></div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;  compiler-&gt;fn = <a class="code" href="../../da/d2d/_stdio_stream_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;  compiler-&gt;constants = <a class="code" href="../../da/d2d/_stdio_stream_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;  compiler-&gt;attributes = <a class="code" href="../../da/d2d/_stdio_stream_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160; </div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;  parser-&gt;vm-&gt;compiler = compiler;</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160; </div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;  <span class="comment">// Declare a local slot for either the closure or method receiver so that we</span></div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;  <span class="comment">// don&#39;t try to reuse that slot for a user-defined local variable. For</span></div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;  <span class="comment">// methods, we name it &quot;this&quot;, so that we can resolve references to that like</span></div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;  <span class="comment">// a normal variable. For functions, they have no explicit &quot;this&quot;, so we use</span></div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;  <span class="comment">// an empty name. That way references to &quot;this&quot; inside a function walks up</span></div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;  <span class="comment">// the parent chain to find a method enclosing the function whose &quot;this&quot; we</span></div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;  <span class="comment">// can close over.</span></div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;  compiler-&gt;numLocals = 1;</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;  compiler-&gt;numSlots = compiler-&gt;numLocals;</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160; </div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;  <span class="keywordflow">if</span> (isMethod)</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;  {</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;    compiler-&gt;locals[0].name = <span class="stringliteral">&quot;this&quot;</span>;</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    compiler-&gt;locals[0].length = 4;</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;  }</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;  {</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;    compiler-&gt;locals[0].name = <a class="code" href="../../da/d2d/_stdio_stream_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;    compiler-&gt;locals[0].length = 0;</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;  }</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;  </div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;  compiler-&gt;locals[0].depth = -1;</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;  compiler-&gt;locals[0].isUpvalue = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160; </div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;  <span class="keywordflow">if</span> (parent == <a class="code" href="../../da/d2d/_stdio_stream_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;  {</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;    <span class="comment">// Compiling top-level code, so the initial scope is module-level.</span></div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;    compiler-&gt;scopeDepth = -1;</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;  }</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;  {</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;    <span class="comment">// The initial scope for functions and methods is local scope.</span></div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;    compiler-&gt;scopeDepth = 0;</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;  }</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;  </div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;  compiler-&gt;numAttributes = 0;</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;  compiler-&gt;attributes = <a class="code" href="../../da/dbe/wren__value_8c.html#a12dd4cef62629e819f9eecb3e002a3da">wrenNewMap</a>(parser-&gt;vm);</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;  compiler-&gt;fn = <a class="code" href="../../da/dbe/wren__value_8c.html#a4d0488e1efabc7dbbdeca5dc860c9158">wrenNewFunction</a>(parser-&gt;vm, parser-&gt;module,</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;                                 compiler-&gt;numLocals);</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;}</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160; </div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;<span class="comment">// Lexing ----------------------------------------------------------------------</span></div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160; </div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct</span></div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;{</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* identifier;</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;  <span class="keywordtype">size_t</span>      length;</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921">TokenType</a>   tokenType;</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;} Keyword;</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160; </div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;<span class="comment">// The table of reserved words and their associated token types.</span></div>
<div class="line"><a name="l00600"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#a959905d4b19d39ff14a74ff3d941c287">  600</a></span>&#160;<span class="keyword">static</span> Keyword <a class="code" href="../../d4/de2/wren__compiler_8c.html#a959905d4b19d39ff14a74ff3d941c287">keywords</a>[] =</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;{</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;  {<span class="stringliteral">&quot;break&quot;</span>,     5, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921aa9d81762207f9f71bc650cbd9a0c4202">TOKEN_BREAK</a>},</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;  {<span class="stringliteral">&quot;continue&quot;</span>,  8, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a733edc9ed5eee3298868693b3bce7561">TOKEN_CONTINUE</a>},</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;  {<span class="stringliteral">&quot;class&quot;</span>,     5, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a710fd04fc31582717222d447b5985a1f">TOKEN_CLASS</a>},</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;  {<span class="stringliteral">&quot;construct&quot;</span>, 9, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921af510cb3065af330dd089ba71aba43756">TOKEN_CONSTRUCT</a>},</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;  {<span class="stringliteral">&quot;else&quot;</span>,      4, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921af1444e318c1d452a3c6dbb924a7e932a">TOKEN_ELSE</a>},</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;  {<span class="stringliteral">&quot;false&quot;</span>,     5, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a6aaf2e9d817fd7cd807c6fc2f6f6fe5c">TOKEN_FALSE</a>},</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;  {<span class="stringliteral">&quot;for&quot;</span>,       3, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921aaca94097ec53cbcf93cdc0a493251040">TOKEN_FOR</a>},</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;  {<span class="stringliteral">&quot;foreign&quot;</span>,   7, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921af7597f04537d607509a57ce101c3a6de">TOKEN_FOREIGN</a>},</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;  {<span class="stringliteral">&quot;if&quot;</span>,        2, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a6d39f93a351e0b853977018d48c47ca2">TOKEN_IF</a>},</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;  {<span class="stringliteral">&quot;import&quot;</span>,    6, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a00a4852749fa7e7e4675f7843ae16642">TOKEN_IMPORT</a>},</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;  {<span class="stringliteral">&quot;as&quot;</span>,        2, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921afb4035e70eacef7155e4c38833f93cbc">TOKEN_AS</a>},</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;  {<span class="stringliteral">&quot;in&quot;</span>,        2, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921aab6505c0fd8126a58622ad931de3ce86">TOKEN_IN</a>},</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;  {<span class="stringliteral">&quot;is&quot;</span>,        2, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a5ebaf8c36b5d84b1a717dfce0df266a8">TOKEN_IS</a>},</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;  {<span class="stringliteral">&quot;null&quot;</span>,      4, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921ae4def7ca080dbd4f6bcaac5a6889a37a">TOKEN_NULL</a>},</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;  {<span class="stringliteral">&quot;return&quot;</span>,    6, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921ae52dd0b54e9522dc1dce5f6294f26b08">TOKEN_RETURN</a>},</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;  {<span class="stringliteral">&quot;static&quot;</span>,    6, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921afca69b5a56f15fbc4af6ad4b99e35296">TOKEN_STATIC</a>},</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;  {<span class="stringliteral">&quot;super&quot;</span>,     5, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a1217e03cafd8282f9f0cf7709f6b04b1">TOKEN_SUPER</a>},</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;  {<span class="stringliteral">&quot;this&quot;</span>,      4, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921af902561d021c19798c960f45d013575b">TOKEN_THIS</a>},</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;  {<span class="stringliteral">&quot;true&quot;</span>,      4, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a2dd89e6192a4d3a7aee35c99a5f88075">TOKEN_TRUE</a>},</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;  {<span class="stringliteral">&quot;var&quot;</span>,       3, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a7a01d5885def4a924f815ab4afdb477b">TOKEN_VAR</a>},</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;  {<span class="stringliteral">&quot;while&quot;</span>,     5, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921acc13b68e6911dd0080248030ecb95cd6">TOKEN_WHILE</a>},</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;  {<a class="code" href="../../da/d2d/_stdio_stream_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,        0, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921aa130df27256cd45f5781fc74deeb50dc">TOKEN_EOF</a>} <span class="comment">// Sentinel to mark the end of the array.</span></div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;};</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160; </div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;<span class="comment">// Returns true if [c] is a valid (non-initial) identifier character.</span></div>
<div class="line"><a name="l00627"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#a4f4bae86546f2e4c8c4854d69a9b4636">  627</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a4f4bae86546f2e4c8c4854d69a9b4636">isName</a>(<span class="keywordtype">char</span> c)</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;{</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;  <span class="keywordflow">return</span> (c &gt;= <span class="charliteral">&#39;a&#39;</span> &amp;&amp; c &lt;= <span class="charliteral">&#39;z&#39;</span>) || (c &gt;= <span class="charliteral">&#39;A&#39;</span> &amp;&amp; c &lt;= <span class="charliteral">&#39;Z&#39;</span>) || c == <span class="charliteral">&#39;_&#39;</span>;</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;}</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160; </div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;<span class="comment">// Returns true if [c] is a digit.</span></div>
<div class="line"><a name="l00633"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#a1044bcfbcf0d32964730d3af27f4b45d">  633</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a1044bcfbcf0d32964730d3af27f4b45d">isDigit</a>(<span class="keywordtype">char</span> c)</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;{</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;  <span class="keywordflow">return</span> c &gt;= <span class="charliteral">&#39;0&#39;</span> &amp;&amp; c &lt;= <span class="charliteral">&#39;9&#39;</span>;</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;}</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160; </div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;<span class="comment">// Returns the current character the parser is sitting on.</span></div>
<div class="line"><a name="l00639"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#a3b5f12d504fe199f09e2651235c398a5">  639</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">char</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a3b5f12d504fe199f09e2651235c398a5">peekChar</a>(Parser* parser)</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;{</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;  <span class="keywordflow">return</span> *parser-&gt;currentChar;</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;}</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160; </div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;<span class="comment">// Returns the character after the current character.</span></div>
<div class="line"><a name="l00645"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#ac712f9fee52f55578ff47f1d4d40f27f">  645</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">char</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#ac712f9fee52f55578ff47f1d4d40f27f">peekNextChar</a>(Parser* parser)</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;{</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;  <span class="comment">// If we&#39;re at the end of the source, don&#39;t read past it.</span></div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d4/de2/wren__compiler_8c.html#a3b5f12d504fe199f09e2651235c398a5">peekChar</a>(parser) == <span class="charliteral">&#39;\0&#39;</span>) <span class="keywordflow">return</span> <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;  <span class="keywordflow">return</span> *(parser-&gt;currentChar + 1);</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;}</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160; </div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;<span class="comment">// Advances the parser forward one character.</span></div>
<div class="line"><a name="l00653"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#a4b86346dfdb1db3a38675c77b11be8d3">  653</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">char</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a4b86346dfdb1db3a38675c77b11be8d3">nextChar</a>(Parser* parser)</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;{</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;  <span class="keywordtype">char</span> c = <a class="code" href="../../d4/de2/wren__compiler_8c.html#a3b5f12d504fe199f09e2651235c398a5">peekChar</a>(parser);</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;  parser-&gt;currentChar++;</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;  <span class="keywordflow">if</span> (c == <span class="charliteral">&#39;\n&#39;</span>) parser-&gt;currentLine++;</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;  <span class="keywordflow">return</span> c;</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;}</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160; </div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;<span class="comment">// If the current character is [c], consumes it and returns `true`.</span></div>
<div class="line"><a name="l00662"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#af8117cefc422a62d8544bc726143a24a">  662</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#af8117cefc422a62d8544bc726143a24a">matchChar</a>(Parser* parser, <span class="keywordtype">char</span> c)</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;{</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d4/de2/wren__compiler_8c.html#a3b5f12d504fe199f09e2651235c398a5">peekChar</a>(parser) != c) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a4b86346dfdb1db3a38675c77b11be8d3">nextChar</a>(parser);</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;}</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160; </div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;<span class="comment">// Sets the parser&#39;s current token to the given [type] and current character</span></div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;<span class="comment">// range.</span></div>
<div class="line"><a name="l00671"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#ad5bbc381038389282731d29e3f95971f">  671</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#ad5bbc381038389282731d29e3f95971f">makeToken</a>(Parser* parser, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921">TokenType</a> type)</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;{</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;  parser-&gt;next.type = type;</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;  parser-&gt;next.start = parser-&gt;tokenStart;</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;  parser-&gt;next.length = (int)(parser-&gt;currentChar - parser-&gt;tokenStart);</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;  parser-&gt;next.line = parser-&gt;currentLine;</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;  </div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;  <span class="comment">// Make line tokens appear on the line containing the &quot;\n&quot;.</span></div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;  <span class="keywordflow">if</span> (type == <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921aa3667833295e7097424957cf261b2527">TOKEN_LINE</a>) parser-&gt;next.line--;</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;}</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160; </div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;<span class="comment">// If the current character is [c], then consumes it and makes a token of type</span></div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;<span class="comment">// [two]. Otherwise makes a token of type [one].</span></div>
<div class="line"><a name="l00684"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#a1923996c19f9f549a909d1e2981971f1">  684</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a1923996c19f9f549a909d1e2981971f1">twoCharToken</a>(Parser* parser, <span class="keywordtype">char</span> c, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921">TokenType</a> two, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921">TokenType</a> one)</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;{</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#ad5bbc381038389282731d29e3f95971f">makeToken</a>(parser, <a class="code" href="../../d4/de2/wren__compiler_8c.html#af8117cefc422a62d8544bc726143a24a">matchChar</a>(parser, c) ? two : one);</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;}</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160; </div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;<span class="comment">// Skips the rest of the current line.</span></div>
<div class="line"><a name="l00690"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#a8d72014585e50329e9923ed2f9fdccad">  690</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a8d72014585e50329e9923ed2f9fdccad">skipLineComment</a>(Parser* parser)</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;{</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;  <span class="keywordflow">while</span> (<a class="code" href="../../d4/de2/wren__compiler_8c.html#a3b5f12d504fe199f09e2651235c398a5">peekChar</a>(parser) != <span class="charliteral">&#39;\n&#39;</span> &amp;&amp; <a class="code" href="../../d4/de2/wren__compiler_8c.html#a3b5f12d504fe199f09e2651235c398a5">peekChar</a>(parser) != <span class="charliteral">&#39;\0&#39;</span>)</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;  {</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#a4b86346dfdb1db3a38675c77b11be8d3">nextChar</a>(parser);</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;  }</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;}</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160; </div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;<span class="comment">// Skips the rest of a block comment.</span></div>
<div class="line"><a name="l00699"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#a65889c0069858f7d0d6a459470a69c37">  699</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a65889c0069858f7d0d6a459470a69c37">skipBlockComment</a>(Parser* parser)</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;{</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;  <span class="keywordtype">int</span> nesting = 1;</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;  <span class="keywordflow">while</span> (nesting &gt; 0)</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;  {</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d4/de2/wren__compiler_8c.html#a3b5f12d504fe199f09e2651235c398a5">peekChar</a>(parser) == <span class="charliteral">&#39;\0&#39;</span>)</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;    {</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;      <a class="code" href="../../d4/de2/wren__compiler_8c.html#a2c404ef1792908a05d45d110401e9443">lexError</a>(parser, <span class="stringliteral">&quot;Unterminated block comment.&quot;</span>);</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;    }</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160; </div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d4/de2/wren__compiler_8c.html#a3b5f12d504fe199f09e2651235c398a5">peekChar</a>(parser) == <span class="charliteral">&#39;/&#39;</span> &amp;&amp; <a class="code" href="../../d4/de2/wren__compiler_8c.html#ac712f9fee52f55578ff47f1d4d40f27f">peekNextChar</a>(parser) == <span class="charliteral">&#39;*&#39;</span>)</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;    {</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;      <a class="code" href="../../d4/de2/wren__compiler_8c.html#a4b86346dfdb1db3a38675c77b11be8d3">nextChar</a>(parser);</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;      <a class="code" href="../../d4/de2/wren__compiler_8c.html#a4b86346dfdb1db3a38675c77b11be8d3">nextChar</a>(parser);</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;      nesting++;</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;    }</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160; </div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d4/de2/wren__compiler_8c.html#a3b5f12d504fe199f09e2651235c398a5">peekChar</a>(parser) == <span class="charliteral">&#39;*&#39;</span> &amp;&amp; <a class="code" href="../../d4/de2/wren__compiler_8c.html#ac712f9fee52f55578ff47f1d4d40f27f">peekNextChar</a>(parser) == <span class="charliteral">&#39;/&#39;</span>)</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;    {</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;      <a class="code" href="../../d4/de2/wren__compiler_8c.html#a4b86346dfdb1db3a38675c77b11be8d3">nextChar</a>(parser);</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;      <a class="code" href="../../d4/de2/wren__compiler_8c.html#a4b86346dfdb1db3a38675c77b11be8d3">nextChar</a>(parser);</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;      nesting--;</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;    }</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160; </div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;    <span class="comment">// Regular comment character.</span></div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#a4b86346dfdb1db3a38675c77b11be8d3">nextChar</a>(parser);</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;  }</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;}</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160; </div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;<span class="comment">// Reads the next character, which should be a hex digit (0-9, a-f, or A-F) and</span></div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;<span class="comment">// returns its numeric value. If the character isn&#39;t a hex digit, returns -1.</span></div>
<div class="line"><a name="l00733"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#a3b31922ca0cec992bd4f6f6883d5eb4c">  733</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a3b31922ca0cec992bd4f6f6883d5eb4c">readHexDigit</a>(Parser* parser)</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;{</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;  <span class="keywordtype">char</span> c = <a class="code" href="../../d4/de2/wren__compiler_8c.html#a4b86346dfdb1db3a38675c77b11be8d3">nextChar</a>(parser);</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;  <span class="keywordflow">if</span> (c &gt;= <span class="charliteral">&#39;0&#39;</span> &amp;&amp; c &lt;= <span class="charliteral">&#39;9&#39;</span>) <span class="keywordflow">return</span> c - <span class="charliteral">&#39;0&#39;</span>;</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;  <span class="keywordflow">if</span> (c &gt;= <span class="charliteral">&#39;a&#39;</span> &amp;&amp; c &lt;= <span class="charliteral">&#39;f&#39;</span>) <span class="keywordflow">return</span> c - <span class="charliteral">&#39;a&#39;</span> + 10;</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;  <span class="keywordflow">if</span> (c &gt;= <span class="charliteral">&#39;A&#39;</span> &amp;&amp; c &lt;= <span class="charliteral">&#39;F&#39;</span>) <span class="keywordflow">return</span> c - <span class="charliteral">&#39;A&#39;</span> + 10;</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160; </div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;  <span class="comment">// Don&#39;t consume it if it isn&#39;t expected. Keeps us from reading past the end</span></div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;  <span class="comment">// of an unterminated string.</span></div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;  parser-&gt;currentChar--;</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;  <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;}</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160; </div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;<span class="comment">// Parses the numeric value of the current token.</span></div>
<div class="line"><a name="l00747"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#ac0ffb0aaacc8800a0580e625000e333a">  747</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#ac0ffb0aaacc8800a0580e625000e333a">makeNumber</a>(Parser* parser, <span class="keywordtype">bool</span> isHex)</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;{</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;  errno = 0;</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160; </div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;  <span class="keywordflow">if</span> (isHex)</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;  {</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;    parser-&gt;next.value = <a class="code" href="../../d2/d0a/wren__value_8h.html#a9ace511b01bc4d6263defc40aae2d7bf">NUM_VAL</a>((<span class="keywordtype">double</span>)strtoll(parser-&gt;tokenStart, <a class="code" href="../../da/d2d/_stdio_stream_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 16));</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;  }</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;  {</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;    parser-&gt;next.value = <a class="code" href="../../d2/d0a/wren__value_8h.html#a9ace511b01bc4d6263defc40aae2d7bf">NUM_VAL</a>(strtod(parser-&gt;tokenStart, <a class="code" href="../../da/d2d/_stdio_stream_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>));</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;  }</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;  </div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;  <span class="keywordflow">if</span> (errno == ERANGE)</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;  {</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#a2c404ef1792908a05d45d110401e9443">lexError</a>(parser, <span class="stringliteral">&quot;Number literal was too large (%d).&quot;</span>, <span class="keyword">sizeof</span>(<span class="keywordtype">long</span> <span class="keywordtype">int</span>));</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;    parser-&gt;next.value = <a class="code" href="../../d2/d0a/wren__value_8h.html#a9ace511b01bc4d6263defc40aae2d7bf">NUM_VAL</a>(0);</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;  }</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;  </div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;  <span class="comment">// We don&#39;t check that the entire token is consumed after calling strtoll()</span></div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;  <span class="comment">// or strtod() because we&#39;ve already scanned it ourselves and know it&#39;s valid.</span></div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160; </div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#ad5bbc381038389282731d29e3f95971f">makeToken</a>(parser, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921ab2af03662d780038284bc9c09e11c452">TOKEN_NUMBER</a>);</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;}</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160; </div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;<span class="comment">// Finishes lexing a hexadecimal number literal.</span></div>
<div class="line"><a name="l00773"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#ac5855f1df10bbda532ef62084fda7df4">  773</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#ac5855f1df10bbda532ef62084fda7df4">readHexNumber</a>(Parser* parser)</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;{</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;  <span class="comment">// Skip past the `x` used to denote a hexadecimal literal.</span></div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a4b86346dfdb1db3a38675c77b11be8d3">nextChar</a>(parser);</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160; </div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;  <span class="comment">// Iterate over all the valid hexadecimal digits found.</span></div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;  <span class="keywordflow">while</span> (<a class="code" href="../../d4/de2/wren__compiler_8c.html#a3b31922ca0cec992bd4f6f6883d5eb4c">readHexDigit</a>(parser) != -1) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160; </div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#ac0ffb0aaacc8800a0580e625000e333a">makeNumber</a>(parser, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;}</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160; </div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;<span class="comment">// Finishes lexing a number literal.</span></div>
<div class="line"><a name="l00785"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#abcdd139278dedb26f772b0b373cdb7bf">  785</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#abcdd139278dedb26f772b0b373cdb7bf">readNumber</a>(Parser* parser)</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;{</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;  <span class="keywordflow">while</span> (<a class="code" href="../../d4/de2/wren__compiler_8c.html#a1044bcfbcf0d32964730d3af27f4b45d">isDigit</a>(<a class="code" href="../../d4/de2/wren__compiler_8c.html#a3b5f12d504fe199f09e2651235c398a5">peekChar</a>(parser))) <a class="code" href="../../d4/de2/wren__compiler_8c.html#a4b86346dfdb1db3a38675c77b11be8d3">nextChar</a>(parser);</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160; </div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;  <span class="comment">// See if it has a floating point. Make sure there is a digit after the &quot;.&quot;</span></div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;  <span class="comment">// so we don&#39;t get confused by method calls on number literals.</span></div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d4/de2/wren__compiler_8c.html#a3b5f12d504fe199f09e2651235c398a5">peekChar</a>(parser) == <span class="charliteral">&#39;.&#39;</span> &amp;&amp; <a class="code" href="../../d4/de2/wren__compiler_8c.html#a1044bcfbcf0d32964730d3af27f4b45d">isDigit</a>(<a class="code" href="../../d4/de2/wren__compiler_8c.html#ac712f9fee52f55578ff47f1d4d40f27f">peekNextChar</a>(parser)))</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;  {</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#a4b86346dfdb1db3a38675c77b11be8d3">nextChar</a>(parser);</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;    <span class="keywordflow">while</span> (<a class="code" href="../../d4/de2/wren__compiler_8c.html#a1044bcfbcf0d32964730d3af27f4b45d">isDigit</a>(<a class="code" href="../../d4/de2/wren__compiler_8c.html#a3b5f12d504fe199f09e2651235c398a5">peekChar</a>(parser))) <a class="code" href="../../d4/de2/wren__compiler_8c.html#a4b86346dfdb1db3a38675c77b11be8d3">nextChar</a>(parser);</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;  }</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160; </div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;  <span class="comment">// See if the number is in scientific notation.</span></div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d4/de2/wren__compiler_8c.html#af8117cefc422a62d8544bc726143a24a">matchChar</a>(parser, <span class="charliteral">&#39;e&#39;</span>) || <a class="code" href="../../d4/de2/wren__compiler_8c.html#af8117cefc422a62d8544bc726143a24a">matchChar</a>(parser, <span class="charliteral">&#39;E&#39;</span>))</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;  {</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;    <span class="comment">// Allow a single positive/negative exponent symbol.</span></div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="../../d4/de2/wren__compiler_8c.html#af8117cefc422a62d8544bc726143a24a">matchChar</a>(parser, <span class="charliteral">&#39;+&#39;</span>))</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;    {</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;      <a class="code" href="../../d4/de2/wren__compiler_8c.html#af8117cefc422a62d8544bc726143a24a">matchChar</a>(parser, <span class="charliteral">&#39;-&#39;</span>);</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;    }</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160; </div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d4/de2/wren__compiler_8c.html#a1044bcfbcf0d32964730d3af27f4b45d">isDigit</a>(<a class="code" href="../../d4/de2/wren__compiler_8c.html#a3b5f12d504fe199f09e2651235c398a5">peekChar</a>(parser)))</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;    {</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;      <a class="code" href="../../d4/de2/wren__compiler_8c.html#a2c404ef1792908a05d45d110401e9443">lexError</a>(parser, <span class="stringliteral">&quot;Unterminated scientific notation.&quot;</span>);</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;    }</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160; </div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;    <span class="keywordflow">while</span> (<a class="code" href="../../d4/de2/wren__compiler_8c.html#a1044bcfbcf0d32964730d3af27f4b45d">isDigit</a>(<a class="code" href="../../d4/de2/wren__compiler_8c.html#a3b5f12d504fe199f09e2651235c398a5">peekChar</a>(parser))) <a class="code" href="../../d4/de2/wren__compiler_8c.html#a4b86346dfdb1db3a38675c77b11be8d3">nextChar</a>(parser);</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;  }</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160; </div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#ac0ffb0aaacc8800a0580e625000e333a">makeNumber</a>(parser, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;}</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160; </div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;<span class="comment">// Finishes lexing an identifier. Handles reserved words.</span></div>
<div class="line"><a name="l00818"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#aaf25e0c94fad40c04caf138b3f838484">  818</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#aaf25e0c94fad40c04caf138b3f838484">readName</a>(Parser* parser, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921">TokenType</a> type, <span class="keywordtype">char</span> firstChar)</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;{</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;  ByteBuffer string;</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;  wrenByteBufferInit(&amp;<span class="keywordtype">string</span>);</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;  wrenByteBufferWrite(parser-&gt;vm, &amp;<span class="keywordtype">string</span>, firstChar);</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160; </div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;  <span class="keywordflow">while</span> (<a class="code" href="../../d4/de2/wren__compiler_8c.html#a4f4bae86546f2e4c8c4854d69a9b4636">isName</a>(<a class="code" href="../../d4/de2/wren__compiler_8c.html#a3b5f12d504fe199f09e2651235c398a5">peekChar</a>(parser)) || <a class="code" href="../../d4/de2/wren__compiler_8c.html#a1044bcfbcf0d32964730d3af27f4b45d">isDigit</a>(<a class="code" href="../../d4/de2/wren__compiler_8c.html#a3b5f12d504fe199f09e2651235c398a5">peekChar</a>(parser)))</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;  {</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;    <span class="keywordtype">char</span> c = <a class="code" href="../../d4/de2/wren__compiler_8c.html#a4b86346dfdb1db3a38675c77b11be8d3">nextChar</a>(parser);</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;    wrenByteBufferWrite(parser-&gt;vm, &amp;<span class="keywordtype">string</span>, c);</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;  }</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160; </div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;  <span class="comment">// Update the type if it&#39;s a keyword.</span></div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;  <span class="keywordtype">size_t</span> length = parser-&gt;currentChar - parser-&gt;tokenStart;</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; <a class="code" href="../../d4/de2/wren__compiler_8c.html#a959905d4b19d39ff14a74ff3d941c287">keywords</a>[i].identifier != <a class="code" href="../../da/d2d/_stdio_stream_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>; i++)</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;  {</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;    <span class="keywordflow">if</span> (length == <a class="code" href="../../d4/de2/wren__compiler_8c.html#a959905d4b19d39ff14a74ff3d941c287">keywords</a>[i].length &amp;&amp;</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;        memcmp(parser-&gt;tokenStart, <a class="code" href="../../d4/de2/wren__compiler_8c.html#a959905d4b19d39ff14a74ff3d941c287">keywords</a>[i].identifier, length) == 0)</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;    {</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;      type = <a class="code" href="../../d4/de2/wren__compiler_8c.html#a959905d4b19d39ff14a74ff3d941c287">keywords</a>[i].tokenType;</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;    }</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;  }</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;  </div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;  parser-&gt;next.value = <a class="code" href="../../da/dbe/wren__value_8c.html#a6f59ebcbdfd6eb24569b4d50cf85052b">wrenNewStringLength</a>(parser-&gt;vm,</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;                                            (<span class="keywordtype">char</span>*)<span class="keywordtype">string</span>.data, <span class="keywordtype">string</span>.count);</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160; </div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;  wrenByteBufferClear(parser-&gt;vm, &amp;<span class="keywordtype">string</span>);</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#ad5bbc381038389282731d29e3f95971f">makeToken</a>(parser, type);</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;}</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160; </div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;<span class="comment">// Reads [digits] hex digits in a string literal and returns their number value.</span></div>
<div class="line"><a name="l00850"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#a57cdd5f6031d050f5075bd276bc06c95">  850</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a57cdd5f6031d050f5075bd276bc06c95">readHexEscape</a>(Parser* parser, <span class="keywordtype">int</span> digits, <span class="keyword">const</span> <span class="keywordtype">char</span>* description)</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;{</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;  <span class="keywordtype">int</span> value = 0;</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; digits; i++)</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;  {</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d4/de2/wren__compiler_8c.html#a3b5f12d504fe199f09e2651235c398a5">peekChar</a>(parser) == <span class="charliteral">&#39;&quot;&#39;</span> || <a class="code" href="../../d4/de2/wren__compiler_8c.html#a3b5f12d504fe199f09e2651235c398a5">peekChar</a>(parser) == <span class="charliteral">&#39;\0&#39;</span>)</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;    {</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;      <a class="code" href="../../d4/de2/wren__compiler_8c.html#a2c404ef1792908a05d45d110401e9443">lexError</a>(parser, <span class="stringliteral">&quot;Incomplete %s escape sequence.&quot;</span>, description);</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160; </div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;      <span class="comment">// Don&#39;t consume it if it isn&#39;t expected. Keeps us from reading past the</span></div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;      <span class="comment">// end of an unterminated string.</span></div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;      parser-&gt;currentChar--;</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;    }</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160; </div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;    <span class="keywordtype">int</span> digit = <a class="code" href="../../d4/de2/wren__compiler_8c.html#a3b31922ca0cec992bd4f6f6883d5eb4c">readHexDigit</a>(parser);</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;    <span class="keywordflow">if</span> (digit == -1)</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;    {</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;      <a class="code" href="../../d4/de2/wren__compiler_8c.html#a2c404ef1792908a05d45d110401e9443">lexError</a>(parser, <span class="stringliteral">&quot;Invalid %s escape sequence.&quot;</span>, description);</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;    }</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160; </div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;    value = (value * 16) | digit;</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;  }</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160; </div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;  <span class="keywordflow">return</span> value;</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;}</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160; </div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;<span class="comment">// Reads a hex digit Unicode escape sequence in a string literal.</span></div>
<div class="line"><a name="l00879"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#a59c9947ace67700c2ba14902b13927e8">  879</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a59c9947ace67700c2ba14902b13927e8">readUnicodeEscape</a>(Parser* parser, ByteBuffer* <span class="keywordtype">string</span>, <span class="keywordtype">int</span> length)</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;{</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;  <span class="keywordtype">int</span> value = <a class="code" href="../../d4/de2/wren__compiler_8c.html#a57cdd5f6031d050f5075bd276bc06c95">readHexEscape</a>(parser, length, <span class="stringliteral">&quot;Unicode&quot;</span>);</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160; </div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;  <span class="comment">// Grow the buffer enough for the encoded result.</span></div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;  <span class="keywordtype">int</span> numBytes = <a class="code" href="../../de/d0d/wren__utils_8c.html#a85fac2a3e202a3273d4a1616fa77a2af">wrenUtf8EncodeNumBytes</a>(value);</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;  <span class="keywordflow">if</span> (numBytes != 0)</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;  {</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;    wrenByteBufferFill(parser-&gt;vm, <span class="keywordtype">string</span>, 0, numBytes);</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;    <a class="code" href="../../de/d0d/wren__utils_8c.html#a13c5ea2d24f15c1cf197e685b444401d">wrenUtf8Encode</a>(value, string-&gt;data + string-&gt;count - numBytes);</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;  }</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;}</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160; </div>
<div class="line"><a name="l00892"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#a5c8500d7d0bb3ab4624b4053b3213d86">  892</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a5c8500d7d0bb3ab4624b4053b3213d86">readRawString</a>(Parser* parser)</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;{</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;  ByteBuffer string;</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;  wrenByteBufferInit(&amp;<span class="keywordtype">string</span>);</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921">TokenType</a> type = <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921afcaa8f23ed1d21aa5779451ed3c243ef">TOKEN_STRING</a>;</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160; </div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;  <span class="comment">//consume the second and third &quot;</span></div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a4b86346dfdb1db3a38675c77b11be8d3">nextChar</a>(parser);</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a4b86346dfdb1db3a38675c77b11be8d3">nextChar</a>(parser);</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160; </div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;  <span class="keywordtype">int</span> skipStart = 0;</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;  <span class="keywordtype">int</span> firstNewline = -1;</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160; </div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;  <span class="keywordtype">int</span> skipEnd = -1;</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;  <span class="keywordtype">int</span> lastNewline = -1;</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160; </div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;  <span class="keywordflow">for</span> (;;)</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;  {</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;    <span class="keywordtype">char</span> c = <a class="code" href="../../d4/de2/wren__compiler_8c.html#a4b86346dfdb1db3a38675c77b11be8d3">nextChar</a>(parser);</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;    <span class="keywordtype">char</span> c1 = <a class="code" href="../../d4/de2/wren__compiler_8c.html#a3b5f12d504fe199f09e2651235c398a5">peekChar</a>(parser);</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;    <span class="keywordtype">char</span> c2 = <a class="code" href="../../d4/de2/wren__compiler_8c.html#ac712f9fee52f55578ff47f1d4d40f27f">peekNextChar</a>(parser);</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160; </div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;    <span class="keywordflow">if</span> (c == <span class="charliteral">&#39;\r&#39;</span>) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160; </div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;    <span class="keywordflow">if</span> (c == <span class="charliteral">&#39;\n&#39;</span>) {</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;      lastNewline = <span class="keywordtype">string</span>.count;</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;      skipEnd = lastNewline;</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;      firstNewline = firstNewline == -1 ? <span class="keywordtype">string</span>.count : firstNewline;</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;    }</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160; </div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;    <span class="keywordflow">if</span> (c == <span class="charliteral">&#39;&quot;&#39;</span> &amp;&amp; c1 == <span class="charliteral">&#39;&quot;&#39;</span> &amp;&amp; c2 == <span class="charliteral">&#39;&quot;&#39;</span>) <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;    </div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;    <span class="keywordtype">bool</span> isWhitespace = c == <span class="charliteral">&#39; &#39;</span> || c == <span class="charliteral">&#39;\t&#39;</span>;</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;    skipEnd = c == <span class="charliteral">&#39;\n&#39;</span> || isWhitespace ? skipEnd : -1;</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160; </div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;    <span class="comment">// If we haven&#39;t seen a newline or other character yet, </span></div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;    <span class="comment">// and still seeing whitespace, count the characters </span></div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;    <span class="comment">// as skippable till we know otherwise</span></div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;    <span class="keywordtype">bool</span> skippable = skipStart != -1 &amp;&amp; isWhitespace &amp;&amp; firstNewline == -1;</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;    skipStart = skippable ? <span class="keywordtype">string</span>.count + 1 : skipStart;</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;    </div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;    <span class="comment">// We&#39;ve counted leading whitespace till we hit something else, </span></div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;    <span class="comment">// but it&#39;s not a newline, so we reset skipStart since we need these characters</span></div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;    <span class="keywordflow">if</span> (firstNewline == -1 &amp;&amp; !isWhitespace &amp;&amp; c != <span class="charliteral">&#39;\n&#39;</span>) skipStart = -1;</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160; </div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;    <span class="keywordflow">if</span> (c == <span class="charliteral">&#39;\0&#39;</span> || c1 == <span class="charliteral">&#39;\0&#39;</span> || c2 == <span class="charliteral">&#39;\0&#39;</span>)</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;    {</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;      <a class="code" href="../../d4/de2/wren__compiler_8c.html#a2c404ef1792908a05d45d110401e9443">lexError</a>(parser, <span class="stringliteral">&quot;Unterminated raw string.&quot;</span>);</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160; </div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;      <span class="comment">// Don&#39;t consume it if it isn&#39;t expected. Keeps us from reading past the</span></div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;      <span class="comment">// end of an unterminated string.</span></div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;      parser-&gt;currentChar--;</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;    }</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160; </div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;    wrenByteBufferWrite(parser-&gt;vm, &amp;<span class="keywordtype">string</span>, c);</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;  }</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160; </div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;  <span class="comment">//consume the second and third &quot;</span></div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a4b86346dfdb1db3a38675c77b11be8d3">nextChar</a>(parser);</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a4b86346dfdb1db3a38675c77b11be8d3">nextChar</a>(parser);</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160; </div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;  <span class="keywordtype">int</span> offset = 0;</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="../../d9/dfc/_sd_error_codes_8txt.html#a7e2759cf3ce335c21536207b75f30161">count</a> = <span class="keywordtype">string</span>.count;</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160; </div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;  <span class="keywordflow">if</span>(firstNewline != -1 &amp;&amp; skipStart == firstNewline) offset = firstNewline + 1;</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;  <span class="keywordflow">if</span>(lastNewline != -1 &amp;&amp; skipEnd == lastNewline) <a class="code" href="../../d9/dfc/_sd_error_codes_8txt.html#a7e2759cf3ce335c21536207b75f30161">count</a> = lastNewline;</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160; </div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;  <a class="code" href="../../d9/dfc/_sd_error_codes_8txt.html#a7e2759cf3ce335c21536207b75f30161">count</a> -= (offset &gt; <a class="code" href="../../d9/dfc/_sd_error_codes_8txt.html#a7e2759cf3ce335c21536207b75f30161">count</a>) ? <a class="code" href="../../d9/dfc/_sd_error_codes_8txt.html#a7e2759cf3ce335c21536207b75f30161">count</a> : offset;</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160; </div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;  parser-&gt;next.value = <a class="code" href="../../da/dbe/wren__value_8c.html#a6f59ebcbdfd6eb24569b4d50cf85052b">wrenNewStringLength</a>(parser-&gt;vm, </div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;                         ((<span class="keywordtype">char</span>*)<span class="keywordtype">string</span>.data) + offset, <a class="code" href="../../d9/dfc/_sd_error_codes_8txt.html#a7e2759cf3ce335c21536207b75f30161">count</a>);</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;  </div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;  wrenByteBufferClear(parser-&gt;vm, &amp;<span class="keywordtype">string</span>);</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#ad5bbc381038389282731d29e3f95971f">makeToken</a>(parser, type);</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;}</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160; </div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;<span class="comment">// Finishes lexing a string literal.</span></div>
<div class="line"><a name="l00970"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#a3cad8aafffed68be975e83a055ce1b2c">  970</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a3cad8aafffed68be975e83a055ce1b2c">readString</a>(Parser* parser)</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;{</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;  ByteBuffer string;</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921">TokenType</a> type = <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921afcaa8f23ed1d21aa5779451ed3c243ef">TOKEN_STRING</a>;</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;  wrenByteBufferInit(&amp;<span class="keywordtype">string</span>);</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;  </div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;  <span class="keywordflow">for</span> (;;)</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;  {</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;    <span class="keywordtype">char</span> c = <a class="code" href="../../d4/de2/wren__compiler_8c.html#a4b86346dfdb1db3a38675c77b11be8d3">nextChar</a>(parser);</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;    <span class="keywordflow">if</span> (c == <span class="charliteral">&#39;&quot;&#39;</span>) <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;    <span class="keywordflow">if</span> (c == <span class="charliteral">&#39;\r&#39;</span>) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160; </div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;    <span class="keywordflow">if</span> (c == <span class="charliteral">&#39;\0&#39;</span>)</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;    {</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;      <a class="code" href="../../d4/de2/wren__compiler_8c.html#a2c404ef1792908a05d45d110401e9443">lexError</a>(parser, <span class="stringliteral">&quot;Unterminated string.&quot;</span>);</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160; </div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;      <span class="comment">// Don&#39;t consume it if it isn&#39;t expected. Keeps us from reading past the</span></div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;      <span class="comment">// end of an unterminated string.</span></div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;      parser-&gt;currentChar--;</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;    }</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160; </div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;    <span class="keywordflow">if</span> (c == <span class="charliteral">&#39;%&#39;</span>)</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;    {</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;      <span class="keywordflow">if</span> (parser-&gt;numParens &lt; <a class="code" href="../../d4/de2/wren__compiler_8c.html#a3cb62dee3888b5a3edadbd01d13ac723">MAX_INTERPOLATION_NESTING</a>)</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;      {</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;        <span class="comment">// TODO: Allow format string.</span></div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d4/de2/wren__compiler_8c.html#a4b86346dfdb1db3a38675c77b11be8d3">nextChar</a>(parser) != <span class="charliteral">&#39;(&#39;</span>) <a class="code" href="../../d4/de2/wren__compiler_8c.html#a2c404ef1792908a05d45d110401e9443">lexError</a>(parser, <span class="stringliteral">&quot;Expect &#39;(&#39; after &#39;%%&#39;.&quot;</span>);</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;        </div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;        parser-&gt;parens[parser-&gt;numParens++] = 1;</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;        type = <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a6b3f6ac3cbe7a3bacd547075bd7212d4">TOKEN_INTERPOLATION</a>;</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;      }</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160; </div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;      <a class="code" href="../../d4/de2/wren__compiler_8c.html#a2c404ef1792908a05d45d110401e9443">lexError</a>(parser, <span class="stringliteral">&quot;Interpolation may only nest %d levels deep.&quot;</span>,</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;               <a class="code" href="../../d4/de2/wren__compiler_8c.html#a3cb62dee3888b5a3edadbd01d13ac723">MAX_INTERPOLATION_NESTING</a>);</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;    }</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;    </div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;    <span class="keywordflow">if</span> (c == <span class="charliteral">&#39;\\&#39;</span>)</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;    {</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;      <span class="keywordflow">switch</span> (<a class="code" href="../../d4/de2/wren__compiler_8c.html#a4b86346dfdb1db3a38675c77b11be8d3">nextChar</a>(parser))</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;      {</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;        <span class="keywordflow">case</span> <span class="charliteral">&#39;&quot;&#39;</span>:  wrenByteBufferWrite(parser-&gt;vm, &amp;<span class="keywordtype">string</span>, <span class="charliteral">&#39;&quot;&#39;</span>); <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;        <span class="keywordflow">case</span> <span class="charliteral">&#39;\\&#39;</span>: wrenByteBufferWrite(parser-&gt;vm, &amp;<span class="keywordtype">string</span>, <span class="charliteral">&#39;\\&#39;</span>); <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;        <span class="keywordflow">case</span> <span class="charliteral">&#39;%&#39;</span>:  wrenByteBufferWrite(parser-&gt;vm, &amp;<span class="keywordtype">string</span>, <span class="charliteral">&#39;%&#39;</span>); <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;        <span class="keywordflow">case</span> <span class="charliteral">&#39;0&#39;</span>:  wrenByteBufferWrite(parser-&gt;vm, &amp;<span class="keywordtype">string</span>, <span class="charliteral">&#39;\0&#39;</span>); <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;        <span class="keywordflow">case</span> <span class="charliteral">&#39;a&#39;</span>:  wrenByteBufferWrite(parser-&gt;vm, &amp;<span class="keywordtype">string</span>, <span class="charliteral">&#39;\a&#39;</span>); <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;        <span class="keywordflow">case</span> <span class="charliteral">&#39;b&#39;</span>:  wrenByteBufferWrite(parser-&gt;vm, &amp;<span class="keywordtype">string</span>, <span class="charliteral">&#39;\b&#39;</span>); <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;        <span class="keywordflow">case</span> <span class="charliteral">&#39;e&#39;</span>:  wrenByteBufferWrite(parser-&gt;vm, &amp;<span class="keywordtype">string</span>, <span class="stringliteral">&#39;\33&#39;</span>); <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;        <span class="keywordflow">case</span> <span class="charliteral">&#39;f&#39;</span>:  wrenByteBufferWrite(parser-&gt;vm, &amp;<span class="keywordtype">string</span>, <span class="charliteral">&#39;\f&#39;</span>); <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;        <span class="keywordflow">case</span> <span class="charliteral">&#39;n&#39;</span>:  wrenByteBufferWrite(parser-&gt;vm, &amp;<span class="keywordtype">string</span>, <span class="charliteral">&#39;\n&#39;</span>); <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;        <span class="keywordflow">case</span> <span class="charliteral">&#39;r&#39;</span>:  wrenByteBufferWrite(parser-&gt;vm, &amp;<span class="keywordtype">string</span>, <span class="charliteral">&#39;\r&#39;</span>); <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;        <span class="keywordflow">case</span> <span class="charliteral">&#39;t&#39;</span>:  wrenByteBufferWrite(parser-&gt;vm, &amp;<span class="keywordtype">string</span>, <span class="charliteral">&#39;\t&#39;</span>); <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;        <span class="keywordflow">case</span> <span class="charliteral">&#39;u&#39;</span>:  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a59c9947ace67700c2ba14902b13927e8">readUnicodeEscape</a>(parser, &amp;<span class="keywordtype">string</span>, 4); <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;        <span class="keywordflow">case</span> <span class="charliteral">&#39;U&#39;</span>:  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a59c9947ace67700c2ba14902b13927e8">readUnicodeEscape</a>(parser, &amp;<span class="keywordtype">string</span>, 8); <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;        <span class="keywordflow">case</span> <span class="charliteral">&#39;v&#39;</span>:  wrenByteBufferWrite(parser-&gt;vm, &amp;<span class="keywordtype">string</span>, <span class="charliteral">&#39;\v&#39;</span>); <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;        <span class="keywordflow">case</span> <span class="charliteral">&#39;x&#39;</span>:</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;          wrenByteBufferWrite(parser-&gt;vm, &amp;<span class="keywordtype">string</span>,</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;                              (uint8_t)<a class="code" href="../../d4/de2/wren__compiler_8c.html#a57cdd5f6031d050f5075bd276bc06c95">readHexEscape</a>(parser, 2, <span class="stringliteral">&quot;byte&quot;</span>));</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160; </div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;          <a class="code" href="../../d4/de2/wren__compiler_8c.html#a2c404ef1792908a05d45d110401e9443">lexError</a>(parser, <span class="stringliteral">&quot;Invalid escape character &#39;%c&#39;.&quot;</span>,</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;                   *(parser-&gt;currentChar - 1));</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;      }</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;    }</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;    {</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;      wrenByteBufferWrite(parser-&gt;vm, &amp;<span class="keywordtype">string</span>, c);</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;    }</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;  }</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160; </div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;  parser-&gt;next.value = <a class="code" href="../../da/dbe/wren__value_8c.html#a6f59ebcbdfd6eb24569b4d50cf85052b">wrenNewStringLength</a>(parser-&gt;vm,</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;                                              (<span class="keywordtype">char</span>*)<span class="keywordtype">string</span>.data, <span class="keywordtype">string</span>.count);</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;  </div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;  wrenByteBufferClear(parser-&gt;vm, &amp;<span class="keywordtype">string</span>);</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#ad5bbc381038389282731d29e3f95971f">makeToken</a>(parser, type);</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;}</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160; </div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;<span class="comment">// Lex the next token and store it in [parser.next].</span></div>
<div class="line"><a name="l01051"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#aff9308c9745d77724d06dbc7f1e7bd34"> 1051</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#aff9308c9745d77724d06dbc7f1e7bd34">nextToken</a>(Parser* parser)</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;{</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;  parser-&gt;previous = parser-&gt;current;</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;  parser-&gt;current = parser-&gt;next;</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160; </div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;  <span class="comment">// If we are out of tokens, don&#39;t try to tokenize any more. We *do* still</span></div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;  <span class="comment">// copy the TOKEN_EOF to previous so that code that expects it to be consumed</span></div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;  <span class="comment">// will still work.</span></div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;  <span class="keywordflow">if</span> (parser-&gt;next.type == <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921aa130df27256cd45f5781fc74deeb50dc">TOKEN_EOF</a>) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;  <span class="keywordflow">if</span> (parser-&gt;current.type == <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921aa130df27256cd45f5781fc74deeb50dc">TOKEN_EOF</a>) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;  </div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;  <span class="keywordflow">while</span> (<a class="code" href="../../d4/de2/wren__compiler_8c.html#a3b5f12d504fe199f09e2651235c398a5">peekChar</a>(parser) != <span class="charliteral">&#39;\0&#39;</span>)</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;  {</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;    parser-&gt;tokenStart = parser-&gt;currentChar;</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160; </div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;    <span class="keywordtype">char</span> c = <a class="code" href="../../d4/de2/wren__compiler_8c.html#a4b86346dfdb1db3a38675c77b11be8d3">nextChar</a>(parser);</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;    <span class="keywordflow">switch</span> (c)</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;    {</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;(&#39;</span>:</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;        <span class="comment">// If we are inside an interpolated expression, count the unmatched &quot;(&quot;.</span></div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;        <span class="keywordflow">if</span> (parser-&gt;numParens &gt; 0) parser-&gt;parens[parser-&gt;numParens - 1]++;</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;        <a class="code" href="../../d4/de2/wren__compiler_8c.html#ad5bbc381038389282731d29e3f95971f">makeToken</a>(parser, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921ab958e67632477fb20b223edfef5a4a3f">TOKEN_LEFT_PAREN</a>);</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;        </div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;)&#39;</span>:</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;        <span class="comment">// If we are inside an interpolated expression, count the &quot;)&quot;.</span></div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;        <span class="keywordflow">if</span> (parser-&gt;numParens &gt; 0 &amp;&amp;</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;            --parser-&gt;parens[parser-&gt;numParens - 1] == 0)</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;        {</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;          <span class="comment">// This is the final &quot;)&quot;, so the interpolation expression has ended.</span></div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;          <span class="comment">// This &quot;)&quot; now begins the next section of the template string.</span></div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;          parser-&gt;numParens--;</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;          <a class="code" href="../../d4/de2/wren__compiler_8c.html#a3cad8aafffed68be975e83a055ce1b2c">readString</a>(parser);</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;          <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;        }</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;        </div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;        <a class="code" href="../../d4/de2/wren__compiler_8c.html#ad5bbc381038389282731d29e3f95971f">makeToken</a>(parser, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a7db8f1fe352e6cf1ed6b880432b585d5">TOKEN_RIGHT_PAREN</a>);</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;        </div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;[&#39;</span>: <a class="code" href="../../d4/de2/wren__compiler_8c.html#ad5bbc381038389282731d29e3f95971f">makeToken</a>(parser, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a60e4bab14680522185007fe87240e707">TOKEN_LEFT_BRACKET</a>); <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;]&#39;</span>: <a class="code" href="../../d4/de2/wren__compiler_8c.html#ad5bbc381038389282731d29e3f95971f">makeToken</a>(parser, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921aa42fbee15a56484e7cc6daaaa552107a">TOKEN_RIGHT_BRACKET</a>); <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;{&#39;</span>: <a class="code" href="../../d4/de2/wren__compiler_8c.html#ad5bbc381038389282731d29e3f95971f">makeToken</a>(parser, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921abb75564bfe995225a6d177446540c352">TOKEN_LEFT_BRACE</a>); <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;}&#39;</span>: <a class="code" href="../../d4/de2/wren__compiler_8c.html#ad5bbc381038389282731d29e3f95971f">makeToken</a>(parser, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a1c897c05771e2ebb01729d415d99308c">TOKEN_RIGHT_BRACE</a>); <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;:&#39;</span>: <a class="code" href="../../d4/de2/wren__compiler_8c.html#ad5bbc381038389282731d29e3f95971f">makeToken</a>(parser, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a92a35ac6329421e77882bf3739a75e47">TOKEN_COLON</a>); <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;,&#39;</span>: <a class="code" href="../../d4/de2/wren__compiler_8c.html#ad5bbc381038389282731d29e3f95971f">makeToken</a>(parser, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a8d265e17914bc733c8b9a880dd097a9e">TOKEN_COMMA</a>); <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;*&#39;</span>: <a class="code" href="../../d4/de2/wren__compiler_8c.html#ad5bbc381038389282731d29e3f95971f">makeToken</a>(parser, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a1109083cbeff0c33b619eb9b3177940a">TOKEN_STAR</a>); <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;%&#39;</span>: <a class="code" href="../../d4/de2/wren__compiler_8c.html#ad5bbc381038389282731d29e3f95971f">makeToken</a>(parser, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a7ffecbddda5a17a256351520595ff925">TOKEN_PERCENT</a>); <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;#&#39;</span>: {</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;        <span class="comment">// Ignore shebang on the first line.</span></div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;        <span class="keywordflow">if</span> (parser-&gt;currentLine == 1 &amp;&amp; <a class="code" href="../../d4/de2/wren__compiler_8c.html#a3b5f12d504fe199f09e2651235c398a5">peekChar</a>(parser) == <span class="charliteral">&#39;!&#39;</span> &amp;&amp; <a class="code" href="../../d4/de2/wren__compiler_8c.html#ac712f9fee52f55578ff47f1d4d40f27f">peekNextChar</a>(parser) == <span class="charliteral">&#39;/&#39;</span>)</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;        {</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;          <a class="code" href="../../d4/de2/wren__compiler_8c.html#a8d72014585e50329e9923ed2f9fdccad">skipLineComment</a>(parser);</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;        }</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;        <span class="comment">// Otherwise we treat it as a token</span></div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;        <a class="code" href="../../d4/de2/wren__compiler_8c.html#ad5bbc381038389282731d29e3f95971f">makeToken</a>(parser, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a221bd5c5f9c87bfb8bd33243a49b2f54">TOKEN_HASH</a>); </div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;      }</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;^&#39;</span>: <a class="code" href="../../d4/de2/wren__compiler_8c.html#ad5bbc381038389282731d29e3f95971f">makeToken</a>(parser, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a5ad99434caa3395bb10d41afcb7305f8">TOKEN_CARET</a>); <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;+&#39;</span>: <a class="code" href="../../d4/de2/wren__compiler_8c.html#ad5bbc381038389282731d29e3f95971f">makeToken</a>(parser, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a7f0601b40fea37f0d4598b0a61f828f2">TOKEN_PLUS</a>); <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;-&#39;</span>: <a class="code" href="../../d4/de2/wren__compiler_8c.html#ad5bbc381038389282731d29e3f95971f">makeToken</a>(parser, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a160171b541dcf45a3bd712598963ea39">TOKEN_MINUS</a>); <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;~&#39;</span>: <a class="code" href="../../d4/de2/wren__compiler_8c.html#ad5bbc381038389282731d29e3f95971f">makeToken</a>(parser, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921aeb355a0f42c7b11efb9be89700b1d502">TOKEN_TILDE</a>); <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;?&#39;</span>: <a class="code" href="../../d4/de2/wren__compiler_8c.html#ad5bbc381038389282731d29e3f95971f">makeToken</a>(parser, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921ae9d8c03a94ac5b659addd3bd0a69072c">TOKEN_QUESTION</a>); <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;        </div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;|&#39;</span>: <a class="code" href="../../d4/de2/wren__compiler_8c.html#a1923996c19f9f549a909d1e2981971f1">twoCharToken</a>(parser, <span class="charliteral">&#39;|&#39;</span>, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a7f752de15cbf51e0933afbddd6ad8d82">TOKEN_PIPEPIPE</a>, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a93000ce4e0f00f6f294a98192f705910">TOKEN_PIPE</a>); <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;&amp;&#39;</span>: <a class="code" href="../../d4/de2/wren__compiler_8c.html#a1923996c19f9f549a909d1e2981971f1">twoCharToken</a>(parser, <span class="charliteral">&#39;&amp;&#39;</span>, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921abfb5ad8d3eb3f9245ce9f0beede5b5aa">TOKEN_AMPAMP</a>, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a16431c3218c17195ca372d1a9ac55c09">TOKEN_AMP</a>); <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;=&#39;</span>: <a class="code" href="../../d4/de2/wren__compiler_8c.html#a1923996c19f9f549a909d1e2981971f1">twoCharToken</a>(parser, <span class="charliteral">&#39;=&#39;</span>, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921ab2be2b4740bdcc2c060f7e31d128567e">TOKEN_EQEQ</a>, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921aeba19c29eb600289d1e973bf335139fe">TOKEN_EQ</a>); <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;!&#39;</span>: <a class="code" href="../../d4/de2/wren__compiler_8c.html#a1923996c19f9f549a909d1e2981971f1">twoCharToken</a>(parser, <span class="charliteral">&#39;=&#39;</span>, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921adb8474a4aab7093a6fa4f4e2f8ed4d35">TOKEN_BANGEQ</a>, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a48b74bd21671b5a4a713dd8ddf57c917">TOKEN_BANG</a>); <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;        </div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;.&#39;</span>:</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d4/de2/wren__compiler_8c.html#af8117cefc422a62d8544bc726143a24a">matchChar</a>(parser, <span class="charliteral">&#39;.&#39;</span>))</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;        {</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;          <a class="code" href="../../d4/de2/wren__compiler_8c.html#a1923996c19f9f549a909d1e2981971f1">twoCharToken</a>(parser, <span class="charliteral">&#39;.&#39;</span>, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921aec8baaf1a4cefc29ecae2da1ae2aa557">TOKEN_DOTDOTDOT</a>, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921afe0f79003a508c29b6f1312a28102a4c">TOKEN_DOTDOT</a>);</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;          <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;        }</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;        </div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;        <a class="code" href="../../d4/de2/wren__compiler_8c.html#ad5bbc381038389282731d29e3f95971f">makeToken</a>(parser, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921ab565ebfaaa53dcee6ddda201e270733e">TOKEN_DOT</a>);</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;        </div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;/&#39;</span>:</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d4/de2/wren__compiler_8c.html#af8117cefc422a62d8544bc726143a24a">matchChar</a>(parser, <span class="charliteral">&#39;/&#39;</span>))</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;        {</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;          <a class="code" href="../../d4/de2/wren__compiler_8c.html#a8d72014585e50329e9923ed2f9fdccad">skipLineComment</a>(parser);</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;        }</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160; </div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d4/de2/wren__compiler_8c.html#af8117cefc422a62d8544bc726143a24a">matchChar</a>(parser, <span class="charliteral">&#39;*&#39;</span>))</div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;        {</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;          <a class="code" href="../../d4/de2/wren__compiler_8c.html#a65889c0069858f7d0d6a459470a69c37">skipBlockComment</a>(parser);</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;        }</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160; </div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;        <a class="code" href="../../d4/de2/wren__compiler_8c.html#ad5bbc381038389282731d29e3f95971f">makeToken</a>(parser, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a7bb488da02f984b2c055687da13856e2">TOKEN_SLASH</a>);</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160; </div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;&lt;&#39;</span>:</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d4/de2/wren__compiler_8c.html#af8117cefc422a62d8544bc726143a24a">matchChar</a>(parser, <span class="charliteral">&#39;&lt;&#39;</span>))</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;        {</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;          <a class="code" href="../../d4/de2/wren__compiler_8c.html#ad5bbc381038389282731d29e3f95971f">makeToken</a>(parser, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a5c0ace9d9e5399a93f5603e145cc48d4">TOKEN_LTLT</a>);</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;        }</div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;        {</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;          <a class="code" href="../../d4/de2/wren__compiler_8c.html#a1923996c19f9f549a909d1e2981971f1">twoCharToken</a>(parser, <span class="charliteral">&#39;=&#39;</span>, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a92a2f9e402c2beb509fe0d879017eae4">TOKEN_LTEQ</a>, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921aa3aef76940413ed1a121e71fa1b82519">TOKEN_LT</a>);</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;        }</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160; </div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;&gt;&#39;</span>:</div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d4/de2/wren__compiler_8c.html#af8117cefc422a62d8544bc726143a24a">matchChar</a>(parser, <span class="charliteral">&#39;&gt;&#39;</span>))</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;        {</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;          <a class="code" href="../../d4/de2/wren__compiler_8c.html#ad5bbc381038389282731d29e3f95971f">makeToken</a>(parser, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921ac39dbc9a4fa9be2e062e38ff7a5764f4">TOKEN_GTGT</a>);</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;        }</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;        {</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;          <a class="code" href="../../d4/de2/wren__compiler_8c.html#a1923996c19f9f549a909d1e2981971f1">twoCharToken</a>(parser, <span class="charliteral">&#39;=&#39;</span>, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a9215d0c00f6467e5491576492e73bbec">TOKEN_GTEQ</a>, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921aa5d81c076968a75a50ec61593495d894">TOKEN_GT</a>);</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;        }</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160; </div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;\n&#39;</span>:</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;        <a class="code" href="../../d4/de2/wren__compiler_8c.html#ad5bbc381038389282731d29e3f95971f">makeToken</a>(parser, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921aa3667833295e7097424957cf261b2527">TOKEN_LINE</a>);</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160; </div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39; &#39;</span>:</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;\r&#39;</span>:</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;\t&#39;</span>:</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;        <span class="comment">// Skip forward until we run out of whitespace.</span></div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;        <span class="keywordflow">while</span> (<a class="code" href="../../d4/de2/wren__compiler_8c.html#a3b5f12d504fe199f09e2651235c398a5">peekChar</a>(parser) == <span class="charliteral">&#39; &#39;</span> ||</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;               <a class="code" href="../../d4/de2/wren__compiler_8c.html#a3b5f12d504fe199f09e2651235c398a5">peekChar</a>(parser) == <span class="charliteral">&#39;\r&#39;</span> ||</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;               <a class="code" href="../../d4/de2/wren__compiler_8c.html#a3b5f12d504fe199f09e2651235c398a5">peekChar</a>(parser) == <span class="charliteral">&#39;\t&#39;</span>)</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;        {</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;          <a class="code" href="../../d4/de2/wren__compiler_8c.html#a4b86346dfdb1db3a38675c77b11be8d3">nextChar</a>(parser);</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;        }</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160; </div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;&quot;&#39;</span>: {</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="../../d4/de2/wren__compiler_8c.html#a3b5f12d504fe199f09e2651235c398a5">peekChar</a>(parser) == <span class="charliteral">&#39;&quot;&#39;</span> &amp;&amp; <a class="code" href="../../d4/de2/wren__compiler_8c.html#ac712f9fee52f55578ff47f1d4d40f27f">peekNextChar</a>(parser)  == <span class="charliteral">&#39;&quot;&#39;</span>) {</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;          <a class="code" href="../../d4/de2/wren__compiler_8c.html#a5c8500d7d0bb3ab4624b4053b3213d86">readRawString</a>(parser);</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;          <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;        }</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;        <a class="code" href="../../d4/de2/wren__compiler_8c.html#a3cad8aafffed68be975e83a055ce1b2c">readString</a>(parser); <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;      }</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;_&#39;</span>:</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;        <a class="code" href="../../d4/de2/wren__compiler_8c.html#aaf25e0c94fad40c04caf138b3f838484">readName</a>(parser,</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;                 <a class="code" href="../../d4/de2/wren__compiler_8c.html#a3b5f12d504fe199f09e2651235c398a5">peekChar</a>(parser) == <span class="charliteral">&#39;_&#39;</span> ? <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a1331d6f8b29f0469958ccb3ac34fc335">TOKEN_STATIC_FIELD</a> : <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921afbb543acd52617c9616c3c4e0c6093d0">TOKEN_FIELD</a>, c);</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160; </div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;0&#39;</span>:</div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d4/de2/wren__compiler_8c.html#a3b5f12d504fe199f09e2651235c398a5">peekChar</a>(parser) == <span class="charliteral">&#39;x&#39;</span>)</div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;        {</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;          <a class="code" href="../../d4/de2/wren__compiler_8c.html#ac5855f1df10bbda532ef62084fda7df4">readHexNumber</a>(parser);</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;          <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;        }</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160; </div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;        <a class="code" href="../../d4/de2/wren__compiler_8c.html#abcdd139278dedb26f772b0b373cdb7bf">readNumber</a>(parser);</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160; </div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;      <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d4/de2/wren__compiler_8c.html#a4f4bae86546f2e4c8c4854d69a9b4636">isName</a>(c))</div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;        {</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;          <a class="code" href="../../d4/de2/wren__compiler_8c.html#aaf25e0c94fad40c04caf138b3f838484">readName</a>(parser, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a56d9afac7a1508302f85a77d1f3ba8b2">TOKEN_NAME</a>, c);</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;        }</div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d4/de2/wren__compiler_8c.html#a1044bcfbcf0d32964730d3af27f4b45d">isDigit</a>(c))</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;        {</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;          <a class="code" href="../../d4/de2/wren__compiler_8c.html#abcdd139278dedb26f772b0b373cdb7bf">readNumber</a>(parser);</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;        }</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;        {</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;          <span class="keywordflow">if</span> (c &gt;= 32 &amp;&amp; c &lt;= 126)</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;          {</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;            <a class="code" href="../../d4/de2/wren__compiler_8c.html#a2c404ef1792908a05d45d110401e9443">lexError</a>(parser, <span class="stringliteral">&quot;Invalid character &#39;%c&#39;.&quot;</span>, c);</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;          }</div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;          <span class="keywordflow">else</span></div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;          {</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;            <span class="comment">// Don&#39;t show non-ASCII values since we didn&#39;t UTF-8 decode the</span></div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;            <span class="comment">// bytes. Since there are no non-ASCII byte values that are</span></div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;            <span class="comment">// meaningful code units in Wren, the lexer works on raw bytes,</span></div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;            <span class="comment">// even though the source code and console output are UTF-8.</span></div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;            <a class="code" href="../../d4/de2/wren__compiler_8c.html#a2c404ef1792908a05d45d110401e9443">lexError</a>(parser, <span class="stringliteral">&quot;Invalid byte 0x%x.&quot;</span>, (uint8_t)c);</div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;          }</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;          parser-&gt;next.type = <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921abbfc577192f2423b39a5f693e260b615">TOKEN_ERROR</a>;</div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;          parser-&gt;next.length = 0;</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;        }</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;    }</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;  }</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160; </div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;  <span class="comment">// If we get here, we&#39;re out of source, so just make EOF tokens.</span></div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;  parser-&gt;tokenStart = parser-&gt;currentChar;</div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#ad5bbc381038389282731d29e3f95971f">makeToken</a>(parser, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921aa130df27256cd45f5781fc74deeb50dc">TOKEN_EOF</a>);</div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;}</div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160; </div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;<span class="comment">// Parsing ---------------------------------------------------------------------</span></div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160; </div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;<span class="comment">// Returns the type of the current token.</span></div>
<div class="line"><a name="l01244"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#a55ffa49d00ce173be5cbd76358588d08"> 1244</a></span>&#160;<span class="keyword">static</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921">TokenType</a> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a55ffa49d00ce173be5cbd76358588d08">peek</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler)</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;{</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;  <span class="keywordflow">return</span> compiler-&gt;parser-&gt;current.type;</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;}</div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160; </div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;<span class="comment">// Returns the type of the current token.</span></div>
<div class="line"><a name="l01250"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#a690e2e36586b804ffda40a779731c271"> 1250</a></span>&#160;<span class="keyword">static</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921">TokenType</a> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a690e2e36586b804ffda40a779731c271">peekNext</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler)</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;{</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;  <span class="keywordflow">return</span> compiler-&gt;parser-&gt;next.type;</div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;}</div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160; </div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;<span class="comment">// Consumes the current token if its type is [expected]. Returns true if a</span></div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;<span class="comment">// token was consumed.</span></div>
<div class="line"><a name="l01257"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#af4fe195796c3e700b61d62dafd263295"> 1257</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#af4fe195796c3e700b61d62dafd263295">match</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921">TokenType</a> expected)</div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;{</div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d4/de2/wren__compiler_8c.html#a55ffa49d00ce173be5cbd76358588d08">peek</a>(compiler) != expected) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160; </div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aff9308c9745d77724d06dbc7f1e7bd34">nextToken</a>(compiler-&gt;parser);</div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;}</div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160; </div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;<span class="comment">// Consumes the current token. Emits an error if its type is not [expected].</span></div>
<div class="line"><a name="l01266"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#aed515d74eb0faafbaa8d63f05daf90b9"> 1266</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#aed515d74eb0faafbaa8d63f05daf90b9">consume</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921">TokenType</a> expected,</div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;                    <span class="keyword">const</span> <span class="keywordtype">char</span>* errorMessage)</div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;{</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aff9308c9745d77724d06dbc7f1e7bd34">nextToken</a>(compiler-&gt;parser);</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;  <span class="keywordflow">if</span> (compiler-&gt;parser-&gt;previous.type != expected)</div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;  {</div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#ae74f1b74c02154518d7162a728d6118a">error</a>(compiler, errorMessage);</div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160; </div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;    <span class="comment">// If the next token is the one we want, assume the current one is just a</span></div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;    <span class="comment">// spurious error and discard it to minimize the number of cascaded errors.</span></div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;    <span class="keywordflow">if</span> (compiler-&gt;parser-&gt;current.type == expected) <a class="code" href="../../d4/de2/wren__compiler_8c.html#aff9308c9745d77724d06dbc7f1e7bd34">nextToken</a>(compiler-&gt;parser);</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;  }</div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;}</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160; </div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;<span class="comment">// Matches one or more newlines. Returns true if at least one was found.</span></div>
<div class="line"><a name="l01281"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#a0c05f397ec8eb9dd3f5994287510b132"> 1281</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a0c05f397ec8eb9dd3f5994287510b132">matchLine</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler)</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;{</div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="../../d4/de2/wren__compiler_8c.html#af4fe195796c3e700b61d62dafd263295">match</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921aa3667833295e7097424957cf261b2527">TOKEN_LINE</a>)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160; </div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;  <span class="keywordflow">while</span> (<a class="code" href="../../d4/de2/wren__compiler_8c.html#af4fe195796c3e700b61d62dafd263295">match</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921aa3667833295e7097424957cf261b2527">TOKEN_LINE</a>));</div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;}</div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160; </div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;<span class="comment">// Discards any newlines starting at the current token.</span></div>
<div class="line"><a name="l01290"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#acbf1748d7e097833a292ee0caaa50d05"> 1290</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#acbf1748d7e097833a292ee0caaa50d05">ignoreNewlines</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler)</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;{</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a0c05f397ec8eb9dd3f5994287510b132">matchLine</a>(compiler);</div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;}</div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160; </div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;<span class="comment">// Consumes the current token. Emits an error if it is not a newline. Then</span></div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;<span class="comment">// discards any duplicate newlines following it.</span></div>
<div class="line"><a name="l01297"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#a6f9526219e47ab23cd6b5db273d13c8a"> 1297</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a6f9526219e47ab23cd6b5db273d13c8a">consumeLine</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler, <span class="keyword">const</span> <span class="keywordtype">char</span>* errorMessage)</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;{</div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aed515d74eb0faafbaa8d63f05daf90b9">consume</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921aa3667833295e7097424957cf261b2527">TOKEN_LINE</a>, errorMessage);</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#acbf1748d7e097833a292ee0caaa50d05">ignoreNewlines</a>(compiler);</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;}</div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160; </div>
<div class="line"><a name="l01303"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#a12bdbdb1e45706c48ef016e52b18c21a"> 1303</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a12bdbdb1e45706c48ef016e52b18c21a">allowLineBeforeDot</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler) {</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d4/de2/wren__compiler_8c.html#a55ffa49d00ce173be5cbd76358588d08">peek</a>(compiler) == <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921aa3667833295e7097424957cf261b2527">TOKEN_LINE</a> &amp;&amp; <a class="code" href="../../d4/de2/wren__compiler_8c.html#a690e2e36586b804ffda40a779731c271">peekNext</a>(compiler) == <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921ab565ebfaaa53dcee6ddda201e270733e">TOKEN_DOT</a>) {</div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#aff9308c9745d77724d06dbc7f1e7bd34">nextToken</a>(compiler-&gt;parser);</div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;  }</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;}</div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160; </div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;<span class="comment">// Variables and scopes --------------------------------------------------------</span></div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160; </div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;<span class="comment">// Emits one single-byte argument. Returns its index.</span></div>
<div class="line"><a name="l01312"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#ad66cbe4ed73e01794803b167c7430752"> 1312</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#ad66cbe4ed73e01794803b167c7430752">emitByte</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler, <span class="keywordtype">int</span> <span class="keywordtype">byte</span>)</div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;{</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;  wrenByteBufferWrite(compiler-&gt;parser-&gt;vm, &amp;compiler-&gt;fn-&gt;code, (uint8_t)<span class="keywordtype">byte</span>);</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;  </div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;  <span class="comment">// Assume the instruction is associated with the most recently consumed token.</span></div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;  wrenIntBufferWrite(compiler-&gt;parser-&gt;vm, &amp;compiler-&gt;fn-&gt;debug-&gt;sourceLines,</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;                     compiler-&gt;parser-&gt;previous.line);</div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;  </div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;  <span class="keywordflow">return</span> compiler-&gt;fn-&gt;code.count - 1;</div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;}</div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160; </div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;<span class="comment">// Emits one bytecode instruction.</span></div>
<div class="line"><a name="l01324"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#a9cfaefaddfdf6eff5163d9638d141200"> 1324</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a9cfaefaddfdf6eff5163d9638d141200">emitOp</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler, <a class="code" href="../../d5/db1/wren__vm_8h.html#af31477bc48f67856bedb0fa8e5b5281d">Code</a> instruction)</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;{</div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#ad66cbe4ed73e01794803b167c7430752">emitByte</a>(compiler, instruction);</div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;  </div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;  <span class="comment">// Keep track of the stack&#39;s high water mark.</span></div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;  compiler-&gt;numSlots += <a class="code" href="../../d4/de2/wren__compiler_8c.html#a05c8d00faddc01e19b4e0655b0e917d9">stackEffects</a>[instruction];</div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;  <span class="keywordflow">if</span> (compiler-&gt;numSlots &gt; compiler-&gt;fn-&gt;maxSlots)</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;  {</div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;    compiler-&gt;fn-&gt;maxSlots = compiler-&gt;numSlots;</div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;  }</div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;}</div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160; </div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;<span class="comment">// Emits one 16-bit argument, which will be written big endian.</span></div>
<div class="line"><a name="l01337"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#ab2a608b8c30efb11ff62686f61b95c05"> 1337</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#ab2a608b8c30efb11ff62686f61b95c05">emitShort</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler, <span class="keywordtype">int</span> arg)</div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;{</div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#ad66cbe4ed73e01794803b167c7430752">emitByte</a>(compiler, (arg &gt;&gt; 8) &amp; 0xff);</div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#ad66cbe4ed73e01794803b167c7430752">emitByte</a>(compiler, arg &amp; 0xff);</div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;}</div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160; </div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;<span class="comment">// Emits one bytecode instruction followed by a 8-bit argument. Returns the</span></div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;<span class="comment">// index of the argument in the bytecode.</span></div>
<div class="line"><a name="l01345"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#a57b01730ba60c3cf3d1237cfbd32b9cc"> 1345</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a57b01730ba60c3cf3d1237cfbd32b9cc">emitByteArg</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler, <a class="code" href="../../d5/db1/wren__vm_8h.html#af31477bc48f67856bedb0fa8e5b5281d">Code</a> instruction, <span class="keywordtype">int</span> arg)</div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;{</div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a9cfaefaddfdf6eff5163d9638d141200">emitOp</a>(compiler, instruction);</div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#ad66cbe4ed73e01794803b167c7430752">emitByte</a>(compiler, arg);</div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;}</div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160; </div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;<span class="comment">// Emits one bytecode instruction followed by a 16-bit argument, which will be</span></div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;<span class="comment">// written big endian.</span></div>
<div class="line"><a name="l01353"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#a3a17c9fef3d6388b2192ae1ce77483c1"> 1353</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a3a17c9fef3d6388b2192ae1ce77483c1">emitShortArg</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler, <a class="code" href="../../d5/db1/wren__vm_8h.html#af31477bc48f67856bedb0fa8e5b5281d">Code</a> instruction, <span class="keywordtype">int</span> arg)</div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;{</div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a9cfaefaddfdf6eff5163d9638d141200">emitOp</a>(compiler, instruction);</div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#ab2a608b8c30efb11ff62686f61b95c05">emitShort</a>(compiler, arg);</div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;}</div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160; </div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;<span class="comment">// Emits [instruction] followed by a placeholder for a jump offset. The</span></div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;<span class="comment">// placeholder can be patched by calling [jumpPatch]. Returns the index of the</span></div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;<span class="comment">// placeholder.</span></div>
<div class="line"><a name="l01362"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#ac30bdcdc8f7ab87bb8f844b7d2bcd113"> 1362</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#ac30bdcdc8f7ab87bb8f844b7d2bcd113">emitJump</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler, <a class="code" href="../../d5/db1/wren__vm_8h.html#af31477bc48f67856bedb0fa8e5b5281d">Code</a> instruction)</div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;{</div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a9cfaefaddfdf6eff5163d9638d141200">emitOp</a>(compiler, instruction);</div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#ad66cbe4ed73e01794803b167c7430752">emitByte</a>(compiler, 0xff);</div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#ad66cbe4ed73e01794803b167c7430752">emitByte</a>(compiler, 0xff) - 1;</div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;}</div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160; </div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;<span class="comment">// Creates a new constant for the current value and emits the bytecode to load</span></div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;<span class="comment">// it from the constant table.</span></div>
<div class="line"><a name="l01371"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#a6b4cd3d0c1a4cf34e42541f058f2e55b"> 1371</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a6b4cd3d0c1a4cf34e42541f058f2e55b">emitConstant</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler, <a class="code" href="../../d2/d0a/wren__value_8h.html#ad777bf08d8e2b01df17ba5e3c51ae11f">Value</a> value)</div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;{</div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;  <span class="keywordtype">int</span> constant = <a class="code" href="../../d4/de2/wren__compiler_8c.html#a0dc46acbdd511af1c3de1a937dca02b3">addConstant</a>(compiler, value);</div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;  </div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;  <span class="comment">// Compile the code to load the constant.</span></div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a3a17c9fef3d6388b2192ae1ce77483c1">emitShortArg</a>(compiler, CODE_CONSTANT, constant);</div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;}</div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160; </div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;<span class="comment">// Create a new local variable with [name]. Assumes the current scope is local</span></div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;<span class="comment">// and the name is unique.</span></div>
<div class="line"><a name="l01381"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#a9bd2c0d9435a0ab262ba508ec071fa83"> 1381</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a9bd2c0d9435a0ab262ba508ec071fa83">addLocal</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler, <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="../../d4/de2/wren__compiler_8c.html#a59935c559e6df5f8a5f95110a971014d">name</a>, <span class="keywordtype">int</span> length)</div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;{</div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;  Local* local = &amp;compiler-&gt;locals[compiler-&gt;numLocals];</div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;  local-&gt;name = <a class="code" href="../../d4/de2/wren__compiler_8c.html#a59935c559e6df5f8a5f95110a971014d">name</a>;</div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;  local-&gt;length = length;</div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;  local-&gt;depth = compiler-&gt;scopeDepth;</div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;  local-&gt;isUpvalue = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;  <span class="keywordflow">return</span> compiler-&gt;numLocals++;</div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;}</div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160; </div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;<span class="comment">// Declares a variable in the current scope whose name is the given token.</span></div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;<span class="comment">// If [token] is `NULL`, uses the previously consumed token. Returns its symbol.</span></div>
<div class="line"><a name="l01394"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#a6f04eaffda4b4d4ee46d87aa3e9a8d2b"> 1394</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a6f04eaffda4b4d4ee46d87aa3e9a8d2b">declareVariable</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler, Token* <a class="code" href="../../dd/dbe/svc_serial_command_interface_8cpp.html#a1d71425d9df28667d528833a4db10432">token</a>)</div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;{</div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../dd/dbe/svc_serial_command_interface_8cpp.html#a1d71425d9df28667d528833a4db10432">token</a> == <a class="code" href="../../da/d2d/_stdio_stream_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) <a class="code" href="../../dd/dbe/svc_serial_command_interface_8cpp.html#a1d71425d9df28667d528833a4db10432">token</a> = &amp;compiler-&gt;parser-&gt;previous;</div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160; </div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../dd/dbe/svc_serial_command_interface_8cpp.html#a1d71425d9df28667d528833a4db10432">token</a>-&gt;length &gt; <a class="code" href="../../d3/d72/wren__common_8h.html#aa692dbf91cd4e231e40dea73887e02ce">MAX_VARIABLE_NAME</a>)</div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;  {</div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#ae74f1b74c02154518d7162a728d6118a">error</a>(compiler, <span class="stringliteral">&quot;Variable name cannot be longer than %d characters.&quot;</span>,</div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;          <a class="code" href="../../d3/d72/wren__common_8h.html#aa692dbf91cd4e231e40dea73887e02ce">MAX_VARIABLE_NAME</a>);</div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;  }</div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160; </div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;  <span class="comment">// Top-level module scope.</span></div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;  <span class="keywordflow">if</span> (compiler-&gt;scopeDepth == -1)</div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;  {</div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;    <span class="keywordtype">int</span> line = -1;</div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;    <span class="keywordtype">int</span> symbol = <a class="code" href="../../de/db2/wren__vm_8c.html#aa5a59b96d405cd396e60139df76c5d60">wrenDefineVariable</a>(compiler-&gt;parser-&gt;vm,</div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;                                    compiler-&gt;parser-&gt;module,</div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;                                    <a class="code" href="../../dd/dbe/svc_serial_command_interface_8cpp.html#a1d71425d9df28667d528833a4db10432">token</a>-&gt;start, <a class="code" href="../../dd/dbe/svc_serial_command_interface_8cpp.html#a1d71425d9df28667d528833a4db10432">token</a>-&gt;length,</div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;                                    <a class="code" href="../../d2/d0a/wren__value_8h.html#afc64b30e282747645e8e6db5023797b7">NULL_VAL</a>, &amp;line);</div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160; </div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;    <span class="keywordflow">if</span> (symbol == -1)</div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;    {</div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;      <a class="code" href="../../d4/de2/wren__compiler_8c.html#ae74f1b74c02154518d7162a728d6118a">error</a>(compiler, <span class="stringliteral">&quot;Module variable is already defined.&quot;</span>);</div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;    }</div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (symbol == -2)</div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;    {</div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;      <a class="code" href="../../d4/de2/wren__compiler_8c.html#ae74f1b74c02154518d7162a728d6118a">error</a>(compiler, <span class="stringliteral">&quot;Too many module variables defined.&quot;</span>);</div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;    }</div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (symbol == -3)</div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;    {</div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;      <a class="code" href="../../d4/de2/wren__compiler_8c.html#ae74f1b74c02154518d7162a728d6118a">error</a>(compiler,</div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;        <span class="stringliteral">&quot;Variable &#39;%.*s&#39; referenced before this definition (first use at line %d).&quot;</span>,</div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;        <a class="code" href="../../dd/dbe/svc_serial_command_interface_8cpp.html#a1d71425d9df28667d528833a4db10432">token</a>-&gt;length, <a class="code" href="../../dd/dbe/svc_serial_command_interface_8cpp.html#a1d71425d9df28667d528833a4db10432">token</a>-&gt;start, line);</div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;    }</div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160; </div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;    <span class="keywordflow">return</span> symbol;</div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;  }</div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160; </div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;  <span class="comment">// See if there is already a variable with this name declared in the current</span></div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;  <span class="comment">// scope. (Outer scopes are OK: those get shadowed.)</span></div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = compiler-&gt;numLocals - 1; i &gt;= 0; i--)</div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;  {</div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;    Local* local = &amp;compiler-&gt;locals[i];</div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160; </div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;    <span class="comment">// Once we escape this scope and hit an outer one, we can stop.</span></div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;    <span class="keywordflow">if</span> (local-&gt;depth &lt; compiler-&gt;scopeDepth) <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160; </div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;    <span class="keywordflow">if</span> (local-&gt;length == <a class="code" href="../../dd/dbe/svc_serial_command_interface_8cpp.html#a1d71425d9df28667d528833a4db10432">token</a>-&gt;length &amp;&amp;</div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;        memcmp(local-&gt;name, <a class="code" href="../../dd/dbe/svc_serial_command_interface_8cpp.html#a1d71425d9df28667d528833a4db10432">token</a>-&gt;start, <a class="code" href="../../dd/dbe/svc_serial_command_interface_8cpp.html#a1d71425d9df28667d528833a4db10432">token</a>-&gt;length) == 0)</div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;    {</div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;      <a class="code" href="../../d4/de2/wren__compiler_8c.html#ae74f1b74c02154518d7162a728d6118a">error</a>(compiler, <span class="stringliteral">&quot;Variable is already declared in this scope.&quot;</span>);</div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;      <span class="keywordflow">return</span> i;</div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;    }</div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;  }</div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160; </div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;  <span class="keywordflow">if</span> (compiler-&gt;numLocals == <a class="code" href="../../d4/de2/wren__compiler_8c.html#a0a12e0946596048fabb91bc99d33c1a5">MAX_LOCALS</a>)</div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;  {</div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#ae74f1b74c02154518d7162a728d6118a">error</a>(compiler, <span class="stringliteral">&quot;Cannot declare more than %d variables in one scope.&quot;</span>,</div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;          <a class="code" href="../../d4/de2/wren__compiler_8c.html#a0a12e0946596048fabb91bc99d33c1a5">MAX_LOCALS</a>);</div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;    <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;  }</div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160; </div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a9bd2c0d9435a0ab262ba508ec071fa83">addLocal</a>(compiler, <a class="code" href="../../dd/dbe/svc_serial_command_interface_8cpp.html#a1d71425d9df28667d528833a4db10432">token</a>-&gt;start, <a class="code" href="../../dd/dbe/svc_serial_command_interface_8cpp.html#a1d71425d9df28667d528833a4db10432">token</a>-&gt;length);</div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;}</div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160; </div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;<span class="comment">// Parses a name token and declares a variable in the current scope with that</span></div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;<span class="comment">// name. Returns its slot.</span></div>
<div class="line"><a name="l01460"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#ad162f798273bfdd4b16efc1ecc197ba3"> 1460</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#ad162f798273bfdd4b16efc1ecc197ba3">declareNamedVariable</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler)</div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;{</div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aed515d74eb0faafbaa8d63f05daf90b9">consume</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a56d9afac7a1508302f85a77d1f3ba8b2">TOKEN_NAME</a>, <span class="stringliteral">&quot;Expect variable name.&quot;</span>);</div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a6f04eaffda4b4d4ee46d87aa3e9a8d2b">declareVariable</a>(compiler, <a class="code" href="../../da/d2d/_stdio_stream_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;}</div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160; </div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;<span class="comment">// Stores a variable with the previously defined symbol in the current scope.</span></div>
<div class="line"><a name="l01467"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#aeb23f2220ff2337e38feb478573e24fb"> 1467</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#aeb23f2220ff2337e38feb478573e24fb">defineVariable</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler, <span class="keywordtype">int</span> symbol)</div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;{</div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;  <span class="comment">// Store the variable. If it&#39;s a local, the result of the initializer is</span></div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;  <span class="comment">// in the correct slot on the stack already so we&#39;re done.</span></div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;  <span class="keywordflow">if</span> (compiler-&gt;scopeDepth &gt;= 0) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160; </div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;  <span class="comment">// It&#39;s a module-level variable, so store the value in the module slot and</span></div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;  <span class="comment">// then discard the temporary for the initializer.</span></div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a3a17c9fef3d6388b2192ae1ce77483c1">emitShortArg</a>(compiler, CODE_STORE_MODULE_VAR, symbol);</div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a9cfaefaddfdf6eff5163d9638d141200">emitOp</a>(compiler, CODE_POP);</div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;}</div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160; </div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;<span class="comment">// Starts a new local block scope.</span></div>
<div class="line"><a name="l01480"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#ad3240fb788071077fd8bc9e481079cda"> 1480</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#ad3240fb788071077fd8bc9e481079cda">pushScope</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler)</div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;{</div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;  compiler-&gt;scopeDepth++;</div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;}</div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160; </div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;<span class="comment">// Generates code to discard local variables at [depth] or greater. Does *not*</span></div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;<span class="comment">// actually undeclare variables or pop any scopes, though. This is called</span></div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;<span class="comment">// directly when compiling &quot;break&quot; statements to ditch the local variables</span></div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;<span class="comment">// before jumping out of the loop even though they are still in scope *past*</span></div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;<span class="comment">// the break instruction.</span></div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;<span class="comment">// Returns the number of local variables that were eliminated.</span></div>
<div class="line"><a name="l01492"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#aa0f3659cc8b19c66e2cbe89025a30d29"> 1492</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa0f3659cc8b19c66e2cbe89025a30d29">discardLocals</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler, <span class="keywordtype">int</span> depth)</div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;{</div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;  <a class="code" href="../../d3/d72/wren__common_8h.html#aa06eedd6f738a415870e97a375337d51">ASSERT</a>(compiler-&gt;scopeDepth &gt; -1, <span class="stringliteral">&quot;Cannot exit top-level scope.&quot;</span>);</div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160; </div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;  <span class="keywordtype">int</span> local = compiler-&gt;numLocals - 1;</div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;  <span class="keywordflow">while</span> (local &gt;= 0 &amp;&amp; compiler-&gt;locals[local].depth &gt;= depth)</div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;  {</div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;    <span class="comment">// If the local was closed over, make sure the upvalue gets closed when it</span></div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;    <span class="comment">// goes out of scope on the stack. We use emitByte() and not emitOp() here</span></div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;    <span class="comment">// because we don&#39;t want to track that stack effect of these pops since the</span></div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;    <span class="comment">// variables are still in scope after the break.</span></div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;    <span class="keywordflow">if</span> (compiler-&gt;locals[local].isUpvalue)</div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;    {</div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;      <a class="code" href="../../d4/de2/wren__compiler_8c.html#ad66cbe4ed73e01794803b167c7430752">emitByte</a>(compiler, CODE_CLOSE_UPVALUE);</div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;    }</div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;    {</div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;      <a class="code" href="../../d4/de2/wren__compiler_8c.html#ad66cbe4ed73e01794803b167c7430752">emitByte</a>(compiler, CODE_POP);</div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;    }</div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;    </div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160; </div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;    local--;</div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;  }</div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160; </div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;  <span class="keywordflow">return</span> compiler-&gt;numLocals - local - 1;</div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;}</div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160; </div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;<span class="comment">// Closes the last pushed block scope and discards any local variables declared</span></div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;<span class="comment">// in that scope. This should only be called in a statement context where no</span></div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;<span class="comment">// temporaries are still on the stack.</span></div>
<div class="line"><a name="l01522"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#a34f07e4ff7876be8b8cc88f2a7e3ebda"> 1522</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a34f07e4ff7876be8b8cc88f2a7e3ebda">popScope</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler)</div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;{</div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;  <span class="keywordtype">int</span> popped = <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa0f3659cc8b19c66e2cbe89025a30d29">discardLocals</a>(compiler, compiler-&gt;scopeDepth);</div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;  compiler-&gt;numLocals -= popped;</div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;  compiler-&gt;numSlots -= popped;</div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;  compiler-&gt;scopeDepth--;</div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;}</div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160; </div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;<span class="comment">// Attempts to look up the name in the local variables of [compiler]. If found,</span></div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;<span class="comment">// returns its index, otherwise returns -1.</span></div>
<div class="line"><a name="l01532"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#ac193a2eaa589f497f8147efe1dfca7a8"> 1532</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#ac193a2eaa589f497f8147efe1dfca7a8">resolveLocal</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler, <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="../../d4/de2/wren__compiler_8c.html#a59935c559e6df5f8a5f95110a971014d">name</a>, <span class="keywordtype">int</span> length)</div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;{</div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;  <span class="comment">// Look it up in the local scopes. Look in reverse order so that the most</span></div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;  <span class="comment">// nested variable is found first and shadows outer ones.</span></div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = compiler-&gt;numLocals - 1; i &gt;= 0; i--)</div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;  {</div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;    <span class="keywordflow">if</span> (compiler-&gt;locals[i].length == length &amp;&amp;</div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;        memcmp(<a class="code" href="../../d4/de2/wren__compiler_8c.html#a59935c559e6df5f8a5f95110a971014d">name</a>, compiler-&gt;locals[i].name, length) == 0)</div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;    {</div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;      <span class="keywordflow">return</span> i;</div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;    }</div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;  }</div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160; </div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;  <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;}</div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160; </div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;<span class="comment">// Adds an upvalue to [compiler]&#39;s function with the given properties. Does not</span></div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;<span class="comment">// add one if an upvalue for that variable is already in the list. Returns the</span></div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;<span class="comment">// index of the upvalue.</span></div>
<div class="line"><a name="l01551"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#ac159f93f4e0bca9340f8bf13dda218d9"> 1551</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#ac159f93f4e0bca9340f8bf13dda218d9">addUpvalue</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler, <span class="keywordtype">bool</span> isLocal, <span class="keywordtype">int</span> index)</div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;{</div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;  <span class="comment">// Look for an existing one.</span></div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; compiler-&gt;fn-&gt;numUpvalues; i++)</div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;  {</div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;    CompilerUpvalue* upvalue = &amp;compiler-&gt;upvalues[i];</div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;    <span class="keywordflow">if</span> (upvalue-&gt;index == index &amp;&amp; upvalue-&gt;isLocal == isLocal) <span class="keywordflow">return</span> i;</div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;  }</div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160; </div>
<div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;  <span class="comment">// If we got here, it&#39;s a new upvalue.</span></div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;  compiler-&gt;upvalues[compiler-&gt;fn-&gt;numUpvalues].isLocal = isLocal;</div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;  compiler-&gt;upvalues[compiler-&gt;fn-&gt;numUpvalues].index = index;</div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;  <span class="keywordflow">return</span> compiler-&gt;fn-&gt;numUpvalues++;</div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;}</div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160; </div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;<span class="comment">// Attempts to look up [name] in the functions enclosing the one being compiled</span></div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;<span class="comment">// by [compiler]. If found, it adds an upvalue for it to this compiler&#39;s list</span></div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;<span class="comment">// of upvalues (unless it&#39;s already in there) and returns its index. If not</span></div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;<span class="comment">// found, returns -1.</span></div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;<span class="comment">// If the name is found outside of the immediately enclosing function, this</span></div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;<span class="comment">// will flatten the closure and add upvalues to all of the intermediate</span></div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;<span class="comment">// functions so that it gets walked down to this one.</span></div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;<span class="comment">// If it reaches a method boundary, this stops and returns -1 since methods do</span></div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;<span class="comment">// not close over local variables.</span></div>
<div class="line"><a name="l01577"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#ab3f241e328328e3814e5244dde86ad98"> 1577</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#ab3f241e328328e3814e5244dde86ad98">findUpvalue</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler, <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="../../d4/de2/wren__compiler_8c.html#a59935c559e6df5f8a5f95110a971014d">name</a>, <span class="keywordtype">int</span> length)</div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;{</div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;  <span class="comment">// If we are at the top level, we didn&#39;t find it.</span></div>
<div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;  <span class="keywordflow">if</span> (compiler-&gt;parent == <a class="code" href="../../da/d2d/_stdio_stream_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;  </div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;  <span class="comment">// If we hit the method boundary (and the name isn&#39;t a static field), then</span></div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;  <span class="comment">// stop looking for it. We&#39;ll instead treat it as a self send.</span></div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d4/de2/wren__compiler_8c.html#a59935c559e6df5f8a5f95110a971014d">name</a>[0] != <span class="charliteral">&#39;_&#39;</span> &amp;&amp; compiler-&gt;parent-&gt;enclosingClass != <a class="code" href="../../da/d2d/_stdio_stream_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;  </div>
<div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;  <span class="comment">// See if it&#39;s a local variable in the immediately enclosing function.</span></div>
<div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;  <span class="keywordtype">int</span> local = <a class="code" href="../../d4/de2/wren__compiler_8c.html#ac193a2eaa589f497f8147efe1dfca7a8">resolveLocal</a>(compiler-&gt;parent, <a class="code" href="../../d4/de2/wren__compiler_8c.html#a59935c559e6df5f8a5f95110a971014d">name</a>, length);</div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;  <span class="keywordflow">if</span> (local != -1)</div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;  {</div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;    <span class="comment">// Mark the local as an upvalue so we know to close it when it goes out of</span></div>
<div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;    <span class="comment">// scope.</span></div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;    compiler-&gt;parent-&gt;locals[local].isUpvalue = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160; </div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#ac159f93f4e0bca9340f8bf13dda218d9">addUpvalue</a>(compiler, <span class="keyword">true</span>, local);</div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;  }</div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160; </div>
<div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;  <span class="comment">// See if it&#39;s an upvalue in the immediately enclosing function. In other</span></div>
<div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;  <span class="comment">// words, if it&#39;s a local variable in a non-immediately enclosing function.</span></div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;  <span class="comment">// This &quot;flattens&quot; closures automatically: it adds upvalues to all of the</span></div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;  <span class="comment">// intermediate functions to get from the function where a local is declared</span></div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;  <span class="comment">// all the way into the possibly deeply nested function that is closing over</span></div>
<div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;  <span class="comment">// it.</span></div>
<div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;  <span class="keywordtype">int</span> upvalue = <a class="code" href="../../d4/de2/wren__compiler_8c.html#ab3f241e328328e3814e5244dde86ad98">findUpvalue</a>(compiler-&gt;parent, <a class="code" href="../../d4/de2/wren__compiler_8c.html#a59935c559e6df5f8a5f95110a971014d">name</a>, length);</div>
<div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;  <span class="keywordflow">if</span> (upvalue != -1)</div>
<div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;  {</div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#ac159f93f4e0bca9340f8bf13dda218d9">addUpvalue</a>(compiler, <span class="keyword">false</span>, upvalue);</div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;  }</div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160; </div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;  <span class="comment">// If we got here, we walked all the way up the parent chain and couldn&#39;t</span></div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;  <span class="comment">// find it.</span></div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;  <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;}</div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160; </div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;<span class="comment">// Look up [name] in the current scope to see what variable it refers to.</span></div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;<span class="comment">// Returns the variable either in local scope, or the enclosing function&#39;s</span></div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;<span class="comment">// upvalue list. Does not search the module scope. Returns a variable with</span></div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;<span class="comment">// index -1 if not found.</span></div>
<div class="line"><a name="l01618"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#aeead4115d1ddc029dcd2a2b406cab6a9"> 1618</a></span>&#160;<span class="keyword">static</span> Variable <a class="code" href="../../d4/de2/wren__compiler_8c.html#aeead4115d1ddc029dcd2a2b406cab6a9">resolveNonmodule</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler,</div>
<div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;                                 <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="../../d4/de2/wren__compiler_8c.html#a59935c559e6df5f8a5f95110a971014d">name</a>, <span class="keywordtype">int</span> length)</div>
<div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;{</div>
<div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;  <span class="comment">// Look it up in the local scopes.</span></div>
<div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;  Variable variable;</div>
<div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;  variable.scope = <a class="code" href="../../d4/de2/wren__compiler_8c.html#aaecc53892786f2fa11e682f633af84c6af828bc82c537119c89b55d2db41ec75b">SCOPE_LOCAL</a>;</div>
<div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;  variable.index = <a class="code" href="../../d4/de2/wren__compiler_8c.html#ac193a2eaa589f497f8147efe1dfca7a8">resolveLocal</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#a59935c559e6df5f8a5f95110a971014d">name</a>, length);</div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;  <span class="keywordflow">if</span> (variable.index != -1) <span class="keywordflow">return</span> variable;</div>
<div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160; </div>
<div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;  <span class="comment">// Tt&#39;s not a local, so guess that it&#39;s an upvalue.</span></div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;  variable.scope = <a class="code" href="../../d4/de2/wren__compiler_8c.html#aaecc53892786f2fa11e682f633af84c6a9c17ce3e01d23ef646abc7a330a1244a">SCOPE_UPVALUE</a>;</div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;  variable.index = <a class="code" href="../../d4/de2/wren__compiler_8c.html#ab3f241e328328e3814e5244dde86ad98">findUpvalue</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#a59935c559e6df5f8a5f95110a971014d">name</a>, length);</div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;  <span class="keywordflow">return</span> variable;</div>
<div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;}</div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160; </div>
<div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;<span class="comment">// Look up [name] in the current scope to see what variable it refers to.</span></div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;<span class="comment">// Returns the variable either in module scope, local scope, or the enclosing</span></div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;<span class="comment">// function&#39;s upvalue list. Returns a variable with index -1 if not found.</span></div>
<div class="line"><a name="l01636"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#a8ee09994b5ad4511965abd53ef245a8a"> 1636</a></span>&#160;<span class="keyword">static</span> Variable <a class="code" href="../../d4/de2/wren__compiler_8c.html#a8ee09994b5ad4511965abd53ef245a8a">resolveName</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler, <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="../../d4/de2/wren__compiler_8c.html#a59935c559e6df5f8a5f95110a971014d">name</a>, <span class="keywordtype">int</span> length)</div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;{</div>
<div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;  Variable variable = <a class="code" href="../../d4/de2/wren__compiler_8c.html#aeead4115d1ddc029dcd2a2b406cab6a9">resolveNonmodule</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#a59935c559e6df5f8a5f95110a971014d">name</a>, length);</div>
<div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;  <span class="keywordflow">if</span> (variable.index != -1) <span class="keywordflow">return</span> variable;</div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160; </div>
<div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;  variable.scope = <a class="code" href="../../d4/de2/wren__compiler_8c.html#aaecc53892786f2fa11e682f633af84c6aa4cd1d716be5988e72bb08902f33270e">SCOPE_MODULE</a>;</div>
<div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;  variable.index = <a class="code" href="../../de/d0d/wren__utils_8c.html#a2b92b4262704a7cebf6f3bd0a853b1eb">wrenSymbolTableFind</a>(&amp;compiler-&gt;parser-&gt;module-&gt;variableNames,</div>
<div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;                                       <a class="code" href="../../d4/de2/wren__compiler_8c.html#a59935c559e6df5f8a5f95110a971014d">name</a>, length);</div>
<div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;  <span class="keywordflow">return</span> variable;</div>
<div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;}</div>
<div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160; </div>
<div class="line"><a name="l01647"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#a63123f2816d2d9f3a7c145bd4e4fe81f"> 1647</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a63123f2816d2d9f3a7c145bd4e4fe81f">loadLocal</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler, <span class="keywordtype">int</span> slot)</div>
<div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;{</div>
<div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;  <span class="keywordflow">if</span> (slot &lt;= 8)</div>
<div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;  {</div>
<div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#a9cfaefaddfdf6eff5163d9638d141200">emitOp</a>(compiler, (<a class="code" href="../../d5/db1/wren__vm_8h.html#af31477bc48f67856bedb0fa8e5b5281d">Code</a>)(CODE_LOAD_LOCAL_0 + slot));</div>
<div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;  }</div>
<div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160; </div>
<div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a57b01730ba60c3cf3d1237cfbd32b9cc">emitByteArg</a>(compiler, CODE_LOAD_LOCAL, slot);</div>
<div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;}</div>
<div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160; </div>
<div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;<span class="comment">// Finishes [compiler], which is compiling a function, method, or chunk of top</span></div>
<div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;<span class="comment">// level code. If there is a parent compiler, then this emits code in the</span></div>
<div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;<span class="comment">// parent compiler to load the resulting function.</span></div>
<div class="line"><a name="l01661"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#a3d81a8f8607a9b8236f1e6e49410581a"> 1661</a></span>&#160;<span class="keyword">static</span> <a class="code" href="../../df/d87/struct_obj_fn.html">ObjFn</a>* <a class="code" href="../../d4/de2/wren__compiler_8c.html#a3d81a8f8607a9b8236f1e6e49410581a">endCompiler</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler,</div>
<div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;                          <span class="keyword">const</span> <span class="keywordtype">char</span>* debugName, <span class="keywordtype">int</span> debugNameLength)</div>
<div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;{</div>
<div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;  <span class="comment">// If we hit an error, don&#39;t finish the function since it&#39;s borked anyway.</span></div>
<div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;  <span class="keywordflow">if</span> (compiler-&gt;parser-&gt;hasError)</div>
<div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;  {</div>
<div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;    compiler-&gt;parser-&gt;vm-&gt;compiler = compiler-&gt;parent;</div>
<div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../da/d2d/_stdio_stream_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;  }</div>
<div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160; </div>
<div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;  <span class="comment">// Mark the end of the bytecode. Since it may contain multiple early returns,</span></div>
<div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;  <span class="comment">// we can&#39;t rely on CODE_RETURN to tell us we&#39;re at the end.</span></div>
<div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a9cfaefaddfdf6eff5163d9638d141200">emitOp</a>(compiler, CODE_END);</div>
<div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160; </div>
<div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;  <a class="code" href="../../da/dbe/wren__value_8c.html#a5bee43c863271994d3c97825e1482a89">wrenFunctionBindName</a>(compiler-&gt;parser-&gt;vm, compiler-&gt;fn,</div>
<div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;                       debugName, debugNameLength);</div>
<div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;  </div>
<div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;  <span class="comment">// In the function that contains this one, load the resulting function object.</span></div>
<div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;  <span class="keywordflow">if</span> (compiler-&gt;parent != <a class="code" href="../../da/d2d/_stdio_stream_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;  {</div>
<div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;    <span class="keywordtype">int</span> constant = <a class="code" href="../../d4/de2/wren__compiler_8c.html#a0dc46acbdd511af1c3de1a937dca02b3">addConstant</a>(compiler-&gt;parent, <a class="code" href="../../d2/d0a/wren__value_8h.html#ae686330cf8b06442b1da208af1b867fc">OBJ_VAL</a>(compiler-&gt;fn));</div>
<div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160; </div>
<div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;    <span class="comment">// Wrap the function in a closure. We do this even if it has no upvalues so</span></div>
<div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;    <span class="comment">// that the VM can uniformly assume all called objects are closures. This</span></div>
<div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;    <span class="comment">// makes creating a function a little slower, but makes invoking them</span></div>
<div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;    <span class="comment">// faster. Given that functions are invoked more often than they are</span></div>
<div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;    <span class="comment">// created, this is a win.</span></div>
<div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#a3a17c9fef3d6388b2192ae1ce77483c1">emitShortArg</a>(compiler-&gt;parent, CODE_CLOSURE, constant);</div>
<div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160; </div>
<div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;    <span class="comment">// Emit arguments for each upvalue to know whether to capture a local or</span></div>
<div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;    <span class="comment">// an upvalue.</span></div>
<div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; compiler-&gt;fn-&gt;numUpvalues; i++)</div>
<div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;    {</div>
<div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;      <a class="code" href="../../d4/de2/wren__compiler_8c.html#ad66cbe4ed73e01794803b167c7430752">emitByte</a>(compiler-&gt;parent, compiler-&gt;upvalues[i].isLocal ? 1 : 0);</div>
<div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;      <a class="code" href="../../d4/de2/wren__compiler_8c.html#ad66cbe4ed73e01794803b167c7430752">emitByte</a>(compiler-&gt;parent, compiler-&gt;upvalues[i].index);</div>
<div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;    }</div>
<div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;  }</div>
<div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160; </div>
<div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;  <span class="comment">// Pop this compiler off the stack.</span></div>
<div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;  compiler-&gt;parser-&gt;vm-&gt;compiler = compiler-&gt;parent;</div>
<div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;  </div>
<div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;<span class="preprocessor">  #if WREN_DEBUG_DUMP_COMPILED_CODE</span></div>
<div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;    <a class="code" href="../../d8/df0/wren__debug_8c.html#aa2c414b0072f4d1437303ff0cf5eb371">wrenDumpCode</a>(compiler-&gt;parser-&gt;vm, compiler-&gt;fn);</div>
<div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;<span class="preprocessor">  #endif</span></div>
<div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160; </div>
<div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;  <span class="keywordflow">return</span> compiler-&gt;fn;</div>
<div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;}</div>
<div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160; </div>
<div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;<span class="comment">// Grammar ---------------------------------------------------------------------</span></div>
<div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160; </div>
<div class="line"><a name="l01711"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#aa4e7d1a473d0280792d98ddb184d3006"> 1711</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">enum</span></div>
<div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;{</div>
<div class="line"><a name="l01713"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#aa4e7d1a473d0280792d98ddb184d3006a2be887a6eb50f60bf0d6643d5986289c"> 1713</a></span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa4e7d1a473d0280792d98ddb184d3006a2be887a6eb50f60bf0d6643d5986289c">PREC_NONE</a>,</div>
<div class="line"><a name="l01714"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#aa4e7d1a473d0280792d98ddb184d3006a8b419613155c8c7ce8a9e8d344715245"> 1714</a></span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa4e7d1a473d0280792d98ddb184d3006a8b419613155c8c7ce8a9e8d344715245">PREC_LOWEST</a>,</div>
<div class="line"><a name="l01715"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#aa4e7d1a473d0280792d98ddb184d3006a5576e7223ab7e815dc3f0daefcaf5fe3"> 1715</a></span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa4e7d1a473d0280792d98ddb184d3006a5576e7223ab7e815dc3f0daefcaf5fe3">PREC_ASSIGNMENT</a>,    <span class="comment">// =</span></div>
<div class="line"><a name="l01716"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#aa4e7d1a473d0280792d98ddb184d3006a76e3d5bfffbff44ebf531ac39e47aecf"> 1716</a></span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa4e7d1a473d0280792d98ddb184d3006a76e3d5bfffbff44ebf531ac39e47aecf">PREC_CONDITIONAL</a>,   <span class="comment">// ?:</span></div>
<div class="line"><a name="l01717"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#aa4e7d1a473d0280792d98ddb184d3006a64fa270482d302628e98c685632f4268"> 1717</a></span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa4e7d1a473d0280792d98ddb184d3006a64fa270482d302628e98c685632f4268">PREC_LOGICAL_OR</a>,    <span class="comment">// ||</span></div>
<div class="line"><a name="l01718"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#aa4e7d1a473d0280792d98ddb184d3006af6f26d1f69e85719e3acdb44ac4ee4ee"> 1718</a></span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa4e7d1a473d0280792d98ddb184d3006af6f26d1f69e85719e3acdb44ac4ee4ee">PREC_LOGICAL_AND</a>,   <span class="comment">// &amp;&amp;</span></div>
<div class="line"><a name="l01719"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#aa4e7d1a473d0280792d98ddb184d3006a336bf98f3bbc6c9ec4436e7728ca9389"> 1719</a></span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa4e7d1a473d0280792d98ddb184d3006a336bf98f3bbc6c9ec4436e7728ca9389">PREC_EQUALITY</a>,      <span class="comment">// == !=</span></div>
<div class="line"><a name="l01720"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#aa4e7d1a473d0280792d98ddb184d3006a4a6f91e6bc7a3c144f214c2e9263e674"> 1720</a></span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa4e7d1a473d0280792d98ddb184d3006a4a6f91e6bc7a3c144f214c2e9263e674">PREC_IS</a>,            <span class="comment">// is</span></div>
<div class="line"><a name="l01721"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#aa4e7d1a473d0280792d98ddb184d3006a97393227c3b9b3664833fb648de3c8af"> 1721</a></span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa4e7d1a473d0280792d98ddb184d3006a97393227c3b9b3664833fb648de3c8af">PREC_COMPARISON</a>,    <span class="comment">// &lt; &gt; &lt;= &gt;=</span></div>
<div class="line"><a name="l01722"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#aa4e7d1a473d0280792d98ddb184d3006abe4cbc14e17bf6505d055c95368ca2e5"> 1722</a></span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa4e7d1a473d0280792d98ddb184d3006abe4cbc14e17bf6505d055c95368ca2e5">PREC_BITWISE_OR</a>,    <span class="comment">// |</span></div>
<div class="line"><a name="l01723"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#aa4e7d1a473d0280792d98ddb184d3006a875ea1a069608469e9aa3bb74191d912"> 1723</a></span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa4e7d1a473d0280792d98ddb184d3006a875ea1a069608469e9aa3bb74191d912">PREC_BITWISE_XOR</a>,   <span class="comment">// ^</span></div>
<div class="line"><a name="l01724"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#aa4e7d1a473d0280792d98ddb184d3006aadadbfbd7d5f8fb39a22da4c406567ef"> 1724</a></span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa4e7d1a473d0280792d98ddb184d3006aadadbfbd7d5f8fb39a22da4c406567ef">PREC_BITWISE_AND</a>,   <span class="comment">// &amp;</span></div>
<div class="line"><a name="l01725"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#aa4e7d1a473d0280792d98ddb184d3006a903b18c3dbaf0566f1cbc06e049935ef"> 1725</a></span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa4e7d1a473d0280792d98ddb184d3006a903b18c3dbaf0566f1cbc06e049935ef">PREC_BITWISE_SHIFT</a>, <span class="comment">// &lt;&lt; &gt;&gt;</span></div>
<div class="line"><a name="l01726"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#aa4e7d1a473d0280792d98ddb184d3006a8be9714d13699d89714562052521e6b2"> 1726</a></span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa4e7d1a473d0280792d98ddb184d3006a8be9714d13699d89714562052521e6b2">PREC_RANGE</a>,         <span class="comment">// .. ...</span></div>
<div class="line"><a name="l01727"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#aa4e7d1a473d0280792d98ddb184d3006af8854b546d1ca4c09e1f8684a3cd6af3"> 1727</a></span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa4e7d1a473d0280792d98ddb184d3006af8854b546d1ca4c09e1f8684a3cd6af3">PREC_TERM</a>,          <span class="comment">// + -</span></div>
<div class="line"><a name="l01728"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#aa4e7d1a473d0280792d98ddb184d3006a512d339d43a8a07254dc51ae5cbf61de"> 1728</a></span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa4e7d1a473d0280792d98ddb184d3006a512d339d43a8a07254dc51ae5cbf61de">PREC_FACTOR</a>,        <span class="comment">// * / %</span></div>
<div class="line"><a name="l01729"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#aa4e7d1a473d0280792d98ddb184d3006a0f109c9eef878893165c6180c86caa96"> 1729</a></span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa4e7d1a473d0280792d98ddb184d3006a0f109c9eef878893165c6180c86caa96">PREC_UNARY</a>,         <span class="comment">// unary - ! ~</span></div>
<div class="line"><a name="l01730"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#aa4e7d1a473d0280792d98ddb184d3006a935e24750e9ae953c5291c5567be873a"> 1730</a></span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa4e7d1a473d0280792d98ddb184d3006a935e24750e9ae953c5291c5567be873a">PREC_CALL</a>,          <span class="comment">// . () []</span></div>
<div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa4e7d1a473d0280792d98ddb184d3006a59b5adac5b20fde37b2be48df04b90de">PREC_PRIMARY</a></div>
<div class="line"><a name="l01732"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#aa4e7d1a473d0280792d98ddb184d3006a59b5adac5b20fde37b2be48df04b90de"> 1732</a></span>&#160;} <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa4e7d1a473d0280792d98ddb184d3006">Precedence</a>;</div>
<div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160; </div>
<div class="line"><a name="l01734"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#af17ed8f9c4320c542124f9f70dd05382"> 1734</a></span>&#160;<span class="keyword">typedef</span> void (*<a class="code" href="../../d4/de2/wren__compiler_8c.html#af17ed8f9c4320c542124f9f70dd05382">GrammarFn</a>)(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>*, <span class="keywordtype">bool</span> canAssign);</div>
<div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160; </div>
<div class="line"><a name="l01736"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#a3c508872fab66896719e75ae583758d9"> 1736</a></span>&#160;<span class="keyword">typedef</span> void (*<a class="code" href="../../d4/de2/wren__compiler_8c.html#a3c508872fab66896719e75ae583758d9">SignatureFn</a>)(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler, Signature* signature);</div>
<div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160; </div>
<div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct</span></div>
<div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;{</div>
<div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#af17ed8f9c4320c542124f9f70dd05382">GrammarFn</a> <a class="code" href="../../df/d75/receiver-less_01calls_8txt.html#a129a3e5535abc54e9be509a15befda36">prefix</a>;</div>
<div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#af17ed8f9c4320c542124f9f70dd05382">GrammarFn</a> infix;</div>
<div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a3c508872fab66896719e75ae583758d9">SignatureFn</a> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a280648a47237a52319d293ace8edb7c8">method</a>;</div>
<div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa4e7d1a473d0280792d98ddb184d3006">Precedence</a> precedence;</div>
<div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="../../d4/de2/wren__compiler_8c.html#a59935c559e6df5f8a5f95110a971014d">name</a>;</div>
<div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;} GrammarRule;</div>
<div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160; </div>
<div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;<span class="comment">// Forward declarations since the grammar is recursive.</span></div>
<div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;<span class="keyword">static</span> GrammarRule* <a class="code" href="../../d4/de2/wren__compiler_8c.html#a5ab3a18d8b41f2391de63d94f75d887f">getRule</a>(<a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921">TokenType</a> type);</div>
<div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#ac20f67474558b6bf12fd74dd573ee7af">expression</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler);</div>
<div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a1b50adda3f611e35b1bf68776af68f6d">statement</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler);</div>
<div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a3909aa8ee9218228fe302cab2e0d5d2f">definition</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler);</div>
<div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a8dfb172d48944ba16bc5531170b66fe7">parsePrecedence</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa4e7d1a473d0280792d98ddb184d3006">Precedence</a> precedence);</div>
<div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160; </div>
<div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;<span class="comment">// Replaces the placeholder argument for a previous CODE_JUMP or CODE_JUMP_IF</span></div>
<div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;<span class="comment">// instruction with an offset that jumps to the current end of bytecode.</span></div>
<div class="line"><a name="l01756"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#a51f59acfb3ac3a9b347ed8fd5086ab46"> 1756</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a51f59acfb3ac3a9b347ed8fd5086ab46">patchJump</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler, <span class="keywordtype">int</span> offset)</div>
<div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;{</div>
<div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;  <span class="comment">// -2 to adjust for the bytecode for the jump offset itself.</span></div>
<div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;  <span class="keywordtype">int</span> jump = compiler-&gt;fn-&gt;code.count - offset - 2;</div>
<div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;  <span class="keywordflow">if</span> (jump &gt; <a class="code" href="../../d4/de2/wren__compiler_8c.html#a9f6b2894f12ed04b498c982012563dd0">MAX_JUMP</a>) <a class="code" href="../../d4/de2/wren__compiler_8c.html#ae74f1b74c02154518d7162a728d6118a">error</a>(compiler, <span class="stringliteral">&quot;Too much code to jump over.&quot;</span>);</div>
<div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160; </div>
<div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;  compiler-&gt;fn-&gt;code.data[offset] = (jump &gt;&gt; 8) &amp; 0xff;</div>
<div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;  compiler-&gt;fn-&gt;code.data[offset + 1] = jump &amp; 0xff;</div>
<div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;}</div>
<div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160; </div>
<div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;<span class="comment">// Parses a block body, after the initial &quot;{&quot; has been consumed.</span></div>
<div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;<span class="comment">// Returns true if it was a expression body, false if it was a statement body.</span></div>
<div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;<span class="comment">// (More precisely, returns true if a value was left on the stack. An empty</span></div>
<div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;<span class="comment">// block returns false.)</span></div>
<div class="line"><a name="l01771"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#ad911c5983e96a9527dac91f1c86607ec"> 1771</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#ad911c5983e96a9527dac91f1c86607ec">finishBlock</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler)</div>
<div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;{</div>
<div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;  <span class="comment">// Empty blocks do nothing.</span></div>
<div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d4/de2/wren__compiler_8c.html#af4fe195796c3e700b61d62dafd263295">match</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a1c897c05771e2ebb01729d415d99308c">TOKEN_RIGHT_BRACE</a>)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160; </div>
<div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;  <span class="comment">// If there&#39;s no line after the &quot;{&quot;, it&#39;s a single-expression body.</span></div>
<div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="../../d4/de2/wren__compiler_8c.html#a0c05f397ec8eb9dd3f5994287510b132">matchLine</a>(compiler))</div>
<div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;  {</div>
<div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#ac20f67474558b6bf12fd74dd573ee7af">expression</a>(compiler);</div>
<div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#aed515d74eb0faafbaa8d63f05daf90b9">consume</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a1c897c05771e2ebb01729d415d99308c">TOKEN_RIGHT_BRACE</a>, <span class="stringliteral">&quot;Expect &#39;}&#39; at end of block.&quot;</span>);</div>
<div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;  }</div>
<div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160; </div>
<div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;  <span class="comment">// Empty blocks (with just a newline inside) do nothing.</span></div>
<div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d4/de2/wren__compiler_8c.html#af4fe195796c3e700b61d62dafd263295">match</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a1c897c05771e2ebb01729d415d99308c">TOKEN_RIGHT_BRACE</a>)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160; </div>
<div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;  <span class="comment">// Compile the definition list.</span></div>
<div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;  <span class="keywordflow">do</span></div>
<div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;  {</div>
<div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#a3909aa8ee9218228fe302cab2e0d5d2f">definition</a>(compiler);</div>
<div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#a6f9526219e47ab23cd6b5db273d13c8a">consumeLine</a>(compiler, <span class="stringliteral">&quot;Expect newline after statement.&quot;</span>);</div>
<div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;  }</div>
<div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;  <span class="keywordflow">while</span> (<a class="code" href="../../d4/de2/wren__compiler_8c.html#a55ffa49d00ce173be5cbd76358588d08">peek</a>(compiler) != <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a1c897c05771e2ebb01729d415d99308c">TOKEN_RIGHT_BRACE</a> &amp;&amp; <a class="code" href="../../d4/de2/wren__compiler_8c.html#a55ffa49d00ce173be5cbd76358588d08">peek</a>(compiler) != <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921aa130df27256cd45f5781fc74deeb50dc">TOKEN_EOF</a>);</div>
<div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;  </div>
<div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aed515d74eb0faafbaa8d63f05daf90b9">consume</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a1c897c05771e2ebb01729d415d99308c">TOKEN_RIGHT_BRACE</a>, <span class="stringliteral">&quot;Expect &#39;}&#39; at end of block.&quot;</span>);</div>
<div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;}</div>
<div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160; </div>
<div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;<span class="comment">// Parses a method or function body, after the initial &quot;{&quot; has been consumed.</span></div>
<div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;<span class="comment">// If [Compiler-&gt;isInitializer] is `true`, this is the body of a constructor</span></div>
<div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;<span class="comment">// initializer. In that case, this adds the code to ensure it returns `this`.</span></div>
<div class="line"><a name="l01803"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#ac1514744dedaa4c087738a38405e3778"> 1803</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#ac1514744dedaa4c087738a38405e3778">finishBody</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler)</div>
<div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;{</div>
<div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;  <span class="keywordtype">bool</span> isExpressionBody = <a class="code" href="../../d4/de2/wren__compiler_8c.html#ad911c5983e96a9527dac91f1c86607ec">finishBlock</a>(compiler);</div>
<div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160; </div>
<div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;  <span class="keywordflow">if</span> (compiler-&gt;isInitializer)</div>
<div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;  {</div>
<div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;    <span class="comment">// If the initializer body evaluates to a value, discard it.</span></div>
<div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;    <span class="keywordflow">if</span> (isExpressionBody) <a class="code" href="../../d4/de2/wren__compiler_8c.html#a9cfaefaddfdf6eff5163d9638d141200">emitOp</a>(compiler, CODE_POP);</div>
<div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160; </div>
<div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;    <span class="comment">// The receiver is always stored in the first local slot.</span></div>
<div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#a9cfaefaddfdf6eff5163d9638d141200">emitOp</a>(compiler, CODE_LOAD_LOCAL_0);</div>
<div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;  }</div>
<div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!isExpressionBody)</div>
<div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;  {</div>
<div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;    <span class="comment">// Implicitly return null in statement bodies.</span></div>
<div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#a9cfaefaddfdf6eff5163d9638d141200">emitOp</a>(compiler, CODE_NULL);</div>
<div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;  }</div>
<div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160; </div>
<div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a9cfaefaddfdf6eff5163d9638d141200">emitOp</a>(compiler, CODE_RETURN);</div>
<div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;}</div>
<div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160; </div>
<div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;<span class="comment">// The VM can only handle a certain number of parameters, so check that we</span></div>
<div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;<span class="comment">// haven&#39;t exceeded that and give a usable error.</span></div>
<div class="line"><a name="l01826"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#a6d53c228b441f96cc87afd94542c8152"> 1826</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a6d53c228b441f96cc87afd94542c8152">validateNumParameters</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler, <span class="keywordtype">int</span> numArgs)</div>
<div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;{</div>
<div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;  <span class="keywordflow">if</span> (numArgs == <a class="code" href="../../d3/d72/wren__common_8h.html#a68c7f0498bb1932350eb092be1b5e912">MAX_PARAMETERS</a> + 1)</div>
<div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;  {</div>
<div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;    <span class="comment">// Only show an error at exactly max + 1 so that we can keep parsing the</span></div>
<div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;    <span class="comment">// parameters and minimize cascaded errors.</span></div>
<div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#ae74f1b74c02154518d7162a728d6118a">error</a>(compiler, <span class="stringliteral">&quot;Methods cannot have more than %d parameters.&quot;</span>,</div>
<div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;          <a class="code" href="../../d3/d72/wren__common_8h.html#a68c7f0498bb1932350eb092be1b5e912">MAX_PARAMETERS</a>);</div>
<div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;  }</div>
<div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;}</div>
<div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160; </div>
<div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;<span class="comment">// Parses the rest of a comma-separated parameter list after the opening</span></div>
<div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;<span class="comment">// delimeter. Updates `arity` in [signature] with the number of parameters.</span></div>
<div class="line"><a name="l01839"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#aab6a09fed2816d59ff4ec4b2d3b00e3a"> 1839</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#aab6a09fed2816d59ff4ec4b2d3b00e3a">finishParameterList</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler, Signature* signature)</div>
<div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;{</div>
<div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;  <span class="keywordflow">do</span></div>
<div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;  {</div>
<div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#acbf1748d7e097833a292ee0caaa50d05">ignoreNewlines</a>(compiler);</div>
<div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#a6d53c228b441f96cc87afd94542c8152">validateNumParameters</a>(compiler, ++signature-&gt;arity);</div>
<div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160; </div>
<div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;    <span class="comment">// Define a local variable in the method for the parameter.</span></div>
<div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#ad162f798273bfdd4b16efc1ecc197ba3">declareNamedVariable</a>(compiler);</div>
<div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;  }</div>
<div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;  <span class="keywordflow">while</span> (<a class="code" href="../../d4/de2/wren__compiler_8c.html#af4fe195796c3e700b61d62dafd263295">match</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a8d265e17914bc733c8b9a880dd097a9e">TOKEN_COMMA</a>));</div>
<div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;}</div>
<div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160; </div>
<div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;<span class="comment">// Gets the symbol for a method [name] with [length].</span></div>
<div class="line"><a name="l01853"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#ad1e91368551c7720efd9105fc37570a1"> 1853</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#ad1e91368551c7720efd9105fc37570a1">methodSymbol</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler, <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="../../d4/de2/wren__compiler_8c.html#a59935c559e6df5f8a5f95110a971014d">name</a>, <span class="keywordtype">int</span> length)</div>
<div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;{</div>
<div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../de/d0d/wren__utils_8c.html#a6b05b8c90f08e2ad66ba510f591042c5">wrenSymbolTableEnsure</a>(compiler-&gt;parser-&gt;vm,</div>
<div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;      &amp;compiler-&gt;parser-&gt;vm-&gt;methodNames, <a class="code" href="../../d4/de2/wren__compiler_8c.html#a59935c559e6df5f8a5f95110a971014d">name</a>, length);</div>
<div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;}</div>
<div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160; </div>
<div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;<span class="comment">// Appends characters to [name] (and updates [length]) for [numParams] &quot;_&quot;</span></div>
<div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;<span class="comment">// surrounded by [leftBracket] and [rightBracket].</span></div>
<div class="line"><a name="l01861"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#afd4e5fb23443ab31b9160488d6de132c"> 1861</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#afd4e5fb23443ab31b9160488d6de132c">signatureParameterList</a>(<span class="keywordtype">char</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a59935c559e6df5f8a5f95110a971014d">name</a>[<a class="code" href="../../d3/d72/wren__common_8h.html#a163524fe2202302c975a36e392e8cade">MAX_METHOD_SIGNATURE</a>], <span class="keywordtype">int</span>* length,</div>
<div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;                                   <span class="keywordtype">int</span> numParams, <span class="keywordtype">char</span> leftBracket, <span class="keywordtype">char</span> rightBracket)</div>
<div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;{</div>
<div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a59935c559e6df5f8a5f95110a971014d">name</a>[(*length)++] = leftBracket;</div>
<div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160; </div>
<div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;  <span class="comment">// This function may be called with too many parameters. When that happens,</span></div>
<div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;  <span class="comment">// a compile error has already been reported, but we need to make sure we</span></div>
<div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;  <span class="comment">// don&#39;t overflow the string too, hence the MAX_PARAMETERS check.</span></div>
<div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; numParams &amp;&amp; i &lt; <a class="code" href="../../d3/d72/wren__common_8h.html#a68c7f0498bb1932350eb092be1b5e912">MAX_PARAMETERS</a>; i++)</div>
<div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;  {</div>
<div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;    <span class="keywordflow">if</span> (i &gt; 0) <a class="code" href="../../d4/de2/wren__compiler_8c.html#a59935c559e6df5f8a5f95110a971014d">name</a>[(*length)++] = <span class="charliteral">&#39;,&#39;</span>;</div>
<div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#a59935c559e6df5f8a5f95110a971014d">name</a>[(*length)++] = <span class="charliteral">&#39;_&#39;</span>;</div>
<div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;  }</div>
<div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a59935c559e6df5f8a5f95110a971014d">name</a>[(*length)++] = rightBracket;</div>
<div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;}</div>
<div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160; </div>
<div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;<span class="comment">// Fills [name] with the stringified version of [signature] and updates</span></div>
<div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;<span class="comment">// [length] to the resulting length.</span></div>
<div class="line"><a name="l01879"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#ac8d1d75280e54ef6c6d6367ff1f26aef"> 1879</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#ac8d1d75280e54ef6c6d6367ff1f26aef">signatureToString</a>(Signature* signature,</div>
<div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;                              <span class="keywordtype">char</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a59935c559e6df5f8a5f95110a971014d">name</a>[<a class="code" href="../../d3/d72/wren__common_8h.html#a163524fe2202302c975a36e392e8cade">MAX_METHOD_SIGNATURE</a>], <span class="keywordtype">int</span>* length)</div>
<div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;{</div>
<div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;  *length = 0;</div>
<div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160; </div>
<div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;  <span class="comment">// Build the full name from the signature.</span></div>
<div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;  memcpy(<a class="code" href="../../d4/de2/wren__compiler_8c.html#a59935c559e6df5f8a5f95110a971014d">name</a> + *length, signature-&gt;name, signature-&gt;length);</div>
<div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;  *length += signature-&gt;length;</div>
<div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160; </div>
<div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;  <span class="keywordflow">switch</span> (signature-&gt;type)</div>
<div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;  {</div>
<div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a7456a1be27da2089f984a0ede62c6c50af379038c458f7331b34fc5f3a05bea1b">SIG_METHOD</a>:</div>
<div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;      <a class="code" href="../../d4/de2/wren__compiler_8c.html#afd4e5fb23443ab31b9160488d6de132c">signatureParameterList</a>(<a class="code" href="../../d4/de2/wren__compiler_8c.html#a59935c559e6df5f8a5f95110a971014d">name</a>, length, signature-&gt;arity, <span class="charliteral">&#39;(&#39;</span>, <span class="charliteral">&#39;)&#39;</span>);</div>
<div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160; </div>
<div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a7456a1be27da2089f984a0ede62c6c50a886e5cbc219aebd4f2677c108af4f769">SIG_GETTER</a>:</div>
<div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;      <span class="comment">// The signature is just the name.</span></div>
<div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160; </div>
<div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a7456a1be27da2089f984a0ede62c6c50a3c6a70ee605e103ae81714939f123c44">SIG_SETTER</a>:</div>
<div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;      <a class="code" href="../../d4/de2/wren__compiler_8c.html#a59935c559e6df5f8a5f95110a971014d">name</a>[(*length)++] = <span class="charliteral">&#39;=&#39;</span>;</div>
<div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;      <a class="code" href="../../d4/de2/wren__compiler_8c.html#afd4e5fb23443ab31b9160488d6de132c">signatureParameterList</a>(<a class="code" href="../../d4/de2/wren__compiler_8c.html#a59935c559e6df5f8a5f95110a971014d">name</a>, length, 1, <span class="charliteral">&#39;(&#39;</span>, <span class="charliteral">&#39;)&#39;</span>);</div>
<div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160; </div>
<div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a7456a1be27da2089f984a0ede62c6c50a9f38bc394cbcd1405be8094564da7324">SIG_SUBSCRIPT</a>:</div>
<div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;      <a class="code" href="../../d4/de2/wren__compiler_8c.html#afd4e5fb23443ab31b9160488d6de132c">signatureParameterList</a>(<a class="code" href="../../d4/de2/wren__compiler_8c.html#a59935c559e6df5f8a5f95110a971014d">name</a>, length, signature-&gt;arity, <span class="charliteral">&#39;[&#39;</span>, <span class="charliteral">&#39;]&#39;</span>);</div>
<div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160; </div>
<div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a7456a1be27da2089f984a0ede62c6c50ae0dd8195094045c31d6456d0838c8020">SIG_SUBSCRIPT_SETTER</a>:</div>
<div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;      <a class="code" href="../../d4/de2/wren__compiler_8c.html#afd4e5fb23443ab31b9160488d6de132c">signatureParameterList</a>(<a class="code" href="../../d4/de2/wren__compiler_8c.html#a59935c559e6df5f8a5f95110a971014d">name</a>, length, signature-&gt;arity - 1, <span class="charliteral">&#39;[&#39;</span>, <span class="charliteral">&#39;]&#39;</span>);</div>
<div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;      <a class="code" href="../../d4/de2/wren__compiler_8c.html#a59935c559e6df5f8a5f95110a971014d">name</a>[(*length)++] = <span class="charliteral">&#39;=&#39;</span>;</div>
<div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;      <a class="code" href="../../d4/de2/wren__compiler_8c.html#afd4e5fb23443ab31b9160488d6de132c">signatureParameterList</a>(<a class="code" href="../../d4/de2/wren__compiler_8c.html#a59935c559e6df5f8a5f95110a971014d">name</a>, length, 1, <span class="charliteral">&#39;(&#39;</span>, <span class="charliteral">&#39;)&#39;</span>);</div>
<div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;      </div>
<div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a7456a1be27da2089f984a0ede62c6c50acc229831cb9cfa74b1ad2d11a37fe214">SIG_INITIALIZER</a>:</div>
<div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;      memcpy(<a class="code" href="../../d4/de2/wren__compiler_8c.html#a59935c559e6df5f8a5f95110a971014d">name</a>, <span class="stringliteral">&quot;init &quot;</span>, 5);</div>
<div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;      memcpy(<a class="code" href="../../d4/de2/wren__compiler_8c.html#a59935c559e6df5f8a5f95110a971014d">name</a> + 5, signature-&gt;name, signature-&gt;length);</div>
<div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;      *length = 5 + signature-&gt;length;</div>
<div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;      <a class="code" href="../../d4/de2/wren__compiler_8c.html#afd4e5fb23443ab31b9160488d6de132c">signatureParameterList</a>(<a class="code" href="../../d4/de2/wren__compiler_8c.html#a59935c559e6df5f8a5f95110a971014d">name</a>, length, signature-&gt;arity, <span class="charliteral">&#39;(&#39;</span>, <span class="charliteral">&#39;)&#39;</span>);</div>
<div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;  }</div>
<div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160; </div>
<div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a59935c559e6df5f8a5f95110a971014d">name</a>[*length] = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;}</div>
<div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160; </div>
<div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;<span class="comment">// Gets the symbol for a method with [signature].</span></div>
<div class="line"><a name="l01925"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#aeca856979ea544d751ca03e0f3b9204c"> 1925</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#aeca856979ea544d751ca03e0f3b9204c">signatureSymbol</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler, Signature* signature)</div>
<div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;{</div>
<div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;  <span class="comment">// Build the full name from the signature.</span></div>
<div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;  <span class="keywordtype">char</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a59935c559e6df5f8a5f95110a971014d">name</a>[<a class="code" href="../../d3/d72/wren__common_8h.html#a163524fe2202302c975a36e392e8cade">MAX_METHOD_SIGNATURE</a>];</div>
<div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;  <span class="keywordtype">int</span> length;</div>
<div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#ac8d1d75280e54ef6c6d6367ff1f26aef">signatureToString</a>(signature, <a class="code" href="../../d4/de2/wren__compiler_8c.html#a59935c559e6df5f8a5f95110a971014d">name</a>, &amp;length);</div>
<div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160; </div>
<div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#ad1e91368551c7720efd9105fc37570a1">methodSymbol</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#a59935c559e6df5f8a5f95110a971014d">name</a>, length);</div>
<div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;}</div>
<div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160; </div>
<div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;<span class="comment">// Returns a signature with [type] whose name is from the last consumed token.</span></div>
<div class="line"><a name="l01936"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#a990f92b1a0017c13a94a4c02f5d736bc"> 1936</a></span>&#160;<span class="keyword">static</span> Signature <a class="code" href="../../d4/de2/wren__compiler_8c.html#a990f92b1a0017c13a94a4c02f5d736bc">signatureFromToken</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#a7456a1be27da2089f984a0ede62c6c50">SignatureType</a> type)</div>
<div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;{</div>
<div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;  Signature signature;</div>
<div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;  </div>
<div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;  <span class="comment">// Get the token for the method name.</span></div>
<div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;  Token* <a class="code" href="../../dd/dbe/svc_serial_command_interface_8cpp.html#a1d71425d9df28667d528833a4db10432">token</a> = &amp;compiler-&gt;parser-&gt;previous;</div>
<div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;  signature.name = <a class="code" href="../../dd/dbe/svc_serial_command_interface_8cpp.html#a1d71425d9df28667d528833a4db10432">token</a>-&gt;start;</div>
<div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;  signature.length = <a class="code" href="../../dd/dbe/svc_serial_command_interface_8cpp.html#a1d71425d9df28667d528833a4db10432">token</a>-&gt;length;</div>
<div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;  signature.type = type;</div>
<div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;  signature.arity = 0;</div>
<div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160; </div>
<div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;  <span class="keywordflow">if</span> (signature.length &gt; <a class="code" href="../../d3/d72/wren__common_8h.html#ae9f869779a6bca3e8df7e8d7f0ccb0a6">MAX_METHOD_NAME</a>)</div>
<div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;  {</div>
<div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#ae74f1b74c02154518d7162a728d6118a">error</a>(compiler, <span class="stringliteral">&quot;Method names cannot be longer than %d characters.&quot;</span>,</div>
<div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;          <a class="code" href="../../d3/d72/wren__common_8h.html#ae9f869779a6bca3e8df7e8d7f0ccb0a6">MAX_METHOD_NAME</a>);</div>
<div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;    signature.length = <a class="code" href="../../d3/d72/wren__common_8h.html#ae9f869779a6bca3e8df7e8d7f0ccb0a6">MAX_METHOD_NAME</a>;</div>
<div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;  }</div>
<div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;  </div>
<div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;  <span class="keywordflow">return</span> signature;</div>
<div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;}</div>
<div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160; </div>
<div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;<span class="comment">// Parses a comma-separated list of arguments. Modifies [signature] to include</span></div>
<div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;<span class="comment">// the arity of the argument list.</span></div>
<div class="line"><a name="l01959"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#ad9ec60a22d39b63da0a035113d8a39d0"> 1959</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#ad9ec60a22d39b63da0a035113d8a39d0">finishArgumentList</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler, Signature* signature)</div>
<div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;{</div>
<div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;  <span class="keywordflow">do</span></div>
<div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;  {</div>
<div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#acbf1748d7e097833a292ee0caaa50d05">ignoreNewlines</a>(compiler);</div>
<div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#a6d53c228b441f96cc87afd94542c8152">validateNumParameters</a>(compiler, ++signature-&gt;arity);</div>
<div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#ac20f67474558b6bf12fd74dd573ee7af">expression</a>(compiler);</div>
<div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;  }</div>
<div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;  <span class="keywordflow">while</span> (<a class="code" href="../../d4/de2/wren__compiler_8c.html#af4fe195796c3e700b61d62dafd263295">match</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a8d265e17914bc733c8b9a880dd097a9e">TOKEN_COMMA</a>));</div>
<div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160; </div>
<div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;  <span class="comment">// Allow a newline before the closing delimiter.</span></div>
<div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#acbf1748d7e097833a292ee0caaa50d05">ignoreNewlines</a>(compiler);</div>
<div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;}</div>
<div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160; </div>
<div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;<span class="comment">// Compiles a method call with [signature] using [instruction].</span></div>
<div class="line"><a name="l01974"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#a38d81393ddf947ea59ad1d15eaa868cf"> 1974</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a38d81393ddf947ea59ad1d15eaa868cf">callSignature</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler, <a class="code" href="../../d5/db1/wren__vm_8h.html#af31477bc48f67856bedb0fa8e5b5281d">Code</a> instruction,</div>
<div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;                          Signature* signature)</div>
<div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;{</div>
<div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;  <span class="keywordtype">int</span> symbol = <a class="code" href="../../d4/de2/wren__compiler_8c.html#aeca856979ea544d751ca03e0f3b9204c">signatureSymbol</a>(compiler, signature);</div>
<div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a3a17c9fef3d6388b2192ae1ce77483c1">emitShortArg</a>(compiler, (<a class="code" href="../../d5/db1/wren__vm_8h.html#af31477bc48f67856bedb0fa8e5b5281d">Code</a>)(instruction + signature-&gt;arity), symbol);</div>
<div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160; </div>
<div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;  <span class="keywordflow">if</span> (instruction == CODE_SUPER_0)</div>
<div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;  {</div>
<div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;    <span class="comment">// Super calls need to be statically bound to the class&#39;s superclass. This</span></div>
<div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;    <span class="comment">// ensures we call the right method even when a method containing a super</span></div>
<div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;    <span class="comment">// call is inherited by another subclass.</span></div>
<div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;    <span class="comment">// We bind it at class definition time by storing a reference to the</span></div>
<div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;    <span class="comment">// superclass in a constant. So, here, we create a slot in the constant</span></div>
<div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;    <span class="comment">// table and store NULL in it. When the method is bound, we&#39;ll look up the</span></div>
<div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;    <span class="comment">// superclass then and store it in the constant slot.</span></div>
<div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#ab2a608b8c30efb11ff62686f61b95c05">emitShort</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#a0dc46acbdd511af1c3de1a937dca02b3">addConstant</a>(compiler, <a class="code" href="../../d2/d0a/wren__value_8h.html#afc64b30e282747645e8e6db5023797b7">NULL_VAL</a>));</div>
<div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;  }</div>
<div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;}</div>
<div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160; </div>
<div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;<span class="comment">// Compiles a method call with [numArgs] for a method with [name] with [length].</span></div>
<div class="line"><a name="l01995"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#a659fca4caa4720785ab7fbddcb247fb7"> 1995</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a659fca4caa4720785ab7fbddcb247fb7">callMethod</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler, <span class="keywordtype">int</span> numArgs, <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="../../d4/de2/wren__compiler_8c.html#a59935c559e6df5f8a5f95110a971014d">name</a>,</div>
<div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;                       <span class="keywordtype">int</span> length)</div>
<div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;{</div>
<div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;  <span class="keywordtype">int</span> symbol = <a class="code" href="../../d4/de2/wren__compiler_8c.html#ad1e91368551c7720efd9105fc37570a1">methodSymbol</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#a59935c559e6df5f8a5f95110a971014d">name</a>, length);</div>
<div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a3a17c9fef3d6388b2192ae1ce77483c1">emitShortArg</a>(compiler, (<a class="code" href="../../d5/db1/wren__vm_8h.html#af31477bc48f67856bedb0fa8e5b5281d">Code</a>)(CODE_CALL_0 + numArgs), symbol);</div>
<div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;}</div>
<div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160; </div>
<div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;<span class="comment">// Compiles an (optional) argument list for a method call with [methodSignature]</span></div>
<div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;<span class="comment">// and then calls it.</span></div>
<div class="line"><a name="l02004"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#a7427f00898251d026c3b69ab90b92ed6"> 2004</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a7427f00898251d026c3b69ab90b92ed6">methodCall</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler, <a class="code" href="../../d5/db1/wren__vm_8h.html#af31477bc48f67856bedb0fa8e5b5281d">Code</a> instruction,</div>
<div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;                       Signature* signature)</div>
<div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;{</div>
<div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;  <span class="comment">// Make a new signature that contains the updated arity and type based on</span></div>
<div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;  <span class="comment">// the arguments we find.</span></div>
<div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;  Signature called = { signature-&gt;name, signature-&gt;length, <a class="code" href="../../d4/de2/wren__compiler_8c.html#a7456a1be27da2089f984a0ede62c6c50a886e5cbc219aebd4f2677c108af4f769">SIG_GETTER</a>, 0 };</div>
<div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160; </div>
<div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;  <span class="comment">// Parse the argument list, if any.</span></div>
<div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d4/de2/wren__compiler_8c.html#af4fe195796c3e700b61d62dafd263295">match</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921ab958e67632477fb20b223edfef5a4a3f">TOKEN_LEFT_PAREN</a>))</div>
<div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;  {</div>
<div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;    called.type = <a class="code" href="../../d4/de2/wren__compiler_8c.html#a7456a1be27da2089f984a0ede62c6c50af379038c458f7331b34fc5f3a05bea1b">SIG_METHOD</a>;</div>
<div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160; </div>
<div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;    <span class="comment">// Allow new line before an empty argument list</span></div>
<div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#acbf1748d7e097833a292ee0caaa50d05">ignoreNewlines</a>(compiler);</div>
<div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160; </div>
<div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;    <span class="comment">// Allow empty an argument list.</span></div>
<div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d4/de2/wren__compiler_8c.html#a55ffa49d00ce173be5cbd76358588d08">peek</a>(compiler) != <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a7db8f1fe352e6cf1ed6b880432b585d5">TOKEN_RIGHT_PAREN</a>)</div>
<div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;    {</div>
<div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;      <a class="code" href="../../d4/de2/wren__compiler_8c.html#ad9ec60a22d39b63da0a035113d8a39d0">finishArgumentList</a>(compiler, &amp;called);</div>
<div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;    }</div>
<div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#aed515d74eb0faafbaa8d63f05daf90b9">consume</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a7db8f1fe352e6cf1ed6b880432b585d5">TOKEN_RIGHT_PAREN</a>, <span class="stringliteral">&quot;Expect &#39;)&#39; after arguments.&quot;</span>);</div>
<div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;  }</div>
<div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160; </div>
<div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;  <span class="comment">// Parse the block argument, if any.</span></div>
<div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d4/de2/wren__compiler_8c.html#af4fe195796c3e700b61d62dafd263295">match</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921abb75564bfe995225a6d177446540c352">TOKEN_LEFT_BRACE</a>))</div>
<div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;  {</div>
<div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;    <span class="comment">// Include the block argument in the arity.</span></div>
<div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;    called.type = <a class="code" href="../../d4/de2/wren__compiler_8c.html#a7456a1be27da2089f984a0ede62c6c50af379038c458f7331b34fc5f3a05bea1b">SIG_METHOD</a>;</div>
<div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;    called.arity++;</div>
<div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160; </div>
<div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;    <a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a> fnCompiler;</div>
<div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#a9cd38e83591679b9d3f9079885746744">initCompiler</a>(&amp;fnCompiler, compiler-&gt;parser, compiler, <span class="keyword">false</span>);</div>
<div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160; </div>
<div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;    <span class="comment">// Make a dummy signature to track the arity.</span></div>
<div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;    Signature fnSignature = { <span class="stringliteral">&quot;&quot;</span>, 0, <a class="code" href="../../d4/de2/wren__compiler_8c.html#a7456a1be27da2089f984a0ede62c6c50af379038c458f7331b34fc5f3a05bea1b">SIG_METHOD</a>, 0 };</div>
<div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160; </div>
<div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;    <span class="comment">// Parse the parameter list, if any.</span></div>
<div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d4/de2/wren__compiler_8c.html#af4fe195796c3e700b61d62dafd263295">match</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a93000ce4e0f00f6f294a98192f705910">TOKEN_PIPE</a>))</div>
<div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;    {</div>
<div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;      <a class="code" href="../../d4/de2/wren__compiler_8c.html#aab6a09fed2816d59ff4ec4b2d3b00e3a">finishParameterList</a>(&amp;fnCompiler, &amp;fnSignature);</div>
<div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;      <a class="code" href="../../d4/de2/wren__compiler_8c.html#aed515d74eb0faafbaa8d63f05daf90b9">consume</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a93000ce4e0f00f6f294a98192f705910">TOKEN_PIPE</a>, <span class="stringliteral">&quot;Expect &#39;|&#39; after function parameters.&quot;</span>);</div>
<div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;    }</div>
<div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160; </div>
<div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;    fnCompiler.fn-&gt;arity = fnSignature.arity;</div>
<div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160; </div>
<div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#ac1514744dedaa4c087738a38405e3778">finishBody</a>(&amp;fnCompiler);</div>
<div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160; </div>
<div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;    <span class="comment">// Name the function based on the method its passed to.</span></div>
<div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;    <span class="keywordtype">char</span> blockName[<a class="code" href="../../d3/d72/wren__common_8h.html#a163524fe2202302c975a36e392e8cade">MAX_METHOD_SIGNATURE</a> + 15];</div>
<div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;    <span class="keywordtype">int</span> blockLength;</div>
<div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#ac8d1d75280e54ef6c6d6367ff1f26aef">signatureToString</a>(&amp;called, blockName, &amp;blockLength);</div>
<div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;    memmove(blockName + blockLength, <span class="stringliteral">&quot; block argument&quot;</span>, 16);</div>
<div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160; </div>
<div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#a3d81a8f8607a9b8236f1e6e49410581a">endCompiler</a>(&amp;fnCompiler, blockName, blockLength + 15);</div>
<div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;  }</div>
<div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160; </div>
<div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;  <span class="comment">// TODO: Allow Grace-style mixfix methods?</span></div>
<div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160; </div>
<div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;  <span class="comment">// If this is a super() call for an initializer, make sure we got an actual</span></div>
<div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;  <span class="comment">// argument list.</span></div>
<div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;  <span class="keywordflow">if</span> (signature-&gt;type == <a class="code" href="../../d4/de2/wren__compiler_8c.html#a7456a1be27da2089f984a0ede62c6c50acc229831cb9cfa74b1ad2d11a37fe214">SIG_INITIALIZER</a>)</div>
<div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;  {</div>
<div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;    <span class="keywordflow">if</span> (called.type != <a class="code" href="../../d4/de2/wren__compiler_8c.html#a7456a1be27da2089f984a0ede62c6c50af379038c458f7331b34fc5f3a05bea1b">SIG_METHOD</a>)</div>
<div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;    {</div>
<div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;      <a class="code" href="../../d4/de2/wren__compiler_8c.html#ae74f1b74c02154518d7162a728d6118a">error</a>(compiler, <span class="stringliteral">&quot;A superclass constructor must have an argument list.&quot;</span>);</div>
<div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;    }</div>
<div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;    </div>
<div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;    called.type = <a class="code" href="../../d4/de2/wren__compiler_8c.html#a7456a1be27da2089f984a0ede62c6c50acc229831cb9cfa74b1ad2d11a37fe214">SIG_INITIALIZER</a>;</div>
<div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;  }</div>
<div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;  </div>
<div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a38d81393ddf947ea59ad1d15eaa868cf">callSignature</a>(compiler, instruction, &amp;called);</div>
<div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;}</div>
<div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160; </div>
<div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;<span class="comment">// Compiles a call whose name is the previously consumed token. This includes</span></div>
<div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;<span class="comment">// getters, method calls with arguments, and setter calls.</span></div>
<div class="line"><a name="l02079"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#a16fd4c5c52c951aed01a1d0fcd6d71aa"> 2079</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a16fd4c5c52c951aed01a1d0fcd6d71aa">namedCall</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler, <span class="keywordtype">bool</span> canAssign, <a class="code" href="../../d5/db1/wren__vm_8h.html#af31477bc48f67856bedb0fa8e5b5281d">Code</a> instruction)</div>
<div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;{</div>
<div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;  <span class="comment">// Get the token for the method name.</span></div>
<div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;  Signature signature = <a class="code" href="../../d4/de2/wren__compiler_8c.html#a990f92b1a0017c13a94a4c02f5d736bc">signatureFromToken</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#a7456a1be27da2089f984a0ede62c6c50a886e5cbc219aebd4f2677c108af4f769">SIG_GETTER</a>);</div>
<div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160; </div>
<div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;  <span class="keywordflow">if</span> (canAssign &amp;&amp; <a class="code" href="../../d4/de2/wren__compiler_8c.html#af4fe195796c3e700b61d62dafd263295">match</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921aeba19c29eb600289d1e973bf335139fe">TOKEN_EQ</a>))</div>
<div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;  {</div>
<div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#acbf1748d7e097833a292ee0caaa50d05">ignoreNewlines</a>(compiler);</div>
<div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160; </div>
<div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;    <span class="comment">// Build the setter signature.</span></div>
<div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;    signature.type = <a class="code" href="../../d4/de2/wren__compiler_8c.html#a7456a1be27da2089f984a0ede62c6c50a3c6a70ee605e103ae81714939f123c44">SIG_SETTER</a>;</div>
<div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;    signature.arity = 1;</div>
<div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160; </div>
<div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;    <span class="comment">// Compile the assigned value.</span></div>
<div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#ac20f67474558b6bf12fd74dd573ee7af">expression</a>(compiler);</div>
<div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#a38d81393ddf947ea59ad1d15eaa868cf">callSignature</a>(compiler, instruction, &amp;signature);</div>
<div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;  }</div>
<div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;  {</div>
<div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#a7427f00898251d026c3b69ab90b92ed6">methodCall</a>(compiler, instruction, &amp;signature);</div>
<div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#a12bdbdb1e45706c48ef016e52b18c21a">allowLineBeforeDot</a>(compiler);</div>
<div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;  }</div>
<div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;}</div>
<div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160; </div>
<div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;<span class="comment">// Emits the code to load [variable] onto the stack.</span></div>
<div class="line"><a name="l02104"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#aac2c091d1986fa181a49452185f36799"> 2104</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#aac2c091d1986fa181a49452185f36799">loadVariable</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler, Variable variable)</div>
<div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;{</div>
<div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;  <span class="keywordflow">switch</span> (variable.scope)</div>
<div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;  {</div>
<div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#aaecc53892786f2fa11e682f633af84c6af828bc82c537119c89b55d2db41ec75b">SCOPE_LOCAL</a>:</div>
<div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;      <a class="code" href="../../d4/de2/wren__compiler_8c.html#a63123f2816d2d9f3a7c145bd4e4fe81f">loadLocal</a>(compiler, variable.index);</div>
<div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#aaecc53892786f2fa11e682f633af84c6a9c17ce3e01d23ef646abc7a330a1244a">SCOPE_UPVALUE</a>:</div>
<div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;      <a class="code" href="../../d4/de2/wren__compiler_8c.html#a57b01730ba60c3cf3d1237cfbd32b9cc">emitByteArg</a>(compiler, CODE_LOAD_UPVALUE, variable.index);</div>
<div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#aaecc53892786f2fa11e682f633af84c6aa4cd1d716be5988e72bb08902f33270e">SCOPE_MODULE</a>:</div>
<div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;      <a class="code" href="../../d4/de2/wren__compiler_8c.html#a3a17c9fef3d6388b2192ae1ce77483c1">emitShortArg</a>(compiler, CODE_LOAD_MODULE_VAR, variable.index);</div>
<div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;      <a class="code" href="../../d3/d72/wren__common_8h.html#a0bc63b24b654ca433be7b97a3edde132">UNREACHABLE</a>();</div>
<div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;  }</div>
<div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;}</div>
<div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160; </div>
<div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;<span class="comment">// Loads the receiver of the currently enclosing method. Correctly handles</span></div>
<div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;<span class="comment">// functions defined inside methods.</span></div>
<div class="line"><a name="l02124"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#a8d337b902f95e30e2b5fcdbf11c20bfe"> 2124</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a8d337b902f95e30e2b5fcdbf11c20bfe">loadThis</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler)</div>
<div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;{</div>
<div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aac2c091d1986fa181a49452185f36799">loadVariable</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aeead4115d1ddc029dcd2a2b406cab6a9">resolveNonmodule</a>(compiler, <span class="stringliteral">&quot;this&quot;</span>, 4));</div>
<div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;}</div>
<div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160; </div>
<div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;<span class="comment">// Pushes the value for a module-level variable implicitly imported from core.</span></div>
<div class="line"><a name="l02130"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#aa30b2bee45b3b4a728ebac4fb0e5a82b"> 2130</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa30b2bee45b3b4a728ebac4fb0e5a82b">loadCoreVariable</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler, <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="../../d4/de2/wren__compiler_8c.html#a59935c559e6df5f8a5f95110a971014d">name</a>)</div>
<div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;{</div>
<div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;  <span class="keywordtype">int</span> symbol = <a class="code" href="../../de/d0d/wren__utils_8c.html#a2b92b4262704a7cebf6f3bd0a853b1eb">wrenSymbolTableFind</a>(&amp;compiler-&gt;parser-&gt;module-&gt;variableNames,</div>
<div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;                                   <a class="code" href="../../d4/de2/wren__compiler_8c.html#a59935c559e6df5f8a5f95110a971014d">name</a>, strlen(<a class="code" href="../../d4/de2/wren__compiler_8c.html#a59935c559e6df5f8a5f95110a971014d">name</a>));</div>
<div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;  <a class="code" href="../../d3/d72/wren__common_8h.html#aa06eedd6f738a415870e97a375337d51">ASSERT</a>(symbol != -1, <span class="stringliteral">&quot;Should have already defined core name.&quot;</span>);</div>
<div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a3a17c9fef3d6388b2192ae1ce77483c1">emitShortArg</a>(compiler, CODE_LOAD_MODULE_VAR, symbol);</div>
<div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;}</div>
<div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160; </div>
<div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;<span class="comment">// A parenthesized expression.</span></div>
<div class="line"><a name="l02139"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#a453c440b666fc199fe15ae4fc94b0eb8"> 2139</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a453c440b666fc199fe15ae4fc94b0eb8">grouping</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler, <span class="keywordtype">bool</span> canAssign)</div>
<div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;{</div>
<div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#ac20f67474558b6bf12fd74dd573ee7af">expression</a>(compiler);</div>
<div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aed515d74eb0faafbaa8d63f05daf90b9">consume</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a7db8f1fe352e6cf1ed6b880432b585d5">TOKEN_RIGHT_PAREN</a>, <span class="stringliteral">&quot;Expect &#39;)&#39; after expression.&quot;</span>);</div>
<div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;}</div>
<div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160; </div>
<div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;<span class="comment">// A list literal.</span></div>
<div class="line"><a name="l02146"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#a0a8cb504ca7e49b97ac975d128414786"> 2146</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a0a8cb504ca7e49b97ac975d128414786">list</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler, <span class="keywordtype">bool</span> canAssign)</div>
<div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;{</div>
<div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;  <span class="comment">// Instantiate a new list.</span></div>
<div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa30b2bee45b3b4a728ebac4fb0e5a82b">loadCoreVariable</a>(compiler, <span class="stringliteral">&quot;List&quot;</span>);</div>
<div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a659fca4caa4720785ab7fbddcb247fb7">callMethod</a>(compiler, 0, <span class="stringliteral">&quot;new()&quot;</span>, 5);</div>
<div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;  </div>
<div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;  <span class="comment">// Compile the list elements. Each one compiles to a &quot;.add()&quot; call.</span></div>
<div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;  <span class="keywordflow">do</span></div>
<div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;  {</div>
<div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#acbf1748d7e097833a292ee0caaa50d05">ignoreNewlines</a>(compiler);</div>
<div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160; </div>
<div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;    <span class="comment">// Stop if we hit the end of the list.</span></div>
<div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d4/de2/wren__compiler_8c.html#a55ffa49d00ce173be5cbd76358588d08">peek</a>(compiler) == <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921aa42fbee15a56484e7cc6daaaa552107a">TOKEN_RIGHT_BRACKET</a>) <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160; </div>
<div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;    <span class="comment">// The element.</span></div>
<div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#ac20f67474558b6bf12fd74dd573ee7af">expression</a>(compiler);</div>
<div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#a659fca4caa4720785ab7fbddcb247fb7">callMethod</a>(compiler, 1, <span class="stringliteral">&quot;addCore_(_)&quot;</span>, 11);</div>
<div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;  } <span class="keywordflow">while</span> (<a class="code" href="../../d4/de2/wren__compiler_8c.html#af4fe195796c3e700b61d62dafd263295">match</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a8d265e17914bc733c8b9a880dd097a9e">TOKEN_COMMA</a>));</div>
<div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160; </div>
<div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;  <span class="comment">// Allow newlines before the closing &#39;]&#39;.</span></div>
<div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#acbf1748d7e097833a292ee0caaa50d05">ignoreNewlines</a>(compiler);</div>
<div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aed515d74eb0faafbaa8d63f05daf90b9">consume</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921aa42fbee15a56484e7cc6daaaa552107a">TOKEN_RIGHT_BRACKET</a>, <span class="stringliteral">&quot;Expect &#39;]&#39; after list elements.&quot;</span>);</div>
<div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;}</div>
<div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160; </div>
<div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;<span class="comment">// A map literal.</span></div>
<div class="line"><a name="l02171"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#a590c72120bf1ccc844e8c2ba7a63445a"> 2171</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a590c72120bf1ccc844e8c2ba7a63445a">map</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler, <span class="keywordtype">bool</span> canAssign)</div>
<div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;{</div>
<div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;  <span class="comment">// Instantiate a new map.</span></div>
<div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa30b2bee45b3b4a728ebac4fb0e5a82b">loadCoreVariable</a>(compiler, <span class="stringliteral">&quot;Map&quot;</span>);</div>
<div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a659fca4caa4720785ab7fbddcb247fb7">callMethod</a>(compiler, 0, <span class="stringliteral">&quot;new()&quot;</span>, 5);</div>
<div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160; </div>
<div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;  <span class="comment">// Compile the map elements. Each one is compiled to just invoke the</span></div>
<div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;  <span class="comment">// subscript setter on the map.</span></div>
<div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;  <span class="keywordflow">do</span></div>
<div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;  {</div>
<div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#acbf1748d7e097833a292ee0caaa50d05">ignoreNewlines</a>(compiler);</div>
<div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160; </div>
<div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;    <span class="comment">// Stop if we hit the end of the map.</span></div>
<div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d4/de2/wren__compiler_8c.html#a55ffa49d00ce173be5cbd76358588d08">peek</a>(compiler) == <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a1c897c05771e2ebb01729d415d99308c">TOKEN_RIGHT_BRACE</a>) <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160; </div>
<div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;    <span class="comment">// The key.</span></div>
<div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#a8dfb172d48944ba16bc5531170b66fe7">parsePrecedence</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa4e7d1a473d0280792d98ddb184d3006a0f109c9eef878893165c6180c86caa96">PREC_UNARY</a>);</div>
<div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#aed515d74eb0faafbaa8d63f05daf90b9">consume</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a92a35ac6329421e77882bf3739a75e47">TOKEN_COLON</a>, <span class="stringliteral">&quot;Expect &#39;:&#39; after map key.&quot;</span>);</div>
<div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#acbf1748d7e097833a292ee0caaa50d05">ignoreNewlines</a>(compiler);</div>
<div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160; </div>
<div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;    <span class="comment">// The value.</span></div>
<div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#ac20f67474558b6bf12fd74dd573ee7af">expression</a>(compiler);</div>
<div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#a659fca4caa4720785ab7fbddcb247fb7">callMethod</a>(compiler, 2, <span class="stringliteral">&quot;addCore_(_,_)&quot;</span>, 13);</div>
<div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;  } <span class="keywordflow">while</span> (<a class="code" href="../../d4/de2/wren__compiler_8c.html#af4fe195796c3e700b61d62dafd263295">match</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a8d265e17914bc733c8b9a880dd097a9e">TOKEN_COMMA</a>));</div>
<div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160; </div>
<div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;  <span class="comment">// Allow newlines before the closing &#39;}&#39;.</span></div>
<div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#acbf1748d7e097833a292ee0caaa50d05">ignoreNewlines</a>(compiler);</div>
<div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aed515d74eb0faafbaa8d63f05daf90b9">consume</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a1c897c05771e2ebb01729d415d99308c">TOKEN_RIGHT_BRACE</a>, <span class="stringliteral">&quot;Expect &#39;}&#39; after map entries.&quot;</span>);</div>
<div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;}</div>
<div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160; </div>
<div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;<span class="comment">// Unary operators like `-foo`.</span></div>
<div class="line"><a name="l02202"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#aba0b44d974c3aaf9e72e55ce709cc5ac"> 2202</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#aba0b44d974c3aaf9e72e55ce709cc5ac">unaryOp</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler, <span class="keywordtype">bool</span> canAssign)</div>
<div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;{</div>
<div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;  GrammarRule* rule = <a class="code" href="../../d4/de2/wren__compiler_8c.html#a5ab3a18d8b41f2391de63d94f75d887f">getRule</a>(compiler-&gt;parser-&gt;previous.type);</div>
<div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160; </div>
<div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#acbf1748d7e097833a292ee0caaa50d05">ignoreNewlines</a>(compiler);</div>
<div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160; </div>
<div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;  <span class="comment">// Compile the argument.</span></div>
<div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a8dfb172d48944ba16bc5531170b66fe7">parsePrecedence</a>(compiler, (<a class="code" href="../../d4/de2/wren__compiler_8c.html#aa4e7d1a473d0280792d98ddb184d3006">Precedence</a>)(<a class="code" href="../../d4/de2/wren__compiler_8c.html#aa4e7d1a473d0280792d98ddb184d3006a0f109c9eef878893165c6180c86caa96">PREC_UNARY</a> + 1));</div>
<div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160; </div>
<div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;  <span class="comment">// Call the operator method on the left-hand side.</span></div>
<div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a659fca4caa4720785ab7fbddcb247fb7">callMethod</a>(compiler, 0, rule-&gt;name, 1);</div>
<div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;}</div>
<div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160; </div>
<div class="line"><a name="l02215"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#a2b984a98447b37936cb2339b07ba31a8"> 2215</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a2b984a98447b37936cb2339b07ba31a8">boolean</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler, <span class="keywordtype">bool</span> canAssign)</div>
<div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;{</div>
<div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a9cfaefaddfdf6eff5163d9638d141200">emitOp</a>(compiler,</div>
<div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;      compiler-&gt;parser-&gt;previous.type == <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a6aaf2e9d817fd7cd807c6fc2f6f6fe5c">TOKEN_FALSE</a> ? CODE_FALSE : CODE_TRUE);</div>
<div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;}</div>
<div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160; </div>
<div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;<span class="comment">// Walks the compiler chain to find the compiler for the nearest class</span></div>
<div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;<span class="comment">// enclosing this one. Returns NULL if not currently inside a class definition.</span></div>
<div class="line"><a name="l02223"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#aed2d1974206db7567f37dc7e9096f086"> 2223</a></span>&#160;<span class="keyword">static</span> <a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* <a class="code" href="../../d4/de2/wren__compiler_8c.html#aed2d1974206db7567f37dc7e9096f086">getEnclosingClassCompiler</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler)</div>
<div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;{</div>
<div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;  <span class="keywordflow">while</span> (compiler != <a class="code" href="../../da/d2d/_stdio_stream_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;  {</div>
<div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;    <span class="keywordflow">if</span> (compiler-&gt;enclosingClass != <a class="code" href="../../da/d2d/_stdio_stream_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) <span class="keywordflow">return</span> compiler;</div>
<div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;    compiler = compiler-&gt;parent;</div>
<div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;  }</div>
<div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160; </div>
<div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../da/d2d/_stdio_stream_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;}</div>
<div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160; </div>
<div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;<span class="comment">// Walks the compiler chain to find the nearest class enclosing this one.</span></div>
<div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;<span class="comment">// Returns NULL if not currently inside a class definition.</span></div>
<div class="line"><a name="l02236"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#ac5f5084320f6c2e1493095709ece0678"> 2236</a></span>&#160;<span class="keyword">static</span> ClassInfo* <a class="code" href="../../d4/de2/wren__compiler_8c.html#ac5f5084320f6c2e1493095709ece0678">getEnclosingClass</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler)</div>
<div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;{</div>
<div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;  compiler = <a class="code" href="../../d4/de2/wren__compiler_8c.html#aed2d1974206db7567f37dc7e9096f086">getEnclosingClassCompiler</a>(compiler);</div>
<div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;  <span class="keywordflow">return</span> compiler == <a class="code" href="../../da/d2d/_stdio_stream_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> ? <a class="code" href="../../da/d2d/_stdio_stream_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> : compiler-&gt;enclosingClass;</div>
<div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;}</div>
<div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160; </div>
<div class="line"><a name="l02242"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#add86bdd6e3897cf94eba510d97e12f25"> 2242</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#add86bdd6e3897cf94eba510d97e12f25">field</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler, <span class="keywordtype">bool</span> canAssign)</div>
<div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;{</div>
<div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;  <span class="comment">// Initialize it with a fake value so we can keep parsing and minimize the</span></div>
<div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;  <span class="comment">// number of cascaded errors.</span></div>
<div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#add86bdd6e3897cf94eba510d97e12f25">field</a> = <a class="code" href="../../d3/d72/wren__common_8h.html#a679dffecfb16ab6f5832ddf756b5fabd">MAX_FIELDS</a>;</div>
<div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160; </div>
<div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;  ClassInfo* enclosingClass = <a class="code" href="../../d4/de2/wren__compiler_8c.html#ac5f5084320f6c2e1493095709ece0678">getEnclosingClass</a>(compiler);</div>
<div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160; </div>
<div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;  <span class="keywordflow">if</span> (enclosingClass == <a class="code" href="../../da/d2d/_stdio_stream_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;  {</div>
<div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#ae74f1b74c02154518d7162a728d6118a">error</a>(compiler, <span class="stringliteral">&quot;Cannot reference a field outside of a class definition.&quot;</span>);</div>
<div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;  }</div>
<div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (enclosingClass-&gt;isForeign)</div>
<div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;  {</div>
<div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#ae74f1b74c02154518d7162a728d6118a">error</a>(compiler, <span class="stringliteral">&quot;Cannot define fields in a foreign class.&quot;</span>);</div>
<div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;  }</div>
<div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (enclosingClass-&gt;inStatic)</div>
<div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;  {</div>
<div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#ae74f1b74c02154518d7162a728d6118a">error</a>(compiler, <span class="stringliteral">&quot;Cannot use an instance field in a static method.&quot;</span>);</div>
<div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;  }</div>
<div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;  {</div>
<div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;    <span class="comment">// Look up the field, or implicitly define it.</span></div>
<div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#add86bdd6e3897cf94eba510d97e12f25">field</a> = <a class="code" href="../../de/d0d/wren__utils_8c.html#a6b05b8c90f08e2ad66ba510f591042c5">wrenSymbolTableEnsure</a>(compiler-&gt;parser-&gt;vm, &amp;enclosingClass-&gt;fields,</div>
<div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;        compiler-&gt;parser-&gt;previous.start,</div>
<div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;        compiler-&gt;parser-&gt;previous.length);</div>
<div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160; </div>
<div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d4/de2/wren__compiler_8c.html#add86bdd6e3897cf94eba510d97e12f25">field</a> &gt;= <a class="code" href="../../d3/d72/wren__common_8h.html#a679dffecfb16ab6f5832ddf756b5fabd">MAX_FIELDS</a>)</div>
<div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;    {</div>
<div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;      <a class="code" href="../../d4/de2/wren__compiler_8c.html#ae74f1b74c02154518d7162a728d6118a">error</a>(compiler, <span class="stringliteral">&quot;A class can only have %d fields.&quot;</span>, <a class="code" href="../../d3/d72/wren__common_8h.html#a679dffecfb16ab6f5832ddf756b5fabd">MAX_FIELDS</a>);</div>
<div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;    }</div>
<div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;  }</div>
<div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160; </div>
<div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;  <span class="comment">// If there&#39;s an &quot;=&quot; after a field name, it&#39;s an assignment.</span></div>
<div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;  <span class="keywordtype">bool</span> isLoad = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;  <span class="keywordflow">if</span> (canAssign &amp;&amp; <a class="code" href="../../d4/de2/wren__compiler_8c.html#af4fe195796c3e700b61d62dafd263295">match</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921aeba19c29eb600289d1e973bf335139fe">TOKEN_EQ</a>))</div>
<div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;  {</div>
<div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;    <span class="comment">// Compile the right-hand side.</span></div>
<div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#ac20f67474558b6bf12fd74dd573ee7af">expression</a>(compiler);</div>
<div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;    isLoad = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;  }</div>
<div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160; </div>
<div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;  <span class="comment">// If we&#39;re directly inside a method, use a more optimal instruction.</span></div>
<div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;  <span class="keywordflow">if</span> (compiler-&gt;parent != <a class="code" href="../../da/d2d/_stdio_stream_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> &amp;&amp;</div>
<div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;      compiler-&gt;parent-&gt;enclosingClass == enclosingClass)</div>
<div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;  {</div>
<div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#a57b01730ba60c3cf3d1237cfbd32b9cc">emitByteArg</a>(compiler, isLoad ? CODE_LOAD_FIELD_THIS : CODE_STORE_FIELD_THIS,</div>
<div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;                <a class="code" href="../../d4/de2/wren__compiler_8c.html#add86bdd6e3897cf94eba510d97e12f25">field</a>);</div>
<div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;  }</div>
<div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;  {</div>
<div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#a8d337b902f95e30e2b5fcdbf11c20bfe">loadThis</a>(compiler);</div>
<div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#a57b01730ba60c3cf3d1237cfbd32b9cc">emitByteArg</a>(compiler, isLoad ? CODE_LOAD_FIELD : CODE_STORE_FIELD, <a class="code" href="../../d4/de2/wren__compiler_8c.html#add86bdd6e3897cf94eba510d97e12f25">field</a>);</div>
<div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;  }</div>
<div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160; </div>
<div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a12bdbdb1e45706c48ef016e52b18c21a">allowLineBeforeDot</a>(compiler);</div>
<div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;}</div>
<div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160; </div>
<div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;<span class="comment">// Compiles a read or assignment to [variable].</span></div>
<div class="line"><a name="l02301"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#a792f34988d46a0659df39e49c9607880"> 2301</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a792f34988d46a0659df39e49c9607880">bareName</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler, <span class="keywordtype">bool</span> canAssign, Variable variable)</div>
<div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;{</div>
<div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;  <span class="comment">// If there&#39;s an &quot;=&quot; after a bare name, it&#39;s a variable assignment.</span></div>
<div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;  <span class="keywordflow">if</span> (canAssign &amp;&amp; <a class="code" href="../../d4/de2/wren__compiler_8c.html#af4fe195796c3e700b61d62dafd263295">match</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921aeba19c29eb600289d1e973bf335139fe">TOKEN_EQ</a>))</div>
<div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;  {</div>
<div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;    <span class="comment">// Compile the right-hand side.</span></div>
<div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#ac20f67474558b6bf12fd74dd573ee7af">expression</a>(compiler);</div>
<div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160; </div>
<div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;    <span class="comment">// Emit the store instruction.</span></div>
<div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;    <span class="keywordflow">switch</span> (variable.scope)</div>
<div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;    {</div>
<div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#aaecc53892786f2fa11e682f633af84c6af828bc82c537119c89b55d2db41ec75b">SCOPE_LOCAL</a>:</div>
<div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;        <a class="code" href="../../d4/de2/wren__compiler_8c.html#a57b01730ba60c3cf3d1237cfbd32b9cc">emitByteArg</a>(compiler, CODE_STORE_LOCAL, variable.index);</div>
<div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#aaecc53892786f2fa11e682f633af84c6a9c17ce3e01d23ef646abc7a330a1244a">SCOPE_UPVALUE</a>:</div>
<div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;        <a class="code" href="../../d4/de2/wren__compiler_8c.html#a57b01730ba60c3cf3d1237cfbd32b9cc">emitByteArg</a>(compiler, CODE_STORE_UPVALUE, variable.index);</div>
<div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#aaecc53892786f2fa11e682f633af84c6aa4cd1d716be5988e72bb08902f33270e">SCOPE_MODULE</a>:</div>
<div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;        <a class="code" href="../../d4/de2/wren__compiler_8c.html#a3a17c9fef3d6388b2192ae1ce77483c1">emitShortArg</a>(compiler, CODE_STORE_MODULE_VAR, variable.index);</div>
<div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;      <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;        <a class="code" href="../../d3/d72/wren__common_8h.html#a0bc63b24b654ca433be7b97a3edde132">UNREACHABLE</a>();</div>
<div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;    }</div>
<div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;  }</div>
<div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160; </div>
<div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;  <span class="comment">// Emit the load instruction.</span></div>
<div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aac2c091d1986fa181a49452185f36799">loadVariable</a>(compiler, variable);</div>
<div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160; </div>
<div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a12bdbdb1e45706c48ef016e52b18c21a">allowLineBeforeDot</a>(compiler);</div>
<div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;}</div>
<div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160; </div>
<div class="line"><a name="l02333"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#aa1f392a8806f59a267ba5c7b413b7577"> 2333</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa1f392a8806f59a267ba5c7b413b7577">staticField</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler, <span class="keywordtype">bool</span> canAssign)</div>
<div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;{</div>
<div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;  <a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* classCompiler = <a class="code" href="../../d4/de2/wren__compiler_8c.html#aed2d1974206db7567f37dc7e9096f086">getEnclosingClassCompiler</a>(compiler);</div>
<div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;  <span class="keywordflow">if</span> (classCompiler == <a class="code" href="../../da/d2d/_stdio_stream_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;  {</div>
<div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#ae74f1b74c02154518d7162a728d6118a">error</a>(compiler, <span class="stringliteral">&quot;Cannot use a static field outside of a class definition.&quot;</span>);</div>
<div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;  }</div>
<div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160; </div>
<div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;  <span class="comment">// Look up the name in the scope chain.</span></div>
<div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;  Token* <a class="code" href="../../dd/dbe/svc_serial_command_interface_8cpp.html#a1d71425d9df28667d528833a4db10432">token</a> = &amp;compiler-&gt;parser-&gt;previous;</div>
<div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160; </div>
<div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;  <span class="comment">// If this is the first time we&#39;ve seen this static field, implicitly</span></div>
<div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;  <span class="comment">// define it as a variable in the scope surrounding the class definition.</span></div>
<div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d4/de2/wren__compiler_8c.html#ac193a2eaa589f497f8147efe1dfca7a8">resolveLocal</a>(classCompiler, <a class="code" href="../../dd/dbe/svc_serial_command_interface_8cpp.html#a1d71425d9df28667d528833a4db10432">token</a>-&gt;start, <a class="code" href="../../dd/dbe/svc_serial_command_interface_8cpp.html#a1d71425d9df28667d528833a4db10432">token</a>-&gt;length) == -1)</div>
<div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;  {</div>
<div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;    <span class="keywordtype">int</span> symbol = <a class="code" href="../../d4/de2/wren__compiler_8c.html#a6f04eaffda4b4d4ee46d87aa3e9a8d2b">declareVariable</a>(classCompiler, <a class="code" href="../../da/d2d/_stdio_stream_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160; </div>
<div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;    <span class="comment">// Implicitly initialize it to null.</span></div>
<div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#a9cfaefaddfdf6eff5163d9638d141200">emitOp</a>(classCompiler, CODE_NULL);</div>
<div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#aeb23f2220ff2337e38feb478573e24fb">defineVariable</a>(classCompiler, symbol);</div>
<div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;  }</div>
<div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160; </div>
<div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;  <span class="comment">// It definitely exists now, so resolve it properly. This is different from</span></div>
<div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;  <span class="comment">// the above resolveLocal() call because we may have already closed over it</span></div>
<div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;  <span class="comment">// as an upvalue.</span></div>
<div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;  Variable variable = <a class="code" href="../../d4/de2/wren__compiler_8c.html#a8ee09994b5ad4511965abd53ef245a8a">resolveName</a>(compiler, <a class="code" href="../../dd/dbe/svc_serial_command_interface_8cpp.html#a1d71425d9df28667d528833a4db10432">token</a>-&gt;start, <a class="code" href="../../dd/dbe/svc_serial_command_interface_8cpp.html#a1d71425d9df28667d528833a4db10432">token</a>-&gt;length);</div>
<div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a792f34988d46a0659df39e49c9607880">bareName</a>(compiler, canAssign, variable);</div>
<div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;}</div>
<div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160; </div>
<div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;<span class="comment">// Compiles a variable name or method call with an implicit receiver.</span></div>
<div class="line"><a name="l02364"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#a59935c559e6df5f8a5f95110a971014d"> 2364</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a59935c559e6df5f8a5f95110a971014d">name</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler, <span class="keywordtype">bool</span> canAssign)</div>
<div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;{</div>
<div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;  <span class="comment">// Look for the name in the scope chain up to the nearest enclosing method.</span></div>
<div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;  Token* <a class="code" href="../../dd/dbe/svc_serial_command_interface_8cpp.html#a1d71425d9df28667d528833a4db10432">token</a> = &amp;compiler-&gt;parser-&gt;previous;</div>
<div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160; </div>
<div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;  Variable variable = <a class="code" href="../../d4/de2/wren__compiler_8c.html#aeead4115d1ddc029dcd2a2b406cab6a9">resolveNonmodule</a>(compiler, <a class="code" href="../../dd/dbe/svc_serial_command_interface_8cpp.html#a1d71425d9df28667d528833a4db10432">token</a>-&gt;start, <a class="code" href="../../dd/dbe/svc_serial_command_interface_8cpp.html#a1d71425d9df28667d528833a4db10432">token</a>-&gt;length);</div>
<div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;  <span class="keywordflow">if</span> (variable.index != -1)</div>
<div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;  {</div>
<div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#a792f34988d46a0659df39e49c9607880">bareName</a>(compiler, canAssign, variable);</div>
<div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;  }</div>
<div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160; </div>
<div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;  <span class="comment">// TODO: The fact that we return above here if the variable is known and parse</span></div>
<div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;  <span class="comment">// an optional argument list below if not means that the grammar is not</span></div>
<div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;  <span class="comment">// context-free. A line of code in a method like &quot;someName(foo)&quot; is a parse</span></div>
<div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;  <span class="comment">// error if &quot;someName&quot; is a defined variable in the surrounding scope and not</span></div>
<div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;  <span class="comment">// if it isn&#39;t. Fix this. One option is to have &quot;someName(foo)&quot; always</span></div>
<div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;  <span class="comment">// resolve to a self-call if there is an argument list, but that makes</span></div>
<div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;  <span class="comment">// getters a little confusing.</span></div>
<div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160; </div>
<div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;  <span class="comment">// If we&#39;re inside a method and the name is lowercase, treat it as a method</span></div>
<div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;  <span class="comment">// on this.</span></div>
<div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d5/db1/wren__vm_8h.html#ad5841e4f80635751bee172e9be691411">wrenIsLocalName</a>(<a class="code" href="../../dd/dbe/svc_serial_command_interface_8cpp.html#a1d71425d9df28667d528833a4db10432">token</a>-&gt;start) &amp;&amp; <a class="code" href="../../d4/de2/wren__compiler_8c.html#ac5f5084320f6c2e1493095709ece0678">getEnclosingClass</a>(compiler) != <a class="code" href="../../da/d2d/_stdio_stream_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;  {</div>
<div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#a8d337b902f95e30e2b5fcdbf11c20bfe">loadThis</a>(compiler);</div>
<div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#a16fd4c5c52c951aed01a1d0fcd6d71aa">namedCall</a>(compiler, canAssign, CODE_CALL_0);</div>
<div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;  }</div>
<div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160; </div>
<div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;  <span class="comment">// Otherwise, look for a module-level variable with the name.</span></div>
<div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;  variable.scope = <a class="code" href="../../d4/de2/wren__compiler_8c.html#aaecc53892786f2fa11e682f633af84c6aa4cd1d716be5988e72bb08902f33270e">SCOPE_MODULE</a>;</div>
<div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;  variable.index = <a class="code" href="../../de/d0d/wren__utils_8c.html#a2b92b4262704a7cebf6f3bd0a853b1eb">wrenSymbolTableFind</a>(&amp;compiler-&gt;parser-&gt;module-&gt;variableNames,</div>
<div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;                                       <a class="code" href="../../dd/dbe/svc_serial_command_interface_8cpp.html#a1d71425d9df28667d528833a4db10432">token</a>-&gt;start, <a class="code" href="../../dd/dbe/svc_serial_command_interface_8cpp.html#a1d71425d9df28667d528833a4db10432">token</a>-&gt;length);</div>
<div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;  <span class="keywordflow">if</span> (variable.index == -1)</div>
<div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;  {</div>
<div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;    <span class="comment">// Implicitly define a module-level variable in</span></div>
<div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;    <span class="comment">// the hopes that we get a real definition later.</span></div>
<div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;    variable.index = <a class="code" href="../../de/db2/wren__vm_8c.html#a8029dc51bbcbc74faeac5d556ebd959b">wrenDeclareVariable</a>(compiler-&gt;parser-&gt;vm,</div>
<div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;                                         compiler-&gt;parser-&gt;module,</div>
<div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160;                                         <a class="code" href="../../dd/dbe/svc_serial_command_interface_8cpp.html#a1d71425d9df28667d528833a4db10432">token</a>-&gt;start, <a class="code" href="../../dd/dbe/svc_serial_command_interface_8cpp.html#a1d71425d9df28667d528833a4db10432">token</a>-&gt;length,</div>
<div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;                                         <a class="code" href="../../dd/dbe/svc_serial_command_interface_8cpp.html#a1d71425d9df28667d528833a4db10432">token</a>-&gt;line);</div>
<div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160; </div>
<div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;    <span class="keywordflow">if</span> (variable.index == -2)</div>
<div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;    {</div>
<div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;      <a class="code" href="../../d4/de2/wren__compiler_8c.html#ae74f1b74c02154518d7162a728d6118a">error</a>(compiler, <span class="stringliteral">&quot;Too many module variables defined.&quot;</span>);</div>
<div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;    }</div>
<div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;  }</div>
<div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;  </div>
<div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a792f34988d46a0659df39e49c9607880">bareName</a>(compiler, canAssign, variable);</div>
<div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;}</div>
<div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160; </div>
<div class="line"><a name="l02415"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#a2d2ba2c916c5ab2db89ef2a5bcf7111d"> 2415</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <span class="keyword">null</span>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler, <span class="keywordtype">bool</span> canAssign)</div>
<div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;{</div>
<div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a9cfaefaddfdf6eff5163d9638d141200">emitOp</a>(compiler, CODE_NULL);</div>
<div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;}</div>
<div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160; </div>
<div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;<span class="comment">// A number or string literal.</span></div>
<div class="line"><a name="l02421"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#ae4e9f96269b4e830731a0c5fcdb28d97"> 2421</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#ae4e9f96269b4e830731a0c5fcdb28d97">literal</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler, <span class="keywordtype">bool</span> canAssign)</div>
<div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;{</div>
<div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a6b4cd3d0c1a4cf34e42541f058f2e55b">emitConstant</a>(compiler, compiler-&gt;parser-&gt;previous.value);</div>
<div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;}</div>
<div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160; </div>
<div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;<span class="comment">// A string literal that contains interpolated expressions.</span></div>
<div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;<span class="comment">// Interpolation is syntactic sugar for calling &quot;.join()&quot; on a list. So the</span></div>
<div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;<span class="comment">// string:</span></div>
<div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;<span class="comment">//     &quot;a %(b + c) d&quot;</span></div>
<div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;<span class="comment">// is compiled roughly like:</span></div>
<div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;<span class="comment">//     [&quot;a &quot;, b + c, &quot; d&quot;].join()</span></div>
<div class="line"><a name="l02436"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#afbde727a3fafa6041cfd3ffbe17c8e4f"> 2436</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#afbde727a3fafa6041cfd3ffbe17c8e4f">stringInterpolation</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler, <span class="keywordtype">bool</span> canAssign)</div>
<div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;{</div>
<div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160;  <span class="comment">// Instantiate a new list.</span></div>
<div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa30b2bee45b3b4a728ebac4fb0e5a82b">loadCoreVariable</a>(compiler, <span class="stringliteral">&quot;List&quot;</span>);</div>
<div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a659fca4caa4720785ab7fbddcb247fb7">callMethod</a>(compiler, 0, <span class="stringliteral">&quot;new()&quot;</span>, 5);</div>
<div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160;  </div>
<div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;  <span class="keywordflow">do</span></div>
<div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;  {</div>
<div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;    <span class="comment">// The opening string part.</span></div>
<div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#ae4e9f96269b4e830731a0c5fcdb28d97">literal</a>(compiler, <span class="keyword">false</span>);</div>
<div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#a659fca4caa4720785ab7fbddcb247fb7">callMethod</a>(compiler, 1, <span class="stringliteral">&quot;addCore_(_)&quot;</span>, 11);</div>
<div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;    </div>
<div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160;    <span class="comment">// The interpolated expression.</span></div>
<div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#acbf1748d7e097833a292ee0caaa50d05">ignoreNewlines</a>(compiler);</div>
<div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#ac20f67474558b6bf12fd74dd573ee7af">expression</a>(compiler);</div>
<div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#a659fca4caa4720785ab7fbddcb247fb7">callMethod</a>(compiler, 1, <span class="stringliteral">&quot;addCore_(_)&quot;</span>, 11);</div>
<div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;    </div>
<div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#acbf1748d7e097833a292ee0caaa50d05">ignoreNewlines</a>(compiler);</div>
<div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;  } <span class="keywordflow">while</span> (<a class="code" href="../../d4/de2/wren__compiler_8c.html#af4fe195796c3e700b61d62dafd263295">match</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a6b3f6ac3cbe7a3bacd547075bd7212d4">TOKEN_INTERPOLATION</a>));</div>
<div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;  </div>
<div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160;  <span class="comment">// The trailing string part.</span></div>
<div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aed515d74eb0faafbaa8d63f05daf90b9">consume</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921afcaa8f23ed1d21aa5779451ed3c243ef">TOKEN_STRING</a>, <span class="stringliteral">&quot;Expect end of string interpolation.&quot;</span>);</div>
<div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#ae4e9f96269b4e830731a0c5fcdb28d97">literal</a>(compiler, <span class="keyword">false</span>);</div>
<div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a659fca4caa4720785ab7fbddcb247fb7">callMethod</a>(compiler, 1, <span class="stringliteral">&quot;addCore_(_)&quot;</span>, 11);</div>
<div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160;  </div>
<div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160;  <span class="comment">// The list of interpolated parts.</span></div>
<div class="line"><a name="l02462"></a><span class="lineno"> 2462</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a659fca4caa4720785ab7fbddcb247fb7">callMethod</a>(compiler, 0, <span class="stringliteral">&quot;join()&quot;</span>, 6);</div>
<div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160;}</div>
<div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160; </div>
<div class="line"><a name="l02465"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#a82a42c1b41759f79a9e76c4c5a898ede"> 2465</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a82a42c1b41759f79a9e76c4c5a898ede">super_</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler, <span class="keywordtype">bool</span> canAssign)</div>
<div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;{</div>
<div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;  ClassInfo* enclosingClass = <a class="code" href="../../d4/de2/wren__compiler_8c.html#ac5f5084320f6c2e1493095709ece0678">getEnclosingClass</a>(compiler);</div>
<div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;  <span class="keywordflow">if</span> (enclosingClass == <a class="code" href="../../da/d2d/_stdio_stream_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160;  {</div>
<div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#ae74f1b74c02154518d7162a728d6118a">error</a>(compiler, <span class="stringliteral">&quot;Cannot use &#39;super&#39; outside of a method.&quot;</span>);</div>
<div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160;  }</div>
<div class="line"><a name="l02472"></a><span class="lineno"> 2472</span>&#160; </div>
<div class="line"><a name="l02473"></a><span class="lineno"> 2473</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a8d337b902f95e30e2b5fcdbf11c20bfe">loadThis</a>(compiler);</div>
<div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160; </div>
<div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160;  <span class="comment">// TODO: Super operator calls.</span></div>
<div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160;  <span class="comment">// TODO: There&#39;s no syntax for invoking a superclass constructor with a</span></div>
<div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160;  <span class="comment">// different name from the enclosing one. Figure that out.</span></div>
<div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160; </div>
<div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;  <span class="comment">// See if it&#39;s a named super call, or an unnamed one.</span></div>
<div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d4/de2/wren__compiler_8c.html#af4fe195796c3e700b61d62dafd263295">match</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921ab565ebfaaa53dcee6ddda201e270733e">TOKEN_DOT</a>))</div>
<div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;  {</div>
<div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;    <span class="comment">// Compile the superclass call.</span></div>
<div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#aed515d74eb0faafbaa8d63f05daf90b9">consume</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a56d9afac7a1508302f85a77d1f3ba8b2">TOKEN_NAME</a>, <span class="stringliteral">&quot;Expect method name after &#39;super.&#39;.&quot;</span>);</div>
<div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#a16fd4c5c52c951aed01a1d0fcd6d71aa">namedCall</a>(compiler, canAssign, CODE_SUPER_0);</div>
<div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;  }</div>
<div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (enclosingClass != <a class="code" href="../../da/d2d/_stdio_stream_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;  {</div>
<div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;    <span class="comment">// No explicit name, so use the name of the enclosing method. Make sure we</span></div>
<div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160;    <span class="comment">// check that enclosingClass isn&#39;t NULL first. We&#39;ve already reported the</span></div>
<div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160;    <span class="comment">// error, but we don&#39;t want to crash here.</span></div>
<div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#a7427f00898251d026c3b69ab90b92ed6">methodCall</a>(compiler, CODE_SUPER_0, enclosingClass-&gt;signature);</div>
<div class="line"><a name="l02492"></a><span class="lineno"> 2492</span>&#160;  }</div>
<div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160;}</div>
<div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160; </div>
<div class="line"><a name="l02495"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#ac9bdea9edffa976d376376d9ca6d042a"> 2495</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#ac9bdea9edffa976d376376d9ca6d042a">this_</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler, <span class="keywordtype">bool</span> canAssign)</div>
<div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160;{</div>
<div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d4/de2/wren__compiler_8c.html#ac5f5084320f6c2e1493095709ece0678">getEnclosingClass</a>(compiler) == <a class="code" href="../../da/d2d/_stdio_stream_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160;  {</div>
<div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#ae74f1b74c02154518d7162a728d6118a">error</a>(compiler, <span class="stringliteral">&quot;Cannot use &#39;this&#39; outside of a method.&quot;</span>);</div>
<div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160;  }</div>
<div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160; </div>
<div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a8d337b902f95e30e2b5fcdbf11c20bfe">loadThis</a>(compiler);</div>
<div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160;}</div>
<div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160; </div>
<div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;<span class="comment">// Subscript or &quot;array indexing&quot; operator like `foo[bar]`.</span></div>
<div class="line"><a name="l02507"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#a41444a093a5170bf6ff69627445a457c"> 2507</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a41444a093a5170bf6ff69627445a457c">subscript</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler, <span class="keywordtype">bool</span> canAssign)</div>
<div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160;{</div>
<div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;  Signature signature = { <span class="stringliteral">&quot;&quot;</span>, 0, <a class="code" href="../../d4/de2/wren__compiler_8c.html#a7456a1be27da2089f984a0ede62c6c50a9f38bc394cbcd1405be8094564da7324">SIG_SUBSCRIPT</a>, 0 };</div>
<div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160; </div>
<div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160;  <span class="comment">// Parse the argument list.</span></div>
<div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#ad9ec60a22d39b63da0a035113d8a39d0">finishArgumentList</a>(compiler, &amp;signature);</div>
<div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aed515d74eb0faafbaa8d63f05daf90b9">consume</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921aa42fbee15a56484e7cc6daaaa552107a">TOKEN_RIGHT_BRACKET</a>, <span class="stringliteral">&quot;Expect &#39;]&#39; after arguments.&quot;</span>);</div>
<div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160; </div>
<div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a12bdbdb1e45706c48ef016e52b18c21a">allowLineBeforeDot</a>(compiler);</div>
<div class="line"><a name="l02516"></a><span class="lineno"> 2516</span>&#160; </div>
<div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160;  <span class="keywordflow">if</span> (canAssign &amp;&amp; <a class="code" href="../../d4/de2/wren__compiler_8c.html#af4fe195796c3e700b61d62dafd263295">match</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921aeba19c29eb600289d1e973bf335139fe">TOKEN_EQ</a>))</div>
<div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;  {</div>
<div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160;    signature.type = <a class="code" href="../../d4/de2/wren__compiler_8c.html#a7456a1be27da2089f984a0ede62c6c50ae0dd8195094045c31d6456d0838c8020">SIG_SUBSCRIPT_SETTER</a>;</div>
<div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160; </div>
<div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160;    <span class="comment">// Compile the assigned value.</span></div>
<div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#a6d53c228b441f96cc87afd94542c8152">validateNumParameters</a>(compiler, ++signature.arity);</div>
<div class="line"><a name="l02523"></a><span class="lineno"> 2523</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#ac20f67474558b6bf12fd74dd573ee7af">expression</a>(compiler);</div>
<div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160;  }</div>
<div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160; </div>
<div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a38d81393ddf947ea59ad1d15eaa868cf">callSignature</a>(compiler, CODE_CALL_0, &amp;signature);</div>
<div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160;}</div>
<div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160; </div>
<div class="line"><a name="l02529"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#abc28d53c9cefc405f7f74cd877d037d1"> 2529</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#abc28d53c9cefc405f7f74cd877d037d1">call</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler, <span class="keywordtype">bool</span> canAssign)</div>
<div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>&#160;{</div>
<div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#acbf1748d7e097833a292ee0caaa50d05">ignoreNewlines</a>(compiler);</div>
<div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aed515d74eb0faafbaa8d63f05daf90b9">consume</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a56d9afac7a1508302f85a77d1f3ba8b2">TOKEN_NAME</a>, <span class="stringliteral">&quot;Expect method name after &#39;.&#39;.&quot;</span>);</div>
<div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a16fd4c5c52c951aed01a1d0fcd6d71aa">namedCall</a>(compiler, canAssign, CODE_CALL_0);</div>
<div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160;}</div>
<div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160; </div>
<div class="line"><a name="l02536"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#afaaf49cc08d58cc733fc68c2c1696bb5"> 2536</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#afaaf49cc08d58cc733fc68c2c1696bb5">and_</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler, <span class="keywordtype">bool</span> canAssign)</div>
<div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160;{</div>
<div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#acbf1748d7e097833a292ee0caaa50d05">ignoreNewlines</a>(compiler);</div>
<div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160; </div>
<div class="line"><a name="l02540"></a><span class="lineno"> 2540</span>&#160;  <span class="comment">// Skip the right argument if the left is false.</span></div>
<div class="line"><a name="l02541"></a><span class="lineno"> 2541</span>&#160;  <span class="keywordtype">int</span> jump = <a class="code" href="../../d4/de2/wren__compiler_8c.html#ac30bdcdc8f7ab87bb8f844b7d2bcd113">emitJump</a>(compiler, CODE_AND);</div>
<div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a8dfb172d48944ba16bc5531170b66fe7">parsePrecedence</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa4e7d1a473d0280792d98ddb184d3006af6f26d1f69e85719e3acdb44ac4ee4ee">PREC_LOGICAL_AND</a>);</div>
<div class="line"><a name="l02543"></a><span class="lineno"> 2543</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a51f59acfb3ac3a9b347ed8fd5086ab46">patchJump</a>(compiler, jump);</div>
<div class="line"><a name="l02544"></a><span class="lineno"> 2544</span>&#160;}</div>
<div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160; </div>
<div class="line"><a name="l02546"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#a41ed4497d9803ce9b48c00e808e315c6"> 2546</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a41ed4497d9803ce9b48c00e808e315c6">or_</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler, <span class="keywordtype">bool</span> canAssign)</div>
<div class="line"><a name="l02547"></a><span class="lineno"> 2547</span>&#160;{</div>
<div class="line"><a name="l02548"></a><span class="lineno"> 2548</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#acbf1748d7e097833a292ee0caaa50d05">ignoreNewlines</a>(compiler);</div>
<div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160; </div>
<div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160;  <span class="comment">// Skip the right argument if the left is true.</span></div>
<div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160;  <span class="keywordtype">int</span> jump = <a class="code" href="../../d4/de2/wren__compiler_8c.html#ac30bdcdc8f7ab87bb8f844b7d2bcd113">emitJump</a>(compiler, CODE_OR);</div>
<div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a8dfb172d48944ba16bc5531170b66fe7">parsePrecedence</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa4e7d1a473d0280792d98ddb184d3006a64fa270482d302628e98c685632f4268">PREC_LOGICAL_OR</a>);</div>
<div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a51f59acfb3ac3a9b347ed8fd5086ab46">patchJump</a>(compiler, jump);</div>
<div class="line"><a name="l02554"></a><span class="lineno"> 2554</span>&#160;}</div>
<div class="line"><a name="l02555"></a><span class="lineno"> 2555</span>&#160; </div>
<div class="line"><a name="l02556"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#a010575aac4ed7c8c68ad4a660f885889"> 2556</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a010575aac4ed7c8c68ad4a660f885889">conditional</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler, <span class="keywordtype">bool</span> canAssign)</div>
<div class="line"><a name="l02557"></a><span class="lineno"> 2557</span>&#160;{</div>
<div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160;  <span class="comment">// Ignore newline after &#39;?&#39;.</span></div>
<div class="line"><a name="l02559"></a><span class="lineno"> 2559</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#acbf1748d7e097833a292ee0caaa50d05">ignoreNewlines</a>(compiler);</div>
<div class="line"><a name="l02560"></a><span class="lineno"> 2560</span>&#160; </div>
<div class="line"><a name="l02561"></a><span class="lineno"> 2561</span>&#160;  <span class="comment">// Jump to the else branch if the condition is false.</span></div>
<div class="line"><a name="l02562"></a><span class="lineno"> 2562</span>&#160;  <span class="keywordtype">int</span> ifJump = <a class="code" href="../../d4/de2/wren__compiler_8c.html#ac30bdcdc8f7ab87bb8f844b7d2bcd113">emitJump</a>(compiler, CODE_JUMP_IF);</div>
<div class="line"><a name="l02563"></a><span class="lineno"> 2563</span>&#160; </div>
<div class="line"><a name="l02564"></a><span class="lineno"> 2564</span>&#160;  <span class="comment">// Compile the then branch.</span></div>
<div class="line"><a name="l02565"></a><span class="lineno"> 2565</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a8dfb172d48944ba16bc5531170b66fe7">parsePrecedence</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa4e7d1a473d0280792d98ddb184d3006a76e3d5bfffbff44ebf531ac39e47aecf">PREC_CONDITIONAL</a>);</div>
<div class="line"><a name="l02566"></a><span class="lineno"> 2566</span>&#160; </div>
<div class="line"><a name="l02567"></a><span class="lineno"> 2567</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aed515d74eb0faafbaa8d63f05daf90b9">consume</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a92a35ac6329421e77882bf3739a75e47">TOKEN_COLON</a>,</div>
<div class="line"><a name="l02568"></a><span class="lineno"> 2568</span>&#160;          <span class="stringliteral">&quot;Expect &#39;:&#39; after then branch of conditional operator.&quot;</span>);</div>
<div class="line"><a name="l02569"></a><span class="lineno"> 2569</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#acbf1748d7e097833a292ee0caaa50d05">ignoreNewlines</a>(compiler);</div>
<div class="line"><a name="l02570"></a><span class="lineno"> 2570</span>&#160; </div>
<div class="line"><a name="l02571"></a><span class="lineno"> 2571</span>&#160;  <span class="comment">// Jump over the else branch when the if branch is taken.</span></div>
<div class="line"><a name="l02572"></a><span class="lineno"> 2572</span>&#160;  <span class="keywordtype">int</span> elseJump = <a class="code" href="../../d4/de2/wren__compiler_8c.html#ac30bdcdc8f7ab87bb8f844b7d2bcd113">emitJump</a>(compiler, CODE_JUMP);</div>
<div class="line"><a name="l02573"></a><span class="lineno"> 2573</span>&#160; </div>
<div class="line"><a name="l02574"></a><span class="lineno"> 2574</span>&#160;  <span class="comment">// Compile the else branch.</span></div>
<div class="line"><a name="l02575"></a><span class="lineno"> 2575</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a51f59acfb3ac3a9b347ed8fd5086ab46">patchJump</a>(compiler, ifJump);</div>
<div class="line"><a name="l02576"></a><span class="lineno"> 2576</span>&#160; </div>
<div class="line"><a name="l02577"></a><span class="lineno"> 2577</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a8dfb172d48944ba16bc5531170b66fe7">parsePrecedence</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa4e7d1a473d0280792d98ddb184d3006a5576e7223ab7e815dc3f0daefcaf5fe3">PREC_ASSIGNMENT</a>);</div>
<div class="line"><a name="l02578"></a><span class="lineno"> 2578</span>&#160; </div>
<div class="line"><a name="l02579"></a><span class="lineno"> 2579</span>&#160;  <span class="comment">// Patch the jump over the else.</span></div>
<div class="line"><a name="l02580"></a><span class="lineno"> 2580</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a51f59acfb3ac3a9b347ed8fd5086ab46">patchJump</a>(compiler, elseJump);</div>
<div class="line"><a name="l02581"></a><span class="lineno"> 2581</span>&#160;}</div>
<div class="line"><a name="l02582"></a><span class="lineno"> 2582</span>&#160; </div>
<div class="line"><a name="l02583"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#a8743e9688db1718a6a325ea9f27adb05"> 2583</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a8743e9688db1718a6a325ea9f27adb05">infixOp</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler, <span class="keywordtype">bool</span> canAssign)</div>
<div class="line"><a name="l02584"></a><span class="lineno"> 2584</span>&#160;{</div>
<div class="line"><a name="l02585"></a><span class="lineno"> 2585</span>&#160;  GrammarRule* rule = <a class="code" href="../../d4/de2/wren__compiler_8c.html#a5ab3a18d8b41f2391de63d94f75d887f">getRule</a>(compiler-&gt;parser-&gt;previous.type);</div>
<div class="line"><a name="l02586"></a><span class="lineno"> 2586</span>&#160; </div>
<div class="line"><a name="l02587"></a><span class="lineno"> 2587</span>&#160;  <span class="comment">// An infix operator cannot end an expression.</span></div>
<div class="line"><a name="l02588"></a><span class="lineno"> 2588</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#acbf1748d7e097833a292ee0caaa50d05">ignoreNewlines</a>(compiler);</div>
<div class="line"><a name="l02589"></a><span class="lineno"> 2589</span>&#160; </div>
<div class="line"><a name="l02590"></a><span class="lineno"> 2590</span>&#160;  <span class="comment">// Compile the right-hand side.</span></div>
<div class="line"><a name="l02591"></a><span class="lineno"> 2591</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a8dfb172d48944ba16bc5531170b66fe7">parsePrecedence</a>(compiler, (<a class="code" href="../../d4/de2/wren__compiler_8c.html#aa4e7d1a473d0280792d98ddb184d3006">Precedence</a>)(rule-&gt;precedence + 1));</div>
<div class="line"><a name="l02592"></a><span class="lineno"> 2592</span>&#160; </div>
<div class="line"><a name="l02593"></a><span class="lineno"> 2593</span>&#160;  <span class="comment">// Call the operator method on the left-hand side.</span></div>
<div class="line"><a name="l02594"></a><span class="lineno"> 2594</span>&#160;  Signature signature = { rule-&gt;name, (int)strlen(rule-&gt;name), <a class="code" href="../../d4/de2/wren__compiler_8c.html#a7456a1be27da2089f984a0ede62c6c50af379038c458f7331b34fc5f3a05bea1b">SIG_METHOD</a>, 1 };</div>
<div class="line"><a name="l02595"></a><span class="lineno"> 2595</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a38d81393ddf947ea59ad1d15eaa868cf">callSignature</a>(compiler, CODE_CALL_0, &amp;signature);</div>
<div class="line"><a name="l02596"></a><span class="lineno"> 2596</span>&#160;}</div>
<div class="line"><a name="l02597"></a><span class="lineno"> 2597</span>&#160; </div>
<div class="line"><a name="l02598"></a><span class="lineno"> 2598</span>&#160;<span class="comment">// Compiles a method signature for an infix operator.</span></div>
<div class="line"><a name="l02599"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#a2d20d4cbad146f301f87ee2af01148c1"> 2599</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a2d20d4cbad146f301f87ee2af01148c1">infixSignature</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler, Signature* signature)</div>
<div class="line"><a name="l02600"></a><span class="lineno"> 2600</span>&#160;{</div>
<div class="line"><a name="l02601"></a><span class="lineno"> 2601</span>&#160;  <span class="comment">// Add the RHS parameter.</span></div>
<div class="line"><a name="l02602"></a><span class="lineno"> 2602</span>&#160;  signature-&gt;type = <a class="code" href="../../d4/de2/wren__compiler_8c.html#a7456a1be27da2089f984a0ede62c6c50af379038c458f7331b34fc5f3a05bea1b">SIG_METHOD</a>;</div>
<div class="line"><a name="l02603"></a><span class="lineno"> 2603</span>&#160;  signature-&gt;arity = 1;</div>
<div class="line"><a name="l02604"></a><span class="lineno"> 2604</span>&#160; </div>
<div class="line"><a name="l02605"></a><span class="lineno"> 2605</span>&#160;  <span class="comment">// Parse the parameter name.</span></div>
<div class="line"><a name="l02606"></a><span class="lineno"> 2606</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aed515d74eb0faafbaa8d63f05daf90b9">consume</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921ab958e67632477fb20b223edfef5a4a3f">TOKEN_LEFT_PAREN</a>, <span class="stringliteral">&quot;Expect &#39;(&#39; after operator name.&quot;</span>);</div>
<div class="line"><a name="l02607"></a><span class="lineno"> 2607</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#ad162f798273bfdd4b16efc1ecc197ba3">declareNamedVariable</a>(compiler);</div>
<div class="line"><a name="l02608"></a><span class="lineno"> 2608</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aed515d74eb0faafbaa8d63f05daf90b9">consume</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a7db8f1fe352e6cf1ed6b880432b585d5">TOKEN_RIGHT_PAREN</a>, <span class="stringliteral">&quot;Expect &#39;)&#39; after parameter name.&quot;</span>);</div>
<div class="line"><a name="l02609"></a><span class="lineno"> 2609</span>&#160;}</div>
<div class="line"><a name="l02610"></a><span class="lineno"> 2610</span>&#160; </div>
<div class="line"><a name="l02611"></a><span class="lineno"> 2611</span>&#160;<span class="comment">// Compiles a method signature for an unary operator (i.e. &quot;!&quot;).</span></div>
<div class="line"><a name="l02612"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#a30f20ea88f6caecab888efea511fbb39"> 2612</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a30f20ea88f6caecab888efea511fbb39">unarySignature</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler, Signature* signature)</div>
<div class="line"><a name="l02613"></a><span class="lineno"> 2613</span>&#160;{</div>
<div class="line"><a name="l02614"></a><span class="lineno"> 2614</span>&#160;  <span class="comment">// Do nothing. The name is already complete.</span></div>
<div class="line"><a name="l02615"></a><span class="lineno"> 2615</span>&#160;  signature-&gt;type = <a class="code" href="../../d4/de2/wren__compiler_8c.html#a7456a1be27da2089f984a0ede62c6c50a886e5cbc219aebd4f2677c108af4f769">SIG_GETTER</a>;</div>
<div class="line"><a name="l02616"></a><span class="lineno"> 2616</span>&#160;}</div>
<div class="line"><a name="l02617"></a><span class="lineno"> 2617</span>&#160; </div>
<div class="line"><a name="l02618"></a><span class="lineno"> 2618</span>&#160;<span class="comment">// Compiles a method signature for an operator that can either be unary or</span></div>
<div class="line"><a name="l02619"></a><span class="lineno"> 2619</span>&#160;<span class="comment">// infix (i.e. &quot;-&quot;).</span></div>
<div class="line"><a name="l02620"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#aae9d87e942ec21e7de756387b4f28f6a"> 2620</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#aae9d87e942ec21e7de756387b4f28f6a">mixedSignature</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler, Signature* signature)</div>
<div class="line"><a name="l02621"></a><span class="lineno"> 2621</span>&#160;{</div>
<div class="line"><a name="l02622"></a><span class="lineno"> 2622</span>&#160;  signature-&gt;type = <a class="code" href="../../d4/de2/wren__compiler_8c.html#a7456a1be27da2089f984a0ede62c6c50a886e5cbc219aebd4f2677c108af4f769">SIG_GETTER</a>;</div>
<div class="line"><a name="l02623"></a><span class="lineno"> 2623</span>&#160; </div>
<div class="line"><a name="l02624"></a><span class="lineno"> 2624</span>&#160;  <span class="comment">// If there is a parameter, it&#39;s an infix operator, otherwise it&#39;s unary.</span></div>
<div class="line"><a name="l02625"></a><span class="lineno"> 2625</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d4/de2/wren__compiler_8c.html#af4fe195796c3e700b61d62dafd263295">match</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921ab958e67632477fb20b223edfef5a4a3f">TOKEN_LEFT_PAREN</a>))</div>
<div class="line"><a name="l02626"></a><span class="lineno"> 2626</span>&#160;  {</div>
<div class="line"><a name="l02627"></a><span class="lineno"> 2627</span>&#160;    <span class="comment">// Add the RHS parameter.</span></div>
<div class="line"><a name="l02628"></a><span class="lineno"> 2628</span>&#160;    signature-&gt;type = <a class="code" href="../../d4/de2/wren__compiler_8c.html#a7456a1be27da2089f984a0ede62c6c50af379038c458f7331b34fc5f3a05bea1b">SIG_METHOD</a>;</div>
<div class="line"><a name="l02629"></a><span class="lineno"> 2629</span>&#160;    signature-&gt;arity = 1;</div>
<div class="line"><a name="l02630"></a><span class="lineno"> 2630</span>&#160; </div>
<div class="line"><a name="l02631"></a><span class="lineno"> 2631</span>&#160;    <span class="comment">// Parse the parameter name.</span></div>
<div class="line"><a name="l02632"></a><span class="lineno"> 2632</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#ad162f798273bfdd4b16efc1ecc197ba3">declareNamedVariable</a>(compiler);</div>
<div class="line"><a name="l02633"></a><span class="lineno"> 2633</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#aed515d74eb0faafbaa8d63f05daf90b9">consume</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a7db8f1fe352e6cf1ed6b880432b585d5">TOKEN_RIGHT_PAREN</a>, <span class="stringliteral">&quot;Expect &#39;)&#39; after parameter name.&quot;</span>);</div>
<div class="line"><a name="l02634"></a><span class="lineno"> 2634</span>&#160;  }</div>
<div class="line"><a name="l02635"></a><span class="lineno"> 2635</span>&#160;}</div>
<div class="line"><a name="l02636"></a><span class="lineno"> 2636</span>&#160; </div>
<div class="line"><a name="l02637"></a><span class="lineno"> 2637</span>&#160;<span class="comment">// Compiles an optional setter parameter in a method [signature].</span></div>
<div class="line"><a name="l02638"></a><span class="lineno"> 2638</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l02639"></a><span class="lineno"> 2639</span>&#160;<span class="comment">// Returns `true` if it was a setter.</span></div>
<div class="line"><a name="l02640"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#a9d18a27f98829f62d0d8c258197f1a17"> 2640</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a9d18a27f98829f62d0d8c258197f1a17">maybeSetter</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler, Signature* signature)</div>
<div class="line"><a name="l02641"></a><span class="lineno"> 2641</span>&#160;{</div>
<div class="line"><a name="l02642"></a><span class="lineno"> 2642</span>&#160;  <span class="comment">// See if it&#39;s a setter.</span></div>
<div class="line"><a name="l02643"></a><span class="lineno"> 2643</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="../../d4/de2/wren__compiler_8c.html#af4fe195796c3e700b61d62dafd263295">match</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921aeba19c29eb600289d1e973bf335139fe">TOKEN_EQ</a>)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02644"></a><span class="lineno"> 2644</span>&#160; </div>
<div class="line"><a name="l02645"></a><span class="lineno"> 2645</span>&#160;  <span class="comment">// It&#39;s a setter.</span></div>
<div class="line"><a name="l02646"></a><span class="lineno"> 2646</span>&#160;  <span class="keywordflow">if</span> (signature-&gt;type == <a class="code" href="../../d4/de2/wren__compiler_8c.html#a7456a1be27da2089f984a0ede62c6c50a9f38bc394cbcd1405be8094564da7324">SIG_SUBSCRIPT</a>)</div>
<div class="line"><a name="l02647"></a><span class="lineno"> 2647</span>&#160;  {</div>
<div class="line"><a name="l02648"></a><span class="lineno"> 2648</span>&#160;    signature-&gt;type = <a class="code" href="../../d4/de2/wren__compiler_8c.html#a7456a1be27da2089f984a0ede62c6c50ae0dd8195094045c31d6456d0838c8020">SIG_SUBSCRIPT_SETTER</a>;</div>
<div class="line"><a name="l02649"></a><span class="lineno"> 2649</span>&#160;  }</div>
<div class="line"><a name="l02650"></a><span class="lineno"> 2650</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l02651"></a><span class="lineno"> 2651</span>&#160;  {</div>
<div class="line"><a name="l02652"></a><span class="lineno"> 2652</span>&#160;    signature-&gt;type = <a class="code" href="../../d4/de2/wren__compiler_8c.html#a7456a1be27da2089f984a0ede62c6c50a3c6a70ee605e103ae81714939f123c44">SIG_SETTER</a>;</div>
<div class="line"><a name="l02653"></a><span class="lineno"> 2653</span>&#160;  }</div>
<div class="line"><a name="l02654"></a><span class="lineno"> 2654</span>&#160; </div>
<div class="line"><a name="l02655"></a><span class="lineno"> 2655</span>&#160;  <span class="comment">// Parse the value parameter.</span></div>
<div class="line"><a name="l02656"></a><span class="lineno"> 2656</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aed515d74eb0faafbaa8d63f05daf90b9">consume</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921ab958e67632477fb20b223edfef5a4a3f">TOKEN_LEFT_PAREN</a>, <span class="stringliteral">&quot;Expect &#39;(&#39; after &#39;=&#39;.&quot;</span>);</div>
<div class="line"><a name="l02657"></a><span class="lineno"> 2657</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#ad162f798273bfdd4b16efc1ecc197ba3">declareNamedVariable</a>(compiler);</div>
<div class="line"><a name="l02658"></a><span class="lineno"> 2658</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aed515d74eb0faafbaa8d63f05daf90b9">consume</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a7db8f1fe352e6cf1ed6b880432b585d5">TOKEN_RIGHT_PAREN</a>, <span class="stringliteral">&quot;Expect &#39;)&#39; after parameter name.&quot;</span>);</div>
<div class="line"><a name="l02659"></a><span class="lineno"> 2659</span>&#160; </div>
<div class="line"><a name="l02660"></a><span class="lineno"> 2660</span>&#160;  signature-&gt;arity++;</div>
<div class="line"><a name="l02661"></a><span class="lineno"> 2661</span>&#160; </div>
<div class="line"><a name="l02662"></a><span class="lineno"> 2662</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02663"></a><span class="lineno"> 2663</span>&#160;}</div>
<div class="line"><a name="l02664"></a><span class="lineno"> 2664</span>&#160; </div>
<div class="line"><a name="l02665"></a><span class="lineno"> 2665</span>&#160;<span class="comment">// Compiles a method signature for a subscript operator.</span></div>
<div class="line"><a name="l02666"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#a3753cc085696e463597365c204ac56f3"> 2666</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a3753cc085696e463597365c204ac56f3">subscriptSignature</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler, Signature* signature)</div>
<div class="line"><a name="l02667"></a><span class="lineno"> 2667</span>&#160;{</div>
<div class="line"><a name="l02668"></a><span class="lineno"> 2668</span>&#160;  signature-&gt;type = <a class="code" href="../../d4/de2/wren__compiler_8c.html#a7456a1be27da2089f984a0ede62c6c50a9f38bc394cbcd1405be8094564da7324">SIG_SUBSCRIPT</a>;</div>
<div class="line"><a name="l02669"></a><span class="lineno"> 2669</span>&#160; </div>
<div class="line"><a name="l02670"></a><span class="lineno"> 2670</span>&#160;  <span class="comment">// The signature currently has &quot;[&quot; as its name since that was the token that</span></div>
<div class="line"><a name="l02671"></a><span class="lineno"> 2671</span>&#160;  <span class="comment">// matched it. Clear that out.</span></div>
<div class="line"><a name="l02672"></a><span class="lineno"> 2672</span>&#160;  signature-&gt;length = 0;</div>
<div class="line"><a name="l02673"></a><span class="lineno"> 2673</span>&#160; </div>
<div class="line"><a name="l02674"></a><span class="lineno"> 2674</span>&#160;  <span class="comment">// Parse the parameters inside the subscript.</span></div>
<div class="line"><a name="l02675"></a><span class="lineno"> 2675</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aab6a09fed2816d59ff4ec4b2d3b00e3a">finishParameterList</a>(compiler, signature);</div>
<div class="line"><a name="l02676"></a><span class="lineno"> 2676</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aed515d74eb0faafbaa8d63f05daf90b9">consume</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921aa42fbee15a56484e7cc6daaaa552107a">TOKEN_RIGHT_BRACKET</a>, <span class="stringliteral">&quot;Expect &#39;]&#39; after parameters.&quot;</span>);</div>
<div class="line"><a name="l02677"></a><span class="lineno"> 2677</span>&#160; </div>
<div class="line"><a name="l02678"></a><span class="lineno"> 2678</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a9d18a27f98829f62d0d8c258197f1a17">maybeSetter</a>(compiler, signature);</div>
<div class="line"><a name="l02679"></a><span class="lineno"> 2679</span>&#160;}</div>
<div class="line"><a name="l02680"></a><span class="lineno"> 2680</span>&#160; </div>
<div class="line"><a name="l02681"></a><span class="lineno"> 2681</span>&#160;<span class="comment">// Parses an optional parenthesized parameter list. Updates `type` and `arity`</span></div>
<div class="line"><a name="l02682"></a><span class="lineno"> 2682</span>&#160;<span class="comment">// in [signature] to match what was parsed.</span></div>
<div class="line"><a name="l02683"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#a00d4650384afa8e4b934f2dda47fd044"> 2683</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a00d4650384afa8e4b934f2dda47fd044">parameterList</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler, Signature* signature)</div>
<div class="line"><a name="l02684"></a><span class="lineno"> 2684</span>&#160;{</div>
<div class="line"><a name="l02685"></a><span class="lineno"> 2685</span>&#160;  <span class="comment">// The parameter list is optional.</span></div>
<div class="line"><a name="l02686"></a><span class="lineno"> 2686</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="../../d4/de2/wren__compiler_8c.html#af4fe195796c3e700b61d62dafd263295">match</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921ab958e67632477fb20b223edfef5a4a3f">TOKEN_LEFT_PAREN</a>)) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02687"></a><span class="lineno"> 2687</span>&#160;  </div>
<div class="line"><a name="l02688"></a><span class="lineno"> 2688</span>&#160;  signature-&gt;type = <a class="code" href="../../d4/de2/wren__compiler_8c.html#a7456a1be27da2089f984a0ede62c6c50af379038c458f7331b34fc5f3a05bea1b">SIG_METHOD</a>;</div>
<div class="line"><a name="l02689"></a><span class="lineno"> 2689</span>&#160;  </div>
<div class="line"><a name="l02690"></a><span class="lineno"> 2690</span>&#160;  <span class="comment">// Allow new line before an empty argument list</span></div>
<div class="line"><a name="l02691"></a><span class="lineno"> 2691</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#acbf1748d7e097833a292ee0caaa50d05">ignoreNewlines</a>(compiler);</div>
<div class="line"><a name="l02692"></a><span class="lineno"> 2692</span>&#160; </div>
<div class="line"><a name="l02693"></a><span class="lineno"> 2693</span>&#160;  <span class="comment">// Allow an empty parameter list.</span></div>
<div class="line"><a name="l02694"></a><span class="lineno"> 2694</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d4/de2/wren__compiler_8c.html#af4fe195796c3e700b61d62dafd263295">match</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a7db8f1fe352e6cf1ed6b880432b585d5">TOKEN_RIGHT_PAREN</a>)) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02695"></a><span class="lineno"> 2695</span>&#160; </div>
<div class="line"><a name="l02696"></a><span class="lineno"> 2696</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aab6a09fed2816d59ff4ec4b2d3b00e3a">finishParameterList</a>(compiler, signature);</div>
<div class="line"><a name="l02697"></a><span class="lineno"> 2697</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aed515d74eb0faafbaa8d63f05daf90b9">consume</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a7db8f1fe352e6cf1ed6b880432b585d5">TOKEN_RIGHT_PAREN</a>, <span class="stringliteral">&quot;Expect &#39;)&#39; after parameters.&quot;</span>);</div>
<div class="line"><a name="l02698"></a><span class="lineno"> 2698</span>&#160;}</div>
<div class="line"><a name="l02699"></a><span class="lineno"> 2699</span>&#160; </div>
<div class="line"><a name="l02700"></a><span class="lineno"> 2700</span>&#160;<span class="comment">// Compiles a method signature for a named method or setter.</span></div>
<div class="line"><a name="l02701"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#a89156fcf9589f1e896bfcfede5fe8e78"> 2701</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a89156fcf9589f1e896bfcfede5fe8e78">namedSignature</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler, Signature* signature)</div>
<div class="line"><a name="l02702"></a><span class="lineno"> 2702</span>&#160;{</div>
<div class="line"><a name="l02703"></a><span class="lineno"> 2703</span>&#160;  signature-&gt;type = <a class="code" href="../../d4/de2/wren__compiler_8c.html#a7456a1be27da2089f984a0ede62c6c50a886e5cbc219aebd4f2677c108af4f769">SIG_GETTER</a>;</div>
<div class="line"><a name="l02704"></a><span class="lineno"> 2704</span>&#160;  </div>
<div class="line"><a name="l02705"></a><span class="lineno"> 2705</span>&#160;  <span class="comment">// If it&#39;s a setter, it can&#39;t also have a parameter list.</span></div>
<div class="line"><a name="l02706"></a><span class="lineno"> 2706</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d4/de2/wren__compiler_8c.html#a9d18a27f98829f62d0d8c258197f1a17">maybeSetter</a>(compiler, signature)) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02707"></a><span class="lineno"> 2707</span>&#160; </div>
<div class="line"><a name="l02708"></a><span class="lineno"> 2708</span>&#160;  <span class="comment">// Regular named method with an optional parameter list.</span></div>
<div class="line"><a name="l02709"></a><span class="lineno"> 2709</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a00d4650384afa8e4b934f2dda47fd044">parameterList</a>(compiler, signature);</div>
<div class="line"><a name="l02710"></a><span class="lineno"> 2710</span>&#160;}</div>
<div class="line"><a name="l02711"></a><span class="lineno"> 2711</span>&#160; </div>
<div class="line"><a name="l02712"></a><span class="lineno"> 2712</span>&#160;<span class="comment">// Compiles a method signature for a constructor.</span></div>
<div class="line"><a name="l02713"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#aff6717562bb3c8c6b5d6f23b43b510b2"> 2713</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#aff6717562bb3c8c6b5d6f23b43b510b2">constructorSignature</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler, Signature* signature)</div>
<div class="line"><a name="l02714"></a><span class="lineno"> 2714</span>&#160;{</div>
<div class="line"><a name="l02715"></a><span class="lineno"> 2715</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aed515d74eb0faafbaa8d63f05daf90b9">consume</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a56d9afac7a1508302f85a77d1f3ba8b2">TOKEN_NAME</a>, <span class="stringliteral">&quot;Expect constructor name after &#39;construct&#39;.&quot;</span>);</div>
<div class="line"><a name="l02716"></a><span class="lineno"> 2716</span>&#160;  </div>
<div class="line"><a name="l02717"></a><span class="lineno"> 2717</span>&#160;  <span class="comment">// Capture the name.</span></div>
<div class="line"><a name="l02718"></a><span class="lineno"> 2718</span>&#160;  *signature = <a class="code" href="../../d4/de2/wren__compiler_8c.html#a990f92b1a0017c13a94a4c02f5d736bc">signatureFromToken</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#a7456a1be27da2089f984a0ede62c6c50acc229831cb9cfa74b1ad2d11a37fe214">SIG_INITIALIZER</a>);</div>
<div class="line"><a name="l02719"></a><span class="lineno"> 2719</span>&#160;  </div>
<div class="line"><a name="l02720"></a><span class="lineno"> 2720</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d4/de2/wren__compiler_8c.html#af4fe195796c3e700b61d62dafd263295">match</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921aeba19c29eb600289d1e973bf335139fe">TOKEN_EQ</a>))</div>
<div class="line"><a name="l02721"></a><span class="lineno"> 2721</span>&#160;  {</div>
<div class="line"><a name="l02722"></a><span class="lineno"> 2722</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#ae74f1b74c02154518d7162a728d6118a">error</a>(compiler, <span class="stringliteral">&quot;A constructor cannot be a setter.&quot;</span>);</div>
<div class="line"><a name="l02723"></a><span class="lineno"> 2723</span>&#160;  }</div>
<div class="line"><a name="l02724"></a><span class="lineno"> 2724</span>&#160; </div>
<div class="line"><a name="l02725"></a><span class="lineno"> 2725</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="../../d4/de2/wren__compiler_8c.html#af4fe195796c3e700b61d62dafd263295">match</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921ab958e67632477fb20b223edfef5a4a3f">TOKEN_LEFT_PAREN</a>))</div>
<div class="line"><a name="l02726"></a><span class="lineno"> 2726</span>&#160;  {</div>
<div class="line"><a name="l02727"></a><span class="lineno"> 2727</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#ae74f1b74c02154518d7162a728d6118a">error</a>(compiler, <span class="stringliteral">&quot;A constructor cannot be a getter.&quot;</span>);</div>
<div class="line"><a name="l02728"></a><span class="lineno"> 2728</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02729"></a><span class="lineno"> 2729</span>&#160;  }</div>
<div class="line"><a name="l02730"></a><span class="lineno"> 2730</span>&#160;  </div>
<div class="line"><a name="l02731"></a><span class="lineno"> 2731</span>&#160;  <span class="comment">// Allow an empty parameter list.</span></div>
<div class="line"><a name="l02732"></a><span class="lineno"> 2732</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d4/de2/wren__compiler_8c.html#af4fe195796c3e700b61d62dafd263295">match</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a7db8f1fe352e6cf1ed6b880432b585d5">TOKEN_RIGHT_PAREN</a>)) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02733"></a><span class="lineno"> 2733</span>&#160;  </div>
<div class="line"><a name="l02734"></a><span class="lineno"> 2734</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aab6a09fed2816d59ff4ec4b2d3b00e3a">finishParameterList</a>(compiler, signature);</div>
<div class="line"><a name="l02735"></a><span class="lineno"> 2735</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aed515d74eb0faafbaa8d63f05daf90b9">consume</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a7db8f1fe352e6cf1ed6b880432b585d5">TOKEN_RIGHT_PAREN</a>, <span class="stringliteral">&quot;Expect &#39;)&#39; after parameters.&quot;</span>);</div>
<div class="line"><a name="l02736"></a><span class="lineno"> 2736</span>&#160;}</div>
<div class="line"><a name="l02737"></a><span class="lineno"> 2737</span>&#160; </div>
<div class="line"><a name="l02738"></a><span class="lineno"> 2738</span>&#160;<span class="comment">// This table defines all of the parsing rules for the prefix and infix</span></div>
<div class="line"><a name="l02739"></a><span class="lineno"> 2739</span>&#160;<span class="comment">// expressions in the grammar. Expressions are parsed using a Pratt parser.</span></div>
<div class="line"><a name="l02740"></a><span class="lineno"> 2740</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l02741"></a><span class="lineno"> 2741</span>&#160;<span class="comment">// See: http://journal.stuffwithstuff.com/2011/03/19/pratt-parsers-expression-parsing-made-easy/</span></div>
<div class="line"><a name="l02742"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#addf5ec070e9499d36b7f2009ce736076"> 2742</a></span>&#160;<span class="preprocessor">#define UNUSED                     { NULL, NULL, NULL, PREC_NONE, NULL }</span></div>
<div class="line"><a name="l02743"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#a4d3f766a087c68a45bac40c274896e15"> 2743</a></span>&#160;<span class="preprocessor">#define PREFIX(fn)                 { fn, NULL, NULL, PREC_NONE, NULL }</span></div>
<div class="line"><a name="l02744"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#aab0a13b4d7d1c5702629f14d89297fbb"> 2744</a></span>&#160;<span class="preprocessor">#define INFIX(prec, fn)            { NULL, fn, NULL, prec, NULL }</span></div>
<div class="line"><a name="l02745"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#a5101848641cf7766dc317cf63d333c1d"> 2745</a></span>&#160;<span class="preprocessor">#define INFIX_OPERATOR(prec, name) { NULL, infixOp, infixSignature, prec, name }</span></div>
<div class="line"><a name="l02746"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#afab80431e74139737000d66fdcf06e1d"> 2746</a></span>&#160;<span class="preprocessor">#define PREFIX_OPERATOR(name)      { unaryOp, NULL, unarySignature, PREC_NONE, name }</span></div>
<div class="line"><a name="l02747"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#a7e54010dc9f49424bad8cabe47608f7c"> 2747</a></span>&#160;<span class="preprocessor">#define OPERATOR(name)             { unaryOp, infixOp, mixedSignature, PREC_TERM, name }</span></div>
<div class="line"><a name="l02748"></a><span class="lineno"> 2748</span>&#160; </div>
<div class="line"><a name="l02749"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#a36217037596077e796499013d5f89c42"> 2749</a></span>&#160;GrammarRule <a class="code" href="../../d4/de2/wren__compiler_8c.html#a36217037596077e796499013d5f89c42">rules</a>[] =</div>
<div class="line"><a name="l02750"></a><span class="lineno"> 2750</span>&#160;{</div>
<div class="line"><a name="l02751"></a><span class="lineno"> 2751</span>&#160;  <span class="comment">/* TOKEN_LEFT_PAREN    */</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a4d3f766a087c68a45bac40c274896e15">PREFIX</a>(<a class="code" href="../../d4/de2/wren__compiler_8c.html#a453c440b666fc199fe15ae4fc94b0eb8">grouping</a>),</div>
<div class="line"><a name="l02752"></a><span class="lineno"> 2752</span>&#160;  <span class="comment">/* TOKEN_RIGHT_PAREN   */</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#addf5ec070e9499d36b7f2009ce736076">UNUSED</a>,</div>
<div class="line"><a name="l02753"></a><span class="lineno"> 2753</span>&#160;  <span class="comment">/* TOKEN_LEFT_BRACKET  */</span> { <a class="code" href="../../d4/de2/wren__compiler_8c.html#a0a8cb504ca7e49b97ac975d128414786">list</a>, <a class="code" href="../../d4/de2/wren__compiler_8c.html#a41444a093a5170bf6ff69627445a457c">subscript</a>, <a class="code" href="../../d4/de2/wren__compiler_8c.html#a3753cc085696e463597365c204ac56f3">subscriptSignature</a>, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa4e7d1a473d0280792d98ddb184d3006a935e24750e9ae953c5291c5567be873a">PREC_CALL</a>, <a class="code" href="../../da/d2d/_stdio_stream_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> },</div>
<div class="line"><a name="l02754"></a><span class="lineno"> 2754</span>&#160;  <span class="comment">/* TOKEN_RIGHT_BRACKET */</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#addf5ec070e9499d36b7f2009ce736076">UNUSED</a>,</div>
<div class="line"><a name="l02755"></a><span class="lineno"> 2755</span>&#160;  <span class="comment">/* TOKEN_LEFT_BRACE    */</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a4d3f766a087c68a45bac40c274896e15">PREFIX</a>(<a class="code" href="../../d4/de2/wren__compiler_8c.html#a590c72120bf1ccc844e8c2ba7a63445a">map</a>),</div>
<div class="line"><a name="l02756"></a><span class="lineno"> 2756</span>&#160;  <span class="comment">/* TOKEN_RIGHT_BRACE   */</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#addf5ec070e9499d36b7f2009ce736076">UNUSED</a>,</div>
<div class="line"><a name="l02757"></a><span class="lineno"> 2757</span>&#160;  <span class="comment">/* TOKEN_COLON         */</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#addf5ec070e9499d36b7f2009ce736076">UNUSED</a>,</div>
<div class="line"><a name="l02758"></a><span class="lineno"> 2758</span>&#160;  <span class="comment">/* TOKEN_DOT           */</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#aab0a13b4d7d1c5702629f14d89297fbb">INFIX</a>(<a class="code" href="../../d4/de2/wren__compiler_8c.html#aa4e7d1a473d0280792d98ddb184d3006a935e24750e9ae953c5291c5567be873a">PREC_CALL</a>, <a class="code" href="../../d4/de2/wren__compiler_8c.html#abc28d53c9cefc405f7f74cd877d037d1">call</a>),</div>
<div class="line"><a name="l02759"></a><span class="lineno"> 2759</span>&#160;  <span class="comment">/* TOKEN_DOTDOT        */</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a5101848641cf7766dc317cf63d333c1d">INFIX_OPERATOR</a>(<a class="code" href="../../d4/de2/wren__compiler_8c.html#aa4e7d1a473d0280792d98ddb184d3006a8be9714d13699d89714562052521e6b2">PREC_RANGE</a>, <span class="stringliteral">&quot;..&quot;</span>),</div>
<div class="line"><a name="l02760"></a><span class="lineno"> 2760</span>&#160;  <span class="comment">/* TOKEN_DOTDOTDOT     */</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a5101848641cf7766dc317cf63d333c1d">INFIX_OPERATOR</a>(<a class="code" href="../../d4/de2/wren__compiler_8c.html#aa4e7d1a473d0280792d98ddb184d3006a8be9714d13699d89714562052521e6b2">PREC_RANGE</a>, <span class="stringliteral">&quot;...&quot;</span>),</div>
<div class="line"><a name="l02761"></a><span class="lineno"> 2761</span>&#160;  <span class="comment">/* TOKEN_COMMA         */</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#addf5ec070e9499d36b7f2009ce736076">UNUSED</a>,</div>
<div class="line"><a name="l02762"></a><span class="lineno"> 2762</span>&#160;  <span class="comment">/* TOKEN_STAR          */</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a5101848641cf7766dc317cf63d333c1d">INFIX_OPERATOR</a>(<a class="code" href="../../d4/de2/wren__compiler_8c.html#aa4e7d1a473d0280792d98ddb184d3006a512d339d43a8a07254dc51ae5cbf61de">PREC_FACTOR</a>, <span class="stringliteral">&quot;*&quot;</span>),</div>
<div class="line"><a name="l02763"></a><span class="lineno"> 2763</span>&#160;  <span class="comment">/* TOKEN_SLASH         */</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a5101848641cf7766dc317cf63d333c1d">INFIX_OPERATOR</a>(<a class="code" href="../../d4/de2/wren__compiler_8c.html#aa4e7d1a473d0280792d98ddb184d3006a512d339d43a8a07254dc51ae5cbf61de">PREC_FACTOR</a>, <span class="stringliteral">&quot;/&quot;</span>),</div>
<div class="line"><a name="l02764"></a><span class="lineno"> 2764</span>&#160;  <span class="comment">/* TOKEN_PERCENT       */</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a5101848641cf7766dc317cf63d333c1d">INFIX_OPERATOR</a>(<a class="code" href="../../d4/de2/wren__compiler_8c.html#aa4e7d1a473d0280792d98ddb184d3006a512d339d43a8a07254dc51ae5cbf61de">PREC_FACTOR</a>, <span class="stringliteral">&quot;%&quot;</span>),</div>
<div class="line"><a name="l02765"></a><span class="lineno"> 2765</span>&#160;  <span class="comment">/* TOKEN_HASH          */</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#addf5ec070e9499d36b7f2009ce736076">UNUSED</a>,</div>
<div class="line"><a name="l02766"></a><span class="lineno"> 2766</span>&#160;  <span class="comment">/* TOKEN_PLUS          */</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a5101848641cf7766dc317cf63d333c1d">INFIX_OPERATOR</a>(<a class="code" href="../../d4/de2/wren__compiler_8c.html#aa4e7d1a473d0280792d98ddb184d3006af8854b546d1ca4c09e1f8684a3cd6af3">PREC_TERM</a>, <span class="stringliteral">&quot;+&quot;</span>),</div>
<div class="line"><a name="l02767"></a><span class="lineno"> 2767</span>&#160;  <span class="comment">/* TOKEN_MINUS         */</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a7e54010dc9f49424bad8cabe47608f7c">OPERATOR</a>(<span class="stringliteral">&quot;-&quot;</span>),</div>
<div class="line"><a name="l02768"></a><span class="lineno"> 2768</span>&#160;  <span class="comment">/* TOKEN_LTLT          */</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a5101848641cf7766dc317cf63d333c1d">INFIX_OPERATOR</a>(<a class="code" href="../../d4/de2/wren__compiler_8c.html#aa4e7d1a473d0280792d98ddb184d3006a903b18c3dbaf0566f1cbc06e049935ef">PREC_BITWISE_SHIFT</a>, <span class="stringliteral">&quot;&lt;&lt;&quot;</span>),</div>
<div class="line"><a name="l02769"></a><span class="lineno"> 2769</span>&#160;  <span class="comment">/* TOKEN_GTGT          */</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a5101848641cf7766dc317cf63d333c1d">INFIX_OPERATOR</a>(<a class="code" href="../../d4/de2/wren__compiler_8c.html#aa4e7d1a473d0280792d98ddb184d3006a903b18c3dbaf0566f1cbc06e049935ef">PREC_BITWISE_SHIFT</a>, <span class="stringliteral">&quot;&gt;&gt;&quot;</span>),</div>
<div class="line"><a name="l02770"></a><span class="lineno"> 2770</span>&#160;  <span class="comment">/* TOKEN_PIPE          */</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a5101848641cf7766dc317cf63d333c1d">INFIX_OPERATOR</a>(<a class="code" href="../../d4/de2/wren__compiler_8c.html#aa4e7d1a473d0280792d98ddb184d3006abe4cbc14e17bf6505d055c95368ca2e5">PREC_BITWISE_OR</a>, <span class="stringliteral">&quot;|&quot;</span>),</div>
<div class="line"><a name="l02771"></a><span class="lineno"> 2771</span>&#160;  <span class="comment">/* TOKEN_PIPEPIPE      */</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#aab0a13b4d7d1c5702629f14d89297fbb">INFIX</a>(<a class="code" href="../../d4/de2/wren__compiler_8c.html#aa4e7d1a473d0280792d98ddb184d3006a64fa270482d302628e98c685632f4268">PREC_LOGICAL_OR</a>, <a class="code" href="../../d4/de2/wren__compiler_8c.html#a41ed4497d9803ce9b48c00e808e315c6">or_</a>),</div>
<div class="line"><a name="l02772"></a><span class="lineno"> 2772</span>&#160;  <span class="comment">/* TOKEN_CARET         */</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a5101848641cf7766dc317cf63d333c1d">INFIX_OPERATOR</a>(<a class="code" href="../../d4/de2/wren__compiler_8c.html#aa4e7d1a473d0280792d98ddb184d3006a875ea1a069608469e9aa3bb74191d912">PREC_BITWISE_XOR</a>, <span class="stringliteral">&quot;^&quot;</span>),</div>
<div class="line"><a name="l02773"></a><span class="lineno"> 2773</span>&#160;  <span class="comment">/* TOKEN_AMP           */</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a5101848641cf7766dc317cf63d333c1d">INFIX_OPERATOR</a>(<a class="code" href="../../d4/de2/wren__compiler_8c.html#aa4e7d1a473d0280792d98ddb184d3006aadadbfbd7d5f8fb39a22da4c406567ef">PREC_BITWISE_AND</a>, <span class="stringliteral">&quot;&amp;&quot;</span>),</div>
<div class="line"><a name="l02774"></a><span class="lineno"> 2774</span>&#160;  <span class="comment">/* TOKEN_AMPAMP        */</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#aab0a13b4d7d1c5702629f14d89297fbb">INFIX</a>(<a class="code" href="../../d4/de2/wren__compiler_8c.html#aa4e7d1a473d0280792d98ddb184d3006af6f26d1f69e85719e3acdb44ac4ee4ee">PREC_LOGICAL_AND</a>, <a class="code" href="../../d4/de2/wren__compiler_8c.html#afaaf49cc08d58cc733fc68c2c1696bb5">and_</a>),</div>
<div class="line"><a name="l02775"></a><span class="lineno"> 2775</span>&#160;  <span class="comment">/* TOKEN_BANG          */</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#afab80431e74139737000d66fdcf06e1d">PREFIX_OPERATOR</a>(<span class="stringliteral">&quot;!&quot;</span>),</div>
<div class="line"><a name="l02776"></a><span class="lineno"> 2776</span>&#160;  <span class="comment">/* TOKEN_TILDE         */</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#afab80431e74139737000d66fdcf06e1d">PREFIX_OPERATOR</a>(<span class="stringliteral">&quot;~&quot;</span>),</div>
<div class="line"><a name="l02777"></a><span class="lineno"> 2777</span>&#160;  <span class="comment">/* TOKEN_QUESTION      */</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#aab0a13b4d7d1c5702629f14d89297fbb">INFIX</a>(<a class="code" href="../../d4/de2/wren__compiler_8c.html#aa4e7d1a473d0280792d98ddb184d3006a5576e7223ab7e815dc3f0daefcaf5fe3">PREC_ASSIGNMENT</a>, <a class="code" href="../../d4/de2/wren__compiler_8c.html#a010575aac4ed7c8c68ad4a660f885889">conditional</a>),</div>
<div class="line"><a name="l02778"></a><span class="lineno"> 2778</span>&#160;  <span class="comment">/* TOKEN_EQ            */</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#addf5ec070e9499d36b7f2009ce736076">UNUSED</a>,</div>
<div class="line"><a name="l02779"></a><span class="lineno"> 2779</span>&#160;  <span class="comment">/* TOKEN_LT            */</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a5101848641cf7766dc317cf63d333c1d">INFIX_OPERATOR</a>(<a class="code" href="../../d4/de2/wren__compiler_8c.html#aa4e7d1a473d0280792d98ddb184d3006a97393227c3b9b3664833fb648de3c8af">PREC_COMPARISON</a>, <span class="stringliteral">&quot;&lt;&quot;</span>),</div>
<div class="line"><a name="l02780"></a><span class="lineno"> 2780</span>&#160;  <span class="comment">/* TOKEN_GT            */</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a5101848641cf7766dc317cf63d333c1d">INFIX_OPERATOR</a>(<a class="code" href="../../d4/de2/wren__compiler_8c.html#aa4e7d1a473d0280792d98ddb184d3006a97393227c3b9b3664833fb648de3c8af">PREC_COMPARISON</a>, <span class="stringliteral">&quot;&gt;&quot;</span>),</div>
<div class="line"><a name="l02781"></a><span class="lineno"> 2781</span>&#160;  <span class="comment">/* TOKEN_LTEQ          */</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a5101848641cf7766dc317cf63d333c1d">INFIX_OPERATOR</a>(<a class="code" href="../../d4/de2/wren__compiler_8c.html#aa4e7d1a473d0280792d98ddb184d3006a97393227c3b9b3664833fb648de3c8af">PREC_COMPARISON</a>, <span class="stringliteral">&quot;&lt;=&quot;</span>),</div>
<div class="line"><a name="l02782"></a><span class="lineno"> 2782</span>&#160;  <span class="comment">/* TOKEN_GTEQ          */</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a5101848641cf7766dc317cf63d333c1d">INFIX_OPERATOR</a>(<a class="code" href="../../d4/de2/wren__compiler_8c.html#aa4e7d1a473d0280792d98ddb184d3006a97393227c3b9b3664833fb648de3c8af">PREC_COMPARISON</a>, <span class="stringliteral">&quot;&gt;=&quot;</span>),</div>
<div class="line"><a name="l02783"></a><span class="lineno"> 2783</span>&#160;  <span class="comment">/* TOKEN_EQEQ          */</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a5101848641cf7766dc317cf63d333c1d">INFIX_OPERATOR</a>(<a class="code" href="../../d4/de2/wren__compiler_8c.html#aa4e7d1a473d0280792d98ddb184d3006a336bf98f3bbc6c9ec4436e7728ca9389">PREC_EQUALITY</a>, <span class="stringliteral">&quot;==&quot;</span>),</div>
<div class="line"><a name="l02784"></a><span class="lineno"> 2784</span>&#160;  <span class="comment">/* TOKEN_BANGEQ        */</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a5101848641cf7766dc317cf63d333c1d">INFIX_OPERATOR</a>(<a class="code" href="../../d4/de2/wren__compiler_8c.html#aa4e7d1a473d0280792d98ddb184d3006a336bf98f3bbc6c9ec4436e7728ca9389">PREC_EQUALITY</a>, <span class="stringliteral">&quot;!=&quot;</span>),</div>
<div class="line"><a name="l02785"></a><span class="lineno"> 2785</span>&#160;  <span class="comment">/* TOKEN_BREAK         */</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#addf5ec070e9499d36b7f2009ce736076">UNUSED</a>,</div>
<div class="line"><a name="l02786"></a><span class="lineno"> 2786</span>&#160;  <span class="comment">/* TOKEN_CONTINUE      */</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#addf5ec070e9499d36b7f2009ce736076">UNUSED</a>,</div>
<div class="line"><a name="l02787"></a><span class="lineno"> 2787</span>&#160;  <span class="comment">/* TOKEN_CLASS         */</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#addf5ec070e9499d36b7f2009ce736076">UNUSED</a>,</div>
<div class="line"><a name="l02788"></a><span class="lineno"> 2788</span>&#160;  <span class="comment">/* TOKEN_CONSTRUCT     */</span> { <a class="code" href="../../da/d2d/_stdio_stream_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../da/d2d/_stdio_stream_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aff6717562bb3c8c6b5d6f23b43b510b2">constructorSignature</a>, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa4e7d1a473d0280792d98ddb184d3006a2be887a6eb50f60bf0d6643d5986289c">PREC_NONE</a>, <a class="code" href="../../da/d2d/_stdio_stream_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> },</div>
<div class="line"><a name="l02789"></a><span class="lineno"> 2789</span>&#160;  <span class="comment">/* TOKEN_ELSE          */</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#addf5ec070e9499d36b7f2009ce736076">UNUSED</a>,</div>
<div class="line"><a name="l02790"></a><span class="lineno"> 2790</span>&#160;  <span class="comment">/* TOKEN_FALSE         */</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a4d3f766a087c68a45bac40c274896e15">PREFIX</a>(<span class="keywordtype">boolean</span>),</div>
<div class="line"><a name="l02791"></a><span class="lineno"> 2791</span>&#160;  <span class="comment">/* TOKEN_FOR           */</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#addf5ec070e9499d36b7f2009ce736076">UNUSED</a>,</div>
<div class="line"><a name="l02792"></a><span class="lineno"> 2792</span>&#160;  <span class="comment">/* TOKEN_FOREIGN       */</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#addf5ec070e9499d36b7f2009ce736076">UNUSED</a>,</div>
<div class="line"><a name="l02793"></a><span class="lineno"> 2793</span>&#160;  <span class="comment">/* TOKEN_IF            */</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#addf5ec070e9499d36b7f2009ce736076">UNUSED</a>,</div>
<div class="line"><a name="l02794"></a><span class="lineno"> 2794</span>&#160;  <span class="comment">/* TOKEN_IMPORT        */</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#addf5ec070e9499d36b7f2009ce736076">UNUSED</a>,</div>
<div class="line"><a name="l02795"></a><span class="lineno"> 2795</span>&#160;  <span class="comment">/* TOKEN_AS            */</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#addf5ec070e9499d36b7f2009ce736076">UNUSED</a>,</div>
<div class="line"><a name="l02796"></a><span class="lineno"> 2796</span>&#160;  <span class="comment">/* TOKEN_IN            */</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#addf5ec070e9499d36b7f2009ce736076">UNUSED</a>,</div>
<div class="line"><a name="l02797"></a><span class="lineno"> 2797</span>&#160;  <span class="comment">/* TOKEN_IS            */</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a5101848641cf7766dc317cf63d333c1d">INFIX_OPERATOR</a>(<a class="code" href="../../d4/de2/wren__compiler_8c.html#aa4e7d1a473d0280792d98ddb184d3006a4a6f91e6bc7a3c144f214c2e9263e674">PREC_IS</a>, <span class="stringliteral">&quot;is&quot;</span>),</div>
<div class="line"><a name="l02798"></a><span class="lineno"> 2798</span>&#160;  <span class="comment">/* TOKEN_NULL          */</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a4d3f766a087c68a45bac40c274896e15">PREFIX</a>(<span class="keyword">null</span>),</div>
<div class="line"><a name="l02799"></a><span class="lineno"> 2799</span>&#160;  <span class="comment">/* TOKEN_RETURN        */</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#addf5ec070e9499d36b7f2009ce736076">UNUSED</a>,</div>
<div class="line"><a name="l02800"></a><span class="lineno"> 2800</span>&#160;  <span class="comment">/* TOKEN_STATIC        */</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#addf5ec070e9499d36b7f2009ce736076">UNUSED</a>,</div>
<div class="line"><a name="l02801"></a><span class="lineno"> 2801</span>&#160;  <span class="comment">/* TOKEN_SUPER         */</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a4d3f766a087c68a45bac40c274896e15">PREFIX</a>(<a class="code" href="../../d4/de2/wren__compiler_8c.html#a82a42c1b41759f79a9e76c4c5a898ede">super_</a>),</div>
<div class="line"><a name="l02802"></a><span class="lineno"> 2802</span>&#160;  <span class="comment">/* TOKEN_THIS          */</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a4d3f766a087c68a45bac40c274896e15">PREFIX</a>(<a class="code" href="../../d4/de2/wren__compiler_8c.html#ac9bdea9edffa976d376376d9ca6d042a">this_</a>),</div>
<div class="line"><a name="l02803"></a><span class="lineno"> 2803</span>&#160;  <span class="comment">/* TOKEN_TRUE          */</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a4d3f766a087c68a45bac40c274896e15">PREFIX</a>(<span class="keywordtype">boolean</span>),</div>
<div class="line"><a name="l02804"></a><span class="lineno"> 2804</span>&#160;  <span class="comment">/* TOKEN_VAR           */</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#addf5ec070e9499d36b7f2009ce736076">UNUSED</a>,</div>
<div class="line"><a name="l02805"></a><span class="lineno"> 2805</span>&#160;  <span class="comment">/* TOKEN_WHILE         */</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#addf5ec070e9499d36b7f2009ce736076">UNUSED</a>,</div>
<div class="line"><a name="l02806"></a><span class="lineno"> 2806</span>&#160;  <span class="comment">/* TOKEN_FIELD         */</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a4d3f766a087c68a45bac40c274896e15">PREFIX</a>(<a class="code" href="../../d4/de2/wren__compiler_8c.html#add86bdd6e3897cf94eba510d97e12f25">field</a>),</div>
<div class="line"><a name="l02807"></a><span class="lineno"> 2807</span>&#160;  <span class="comment">/* TOKEN_STATIC_FIELD  */</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a4d3f766a087c68a45bac40c274896e15">PREFIX</a>(<a class="code" href="../../d4/de2/wren__compiler_8c.html#aa1f392a8806f59a267ba5c7b413b7577">staticField</a>),</div>
<div class="line"><a name="l02808"></a><span class="lineno"> 2808</span>&#160;  <span class="comment">/* TOKEN_NAME          */</span> { <a class="code" href="../../d4/de2/wren__compiler_8c.html#a59935c559e6df5f8a5f95110a971014d">name</a>, <a class="code" href="../../da/d2d/_stdio_stream_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d4/de2/wren__compiler_8c.html#a89156fcf9589f1e896bfcfede5fe8e78">namedSignature</a>, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa4e7d1a473d0280792d98ddb184d3006a2be887a6eb50f60bf0d6643d5986289c">PREC_NONE</a>, <a class="code" href="../../da/d2d/_stdio_stream_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> },</div>
<div class="line"><a name="l02809"></a><span class="lineno"> 2809</span>&#160;  <span class="comment">/* TOKEN_NUMBER        */</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a4d3f766a087c68a45bac40c274896e15">PREFIX</a>(<a class="code" href="../../d4/de2/wren__compiler_8c.html#ae4e9f96269b4e830731a0c5fcdb28d97">literal</a>),</div>
<div class="line"><a name="l02810"></a><span class="lineno"> 2810</span>&#160;  <span class="comment">/* TOKEN_STRING        */</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a4d3f766a087c68a45bac40c274896e15">PREFIX</a>(<a class="code" href="../../d4/de2/wren__compiler_8c.html#ae4e9f96269b4e830731a0c5fcdb28d97">literal</a>),</div>
<div class="line"><a name="l02811"></a><span class="lineno"> 2811</span>&#160;  <span class="comment">/* TOKEN_INTERPOLATION */</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a4d3f766a087c68a45bac40c274896e15">PREFIX</a>(<a class="code" href="../../d4/de2/wren__compiler_8c.html#afbde727a3fafa6041cfd3ffbe17c8e4f">stringInterpolation</a>),</div>
<div class="line"><a name="l02812"></a><span class="lineno"> 2812</span>&#160;  <span class="comment">/* TOKEN_LINE          */</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#addf5ec070e9499d36b7f2009ce736076">UNUSED</a>,</div>
<div class="line"><a name="l02813"></a><span class="lineno"> 2813</span>&#160;  <span class="comment">/* TOKEN_ERROR         */</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#addf5ec070e9499d36b7f2009ce736076">UNUSED</a>,</div>
<div class="line"><a name="l02814"></a><span class="lineno"> 2814</span>&#160;  <span class="comment">/* TOKEN_EOF           */</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#addf5ec070e9499d36b7f2009ce736076">UNUSED</a></div>
<div class="line"><a name="l02815"></a><span class="lineno"> 2815</span>&#160;};</div>
<div class="line"><a name="l02816"></a><span class="lineno"> 2816</span>&#160; </div>
<div class="line"><a name="l02817"></a><span class="lineno"> 2817</span>&#160;<span class="comment">// Gets the [GrammarRule] associated with tokens of [type].</span></div>
<div class="line"><a name="l02818"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#a5ab3a18d8b41f2391de63d94f75d887f"> 2818</a></span>&#160;<span class="keyword">static</span> GrammarRule* <a class="code" href="../../d4/de2/wren__compiler_8c.html#a5ab3a18d8b41f2391de63d94f75d887f">getRule</a>(<a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921">TokenType</a> type)</div>
<div class="line"><a name="l02819"></a><span class="lineno"> 2819</span>&#160;{</div>
<div class="line"><a name="l02820"></a><span class="lineno"> 2820</span>&#160;  <span class="keywordflow">return</span> &amp;<a class="code" href="../../d4/de2/wren__compiler_8c.html#a36217037596077e796499013d5f89c42">rules</a>[type];</div>
<div class="line"><a name="l02821"></a><span class="lineno"> 2821</span>&#160;}</div>
<div class="line"><a name="l02822"></a><span class="lineno"> 2822</span>&#160; </div>
<div class="line"><a name="l02823"></a><span class="lineno"> 2823</span>&#160;<span class="comment">// The main entrypoint for the top-down operator precedence parser.</span></div>
<div class="line"><a name="l02824"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#a8dfb172d48944ba16bc5531170b66fe7"> 2824</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a8dfb172d48944ba16bc5531170b66fe7">parsePrecedence</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa4e7d1a473d0280792d98ddb184d3006">Precedence</a> precedence)</div>
<div class="line"><a name="l02825"></a><span class="lineno"> 2825</span>&#160;{</div>
<div class="line"><a name="l02826"></a><span class="lineno"> 2826</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aff9308c9745d77724d06dbc7f1e7bd34">nextToken</a>(compiler-&gt;parser);</div>
<div class="line"><a name="l02827"></a><span class="lineno"> 2827</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#af17ed8f9c4320c542124f9f70dd05382">GrammarFn</a> <a class="code" href="../../df/d75/receiver-less_01calls_8txt.html#a129a3e5535abc54e9be509a15befda36">prefix</a> = <a class="code" href="../../d4/de2/wren__compiler_8c.html#a36217037596077e796499013d5f89c42">rules</a>[compiler-&gt;parser-&gt;previous.type].prefix;</div>
<div class="line"><a name="l02828"></a><span class="lineno"> 2828</span>&#160; </div>
<div class="line"><a name="l02829"></a><span class="lineno"> 2829</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../df/d75/receiver-less_01calls_8txt.html#a129a3e5535abc54e9be509a15befda36">prefix</a> == <a class="code" href="../../da/d2d/_stdio_stream_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l02830"></a><span class="lineno"> 2830</span>&#160;  {</div>
<div class="line"><a name="l02831"></a><span class="lineno"> 2831</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#ae74f1b74c02154518d7162a728d6118a">error</a>(compiler, <span class="stringliteral">&quot;Expected expression.&quot;</span>);</div>
<div class="line"><a name="l02832"></a><span class="lineno"> 2832</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02833"></a><span class="lineno"> 2833</span>&#160;  }</div>
<div class="line"><a name="l02834"></a><span class="lineno"> 2834</span>&#160; </div>
<div class="line"><a name="l02835"></a><span class="lineno"> 2835</span>&#160;  <span class="comment">// Track if the precendence of the surrounding expression is low enough to</span></div>
<div class="line"><a name="l02836"></a><span class="lineno"> 2836</span>&#160;  <span class="comment">// allow an assignment inside this one. We can&#39;t compile an assignment like</span></div>
<div class="line"><a name="l02837"></a><span class="lineno"> 2837</span>&#160;  <span class="comment">// a normal expression because it requires us to handle the LHS specially --</span></div>
<div class="line"><a name="l02838"></a><span class="lineno"> 2838</span>&#160;  <span class="comment">// it needs to be an lvalue, not an rvalue. So, for each of the kinds of</span></div>
<div class="line"><a name="l02839"></a><span class="lineno"> 2839</span>&#160;  <span class="comment">// expressions that are valid lvalues -- names, subscripts, fields, etc. --</span></div>
<div class="line"><a name="l02840"></a><span class="lineno"> 2840</span>&#160;  <span class="comment">// we pass in whether or not it appears in a context loose enough to allow</span></div>
<div class="line"><a name="l02841"></a><span class="lineno"> 2841</span>&#160;  <span class="comment">// &quot;=&quot;. If so, it will parse the &quot;=&quot; itself and handle it appropriately.</span></div>
<div class="line"><a name="l02842"></a><span class="lineno"> 2842</span>&#160;  <span class="keywordtype">bool</span> canAssign = precedence &lt;= <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa4e7d1a473d0280792d98ddb184d3006a76e3d5bfffbff44ebf531ac39e47aecf">PREC_CONDITIONAL</a>;</div>
<div class="line"><a name="l02843"></a><span class="lineno"> 2843</span>&#160;  <a class="code" href="../../df/d75/receiver-less_01calls_8txt.html#a129a3e5535abc54e9be509a15befda36">prefix</a>(compiler, canAssign);</div>
<div class="line"><a name="l02844"></a><span class="lineno"> 2844</span>&#160; </div>
<div class="line"><a name="l02845"></a><span class="lineno"> 2845</span>&#160;  <span class="keywordflow">while</span> (precedence &lt;= <a class="code" href="../../d4/de2/wren__compiler_8c.html#a36217037596077e796499013d5f89c42">rules</a>[compiler-&gt;parser-&gt;current.type].precedence)</div>
<div class="line"><a name="l02846"></a><span class="lineno"> 2846</span>&#160;  {</div>
<div class="line"><a name="l02847"></a><span class="lineno"> 2847</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#aff9308c9745d77724d06dbc7f1e7bd34">nextToken</a>(compiler-&gt;parser);</div>
<div class="line"><a name="l02848"></a><span class="lineno"> 2848</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#af17ed8f9c4320c542124f9f70dd05382">GrammarFn</a> infix = <a class="code" href="../../d4/de2/wren__compiler_8c.html#a36217037596077e796499013d5f89c42">rules</a>[compiler-&gt;parser-&gt;previous.type].infix;</div>
<div class="line"><a name="l02849"></a><span class="lineno"> 2849</span>&#160;    infix(compiler, canAssign);</div>
<div class="line"><a name="l02850"></a><span class="lineno"> 2850</span>&#160;  }</div>
<div class="line"><a name="l02851"></a><span class="lineno"> 2851</span>&#160;}</div>
<div class="line"><a name="l02852"></a><span class="lineno"> 2852</span>&#160; </div>
<div class="line"><a name="l02853"></a><span class="lineno"> 2853</span>&#160;<span class="comment">// Parses an expression. Unlike statements, expressions leave a resulting value</span></div>
<div class="line"><a name="l02854"></a><span class="lineno"> 2854</span>&#160;<span class="comment">// on the stack.</span></div>
<div class="line"><a name="l02855"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#ac20f67474558b6bf12fd74dd573ee7af"> 2855</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#ac20f67474558b6bf12fd74dd573ee7af">expression</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler)</div>
<div class="line"><a name="l02856"></a><span class="lineno"> 2856</span>&#160;{</div>
<div class="line"><a name="l02857"></a><span class="lineno"> 2857</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a8dfb172d48944ba16bc5531170b66fe7">parsePrecedence</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa4e7d1a473d0280792d98ddb184d3006a8b419613155c8c7ce8a9e8d344715245">PREC_LOWEST</a>);</div>
<div class="line"><a name="l02858"></a><span class="lineno"> 2858</span>&#160;}</div>
<div class="line"><a name="l02859"></a><span class="lineno"> 2859</span>&#160; </div>
<div class="line"><a name="l02860"></a><span class="lineno"> 2860</span>&#160;<span class="comment">// Returns the number of bytes for the arguments to the instruction </span></div>
<div class="line"><a name="l02861"></a><span class="lineno"> 2861</span>&#160;<span class="comment">// at [ip] in [fn]&#39;s bytecode.</span></div>
<div class="line"><a name="l02862"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#afd57b3f70dd82ffc95f0442863f34ad6"> 2862</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#afd57b3f70dd82ffc95f0442863f34ad6">getByteCountForArguments</a>(<span class="keyword">const</span> uint8_t* bytecode,</div>
<div class="line"><a name="l02863"></a><span class="lineno"> 2863</span>&#160;                            <span class="keyword">const</span> <a class="code" href="../../d2/d0a/wren__value_8h.html#ad777bf08d8e2b01df17ba5e3c51ae11f">Value</a>* constants, <span class="keywordtype">int</span> ip)</div>
<div class="line"><a name="l02864"></a><span class="lineno"> 2864</span>&#160;{</div>
<div class="line"><a name="l02865"></a><span class="lineno"> 2865</span>&#160;  <a class="code" href="../../d5/db1/wren__vm_8h.html#af31477bc48f67856bedb0fa8e5b5281d">Code</a> instruction = (<a class="code" href="../../d5/db1/wren__vm_8h.html#af31477bc48f67856bedb0fa8e5b5281d">Code</a>)bytecode[ip];</div>
<div class="line"><a name="l02866"></a><span class="lineno"> 2866</span>&#160;  <span class="keywordflow">switch</span> (instruction)</div>
<div class="line"><a name="l02867"></a><span class="lineno"> 2867</span>&#160;  {</div>
<div class="line"><a name="l02868"></a><span class="lineno"> 2868</span>&#160;    <span class="keywordflow">case</span> CODE_NULL:</div>
<div class="line"><a name="l02869"></a><span class="lineno"> 2869</span>&#160;    <span class="keywordflow">case</span> CODE_FALSE:</div>
<div class="line"><a name="l02870"></a><span class="lineno"> 2870</span>&#160;    <span class="keywordflow">case</span> CODE_TRUE:</div>
<div class="line"><a name="l02871"></a><span class="lineno"> 2871</span>&#160;    <span class="keywordflow">case</span> CODE_POP:</div>
<div class="line"><a name="l02872"></a><span class="lineno"> 2872</span>&#160;    <span class="keywordflow">case</span> CODE_CLOSE_UPVALUE:</div>
<div class="line"><a name="l02873"></a><span class="lineno"> 2873</span>&#160;    <span class="keywordflow">case</span> CODE_RETURN:</div>
<div class="line"><a name="l02874"></a><span class="lineno"> 2874</span>&#160;    <span class="keywordflow">case</span> CODE_END:</div>
<div class="line"><a name="l02875"></a><span class="lineno"> 2875</span>&#160;    <span class="keywordflow">case</span> CODE_LOAD_LOCAL_0:</div>
<div class="line"><a name="l02876"></a><span class="lineno"> 2876</span>&#160;    <span class="keywordflow">case</span> CODE_LOAD_LOCAL_1:</div>
<div class="line"><a name="l02877"></a><span class="lineno"> 2877</span>&#160;    <span class="keywordflow">case</span> CODE_LOAD_LOCAL_2:</div>
<div class="line"><a name="l02878"></a><span class="lineno"> 2878</span>&#160;    <span class="keywordflow">case</span> CODE_LOAD_LOCAL_3:</div>
<div class="line"><a name="l02879"></a><span class="lineno"> 2879</span>&#160;    <span class="keywordflow">case</span> CODE_LOAD_LOCAL_4:</div>
<div class="line"><a name="l02880"></a><span class="lineno"> 2880</span>&#160;    <span class="keywordflow">case</span> CODE_LOAD_LOCAL_5:</div>
<div class="line"><a name="l02881"></a><span class="lineno"> 2881</span>&#160;    <span class="keywordflow">case</span> CODE_LOAD_LOCAL_6:</div>
<div class="line"><a name="l02882"></a><span class="lineno"> 2882</span>&#160;    <span class="keywordflow">case</span> CODE_LOAD_LOCAL_7:</div>
<div class="line"><a name="l02883"></a><span class="lineno"> 2883</span>&#160;    <span class="keywordflow">case</span> CODE_LOAD_LOCAL_8:</div>
<div class="line"><a name="l02884"></a><span class="lineno"> 2884</span>&#160;    <span class="keywordflow">case</span> CODE_CONSTRUCT:</div>
<div class="line"><a name="l02885"></a><span class="lineno"> 2885</span>&#160;    <span class="keywordflow">case</span> CODE_FOREIGN_CONSTRUCT:</div>
<div class="line"><a name="l02886"></a><span class="lineno"> 2886</span>&#160;    <span class="keywordflow">case</span> CODE_FOREIGN_CLASS:</div>
<div class="line"><a name="l02887"></a><span class="lineno"> 2887</span>&#160;    <span class="keywordflow">case</span> CODE_END_MODULE:</div>
<div class="line"><a name="l02888"></a><span class="lineno"> 2888</span>&#160;    <span class="keywordflow">case</span> CODE_END_CLASS:</div>
<div class="line"><a name="l02889"></a><span class="lineno"> 2889</span>&#160;      <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02890"></a><span class="lineno"> 2890</span>&#160; </div>
<div class="line"><a name="l02891"></a><span class="lineno"> 2891</span>&#160;    <span class="keywordflow">case</span> CODE_LOAD_LOCAL:</div>
<div class="line"><a name="l02892"></a><span class="lineno"> 2892</span>&#160;    <span class="keywordflow">case</span> CODE_STORE_LOCAL:</div>
<div class="line"><a name="l02893"></a><span class="lineno"> 2893</span>&#160;    <span class="keywordflow">case</span> CODE_LOAD_UPVALUE:</div>
<div class="line"><a name="l02894"></a><span class="lineno"> 2894</span>&#160;    <span class="keywordflow">case</span> CODE_STORE_UPVALUE:</div>
<div class="line"><a name="l02895"></a><span class="lineno"> 2895</span>&#160;    <span class="keywordflow">case</span> CODE_LOAD_FIELD_THIS:</div>
<div class="line"><a name="l02896"></a><span class="lineno"> 2896</span>&#160;    <span class="keywordflow">case</span> CODE_STORE_FIELD_THIS:</div>
<div class="line"><a name="l02897"></a><span class="lineno"> 2897</span>&#160;    <span class="keywordflow">case</span> CODE_LOAD_FIELD:</div>
<div class="line"><a name="l02898"></a><span class="lineno"> 2898</span>&#160;    <span class="keywordflow">case</span> CODE_STORE_FIELD:</div>
<div class="line"><a name="l02899"></a><span class="lineno"> 2899</span>&#160;    <span class="keywordflow">case</span> CODE_CLASS:</div>
<div class="line"><a name="l02900"></a><span class="lineno"> 2900</span>&#160;      <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l02901"></a><span class="lineno"> 2901</span>&#160; </div>
<div class="line"><a name="l02902"></a><span class="lineno"> 2902</span>&#160;    <span class="keywordflow">case</span> CODE_CONSTANT:</div>
<div class="line"><a name="l02903"></a><span class="lineno"> 2903</span>&#160;    <span class="keywordflow">case</span> CODE_LOAD_MODULE_VAR:</div>
<div class="line"><a name="l02904"></a><span class="lineno"> 2904</span>&#160;    <span class="keywordflow">case</span> CODE_STORE_MODULE_VAR:</div>
<div class="line"><a name="l02905"></a><span class="lineno"> 2905</span>&#160;    <span class="keywordflow">case</span> CODE_CALL_0:</div>
<div class="line"><a name="l02906"></a><span class="lineno"> 2906</span>&#160;    <span class="keywordflow">case</span> CODE_CALL_1:</div>
<div class="line"><a name="l02907"></a><span class="lineno"> 2907</span>&#160;    <span class="keywordflow">case</span> CODE_CALL_2:</div>
<div class="line"><a name="l02908"></a><span class="lineno"> 2908</span>&#160;    <span class="keywordflow">case</span> CODE_CALL_3:</div>
<div class="line"><a name="l02909"></a><span class="lineno"> 2909</span>&#160;    <span class="keywordflow">case</span> CODE_CALL_4:</div>
<div class="line"><a name="l02910"></a><span class="lineno"> 2910</span>&#160;    <span class="keywordflow">case</span> CODE_CALL_5:</div>
<div class="line"><a name="l02911"></a><span class="lineno"> 2911</span>&#160;    <span class="keywordflow">case</span> CODE_CALL_6:</div>
<div class="line"><a name="l02912"></a><span class="lineno"> 2912</span>&#160;    <span class="keywordflow">case</span> CODE_CALL_7:</div>
<div class="line"><a name="l02913"></a><span class="lineno"> 2913</span>&#160;    <span class="keywordflow">case</span> CODE_CALL_8:</div>
<div class="line"><a name="l02914"></a><span class="lineno"> 2914</span>&#160;    <span class="keywordflow">case</span> CODE_CALL_9:</div>
<div class="line"><a name="l02915"></a><span class="lineno"> 2915</span>&#160;    <span class="keywordflow">case</span> CODE_CALL_10:</div>
<div class="line"><a name="l02916"></a><span class="lineno"> 2916</span>&#160;    <span class="keywordflow">case</span> CODE_CALL_11:</div>
<div class="line"><a name="l02917"></a><span class="lineno"> 2917</span>&#160;    <span class="keywordflow">case</span> CODE_CALL_12:</div>
<div class="line"><a name="l02918"></a><span class="lineno"> 2918</span>&#160;    <span class="keywordflow">case</span> CODE_CALL_13:</div>
<div class="line"><a name="l02919"></a><span class="lineno"> 2919</span>&#160;    <span class="keywordflow">case</span> CODE_CALL_14:</div>
<div class="line"><a name="l02920"></a><span class="lineno"> 2920</span>&#160;    <span class="keywordflow">case</span> CODE_CALL_15:</div>
<div class="line"><a name="l02921"></a><span class="lineno"> 2921</span>&#160;    <span class="keywordflow">case</span> CODE_CALL_16:</div>
<div class="line"><a name="l02922"></a><span class="lineno"> 2922</span>&#160;    <span class="keywordflow">case</span> CODE_JUMP:</div>
<div class="line"><a name="l02923"></a><span class="lineno"> 2923</span>&#160;    <span class="keywordflow">case</span> CODE_LOOP:</div>
<div class="line"><a name="l02924"></a><span class="lineno"> 2924</span>&#160;    <span class="keywordflow">case</span> CODE_JUMP_IF:</div>
<div class="line"><a name="l02925"></a><span class="lineno"> 2925</span>&#160;    <span class="keywordflow">case</span> CODE_AND:</div>
<div class="line"><a name="l02926"></a><span class="lineno"> 2926</span>&#160;    <span class="keywordflow">case</span> CODE_OR:</div>
<div class="line"><a name="l02927"></a><span class="lineno"> 2927</span>&#160;    <span class="keywordflow">case</span> CODE_METHOD_INSTANCE:</div>
<div class="line"><a name="l02928"></a><span class="lineno"> 2928</span>&#160;    <span class="keywordflow">case</span> CODE_METHOD_STATIC:</div>
<div class="line"><a name="l02929"></a><span class="lineno"> 2929</span>&#160;    <span class="keywordflow">case</span> CODE_IMPORT_MODULE:</div>
<div class="line"><a name="l02930"></a><span class="lineno"> 2930</span>&#160;    <span class="keywordflow">case</span> CODE_IMPORT_VARIABLE:</div>
<div class="line"><a name="l02931"></a><span class="lineno"> 2931</span>&#160;      <span class="keywordflow">return</span> 2;</div>
<div class="line"><a name="l02932"></a><span class="lineno"> 2932</span>&#160; </div>
<div class="line"><a name="l02933"></a><span class="lineno"> 2933</span>&#160;    <span class="keywordflow">case</span> CODE_SUPER_0:</div>
<div class="line"><a name="l02934"></a><span class="lineno"> 2934</span>&#160;    <span class="keywordflow">case</span> CODE_SUPER_1:</div>
<div class="line"><a name="l02935"></a><span class="lineno"> 2935</span>&#160;    <span class="keywordflow">case</span> CODE_SUPER_2:</div>
<div class="line"><a name="l02936"></a><span class="lineno"> 2936</span>&#160;    <span class="keywordflow">case</span> CODE_SUPER_3:</div>
<div class="line"><a name="l02937"></a><span class="lineno"> 2937</span>&#160;    <span class="keywordflow">case</span> CODE_SUPER_4:</div>
<div class="line"><a name="l02938"></a><span class="lineno"> 2938</span>&#160;    <span class="keywordflow">case</span> CODE_SUPER_5:</div>
<div class="line"><a name="l02939"></a><span class="lineno"> 2939</span>&#160;    <span class="keywordflow">case</span> CODE_SUPER_6:</div>
<div class="line"><a name="l02940"></a><span class="lineno"> 2940</span>&#160;    <span class="keywordflow">case</span> CODE_SUPER_7:</div>
<div class="line"><a name="l02941"></a><span class="lineno"> 2941</span>&#160;    <span class="keywordflow">case</span> CODE_SUPER_8:</div>
<div class="line"><a name="l02942"></a><span class="lineno"> 2942</span>&#160;    <span class="keywordflow">case</span> CODE_SUPER_9:</div>
<div class="line"><a name="l02943"></a><span class="lineno"> 2943</span>&#160;    <span class="keywordflow">case</span> CODE_SUPER_10:</div>
<div class="line"><a name="l02944"></a><span class="lineno"> 2944</span>&#160;    <span class="keywordflow">case</span> CODE_SUPER_11:</div>
<div class="line"><a name="l02945"></a><span class="lineno"> 2945</span>&#160;    <span class="keywordflow">case</span> CODE_SUPER_12:</div>
<div class="line"><a name="l02946"></a><span class="lineno"> 2946</span>&#160;    <span class="keywordflow">case</span> CODE_SUPER_13:</div>
<div class="line"><a name="l02947"></a><span class="lineno"> 2947</span>&#160;    <span class="keywordflow">case</span> CODE_SUPER_14:</div>
<div class="line"><a name="l02948"></a><span class="lineno"> 2948</span>&#160;    <span class="keywordflow">case</span> CODE_SUPER_15:</div>
<div class="line"><a name="l02949"></a><span class="lineno"> 2949</span>&#160;    <span class="keywordflow">case</span> CODE_SUPER_16:</div>
<div class="line"><a name="l02950"></a><span class="lineno"> 2950</span>&#160;      <span class="keywordflow">return</span> 4;</div>
<div class="line"><a name="l02951"></a><span class="lineno"> 2951</span>&#160; </div>
<div class="line"><a name="l02952"></a><span class="lineno"> 2952</span>&#160;    <span class="keywordflow">case</span> CODE_CLOSURE:</div>
<div class="line"><a name="l02953"></a><span class="lineno"> 2953</span>&#160;    {</div>
<div class="line"><a name="l02954"></a><span class="lineno"> 2954</span>&#160;      <span class="keywordtype">int</span> constant = (bytecode[ip + 1] &lt;&lt; 8) | bytecode[ip + 2];</div>
<div class="line"><a name="l02955"></a><span class="lineno"> 2955</span>&#160;      <a class="code" href="../../df/d87/struct_obj_fn.html">ObjFn</a>* loadedFn = <a class="code" href="../../d2/d0a/wren__value_8h.html#a49e112f611425c34766bdefa343fe2b9">AS_FN</a>(constants[constant]);</div>
<div class="line"><a name="l02956"></a><span class="lineno"> 2956</span>&#160; </div>
<div class="line"><a name="l02957"></a><span class="lineno"> 2957</span>&#160;      <span class="comment">// There are two bytes for the constant, then two for each upvalue.</span></div>
<div class="line"><a name="l02958"></a><span class="lineno"> 2958</span>&#160;      <span class="keywordflow">return</span> 2 + (loadedFn-&gt;<a class="code" href="../../df/d87/struct_obj_fn.html#add1082b59693436c4a7ce103e2be5dff">numUpvalues</a> * 2);</div>
<div class="line"><a name="l02959"></a><span class="lineno"> 2959</span>&#160;    }</div>
<div class="line"><a name="l02960"></a><span class="lineno"> 2960</span>&#160;  }</div>
<div class="line"><a name="l02961"></a><span class="lineno"> 2961</span>&#160; </div>
<div class="line"><a name="l02962"></a><span class="lineno"> 2962</span>&#160;  <a class="code" href="../../d3/d72/wren__common_8h.html#a0bc63b24b654ca433be7b97a3edde132">UNREACHABLE</a>();</div>
<div class="line"><a name="l02963"></a><span class="lineno"> 2963</span>&#160;  <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02964"></a><span class="lineno"> 2964</span>&#160;}</div>
<div class="line"><a name="l02965"></a><span class="lineno"> 2965</span>&#160; </div>
<div class="line"><a name="l02966"></a><span class="lineno"> 2966</span>&#160;<span class="comment">// Marks the beginning of a loop. Keeps track of the current instruction so we</span></div>
<div class="line"><a name="l02967"></a><span class="lineno"> 2967</span>&#160;<span class="comment">// know what to loop back to at the end of the body.</span></div>
<div class="line"><a name="l02968"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#a37c6651ed4eb1417ebd1c28fc6f5f4e4"> 2968</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a37c6651ed4eb1417ebd1c28fc6f5f4e4">startLoop</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#a2160d6b03577cf35a7df0a4044fab492">Loop</a>* <a class="code" href="../../d6/dd8/_eris_core_8cpp.html#a0b33edabd7f1c4e4a0bf32c67269be2f">loop</a>)</div>
<div class="line"><a name="l02969"></a><span class="lineno"> 2969</span>&#160;{</div>
<div class="line"><a name="l02970"></a><span class="lineno"> 2970</span>&#160;  <a class="code" href="../../d6/dd8/_eris_core_8cpp.html#a0b33edabd7f1c4e4a0bf32c67269be2f">loop</a>-&gt;enclosing = compiler-&gt;loop;</div>
<div class="line"><a name="l02971"></a><span class="lineno"> 2971</span>&#160;  <a class="code" href="../../d6/dd8/_eris_core_8cpp.html#a0b33edabd7f1c4e4a0bf32c67269be2f">loop</a>-&gt;start = compiler-&gt;fn-&gt;code.count - 1;</div>
<div class="line"><a name="l02972"></a><span class="lineno"> 2972</span>&#160;  <a class="code" href="../../d6/dd8/_eris_core_8cpp.html#a0b33edabd7f1c4e4a0bf32c67269be2f">loop</a>-&gt;scopeDepth = compiler-&gt;scopeDepth;</div>
<div class="line"><a name="l02973"></a><span class="lineno"> 2973</span>&#160;  compiler-&gt;loop = <a class="code" href="../../d6/dd8/_eris_core_8cpp.html#a0b33edabd7f1c4e4a0bf32c67269be2f">loop</a>;</div>
<div class="line"><a name="l02974"></a><span class="lineno"> 2974</span>&#160;}</div>
<div class="line"><a name="l02975"></a><span class="lineno"> 2975</span>&#160; </div>
<div class="line"><a name="l02976"></a><span class="lineno"> 2976</span>&#160;<span class="comment">// Emits the [CODE_JUMP_IF] instruction used to test the loop condition and</span></div>
<div class="line"><a name="l02977"></a><span class="lineno"> 2977</span>&#160;<span class="comment">// potentially exit the loop. Keeps track of the instruction so we can patch it</span></div>
<div class="line"><a name="l02978"></a><span class="lineno"> 2978</span>&#160;<span class="comment">// later once we know where the end of the body is.</span></div>
<div class="line"><a name="l02979"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#af9ced5f005c5b4903f97418d7070c0e5"> 2979</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#af9ced5f005c5b4903f97418d7070c0e5">testExitLoop</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler)</div>
<div class="line"><a name="l02980"></a><span class="lineno"> 2980</span>&#160;{</div>
<div class="line"><a name="l02981"></a><span class="lineno"> 2981</span>&#160;  compiler-&gt;loop-&gt;exitJump = <a class="code" href="../../d4/de2/wren__compiler_8c.html#ac30bdcdc8f7ab87bb8f844b7d2bcd113">emitJump</a>(compiler, CODE_JUMP_IF);</div>
<div class="line"><a name="l02982"></a><span class="lineno"> 2982</span>&#160;}</div>
<div class="line"><a name="l02983"></a><span class="lineno"> 2983</span>&#160; </div>
<div class="line"><a name="l02984"></a><span class="lineno"> 2984</span>&#160;<span class="comment">// Compiles the body of the loop and tracks its extent so that contained &quot;break&quot;</span></div>
<div class="line"><a name="l02985"></a><span class="lineno"> 2985</span>&#160;<span class="comment">// statements can be handled correctly.</span></div>
<div class="line"><a name="l02986"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#a074a1649744dc32a778909c5d5b24b14"> 2986</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a074a1649744dc32a778909c5d5b24b14">loopBody</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler)</div>
<div class="line"><a name="l02987"></a><span class="lineno"> 2987</span>&#160;{</div>
<div class="line"><a name="l02988"></a><span class="lineno"> 2988</span>&#160;  compiler-&gt;loop-&gt;body = compiler-&gt;fn-&gt;code.count;</div>
<div class="line"><a name="l02989"></a><span class="lineno"> 2989</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a1b50adda3f611e35b1bf68776af68f6d">statement</a>(compiler);</div>
<div class="line"><a name="l02990"></a><span class="lineno"> 2990</span>&#160;}</div>
<div class="line"><a name="l02991"></a><span class="lineno"> 2991</span>&#160; </div>
<div class="line"><a name="l02992"></a><span class="lineno"> 2992</span>&#160;<span class="comment">// Ends the current innermost loop. Patches up all jumps and breaks now that</span></div>
<div class="line"><a name="l02993"></a><span class="lineno"> 2993</span>&#160;<span class="comment">// we know where the end of the loop is.</span></div>
<div class="line"><a name="l02994"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#a4e54b0530e648f4f3ef2b1163c9309d9"> 2994</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a4e54b0530e648f4f3ef2b1163c9309d9">endLoop</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler)</div>
<div class="line"><a name="l02995"></a><span class="lineno"> 2995</span>&#160;{</div>
<div class="line"><a name="l02996"></a><span class="lineno"> 2996</span>&#160;  <span class="comment">// We don&#39;t check for overflow here since the forward jump over the loop body</span></div>
<div class="line"><a name="l02997"></a><span class="lineno"> 2997</span>&#160;  <span class="comment">// will report an error for the same problem.</span></div>
<div class="line"><a name="l02998"></a><span class="lineno"> 2998</span>&#160;  <span class="keywordtype">int</span> loopOffset = compiler-&gt;fn-&gt;code.count - compiler-&gt;loop-&gt;start + 2;</div>
<div class="line"><a name="l02999"></a><span class="lineno"> 2999</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a3a17c9fef3d6388b2192ae1ce77483c1">emitShortArg</a>(compiler, CODE_LOOP, loopOffset);</div>
<div class="line"><a name="l03000"></a><span class="lineno"> 3000</span>&#160; </div>
<div class="line"><a name="l03001"></a><span class="lineno"> 3001</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a51f59acfb3ac3a9b347ed8fd5086ab46">patchJump</a>(compiler, compiler-&gt;loop-&gt;exitJump);</div>
<div class="line"><a name="l03002"></a><span class="lineno"> 3002</span>&#160; </div>
<div class="line"><a name="l03003"></a><span class="lineno"> 3003</span>&#160;  <span class="comment">// Find any break placeholder instructions (which will be CODE_END in the</span></div>
<div class="line"><a name="l03004"></a><span class="lineno"> 3004</span>&#160;  <span class="comment">// bytecode) and replace them with real jumps.</span></div>
<div class="line"><a name="l03005"></a><span class="lineno"> 3005</span>&#160;  <span class="keywordtype">int</span> i = compiler-&gt;loop-&gt;body;</div>
<div class="line"><a name="l03006"></a><span class="lineno"> 3006</span>&#160;  <span class="keywordflow">while</span> (i &lt; compiler-&gt;<a class="code" href="../../d0/de9/receiver-less_01calls_012_8txt.html#a5d69482e1e5c9b54df78b8f9595d7952">fn</a>-&gt;code.count)</div>
<div class="line"><a name="l03007"></a><span class="lineno"> 3007</span>&#160;  {</div>
<div class="line"><a name="l03008"></a><span class="lineno"> 3008</span>&#160;    <span class="keywordflow">if</span> (compiler-&gt;fn-&gt;code.data[i] == CODE_END)</div>
<div class="line"><a name="l03009"></a><span class="lineno"> 3009</span>&#160;    {</div>
<div class="line"><a name="l03010"></a><span class="lineno"> 3010</span>&#160;      compiler-&gt;fn-&gt;code.data[i] = CODE_JUMP;</div>
<div class="line"><a name="l03011"></a><span class="lineno"> 3011</span>&#160;      <a class="code" href="../../d4/de2/wren__compiler_8c.html#a51f59acfb3ac3a9b347ed8fd5086ab46">patchJump</a>(compiler, i + 1);</div>
<div class="line"><a name="l03012"></a><span class="lineno"> 3012</span>&#160;      i += 3;</div>
<div class="line"><a name="l03013"></a><span class="lineno"> 3013</span>&#160;    }</div>
<div class="line"><a name="l03014"></a><span class="lineno"> 3014</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l03015"></a><span class="lineno"> 3015</span>&#160;    {</div>
<div class="line"><a name="l03016"></a><span class="lineno"> 3016</span>&#160;      <span class="comment">// Skip this instruction and its arguments.</span></div>
<div class="line"><a name="l03017"></a><span class="lineno"> 3017</span>&#160;      i += 1 + <a class="code" href="../../d4/de2/wren__compiler_8c.html#afd57b3f70dd82ffc95f0442863f34ad6">getByteCountForArguments</a>(compiler-&gt;fn-&gt;code.data,</div>
<div class="line"><a name="l03018"></a><span class="lineno"> 3018</span>&#160;                               compiler-&gt;fn-&gt;constants.data, i);</div>
<div class="line"><a name="l03019"></a><span class="lineno"> 3019</span>&#160;    }</div>
<div class="line"><a name="l03020"></a><span class="lineno"> 3020</span>&#160;  }</div>
<div class="line"><a name="l03021"></a><span class="lineno"> 3021</span>&#160; </div>
<div class="line"><a name="l03022"></a><span class="lineno"> 3022</span>&#160;  compiler-&gt;loop = compiler-&gt;loop-&gt;enclosing;</div>
<div class="line"><a name="l03023"></a><span class="lineno"> 3023</span>&#160;}</div>
<div class="line"><a name="l03024"></a><span class="lineno"> 3024</span>&#160; </div>
<div class="line"><a name="l03025"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#af0278a0c6c812bdb67378f6b686499e6"> 3025</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#af0278a0c6c812bdb67378f6b686499e6">forStatement</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler)</div>
<div class="line"><a name="l03026"></a><span class="lineno"> 3026</span>&#160;{</div>
<div class="line"><a name="l03027"></a><span class="lineno"> 3027</span>&#160;  <span class="comment">// A for statement like:</span></div>
<div class="line"><a name="l03028"></a><span class="lineno"> 3028</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l03029"></a><span class="lineno"> 3029</span>&#160;  <span class="comment">//     for (i in sequence.expression) {</span></div>
<div class="line"><a name="l03030"></a><span class="lineno"> 3030</span>&#160;  <span class="comment">//       System.print(i)</span></div>
<div class="line"><a name="l03031"></a><span class="lineno"> 3031</span>&#160;  <span class="comment">//     }</span></div>
<div class="line"><a name="l03032"></a><span class="lineno"> 3032</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l03033"></a><span class="lineno"> 3033</span>&#160;  <span class="comment">// Is compiled to bytecode almost as if the source looked like this:</span></div>
<div class="line"><a name="l03034"></a><span class="lineno"> 3034</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l03035"></a><span class="lineno"> 3035</span>&#160;  <span class="comment">//     {</span></div>
<div class="line"><a name="l03036"></a><span class="lineno"> 3036</span>&#160;  <span class="comment">//       var seq_ = sequence.expression</span></div>
<div class="line"><a name="l03037"></a><span class="lineno"> 3037</span>&#160;  <span class="comment">//       var iter_</span></div>
<div class="line"><a name="l03038"></a><span class="lineno"> 3038</span>&#160;  <span class="comment">//       while (iter_ = seq_.iterate(iter_)) {</span></div>
<div class="line"><a name="l03039"></a><span class="lineno"> 3039</span>&#160;  <span class="comment">//         var i = seq_.iteratorValue(iter_)</span></div>
<div class="line"><a name="l03040"></a><span class="lineno"> 3040</span>&#160;  <span class="comment">//         System.print(i)</span></div>
<div class="line"><a name="l03041"></a><span class="lineno"> 3041</span>&#160;  <span class="comment">//       }</span></div>
<div class="line"><a name="l03042"></a><span class="lineno"> 3042</span>&#160;  <span class="comment">//     }</span></div>
<div class="line"><a name="l03043"></a><span class="lineno"> 3043</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l03044"></a><span class="lineno"> 3044</span>&#160;  <span class="comment">// It&#39;s not exactly this, because the synthetic variables `seq_` and `iter_`</span></div>
<div class="line"><a name="l03045"></a><span class="lineno"> 3045</span>&#160;  <span class="comment">// actually get names that aren&#39;t valid Wren identfiers, but that&#39;s the basic</span></div>
<div class="line"><a name="l03046"></a><span class="lineno"> 3046</span>&#160;  <span class="comment">// idea.</span></div>
<div class="line"><a name="l03047"></a><span class="lineno"> 3047</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l03048"></a><span class="lineno"> 3048</span>&#160;  <span class="comment">// The important parts are:</span></div>
<div class="line"><a name="l03049"></a><span class="lineno"> 3049</span>&#160;  <span class="comment">// - The sequence expression is only evaluated once.</span></div>
<div class="line"><a name="l03050"></a><span class="lineno"> 3050</span>&#160;  <span class="comment">// - The .iterate() method is used to advance the iterator and determine if</span></div>
<div class="line"><a name="l03051"></a><span class="lineno"> 3051</span>&#160;  <span class="comment">//   it should exit the loop.</span></div>
<div class="line"><a name="l03052"></a><span class="lineno"> 3052</span>&#160;  <span class="comment">// - The .iteratorValue() method is used to get the value at the current</span></div>
<div class="line"><a name="l03053"></a><span class="lineno"> 3053</span>&#160;  <span class="comment">//   iterator position.</span></div>
<div class="line"><a name="l03054"></a><span class="lineno"> 3054</span>&#160; </div>
<div class="line"><a name="l03055"></a><span class="lineno"> 3055</span>&#160;  <span class="comment">// Create a scope for the hidden local variables used for the iterator.</span></div>
<div class="line"><a name="l03056"></a><span class="lineno"> 3056</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#ad3240fb788071077fd8bc9e481079cda">pushScope</a>(compiler);</div>
<div class="line"><a name="l03057"></a><span class="lineno"> 3057</span>&#160; </div>
<div class="line"><a name="l03058"></a><span class="lineno"> 3058</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aed515d74eb0faafbaa8d63f05daf90b9">consume</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921ab958e67632477fb20b223edfef5a4a3f">TOKEN_LEFT_PAREN</a>, <span class="stringliteral">&quot;Expect &#39;(&#39; after &#39;for&#39;.&quot;</span>);</div>
<div class="line"><a name="l03059"></a><span class="lineno"> 3059</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aed515d74eb0faafbaa8d63f05daf90b9">consume</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a56d9afac7a1508302f85a77d1f3ba8b2">TOKEN_NAME</a>, <span class="stringliteral">&quot;Expect for loop variable name.&quot;</span>);</div>
<div class="line"><a name="l03060"></a><span class="lineno"> 3060</span>&#160; </div>
<div class="line"><a name="l03061"></a><span class="lineno"> 3061</span>&#160;  <span class="comment">// Remember the name of the loop variable.</span></div>
<div class="line"><a name="l03062"></a><span class="lineno"> 3062</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="../../d4/de2/wren__compiler_8c.html#a59935c559e6df5f8a5f95110a971014d">name</a> = compiler-&gt;parser-&gt;previous.start;</div>
<div class="line"><a name="l03063"></a><span class="lineno"> 3063</span>&#160;  <span class="keywordtype">int</span> length = compiler-&gt;parser-&gt;previous.length;</div>
<div class="line"><a name="l03064"></a><span class="lineno"> 3064</span>&#160; </div>
<div class="line"><a name="l03065"></a><span class="lineno"> 3065</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aed515d74eb0faafbaa8d63f05daf90b9">consume</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921aab6505c0fd8126a58622ad931de3ce86">TOKEN_IN</a>, <span class="stringliteral">&quot;Expect &#39;in&#39; after loop variable.&quot;</span>);</div>
<div class="line"><a name="l03066"></a><span class="lineno"> 3066</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#acbf1748d7e097833a292ee0caaa50d05">ignoreNewlines</a>(compiler);</div>
<div class="line"><a name="l03067"></a><span class="lineno"> 3067</span>&#160; </div>
<div class="line"><a name="l03068"></a><span class="lineno"> 3068</span>&#160;  <span class="comment">// Evaluate the sequence expression and store it in a hidden local variable.</span></div>
<div class="line"><a name="l03069"></a><span class="lineno"> 3069</span>&#160;  <span class="comment">// The space in the variable name ensures it won&#39;t collide with a user-defined</span></div>
<div class="line"><a name="l03070"></a><span class="lineno"> 3070</span>&#160;  <span class="comment">// variable.</span></div>
<div class="line"><a name="l03071"></a><span class="lineno"> 3071</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#ac20f67474558b6bf12fd74dd573ee7af">expression</a>(compiler);</div>
<div class="line"><a name="l03072"></a><span class="lineno"> 3072</span>&#160; </div>
<div class="line"><a name="l03073"></a><span class="lineno"> 3073</span>&#160;  <span class="comment">// Verify that there is space to hidden local variables.</span></div>
<div class="line"><a name="l03074"></a><span class="lineno"> 3074</span>&#160;  <span class="comment">// Note that we expect only two addLocal calls next to each other in the</span></div>
<div class="line"><a name="l03075"></a><span class="lineno"> 3075</span>&#160;  <span class="comment">// following code.</span></div>
<div class="line"><a name="l03076"></a><span class="lineno"> 3076</span>&#160;  <span class="keywordflow">if</span> (compiler-&gt;numLocals + 2 &gt; <a class="code" href="../../d4/de2/wren__compiler_8c.html#a0a12e0946596048fabb91bc99d33c1a5">MAX_LOCALS</a>)</div>
<div class="line"><a name="l03077"></a><span class="lineno"> 3077</span>&#160;  {</div>
<div class="line"><a name="l03078"></a><span class="lineno"> 3078</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#ae74f1b74c02154518d7162a728d6118a">error</a>(compiler, <span class="stringliteral">&quot;Cannot declare more than %d variables in one scope. (Not enough space for for-loops internal variables)&quot;</span>,</div>
<div class="line"><a name="l03079"></a><span class="lineno"> 3079</span>&#160;          <a class="code" href="../../d4/de2/wren__compiler_8c.html#a0a12e0946596048fabb91bc99d33c1a5">MAX_LOCALS</a>);</div>
<div class="line"><a name="l03080"></a><span class="lineno"> 3080</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03081"></a><span class="lineno"> 3081</span>&#160;  }</div>
<div class="line"><a name="l03082"></a><span class="lineno"> 3082</span>&#160;  <span class="keywordtype">int</span> seqSlot = <a class="code" href="../../d4/de2/wren__compiler_8c.html#a9bd2c0d9435a0ab262ba508ec071fa83">addLocal</a>(compiler, <span class="stringliteral">&quot;seq &quot;</span>, 4);</div>
<div class="line"><a name="l03083"></a><span class="lineno"> 3083</span>&#160; </div>
<div class="line"><a name="l03084"></a><span class="lineno"> 3084</span>&#160;  <span class="comment">// Create another hidden local for the iterator object.</span></div>
<div class="line"><a name="l03085"></a><span class="lineno"> 3085</span>&#160;  <span class="keyword">null</span>(compiler, <span class="keyword">false</span>);</div>
<div class="line"><a name="l03086"></a><span class="lineno"> 3086</span>&#160;  <span class="keywordtype">int</span> iterSlot = <a class="code" href="../../d4/de2/wren__compiler_8c.html#a9bd2c0d9435a0ab262ba508ec071fa83">addLocal</a>(compiler, <span class="stringliteral">&quot;iter &quot;</span>, 5);</div>
<div class="line"><a name="l03087"></a><span class="lineno"> 3087</span>&#160; </div>
<div class="line"><a name="l03088"></a><span class="lineno"> 3088</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aed515d74eb0faafbaa8d63f05daf90b9">consume</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a7db8f1fe352e6cf1ed6b880432b585d5">TOKEN_RIGHT_PAREN</a>, <span class="stringliteral">&quot;Expect &#39;)&#39; after loop expression.&quot;</span>);</div>
<div class="line"><a name="l03089"></a><span class="lineno"> 3089</span>&#160; </div>
<div class="line"><a name="l03090"></a><span class="lineno"> 3090</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a2160d6b03577cf35a7df0a4044fab492">Loop</a> <a class="code" href="../../d6/dd8/_eris_core_8cpp.html#a0b33edabd7f1c4e4a0bf32c67269be2f">loop</a>;</div>
<div class="line"><a name="l03091"></a><span class="lineno"> 3091</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a37c6651ed4eb1417ebd1c28fc6f5f4e4">startLoop</a>(compiler, &amp;<a class="code" href="../../d6/dd8/_eris_core_8cpp.html#a0b33edabd7f1c4e4a0bf32c67269be2f">loop</a>);</div>
<div class="line"><a name="l03092"></a><span class="lineno"> 3092</span>&#160; </div>
<div class="line"><a name="l03093"></a><span class="lineno"> 3093</span>&#160;  <span class="comment">// Advance the iterator by calling the &quot;.iterate&quot; method on the sequence.</span></div>
<div class="line"><a name="l03094"></a><span class="lineno"> 3094</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a63123f2816d2d9f3a7c145bd4e4fe81f">loadLocal</a>(compiler, seqSlot);</div>
<div class="line"><a name="l03095"></a><span class="lineno"> 3095</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a63123f2816d2d9f3a7c145bd4e4fe81f">loadLocal</a>(compiler, iterSlot);</div>
<div class="line"><a name="l03096"></a><span class="lineno"> 3096</span>&#160; </div>
<div class="line"><a name="l03097"></a><span class="lineno"> 3097</span>&#160;  <span class="comment">// Update and test the iterator.</span></div>
<div class="line"><a name="l03098"></a><span class="lineno"> 3098</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a659fca4caa4720785ab7fbddcb247fb7">callMethod</a>(compiler, 1, <span class="stringliteral">&quot;iterate(_)&quot;</span>, 10);</div>
<div class="line"><a name="l03099"></a><span class="lineno"> 3099</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a57b01730ba60c3cf3d1237cfbd32b9cc">emitByteArg</a>(compiler, CODE_STORE_LOCAL, iterSlot);</div>
<div class="line"><a name="l03100"></a><span class="lineno"> 3100</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#af9ced5f005c5b4903f97418d7070c0e5">testExitLoop</a>(compiler);</div>
<div class="line"><a name="l03101"></a><span class="lineno"> 3101</span>&#160; </div>
<div class="line"><a name="l03102"></a><span class="lineno"> 3102</span>&#160;  <span class="comment">// Get the current value in the sequence by calling &quot;.iteratorValue&quot;.</span></div>
<div class="line"><a name="l03103"></a><span class="lineno"> 3103</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a63123f2816d2d9f3a7c145bd4e4fe81f">loadLocal</a>(compiler, seqSlot);</div>
<div class="line"><a name="l03104"></a><span class="lineno"> 3104</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a63123f2816d2d9f3a7c145bd4e4fe81f">loadLocal</a>(compiler, iterSlot);</div>
<div class="line"><a name="l03105"></a><span class="lineno"> 3105</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a659fca4caa4720785ab7fbddcb247fb7">callMethod</a>(compiler, 1, <span class="stringliteral">&quot;iteratorValue(_)&quot;</span>, 16);</div>
<div class="line"><a name="l03106"></a><span class="lineno"> 3106</span>&#160; </div>
<div class="line"><a name="l03107"></a><span class="lineno"> 3107</span>&#160;  <span class="comment">// Bind the loop variable in its own scope. This ensures we get a fresh</span></div>
<div class="line"><a name="l03108"></a><span class="lineno"> 3108</span>&#160;  <span class="comment">// variable each iteration so that closures for it don&#39;t all see the same one.</span></div>
<div class="line"><a name="l03109"></a><span class="lineno"> 3109</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#ad3240fb788071077fd8bc9e481079cda">pushScope</a>(compiler);</div>
<div class="line"><a name="l03110"></a><span class="lineno"> 3110</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a9bd2c0d9435a0ab262ba508ec071fa83">addLocal</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#a59935c559e6df5f8a5f95110a971014d">name</a>, length);</div>
<div class="line"><a name="l03111"></a><span class="lineno"> 3111</span>&#160; </div>
<div class="line"><a name="l03112"></a><span class="lineno"> 3112</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a074a1649744dc32a778909c5d5b24b14">loopBody</a>(compiler);</div>
<div class="line"><a name="l03113"></a><span class="lineno"> 3113</span>&#160; </div>
<div class="line"><a name="l03114"></a><span class="lineno"> 3114</span>&#160;  <span class="comment">// Loop variable.</span></div>
<div class="line"><a name="l03115"></a><span class="lineno"> 3115</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a34f07e4ff7876be8b8cc88f2a7e3ebda">popScope</a>(compiler);</div>
<div class="line"><a name="l03116"></a><span class="lineno"> 3116</span>&#160; </div>
<div class="line"><a name="l03117"></a><span class="lineno"> 3117</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a4e54b0530e648f4f3ef2b1163c9309d9">endLoop</a>(compiler);</div>
<div class="line"><a name="l03118"></a><span class="lineno"> 3118</span>&#160; </div>
<div class="line"><a name="l03119"></a><span class="lineno"> 3119</span>&#160;  <span class="comment">// Hidden variables.</span></div>
<div class="line"><a name="l03120"></a><span class="lineno"> 3120</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a34f07e4ff7876be8b8cc88f2a7e3ebda">popScope</a>(compiler);</div>
<div class="line"><a name="l03121"></a><span class="lineno"> 3121</span>&#160;}</div>
<div class="line"><a name="l03122"></a><span class="lineno"> 3122</span>&#160; </div>
<div class="line"><a name="l03123"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#ae65b6e8e2808fdfbc9bd8078332f4ca9"> 3123</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#ae65b6e8e2808fdfbc9bd8078332f4ca9">ifStatement</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler)</div>
<div class="line"><a name="l03124"></a><span class="lineno"> 3124</span>&#160;{</div>
<div class="line"><a name="l03125"></a><span class="lineno"> 3125</span>&#160;  <span class="comment">// Compile the condition.</span></div>
<div class="line"><a name="l03126"></a><span class="lineno"> 3126</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aed515d74eb0faafbaa8d63f05daf90b9">consume</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921ab958e67632477fb20b223edfef5a4a3f">TOKEN_LEFT_PAREN</a>, <span class="stringliteral">&quot;Expect &#39;(&#39; after &#39;if&#39;.&quot;</span>);</div>
<div class="line"><a name="l03127"></a><span class="lineno"> 3127</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#ac20f67474558b6bf12fd74dd573ee7af">expression</a>(compiler);</div>
<div class="line"><a name="l03128"></a><span class="lineno"> 3128</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aed515d74eb0faafbaa8d63f05daf90b9">consume</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a7db8f1fe352e6cf1ed6b880432b585d5">TOKEN_RIGHT_PAREN</a>, <span class="stringliteral">&quot;Expect &#39;)&#39; after if condition.&quot;</span>);</div>
<div class="line"><a name="l03129"></a><span class="lineno"> 3129</span>&#160;  </div>
<div class="line"><a name="l03130"></a><span class="lineno"> 3130</span>&#160;  <span class="comment">// Jump to the else branch if the condition is false.</span></div>
<div class="line"><a name="l03131"></a><span class="lineno"> 3131</span>&#160;  <span class="keywordtype">int</span> ifJump = <a class="code" href="../../d4/de2/wren__compiler_8c.html#ac30bdcdc8f7ab87bb8f844b7d2bcd113">emitJump</a>(compiler, CODE_JUMP_IF);</div>
<div class="line"><a name="l03132"></a><span class="lineno"> 3132</span>&#160;  </div>
<div class="line"><a name="l03133"></a><span class="lineno"> 3133</span>&#160;  <span class="comment">// Compile the then branch.</span></div>
<div class="line"><a name="l03134"></a><span class="lineno"> 3134</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a1b50adda3f611e35b1bf68776af68f6d">statement</a>(compiler);</div>
<div class="line"><a name="l03135"></a><span class="lineno"> 3135</span>&#160;  </div>
<div class="line"><a name="l03136"></a><span class="lineno"> 3136</span>&#160;  <span class="comment">// Compile the else branch if there is one.</span></div>
<div class="line"><a name="l03137"></a><span class="lineno"> 3137</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d4/de2/wren__compiler_8c.html#af4fe195796c3e700b61d62dafd263295">match</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921af1444e318c1d452a3c6dbb924a7e932a">TOKEN_ELSE</a>))</div>
<div class="line"><a name="l03138"></a><span class="lineno"> 3138</span>&#160;  {</div>
<div class="line"><a name="l03139"></a><span class="lineno"> 3139</span>&#160;    <span class="comment">// Jump over the else branch when the if branch is taken.</span></div>
<div class="line"><a name="l03140"></a><span class="lineno"> 3140</span>&#160;    <span class="keywordtype">int</span> elseJump = <a class="code" href="../../d4/de2/wren__compiler_8c.html#ac30bdcdc8f7ab87bb8f844b7d2bcd113">emitJump</a>(compiler, CODE_JUMP);</div>
<div class="line"><a name="l03141"></a><span class="lineno"> 3141</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#a51f59acfb3ac3a9b347ed8fd5086ab46">patchJump</a>(compiler, ifJump);</div>
<div class="line"><a name="l03142"></a><span class="lineno"> 3142</span>&#160;    </div>
<div class="line"><a name="l03143"></a><span class="lineno"> 3143</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#a1b50adda3f611e35b1bf68776af68f6d">statement</a>(compiler);</div>
<div class="line"><a name="l03144"></a><span class="lineno"> 3144</span>&#160;    </div>
<div class="line"><a name="l03145"></a><span class="lineno"> 3145</span>&#160;    <span class="comment">// Patch the jump over the else.</span></div>
<div class="line"><a name="l03146"></a><span class="lineno"> 3146</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#a51f59acfb3ac3a9b347ed8fd5086ab46">patchJump</a>(compiler, elseJump);</div>
<div class="line"><a name="l03147"></a><span class="lineno"> 3147</span>&#160;  }</div>
<div class="line"><a name="l03148"></a><span class="lineno"> 3148</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l03149"></a><span class="lineno"> 3149</span>&#160;  {</div>
<div class="line"><a name="l03150"></a><span class="lineno"> 3150</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#a51f59acfb3ac3a9b347ed8fd5086ab46">patchJump</a>(compiler, ifJump);</div>
<div class="line"><a name="l03151"></a><span class="lineno"> 3151</span>&#160;  }</div>
<div class="line"><a name="l03152"></a><span class="lineno"> 3152</span>&#160;}</div>
<div class="line"><a name="l03153"></a><span class="lineno"> 3153</span>&#160; </div>
<div class="line"><a name="l03154"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#a680da4c2a86185e71940e3bd830231f4"> 3154</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a680da4c2a86185e71940e3bd830231f4">whileStatement</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler)</div>
<div class="line"><a name="l03155"></a><span class="lineno"> 3155</span>&#160;{</div>
<div class="line"><a name="l03156"></a><span class="lineno"> 3156</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a2160d6b03577cf35a7df0a4044fab492">Loop</a> <a class="code" href="../../d6/dd8/_eris_core_8cpp.html#a0b33edabd7f1c4e4a0bf32c67269be2f">loop</a>;</div>
<div class="line"><a name="l03157"></a><span class="lineno"> 3157</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a37c6651ed4eb1417ebd1c28fc6f5f4e4">startLoop</a>(compiler, &amp;<a class="code" href="../../d6/dd8/_eris_core_8cpp.html#a0b33edabd7f1c4e4a0bf32c67269be2f">loop</a>);</div>
<div class="line"><a name="l03158"></a><span class="lineno"> 3158</span>&#160; </div>
<div class="line"><a name="l03159"></a><span class="lineno"> 3159</span>&#160;  <span class="comment">// Compile the condition.</span></div>
<div class="line"><a name="l03160"></a><span class="lineno"> 3160</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aed515d74eb0faafbaa8d63f05daf90b9">consume</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921ab958e67632477fb20b223edfef5a4a3f">TOKEN_LEFT_PAREN</a>, <span class="stringliteral">&quot;Expect &#39;(&#39; after &#39;while&#39;.&quot;</span>);</div>
<div class="line"><a name="l03161"></a><span class="lineno"> 3161</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#ac20f67474558b6bf12fd74dd573ee7af">expression</a>(compiler);</div>
<div class="line"><a name="l03162"></a><span class="lineno"> 3162</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aed515d74eb0faafbaa8d63f05daf90b9">consume</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a7db8f1fe352e6cf1ed6b880432b585d5">TOKEN_RIGHT_PAREN</a>, <span class="stringliteral">&quot;Expect &#39;)&#39; after while condition.&quot;</span>);</div>
<div class="line"><a name="l03163"></a><span class="lineno"> 3163</span>&#160; </div>
<div class="line"><a name="l03164"></a><span class="lineno"> 3164</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#af9ced5f005c5b4903f97418d7070c0e5">testExitLoop</a>(compiler);</div>
<div class="line"><a name="l03165"></a><span class="lineno"> 3165</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a074a1649744dc32a778909c5d5b24b14">loopBody</a>(compiler);</div>
<div class="line"><a name="l03166"></a><span class="lineno"> 3166</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a4e54b0530e648f4f3ef2b1163c9309d9">endLoop</a>(compiler);</div>
<div class="line"><a name="l03167"></a><span class="lineno"> 3167</span>&#160;}</div>
<div class="line"><a name="l03168"></a><span class="lineno"> 3168</span>&#160; </div>
<div class="line"><a name="l03169"></a><span class="lineno"> 3169</span>&#160;<span class="comment">// Compiles a simple statement. These can only appear at the top-level or</span></div>
<div class="line"><a name="l03170"></a><span class="lineno"> 3170</span>&#160;<span class="comment">// within curly blocks. Simple statements exclude variable binding statements</span></div>
<div class="line"><a name="l03171"></a><span class="lineno"> 3171</span>&#160;<span class="comment">// like &quot;var&quot; and &quot;class&quot; which are not allowed directly in places like the</span></div>
<div class="line"><a name="l03172"></a><span class="lineno"> 3172</span>&#160;<span class="comment">// branches of an &quot;if&quot; statement.</span></div>
<div class="line"><a name="l03173"></a><span class="lineno"> 3173</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l03174"></a><span class="lineno"> 3174</span>&#160;<span class="comment">// Unlike expressions, statements do not leave a value on the stack.</span></div>
<div class="line"><a name="l03175"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#a1b50adda3f611e35b1bf68776af68f6d"> 3175</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a1b50adda3f611e35b1bf68776af68f6d">statement</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler)</div>
<div class="line"><a name="l03176"></a><span class="lineno"> 3176</span>&#160;{</div>
<div class="line"><a name="l03177"></a><span class="lineno"> 3177</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d4/de2/wren__compiler_8c.html#af4fe195796c3e700b61d62dafd263295">match</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921aa9d81762207f9f71bc650cbd9a0c4202">TOKEN_BREAK</a>))</div>
<div class="line"><a name="l03178"></a><span class="lineno"> 3178</span>&#160;  {</div>
<div class="line"><a name="l03179"></a><span class="lineno"> 3179</span>&#160;    <span class="keywordflow">if</span> (compiler-&gt;loop == <a class="code" href="../../da/d2d/_stdio_stream_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l03180"></a><span class="lineno"> 3180</span>&#160;    {</div>
<div class="line"><a name="l03181"></a><span class="lineno"> 3181</span>&#160;      <a class="code" href="../../d4/de2/wren__compiler_8c.html#ae74f1b74c02154518d7162a728d6118a">error</a>(compiler, <span class="stringliteral">&quot;Cannot use &#39;break&#39; outside of a loop.&quot;</span>);</div>
<div class="line"><a name="l03182"></a><span class="lineno"> 3182</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03183"></a><span class="lineno"> 3183</span>&#160;    }</div>
<div class="line"><a name="l03184"></a><span class="lineno"> 3184</span>&#160; </div>
<div class="line"><a name="l03185"></a><span class="lineno"> 3185</span>&#160;    <span class="comment">// Since we will be jumping out of the scope, make sure any locals in it</span></div>
<div class="line"><a name="l03186"></a><span class="lineno"> 3186</span>&#160;    <span class="comment">// are discarded first.</span></div>
<div class="line"><a name="l03187"></a><span class="lineno"> 3187</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa0f3659cc8b19c66e2cbe89025a30d29">discardLocals</a>(compiler, compiler-&gt;loop-&gt;scopeDepth + 1);</div>
<div class="line"><a name="l03188"></a><span class="lineno"> 3188</span>&#160; </div>
<div class="line"><a name="l03189"></a><span class="lineno"> 3189</span>&#160;    <span class="comment">// Emit a placeholder instruction for the jump to the end of the body. When</span></div>
<div class="line"><a name="l03190"></a><span class="lineno"> 3190</span>&#160;    <span class="comment">// we&#39;re done compiling the loop body and know where the end is, we&#39;ll</span></div>
<div class="line"><a name="l03191"></a><span class="lineno"> 3191</span>&#160;    <span class="comment">// replace these with `CODE_JUMP` instructions with appropriate offsets.</span></div>
<div class="line"><a name="l03192"></a><span class="lineno"> 3192</span>&#160;    <span class="comment">// We use `CODE_END` here because that can&#39;t occur in the middle of</span></div>
<div class="line"><a name="l03193"></a><span class="lineno"> 3193</span>&#160;    <span class="comment">// bytecode.</span></div>
<div class="line"><a name="l03194"></a><span class="lineno"> 3194</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#ac30bdcdc8f7ab87bb8f844b7d2bcd113">emitJump</a>(compiler, CODE_END);</div>
<div class="line"><a name="l03195"></a><span class="lineno"> 3195</span>&#160;  }</div>
<div class="line"><a name="l03196"></a><span class="lineno"> 3196</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d4/de2/wren__compiler_8c.html#af4fe195796c3e700b61d62dafd263295">match</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a733edc9ed5eee3298868693b3bce7561">TOKEN_CONTINUE</a>))</div>
<div class="line"><a name="l03197"></a><span class="lineno"> 3197</span>&#160;  {</div>
<div class="line"><a name="l03198"></a><span class="lineno"> 3198</span>&#160;    <span class="keywordflow">if</span> (compiler-&gt;loop == <a class="code" href="../../da/d2d/_stdio_stream_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l03199"></a><span class="lineno"> 3199</span>&#160;    {</div>
<div class="line"><a name="l03200"></a><span class="lineno"> 3200</span>&#160;        <a class="code" href="../../d4/de2/wren__compiler_8c.html#ae74f1b74c02154518d7162a728d6118a">error</a>(compiler, <span class="stringliteral">&quot;Cannot use &#39;continue&#39; outside of a loop.&quot;</span>);</div>
<div class="line"><a name="l03201"></a><span class="lineno"> 3201</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03202"></a><span class="lineno"> 3202</span>&#160;    }</div>
<div class="line"><a name="l03203"></a><span class="lineno"> 3203</span>&#160; </div>
<div class="line"><a name="l03204"></a><span class="lineno"> 3204</span>&#160;    <span class="comment">// Since we will be jumping out of the scope, make sure any locals in it</span></div>
<div class="line"><a name="l03205"></a><span class="lineno"> 3205</span>&#160;    <span class="comment">// are discarded first.</span></div>
<div class="line"><a name="l03206"></a><span class="lineno"> 3206</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa0f3659cc8b19c66e2cbe89025a30d29">discardLocals</a>(compiler, compiler-&gt;loop-&gt;scopeDepth + 1);</div>
<div class="line"><a name="l03207"></a><span class="lineno"> 3207</span>&#160; </div>
<div class="line"><a name="l03208"></a><span class="lineno"> 3208</span>&#160;    <span class="comment">// emit a jump back to the top of the loop</span></div>
<div class="line"><a name="l03209"></a><span class="lineno"> 3209</span>&#160;    <span class="keywordtype">int</span> loopOffset = compiler-&gt;fn-&gt;code.count - compiler-&gt;loop-&gt;start + 2;</div>
<div class="line"><a name="l03210"></a><span class="lineno"> 3210</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#a3a17c9fef3d6388b2192ae1ce77483c1">emitShortArg</a>(compiler, CODE_LOOP, loopOffset);</div>
<div class="line"><a name="l03211"></a><span class="lineno"> 3211</span>&#160;  }</div>
<div class="line"><a name="l03212"></a><span class="lineno"> 3212</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d4/de2/wren__compiler_8c.html#af4fe195796c3e700b61d62dafd263295">match</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921aaca94097ec53cbcf93cdc0a493251040">TOKEN_FOR</a>))</div>
<div class="line"><a name="l03213"></a><span class="lineno"> 3213</span>&#160;  {</div>
<div class="line"><a name="l03214"></a><span class="lineno"> 3214</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#af0278a0c6c812bdb67378f6b686499e6">forStatement</a>(compiler);</div>
<div class="line"><a name="l03215"></a><span class="lineno"> 3215</span>&#160;  }</div>
<div class="line"><a name="l03216"></a><span class="lineno"> 3216</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d4/de2/wren__compiler_8c.html#af4fe195796c3e700b61d62dafd263295">match</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a6d39f93a351e0b853977018d48c47ca2">TOKEN_IF</a>))</div>
<div class="line"><a name="l03217"></a><span class="lineno"> 3217</span>&#160;  {</div>
<div class="line"><a name="l03218"></a><span class="lineno"> 3218</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#ae65b6e8e2808fdfbc9bd8078332f4ca9">ifStatement</a>(compiler);</div>
<div class="line"><a name="l03219"></a><span class="lineno"> 3219</span>&#160;  }</div>
<div class="line"><a name="l03220"></a><span class="lineno"> 3220</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d4/de2/wren__compiler_8c.html#af4fe195796c3e700b61d62dafd263295">match</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921ae52dd0b54e9522dc1dce5f6294f26b08">TOKEN_RETURN</a>))</div>
<div class="line"><a name="l03221"></a><span class="lineno"> 3221</span>&#160;  {</div>
<div class="line"><a name="l03222"></a><span class="lineno"> 3222</span>&#160;    <span class="comment">// Compile the return value.</span></div>
<div class="line"><a name="l03223"></a><span class="lineno"> 3223</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d4/de2/wren__compiler_8c.html#a55ffa49d00ce173be5cbd76358588d08">peek</a>(compiler) == <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921aa3667833295e7097424957cf261b2527">TOKEN_LINE</a>)</div>
<div class="line"><a name="l03224"></a><span class="lineno"> 3224</span>&#160;    {</div>
<div class="line"><a name="l03225"></a><span class="lineno"> 3225</span>&#160;      <span class="comment">// If there&#39;s no expression after return, initializers should </span></div>
<div class="line"><a name="l03226"></a><span class="lineno"> 3226</span>&#160;      <span class="comment">// return &#39;this&#39; and regular methods should return null</span></div>
<div class="line"><a name="l03227"></a><span class="lineno"> 3227</span>&#160;      <a class="code" href="../../d5/db1/wren__vm_8h.html#af31477bc48f67856bedb0fa8e5b5281d">Code</a> result = compiler-&gt;isInitializer ? CODE_LOAD_LOCAL_0 : CODE_NULL;</div>
<div class="line"><a name="l03228"></a><span class="lineno"> 3228</span>&#160;      <a class="code" href="../../d4/de2/wren__compiler_8c.html#a9cfaefaddfdf6eff5163d9638d141200">emitOp</a>(compiler, result);</div>
<div class="line"><a name="l03229"></a><span class="lineno"> 3229</span>&#160;    }</div>
<div class="line"><a name="l03230"></a><span class="lineno"> 3230</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l03231"></a><span class="lineno"> 3231</span>&#160;    {</div>
<div class="line"><a name="l03232"></a><span class="lineno"> 3232</span>&#160;      <span class="keywordflow">if</span> (compiler-&gt;isInitializer)</div>
<div class="line"><a name="l03233"></a><span class="lineno"> 3233</span>&#160;      {</div>
<div class="line"><a name="l03234"></a><span class="lineno"> 3234</span>&#160;        <a class="code" href="../../d4/de2/wren__compiler_8c.html#ae74f1b74c02154518d7162a728d6118a">error</a>(compiler, <span class="stringliteral">&quot;A constructor cannot return a value.&quot;</span>);</div>
<div class="line"><a name="l03235"></a><span class="lineno"> 3235</span>&#160;      }</div>
<div class="line"><a name="l03236"></a><span class="lineno"> 3236</span>&#160; </div>
<div class="line"><a name="l03237"></a><span class="lineno"> 3237</span>&#160;      <a class="code" href="../../d4/de2/wren__compiler_8c.html#ac20f67474558b6bf12fd74dd573ee7af">expression</a>(compiler);</div>
<div class="line"><a name="l03238"></a><span class="lineno"> 3238</span>&#160;    }</div>
<div class="line"><a name="l03239"></a><span class="lineno"> 3239</span>&#160; </div>
<div class="line"><a name="l03240"></a><span class="lineno"> 3240</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#a9cfaefaddfdf6eff5163d9638d141200">emitOp</a>(compiler, CODE_RETURN);</div>
<div class="line"><a name="l03241"></a><span class="lineno"> 3241</span>&#160;  }</div>
<div class="line"><a name="l03242"></a><span class="lineno"> 3242</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d4/de2/wren__compiler_8c.html#af4fe195796c3e700b61d62dafd263295">match</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921acc13b68e6911dd0080248030ecb95cd6">TOKEN_WHILE</a>))</div>
<div class="line"><a name="l03243"></a><span class="lineno"> 3243</span>&#160;  {</div>
<div class="line"><a name="l03244"></a><span class="lineno"> 3244</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#a680da4c2a86185e71940e3bd830231f4">whileStatement</a>(compiler);</div>
<div class="line"><a name="l03245"></a><span class="lineno"> 3245</span>&#160;  }</div>
<div class="line"><a name="l03246"></a><span class="lineno"> 3246</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d4/de2/wren__compiler_8c.html#af4fe195796c3e700b61d62dafd263295">match</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921abb75564bfe995225a6d177446540c352">TOKEN_LEFT_BRACE</a>))</div>
<div class="line"><a name="l03247"></a><span class="lineno"> 3247</span>&#160;  {</div>
<div class="line"><a name="l03248"></a><span class="lineno"> 3248</span>&#160;    <span class="comment">// Block statement.</span></div>
<div class="line"><a name="l03249"></a><span class="lineno"> 3249</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#ad3240fb788071077fd8bc9e481079cda">pushScope</a>(compiler);</div>
<div class="line"><a name="l03250"></a><span class="lineno"> 3250</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d4/de2/wren__compiler_8c.html#ad911c5983e96a9527dac91f1c86607ec">finishBlock</a>(compiler))</div>
<div class="line"><a name="l03251"></a><span class="lineno"> 3251</span>&#160;    {</div>
<div class="line"><a name="l03252"></a><span class="lineno"> 3252</span>&#160;      <span class="comment">// Block was an expression, so discard it.</span></div>
<div class="line"><a name="l03253"></a><span class="lineno"> 3253</span>&#160;      <a class="code" href="../../d4/de2/wren__compiler_8c.html#a9cfaefaddfdf6eff5163d9638d141200">emitOp</a>(compiler, CODE_POP);</div>
<div class="line"><a name="l03254"></a><span class="lineno"> 3254</span>&#160;    }</div>
<div class="line"><a name="l03255"></a><span class="lineno"> 3255</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#a34f07e4ff7876be8b8cc88f2a7e3ebda">popScope</a>(compiler);</div>
<div class="line"><a name="l03256"></a><span class="lineno"> 3256</span>&#160;  }</div>
<div class="line"><a name="l03257"></a><span class="lineno"> 3257</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l03258"></a><span class="lineno"> 3258</span>&#160;  {</div>
<div class="line"><a name="l03259"></a><span class="lineno"> 3259</span>&#160;    <span class="comment">// Expression statement.</span></div>
<div class="line"><a name="l03260"></a><span class="lineno"> 3260</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#ac20f67474558b6bf12fd74dd573ee7af">expression</a>(compiler);</div>
<div class="line"><a name="l03261"></a><span class="lineno"> 3261</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#a9cfaefaddfdf6eff5163d9638d141200">emitOp</a>(compiler, CODE_POP);</div>
<div class="line"><a name="l03262"></a><span class="lineno"> 3262</span>&#160;  }</div>
<div class="line"><a name="l03263"></a><span class="lineno"> 3263</span>&#160;}</div>
<div class="line"><a name="l03264"></a><span class="lineno"> 3264</span>&#160; </div>
<div class="line"><a name="l03265"></a><span class="lineno"> 3265</span>&#160;<span class="comment">// Creates a matching constructor method for an initializer with [signature]</span></div>
<div class="line"><a name="l03266"></a><span class="lineno"> 3266</span>&#160;<span class="comment">// and [initializerSymbol].</span></div>
<div class="line"><a name="l03267"></a><span class="lineno"> 3267</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l03268"></a><span class="lineno"> 3268</span>&#160;<span class="comment">// Construction is a two-stage process in Wren that involves two separate</span></div>
<div class="line"><a name="l03269"></a><span class="lineno"> 3269</span>&#160;<span class="comment">// methods. There is a static method that allocates a new instance of the class.</span></div>
<div class="line"><a name="l03270"></a><span class="lineno"> 3270</span>&#160;<span class="comment">// It then invokes an initializer method on the new instance, forwarding all of</span></div>
<div class="line"><a name="l03271"></a><span class="lineno"> 3271</span>&#160;<span class="comment">// the constructor arguments to it.</span></div>
<div class="line"><a name="l03272"></a><span class="lineno"> 3272</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l03273"></a><span class="lineno"> 3273</span>&#160;<span class="comment">// The allocator method always has a fixed implementation:</span></div>
<div class="line"><a name="l03274"></a><span class="lineno"> 3274</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l03275"></a><span class="lineno"> 3275</span>&#160;<span class="comment">//     CODE_CONSTRUCT - Replace the class in slot 0 with a new instance of it.</span></div>
<div class="line"><a name="l03276"></a><span class="lineno"> 3276</span>&#160;<span class="comment">//     CODE_CALL      - Invoke the initializer on the new instance.</span></div>
<div class="line"><a name="l03277"></a><span class="lineno"> 3277</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l03278"></a><span class="lineno"> 3278</span>&#160;<span class="comment">// This creates that method and calls the initializer with [initializerSymbol].</span></div>
<div class="line"><a name="l03279"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#affafb7a1d6b4eb1e2efd926e875379fb"> 3279</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#affafb7a1d6b4eb1e2efd926e875379fb">createConstructor</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler, Signature* signature,</div>
<div class="line"><a name="l03280"></a><span class="lineno"> 3280</span>&#160;                              <span class="keywordtype">int</span> initializerSymbol)</div>
<div class="line"><a name="l03281"></a><span class="lineno"> 3281</span>&#160;{</div>
<div class="line"><a name="l03282"></a><span class="lineno"> 3282</span>&#160;  <a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a> methodCompiler;</div>
<div class="line"><a name="l03283"></a><span class="lineno"> 3283</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a9cd38e83591679b9d3f9079885746744">initCompiler</a>(&amp;methodCompiler, compiler-&gt;parser, compiler, <span class="keyword">true</span>);</div>
<div class="line"><a name="l03284"></a><span class="lineno"> 3284</span>&#160;  </div>
<div class="line"><a name="l03285"></a><span class="lineno"> 3285</span>&#160;  <span class="comment">// Allocate the instance.</span></div>
<div class="line"><a name="l03286"></a><span class="lineno"> 3286</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a9cfaefaddfdf6eff5163d9638d141200">emitOp</a>(&amp;methodCompiler, compiler-&gt;enclosingClass-&gt;isForeign</div>
<div class="line"><a name="l03287"></a><span class="lineno"> 3287</span>&#160;       ? CODE_FOREIGN_CONSTRUCT : CODE_CONSTRUCT);</div>
<div class="line"><a name="l03288"></a><span class="lineno"> 3288</span>&#160;  </div>
<div class="line"><a name="l03289"></a><span class="lineno"> 3289</span>&#160;  <span class="comment">// Run its initializer.</span></div>
<div class="line"><a name="l03290"></a><span class="lineno"> 3290</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a3a17c9fef3d6388b2192ae1ce77483c1">emitShortArg</a>(&amp;methodCompiler, (<a class="code" href="../../d5/db1/wren__vm_8h.html#af31477bc48f67856bedb0fa8e5b5281d">Code</a>)(CODE_CALL_0 + signature-&gt;arity),</div>
<div class="line"><a name="l03291"></a><span class="lineno"> 3291</span>&#160;               initializerSymbol);</div>
<div class="line"><a name="l03292"></a><span class="lineno"> 3292</span>&#160;  </div>
<div class="line"><a name="l03293"></a><span class="lineno"> 3293</span>&#160;  <span class="comment">// Return the instance.</span></div>
<div class="line"><a name="l03294"></a><span class="lineno"> 3294</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a9cfaefaddfdf6eff5163d9638d141200">emitOp</a>(&amp;methodCompiler, CODE_RETURN);</div>
<div class="line"><a name="l03295"></a><span class="lineno"> 3295</span>&#160;  </div>
<div class="line"><a name="l03296"></a><span class="lineno"> 3296</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a3d81a8f8607a9b8236f1e6e49410581a">endCompiler</a>(&amp;methodCompiler, <span class="stringliteral">&quot;&quot;</span>, 0);</div>
<div class="line"><a name="l03297"></a><span class="lineno"> 3297</span>&#160;}</div>
<div class="line"><a name="l03298"></a><span class="lineno"> 3298</span>&#160; </div>
<div class="line"><a name="l03299"></a><span class="lineno"> 3299</span>&#160;<span class="comment">// Loads the enclosing class onto the stack and then binds the function already</span></div>
<div class="line"><a name="l03300"></a><span class="lineno"> 3300</span>&#160;<span class="comment">// on the stack as a method on that class.</span></div>
<div class="line"><a name="l03301"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#a8ec648c741d1eff279418c865b4f79f2"> 3301</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a8ec648c741d1eff279418c865b4f79f2">defineMethod</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler, Variable classVariable,</div>
<div class="line"><a name="l03302"></a><span class="lineno"> 3302</span>&#160;                         <span class="keywordtype">bool</span> isStatic, <span class="keywordtype">int</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#ad1e91368551c7720efd9105fc37570a1">methodSymbol</a>)</div>
<div class="line"><a name="l03303"></a><span class="lineno"> 3303</span>&#160;{</div>
<div class="line"><a name="l03304"></a><span class="lineno"> 3304</span>&#160;  <span class="comment">// Load the class. We have to do this for each method because we can&#39;t</span></div>
<div class="line"><a name="l03305"></a><span class="lineno"> 3305</span>&#160;  <span class="comment">// keep the class on top of the stack. If there are static fields, they</span></div>
<div class="line"><a name="l03306"></a><span class="lineno"> 3306</span>&#160;  <span class="comment">// will be locals above the initial variable slot for the class on the</span></div>
<div class="line"><a name="l03307"></a><span class="lineno"> 3307</span>&#160;  <span class="comment">// stack. To skip past those, we just load the class each time right before</span></div>
<div class="line"><a name="l03308"></a><span class="lineno"> 3308</span>&#160;  <span class="comment">// defining a method.</span></div>
<div class="line"><a name="l03309"></a><span class="lineno"> 3309</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aac2c091d1986fa181a49452185f36799">loadVariable</a>(compiler, classVariable);</div>
<div class="line"><a name="l03310"></a><span class="lineno"> 3310</span>&#160; </div>
<div class="line"><a name="l03311"></a><span class="lineno"> 3311</span>&#160;  <span class="comment">// Define the method.</span></div>
<div class="line"><a name="l03312"></a><span class="lineno"> 3312</span>&#160;  <a class="code" href="../../d5/db1/wren__vm_8h.html#af31477bc48f67856bedb0fa8e5b5281d">Code</a> instruction = isStatic ? CODE_METHOD_STATIC : CODE_METHOD_INSTANCE;</div>
<div class="line"><a name="l03313"></a><span class="lineno"> 3313</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a3a17c9fef3d6388b2192ae1ce77483c1">emitShortArg</a>(compiler, instruction, <a class="code" href="../../d4/de2/wren__compiler_8c.html#ad1e91368551c7720efd9105fc37570a1">methodSymbol</a>);</div>
<div class="line"><a name="l03314"></a><span class="lineno"> 3314</span>&#160;}</div>
<div class="line"><a name="l03315"></a><span class="lineno"> 3315</span>&#160; </div>
<div class="line"><a name="l03316"></a><span class="lineno"> 3316</span>&#160;<span class="comment">// Declares a method in the enclosing class with [signature].</span></div>
<div class="line"><a name="l03317"></a><span class="lineno"> 3317</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l03318"></a><span class="lineno"> 3318</span>&#160;<span class="comment">// Reports an error if a method with that signature is already declared.</span></div>
<div class="line"><a name="l03319"></a><span class="lineno"> 3319</span>&#160;<span class="comment">// Returns the symbol for the method.</span></div>
<div class="line"><a name="l03320"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#ab340843ddcc4e86bcca961782d54d1f6"> 3320</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#ab340843ddcc4e86bcca961782d54d1f6">declareMethod</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler, Signature* signature,</div>
<div class="line"><a name="l03321"></a><span class="lineno"> 3321</span>&#160;                         <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="../../d4/de2/wren__compiler_8c.html#a59935c559e6df5f8a5f95110a971014d">name</a>, <span class="keywordtype">int</span> length)</div>
<div class="line"><a name="l03322"></a><span class="lineno"> 3322</span>&#160;{</div>
<div class="line"><a name="l03323"></a><span class="lineno"> 3323</span>&#160;  <span class="keywordtype">int</span> symbol = <a class="code" href="../../d4/de2/wren__compiler_8c.html#aeca856979ea544d751ca03e0f3b9204c">signatureSymbol</a>(compiler, signature);</div>
<div class="line"><a name="l03324"></a><span class="lineno"> 3324</span>&#160;  </div>
<div class="line"><a name="l03325"></a><span class="lineno"> 3325</span>&#160;  <span class="comment">// See if the class has already declared method with this signature.</span></div>
<div class="line"><a name="l03326"></a><span class="lineno"> 3326</span>&#160;  ClassInfo* classInfo = compiler-&gt;enclosingClass;</div>
<div class="line"><a name="l03327"></a><span class="lineno"> 3327</span>&#160;  IntBuffer* methods = classInfo-&gt;inStatic</div>
<div class="line"><a name="l03328"></a><span class="lineno"> 3328</span>&#160;      ? &amp;classInfo-&gt;staticMethods : &amp;classInfo-&gt;methods;</div>
<div class="line"><a name="l03329"></a><span class="lineno"> 3329</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; methods-&gt;count; i++)</div>
<div class="line"><a name="l03330"></a><span class="lineno"> 3330</span>&#160;  {</div>
<div class="line"><a name="l03331"></a><span class="lineno"> 3331</span>&#160;    <span class="keywordflow">if</span> (methods-&gt;data[i] == symbol)</div>
<div class="line"><a name="l03332"></a><span class="lineno"> 3332</span>&#160;    {</div>
<div class="line"><a name="l03333"></a><span class="lineno"> 3333</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">char</span>* staticPrefix = classInfo-&gt;inStatic ? <span class="stringliteral">&quot;static &quot;</span> : <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l03334"></a><span class="lineno"> 3334</span>&#160;      <a class="code" href="../../d4/de2/wren__compiler_8c.html#ae74f1b74c02154518d7162a728d6118a">error</a>(compiler, <span class="stringliteral">&quot;Class %s already defines a %smethod &#39;%s&#39;.&quot;</span>,</div>
<div class="line"><a name="l03335"></a><span class="lineno"> 3335</span>&#160;            &amp;compiler-&gt;enclosingClass-&gt;name-&gt;value, staticPrefix, <a class="code" href="../../d4/de2/wren__compiler_8c.html#a59935c559e6df5f8a5f95110a971014d">name</a>);</div>
<div class="line"><a name="l03336"></a><span class="lineno"> 3336</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03337"></a><span class="lineno"> 3337</span>&#160;    }</div>
<div class="line"><a name="l03338"></a><span class="lineno"> 3338</span>&#160;  }</div>
<div class="line"><a name="l03339"></a><span class="lineno"> 3339</span>&#160;  </div>
<div class="line"><a name="l03340"></a><span class="lineno"> 3340</span>&#160;  wrenIntBufferWrite(compiler-&gt;parser-&gt;vm, methods, symbol);</div>
<div class="line"><a name="l03341"></a><span class="lineno"> 3341</span>&#160;  <span class="keywordflow">return</span> symbol;</div>
<div class="line"><a name="l03342"></a><span class="lineno"> 3342</span>&#160;}</div>
<div class="line"><a name="l03343"></a><span class="lineno"> 3343</span>&#160; </div>
<div class="line"><a name="l03344"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#a330975026f92157ab60213398e685b2c"> 3344</a></span>&#160;<span class="keyword">static</span> <a class="code" href="../../d2/d0a/wren__value_8h.html#ad777bf08d8e2b01df17ba5e3c51ae11f">Value</a> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a330975026f92157ab60213398e685b2c">consumeLiteral</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler, <span class="keyword">const</span> <span class="keywordtype">char</span>* message) </div>
<div class="line"><a name="l03345"></a><span class="lineno"> 3345</span>&#160;{</div>
<div class="line"><a name="l03346"></a><span class="lineno"> 3346</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="../../d4/de2/wren__compiler_8c.html#af4fe195796c3e700b61d62dafd263295">match</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a6aaf2e9d817fd7cd807c6fc2f6f6fe5c">TOKEN_FALSE</a>))  <span class="keywordflow">return</span> <a class="code" href="../../d2/d0a/wren__value_8h.html#ac08440d026076c9f8a9d6f72ea5458d4">FALSE_VAL</a>;</div>
<div class="line"><a name="l03347"></a><span class="lineno"> 3347</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="../../d4/de2/wren__compiler_8c.html#af4fe195796c3e700b61d62dafd263295">match</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a2dd89e6192a4d3a7aee35c99a5f88075">TOKEN_TRUE</a>))   <span class="keywordflow">return</span> <a class="code" href="../../d2/d0a/wren__value_8h.html#a4cc9cc92f3facf53e9c801be21a97af3">TRUE_VAL</a>;</div>
<div class="line"><a name="l03348"></a><span class="lineno"> 3348</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="../../d4/de2/wren__compiler_8c.html#af4fe195796c3e700b61d62dafd263295">match</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921ab2af03662d780038284bc9c09e11c452">TOKEN_NUMBER</a>)) <span class="keywordflow">return</span> compiler-&gt;parser-&gt;previous.value;</div>
<div class="line"><a name="l03349"></a><span class="lineno"> 3349</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="../../d4/de2/wren__compiler_8c.html#af4fe195796c3e700b61d62dafd263295">match</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921afcaa8f23ed1d21aa5779451ed3c243ef">TOKEN_STRING</a>)) <span class="keywordflow">return</span> compiler-&gt;parser-&gt;previous.value;</div>
<div class="line"><a name="l03350"></a><span class="lineno"> 3350</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="../../d4/de2/wren__compiler_8c.html#af4fe195796c3e700b61d62dafd263295">match</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a56d9afac7a1508302f85a77d1f3ba8b2">TOKEN_NAME</a>))   <span class="keywordflow">return</span> compiler-&gt;parser-&gt;previous.value;</div>
<div class="line"><a name="l03351"></a><span class="lineno"> 3351</span>&#160; </div>
<div class="line"><a name="l03352"></a><span class="lineno"> 3352</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#ae74f1b74c02154518d7162a728d6118a">error</a>(compiler, message);</div>
<div class="line"><a name="l03353"></a><span class="lineno"> 3353</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aff9308c9745d77724d06dbc7f1e7bd34">nextToken</a>(compiler-&gt;parser);</div>
<div class="line"><a name="l03354"></a><span class="lineno"> 3354</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d2/d0a/wren__value_8h.html#afc64b30e282747645e8e6db5023797b7">NULL_VAL</a>;</div>
<div class="line"><a name="l03355"></a><span class="lineno"> 3355</span>&#160;}</div>
<div class="line"><a name="l03356"></a><span class="lineno"> 3356</span>&#160; </div>
<div class="line"><a name="l03357"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#a3fd2906d4bd1f4c07f61b64e9136dc15"> 3357</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a3fd2906d4bd1f4c07f61b64e9136dc15">matchAttribute</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler) {</div>
<div class="line"><a name="l03358"></a><span class="lineno"> 3358</span>&#160; </div>
<div class="line"><a name="l03359"></a><span class="lineno"> 3359</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="../../d4/de2/wren__compiler_8c.html#af4fe195796c3e700b61d62dafd263295">match</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a221bd5c5f9c87bfb8bd33243a49b2f54">TOKEN_HASH</a>)) </div>
<div class="line"><a name="l03360"></a><span class="lineno"> 3360</span>&#160;  {</div>
<div class="line"><a name="l03361"></a><span class="lineno"> 3361</span>&#160;    compiler-&gt;numAttributes++;</div>
<div class="line"><a name="l03362"></a><span class="lineno"> 3362</span>&#160;    <span class="keywordtype">bool</span> runtimeAccess = <a class="code" href="../../d4/de2/wren__compiler_8c.html#af4fe195796c3e700b61d62dafd263295">match</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a48b74bd21671b5a4a713dd8ddf57c917">TOKEN_BANG</a>);</div>
<div class="line"><a name="l03363"></a><span class="lineno"> 3363</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="../../d4/de2/wren__compiler_8c.html#af4fe195796c3e700b61d62dafd263295">match</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a56d9afac7a1508302f85a77d1f3ba8b2">TOKEN_NAME</a>)) </div>
<div class="line"><a name="l03364"></a><span class="lineno"> 3364</span>&#160;    {</div>
<div class="line"><a name="l03365"></a><span class="lineno"> 3365</span>&#160;      <a class="code" href="../../d2/d0a/wren__value_8h.html#ad777bf08d8e2b01df17ba5e3c51ae11f">Value</a> group = compiler-&gt;parser-&gt;previous.value;</div>
<div class="line"><a name="l03366"></a><span class="lineno"> 3366</span>&#160;      <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921">TokenType</a> ahead = <a class="code" href="../../d4/de2/wren__compiler_8c.html#a55ffa49d00ce173be5cbd76358588d08">peek</a>(compiler);</div>
<div class="line"><a name="l03367"></a><span class="lineno"> 3367</span>&#160;      <span class="keywordflow">if</span>(ahead == <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921aeba19c29eb600289d1e973bf335139fe">TOKEN_EQ</a> || ahead == <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921aa3667833295e7097424957cf261b2527">TOKEN_LINE</a>)</div>
<div class="line"><a name="l03368"></a><span class="lineno"> 3368</span>&#160;      {</div>
<div class="line"><a name="l03369"></a><span class="lineno"> 3369</span>&#160;        <a class="code" href="../../d2/d0a/wren__value_8h.html#ad777bf08d8e2b01df17ba5e3c51ae11f">Value</a> key = group;</div>
<div class="line"><a name="l03370"></a><span class="lineno"> 3370</span>&#160;        <a class="code" href="../../d2/d0a/wren__value_8h.html#ad777bf08d8e2b01df17ba5e3c51ae11f">Value</a> value = <a class="code" href="../../d2/d0a/wren__value_8h.html#afc64b30e282747645e8e6db5023797b7">NULL_VAL</a>;</div>
<div class="line"><a name="l03371"></a><span class="lineno"> 3371</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="../../d4/de2/wren__compiler_8c.html#af4fe195796c3e700b61d62dafd263295">match</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921aeba19c29eb600289d1e973bf335139fe">TOKEN_EQ</a>)) </div>
<div class="line"><a name="l03372"></a><span class="lineno"> 3372</span>&#160;        {</div>
<div class="line"><a name="l03373"></a><span class="lineno"> 3373</span>&#160;          value = <a class="code" href="../../d4/de2/wren__compiler_8c.html#a330975026f92157ab60213398e685b2c">consumeLiteral</a>(compiler, <span class="stringliteral">&quot;Expect a Bool, Num, String or Identifier literal for an attribute value.&quot;</span>);</div>
<div class="line"><a name="l03374"></a><span class="lineno"> 3374</span>&#160;        }</div>
<div class="line"><a name="l03375"></a><span class="lineno"> 3375</span>&#160;        <span class="keywordflow">if</span>(runtimeAccess) <a class="code" href="../../d4/de2/wren__compiler_8c.html#ad7cf94c2202263aa2f1c991b8ed0c933">addToAttributeGroup</a>(compiler, <a class="code" href="../../d2/d0a/wren__value_8h.html#afc64b30e282747645e8e6db5023797b7">NULL_VAL</a>, key, value);</div>
<div class="line"><a name="l03376"></a><span class="lineno"> 3376</span>&#160;      }</div>
<div class="line"><a name="l03377"></a><span class="lineno"> 3377</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="../../d4/de2/wren__compiler_8c.html#af4fe195796c3e700b61d62dafd263295">match</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921ab958e67632477fb20b223edfef5a4a3f">TOKEN_LEFT_PAREN</a>))</div>
<div class="line"><a name="l03378"></a><span class="lineno"> 3378</span>&#160;      {</div>
<div class="line"><a name="l03379"></a><span class="lineno"> 3379</span>&#160;        <a class="code" href="../../d4/de2/wren__compiler_8c.html#acbf1748d7e097833a292ee0caaa50d05">ignoreNewlines</a>(compiler);</div>
<div class="line"><a name="l03380"></a><span class="lineno"> 3380</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="../../d4/de2/wren__compiler_8c.html#af4fe195796c3e700b61d62dafd263295">match</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a7db8f1fe352e6cf1ed6b880432b585d5">TOKEN_RIGHT_PAREN</a>))</div>
<div class="line"><a name="l03381"></a><span class="lineno"> 3381</span>&#160;        {</div>
<div class="line"><a name="l03382"></a><span class="lineno"> 3382</span>&#160;          <a class="code" href="../../d4/de2/wren__compiler_8c.html#ae74f1b74c02154518d7162a728d6118a">error</a>(compiler, <span class="stringliteral">&quot;Expected attributes in group, group cannot be empty.&quot;</span>);</div>
<div class="line"><a name="l03383"></a><span class="lineno"> 3383</span>&#160;        } </div>
<div class="line"><a name="l03384"></a><span class="lineno"> 3384</span>&#160;        <span class="keywordflow">else</span> </div>
<div class="line"><a name="l03385"></a><span class="lineno"> 3385</span>&#160;        {</div>
<div class="line"><a name="l03386"></a><span class="lineno"> 3386</span>&#160;          <span class="keywordflow">while</span>(<a class="code" href="../../d4/de2/wren__compiler_8c.html#a55ffa49d00ce173be5cbd76358588d08">peek</a>(compiler) != <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a7db8f1fe352e6cf1ed6b880432b585d5">TOKEN_RIGHT_PAREN</a>)</div>
<div class="line"><a name="l03387"></a><span class="lineno"> 3387</span>&#160;          {</div>
<div class="line"><a name="l03388"></a><span class="lineno"> 3388</span>&#160;            <a class="code" href="../../d4/de2/wren__compiler_8c.html#aed515d74eb0faafbaa8d63f05daf90b9">consume</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a56d9afac7a1508302f85a77d1f3ba8b2">TOKEN_NAME</a>, <span class="stringliteral">&quot;Expect name for attribute key.&quot;</span>);</div>
<div class="line"><a name="l03389"></a><span class="lineno"> 3389</span>&#160;            <a class="code" href="../../d2/d0a/wren__value_8h.html#ad777bf08d8e2b01df17ba5e3c51ae11f">Value</a> key = compiler-&gt;parser-&gt;previous.value;</div>
<div class="line"><a name="l03390"></a><span class="lineno"> 3390</span>&#160;            <a class="code" href="../../d2/d0a/wren__value_8h.html#ad777bf08d8e2b01df17ba5e3c51ae11f">Value</a> value = <a class="code" href="../../d2/d0a/wren__value_8h.html#afc64b30e282747645e8e6db5023797b7">NULL_VAL</a>;</div>
<div class="line"><a name="l03391"></a><span class="lineno"> 3391</span>&#160;            <span class="keywordflow">if</span>(<a class="code" href="../../d4/de2/wren__compiler_8c.html#af4fe195796c3e700b61d62dafd263295">match</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921aeba19c29eb600289d1e973bf335139fe">TOKEN_EQ</a>))</div>
<div class="line"><a name="l03392"></a><span class="lineno"> 3392</span>&#160;            {</div>
<div class="line"><a name="l03393"></a><span class="lineno"> 3393</span>&#160;              value = <a class="code" href="../../d4/de2/wren__compiler_8c.html#a330975026f92157ab60213398e685b2c">consumeLiteral</a>(compiler, <span class="stringliteral">&quot;Expect a Bool, Num, String or Identifier literal for an attribute value.&quot;</span>);</div>
<div class="line"><a name="l03394"></a><span class="lineno"> 3394</span>&#160;            }</div>
<div class="line"><a name="l03395"></a><span class="lineno"> 3395</span>&#160;            <span class="keywordflow">if</span>(runtimeAccess) <a class="code" href="../../d4/de2/wren__compiler_8c.html#ad7cf94c2202263aa2f1c991b8ed0c933">addToAttributeGroup</a>(compiler, group, key, value);</div>
<div class="line"><a name="l03396"></a><span class="lineno"> 3396</span>&#160;            <a class="code" href="../../d4/de2/wren__compiler_8c.html#acbf1748d7e097833a292ee0caaa50d05">ignoreNewlines</a>(compiler);</div>
<div class="line"><a name="l03397"></a><span class="lineno"> 3397</span>&#160;            <span class="keywordflow">if</span>(!<a class="code" href="../../d4/de2/wren__compiler_8c.html#af4fe195796c3e700b61d62dafd263295">match</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a8d265e17914bc733c8b9a880dd097a9e">TOKEN_COMMA</a>)) <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03398"></a><span class="lineno"> 3398</span>&#160;            <a class="code" href="../../d4/de2/wren__compiler_8c.html#acbf1748d7e097833a292ee0caaa50d05">ignoreNewlines</a>(compiler);</div>
<div class="line"><a name="l03399"></a><span class="lineno"> 3399</span>&#160;          }</div>
<div class="line"><a name="l03400"></a><span class="lineno"> 3400</span>&#160; </div>
<div class="line"><a name="l03401"></a><span class="lineno"> 3401</span>&#160;          <a class="code" href="../../d4/de2/wren__compiler_8c.html#acbf1748d7e097833a292ee0caaa50d05">ignoreNewlines</a>(compiler);</div>
<div class="line"><a name="l03402"></a><span class="lineno"> 3402</span>&#160;          <a class="code" href="../../d4/de2/wren__compiler_8c.html#aed515d74eb0faafbaa8d63f05daf90b9">consume</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a7db8f1fe352e6cf1ed6b880432b585d5">TOKEN_RIGHT_PAREN</a>, </div>
<div class="line"><a name="l03403"></a><span class="lineno"> 3403</span>&#160;            <span class="stringliteral">&quot;Expected &#39;)&#39; after grouped attributes.&quot;</span>);</div>
<div class="line"><a name="l03404"></a><span class="lineno"> 3404</span>&#160;        }</div>
<div class="line"><a name="l03405"></a><span class="lineno"> 3405</span>&#160;      }</div>
<div class="line"><a name="l03406"></a><span class="lineno"> 3406</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l03407"></a><span class="lineno"> 3407</span>&#160;      {</div>
<div class="line"><a name="l03408"></a><span class="lineno"> 3408</span>&#160;        <a class="code" href="../../d4/de2/wren__compiler_8c.html#ae74f1b74c02154518d7162a728d6118a">error</a>(compiler, <span class="stringliteral">&quot;Expect an equal, newline or grouping after an attribute key.&quot;</span>);</div>
<div class="line"><a name="l03409"></a><span class="lineno"> 3409</span>&#160;      }</div>
<div class="line"><a name="l03410"></a><span class="lineno"> 3410</span>&#160;    }</div>
<div class="line"><a name="l03411"></a><span class="lineno"> 3411</span>&#160;    <span class="keywordflow">else</span> </div>
<div class="line"><a name="l03412"></a><span class="lineno"> 3412</span>&#160;    {</div>
<div class="line"><a name="l03413"></a><span class="lineno"> 3413</span>&#160;      <a class="code" href="../../d4/de2/wren__compiler_8c.html#ae74f1b74c02154518d7162a728d6118a">error</a>(compiler, <span class="stringliteral">&quot;Expect an attribute definition after #.&quot;</span>);</div>
<div class="line"><a name="l03414"></a><span class="lineno"> 3414</span>&#160;    }</div>
<div class="line"><a name="l03415"></a><span class="lineno"> 3415</span>&#160; </div>
<div class="line"><a name="l03416"></a><span class="lineno"> 3416</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#a6f9526219e47ab23cd6b5db273d13c8a">consumeLine</a>(compiler, <span class="stringliteral">&quot;Expect newline after attribute.&quot;</span>);</div>
<div class="line"><a name="l03417"></a><span class="lineno"> 3417</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l03418"></a><span class="lineno"> 3418</span>&#160;  }</div>
<div class="line"><a name="l03419"></a><span class="lineno"> 3419</span>&#160; </div>
<div class="line"><a name="l03420"></a><span class="lineno"> 3420</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l03421"></a><span class="lineno"> 3421</span>&#160;}</div>
<div class="line"><a name="l03422"></a><span class="lineno"> 3422</span>&#160; </div>
<div class="line"><a name="l03423"></a><span class="lineno"> 3423</span>&#160;<span class="comment">// Compiles a method definition inside a class body.</span></div>
<div class="line"><a name="l03424"></a><span class="lineno"> 3424</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l03425"></a><span class="lineno"> 3425</span>&#160;<span class="comment">// Returns `true` if it compiled successfully, or `false` if the method couldn&#39;t</span></div>
<div class="line"><a name="l03426"></a><span class="lineno"> 3426</span>&#160;<span class="comment">// be parsed.</span></div>
<div class="line"><a name="l03427"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#a280648a47237a52319d293ace8edb7c8"> 3427</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a280648a47237a52319d293ace8edb7c8">method</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler, Variable classVariable)</div>
<div class="line"><a name="l03428"></a><span class="lineno"> 3428</span>&#160;{</div>
<div class="line"><a name="l03429"></a><span class="lineno"> 3429</span>&#160;  <span class="comment">// Parse any attributes before the method and store them</span></div>
<div class="line"><a name="l03430"></a><span class="lineno"> 3430</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="../../d4/de2/wren__compiler_8c.html#a3fd2906d4bd1f4c07f61b64e9136dc15">matchAttribute</a>(compiler)) {</div>
<div class="line"><a name="l03431"></a><span class="lineno"> 3431</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a280648a47237a52319d293ace8edb7c8">method</a>(compiler, classVariable);</div>
<div class="line"><a name="l03432"></a><span class="lineno"> 3432</span>&#160;  }</div>
<div class="line"><a name="l03433"></a><span class="lineno"> 3433</span>&#160; </div>
<div class="line"><a name="l03434"></a><span class="lineno"> 3434</span>&#160;  <span class="comment">// TODO: What about foreign constructors?</span></div>
<div class="line"><a name="l03435"></a><span class="lineno"> 3435</span>&#160;  <span class="keywordtype">bool</span> isForeign = <a class="code" href="../../d4/de2/wren__compiler_8c.html#af4fe195796c3e700b61d62dafd263295">match</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921af7597f04537d607509a57ce101c3a6de">TOKEN_FOREIGN</a>);</div>
<div class="line"><a name="l03436"></a><span class="lineno"> 3436</span>&#160;  <span class="keywordtype">bool</span> isStatic = <a class="code" href="../../d4/de2/wren__compiler_8c.html#af4fe195796c3e700b61d62dafd263295">match</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921afca69b5a56f15fbc4af6ad4b99e35296">TOKEN_STATIC</a>);</div>
<div class="line"><a name="l03437"></a><span class="lineno"> 3437</span>&#160;  compiler-&gt;enclosingClass-&gt;inStatic = isStatic;</div>
<div class="line"><a name="l03438"></a><span class="lineno"> 3438</span>&#160;    </div>
<div class="line"><a name="l03439"></a><span class="lineno"> 3439</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a3c508872fab66896719e75ae583758d9">SignatureFn</a> signatureFn = <a class="code" href="../../d4/de2/wren__compiler_8c.html#a36217037596077e796499013d5f89c42">rules</a>[compiler-&gt;parser-&gt;current.type].method;</div>
<div class="line"><a name="l03440"></a><span class="lineno"> 3440</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aff9308c9745d77724d06dbc7f1e7bd34">nextToken</a>(compiler-&gt;parser);</div>
<div class="line"><a name="l03441"></a><span class="lineno"> 3441</span>&#160;  </div>
<div class="line"><a name="l03442"></a><span class="lineno"> 3442</span>&#160;  <span class="keywordflow">if</span> (signatureFn == <a class="code" href="../../da/d2d/_stdio_stream_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l03443"></a><span class="lineno"> 3443</span>&#160;  {</div>
<div class="line"><a name="l03444"></a><span class="lineno"> 3444</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#ae74f1b74c02154518d7162a728d6118a">error</a>(compiler, <span class="stringliteral">&quot;Expect method definition.&quot;</span>);</div>
<div class="line"><a name="l03445"></a><span class="lineno"> 3445</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l03446"></a><span class="lineno"> 3446</span>&#160;  }</div>
<div class="line"><a name="l03447"></a><span class="lineno"> 3447</span>&#160;  </div>
<div class="line"><a name="l03448"></a><span class="lineno"> 3448</span>&#160;  <span class="comment">// Build the method signature.</span></div>
<div class="line"><a name="l03449"></a><span class="lineno"> 3449</span>&#160;  Signature signature = <a class="code" href="../../d4/de2/wren__compiler_8c.html#a990f92b1a0017c13a94a4c02f5d736bc">signatureFromToken</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#a7456a1be27da2089f984a0ede62c6c50a886e5cbc219aebd4f2677c108af4f769">SIG_GETTER</a>);</div>
<div class="line"><a name="l03450"></a><span class="lineno"> 3450</span>&#160;  compiler-&gt;enclosingClass-&gt;signature = &amp;signature;</div>
<div class="line"><a name="l03451"></a><span class="lineno"> 3451</span>&#160; </div>
<div class="line"><a name="l03452"></a><span class="lineno"> 3452</span>&#160;  <a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a> methodCompiler;</div>
<div class="line"><a name="l03453"></a><span class="lineno"> 3453</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a9cd38e83591679b9d3f9079885746744">initCompiler</a>(&amp;methodCompiler, compiler-&gt;parser, compiler, <span class="keyword">true</span>);</div>
<div class="line"><a name="l03454"></a><span class="lineno"> 3454</span>&#160; </div>
<div class="line"><a name="l03455"></a><span class="lineno"> 3455</span>&#160;  <span class="comment">// Compile the method signature.</span></div>
<div class="line"><a name="l03456"></a><span class="lineno"> 3456</span>&#160;  signatureFn(&amp;methodCompiler, &amp;signature);</div>
<div class="line"><a name="l03457"></a><span class="lineno"> 3457</span>&#160; </div>
<div class="line"><a name="l03458"></a><span class="lineno"> 3458</span>&#160;  methodCompiler.isInitializer = signature.type == <a class="code" href="../../d4/de2/wren__compiler_8c.html#a7456a1be27da2089f984a0ede62c6c50acc229831cb9cfa74b1ad2d11a37fe214">SIG_INITIALIZER</a>;</div>
<div class="line"><a name="l03459"></a><span class="lineno"> 3459</span>&#160;  </div>
<div class="line"><a name="l03460"></a><span class="lineno"> 3460</span>&#160;  <span class="keywordflow">if</span> (isStatic &amp;&amp; signature.type == <a class="code" href="../../d4/de2/wren__compiler_8c.html#a7456a1be27da2089f984a0ede62c6c50acc229831cb9cfa74b1ad2d11a37fe214">SIG_INITIALIZER</a>)</div>
<div class="line"><a name="l03461"></a><span class="lineno"> 3461</span>&#160;  {</div>
<div class="line"><a name="l03462"></a><span class="lineno"> 3462</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#ae74f1b74c02154518d7162a728d6118a">error</a>(compiler, <span class="stringliteral">&quot;A constructor cannot be static.&quot;</span>);</div>
<div class="line"><a name="l03463"></a><span class="lineno"> 3463</span>&#160;  }</div>
<div class="line"><a name="l03464"></a><span class="lineno"> 3464</span>&#160;  </div>
<div class="line"><a name="l03465"></a><span class="lineno"> 3465</span>&#160;  <span class="comment">// Include the full signature in debug messages in stack traces.</span></div>
<div class="line"><a name="l03466"></a><span class="lineno"> 3466</span>&#160;  <span class="keywordtype">char</span> fullSignature[<a class="code" href="../../d3/d72/wren__common_8h.html#a163524fe2202302c975a36e392e8cade">MAX_METHOD_SIGNATURE</a>];</div>
<div class="line"><a name="l03467"></a><span class="lineno"> 3467</span>&#160;  <span class="keywordtype">int</span> length;</div>
<div class="line"><a name="l03468"></a><span class="lineno"> 3468</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#ac8d1d75280e54ef6c6d6367ff1f26aef">signatureToString</a>(&amp;signature, fullSignature, &amp;length);</div>
<div class="line"><a name="l03469"></a><span class="lineno"> 3469</span>&#160; </div>
<div class="line"><a name="l03470"></a><span class="lineno"> 3470</span>&#160;  <span class="comment">// Copy any attributes the compiler collected into the enclosing class </span></div>
<div class="line"><a name="l03471"></a><span class="lineno"> 3471</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a2bd516d902a9b63aa8529ab50b938b03">copyMethodAttributes</a>(compiler, isForeign, isStatic, fullSignature, length);</div>
<div class="line"><a name="l03472"></a><span class="lineno"> 3472</span>&#160; </div>
<div class="line"><a name="l03473"></a><span class="lineno"> 3473</span>&#160;  <span class="comment">// Check for duplicate methods. Doesn&#39;t matter that it&#39;s already been</span></div>
<div class="line"><a name="l03474"></a><span class="lineno"> 3474</span>&#160;  <span class="comment">// defined, error will discard bytecode anyway.</span></div>
<div class="line"><a name="l03475"></a><span class="lineno"> 3475</span>&#160;  <span class="comment">// Check if the method table already contains this symbol</span></div>
<div class="line"><a name="l03476"></a><span class="lineno"> 3476</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#ad1e91368551c7720efd9105fc37570a1">methodSymbol</a> = <a class="code" href="../../d4/de2/wren__compiler_8c.html#ab340843ddcc4e86bcca961782d54d1f6">declareMethod</a>(compiler, &amp;signature, fullSignature, length);</div>
<div class="line"><a name="l03477"></a><span class="lineno"> 3477</span>&#160;  </div>
<div class="line"><a name="l03478"></a><span class="lineno"> 3478</span>&#160;  <span class="keywordflow">if</span> (isForeign)</div>
<div class="line"><a name="l03479"></a><span class="lineno"> 3479</span>&#160;  {</div>
<div class="line"><a name="l03480"></a><span class="lineno"> 3480</span>&#160;    <span class="comment">// Define a constant for the signature.</span></div>
<div class="line"><a name="l03481"></a><span class="lineno"> 3481</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#a6b4cd3d0c1a4cf34e42541f058f2e55b">emitConstant</a>(compiler, <a class="code" href="../../da/dbe/wren__value_8c.html#a6f59ebcbdfd6eb24569b4d50cf85052b">wrenNewStringLength</a>(compiler-&gt;parser-&gt;vm,</div>
<div class="line"><a name="l03482"></a><span class="lineno"> 3482</span>&#160;                                               fullSignature, length));</div>
<div class="line"><a name="l03483"></a><span class="lineno"> 3483</span>&#160; </div>
<div class="line"><a name="l03484"></a><span class="lineno"> 3484</span>&#160;    <span class="comment">// We don&#39;t need the function we started compiling in the parameter list</span></div>
<div class="line"><a name="l03485"></a><span class="lineno"> 3485</span>&#160;    <span class="comment">// any more.</span></div>
<div class="line"><a name="l03486"></a><span class="lineno"> 3486</span>&#160;    methodCompiler.parser-&gt;vm-&gt;compiler = methodCompiler.parent;</div>
<div class="line"><a name="l03487"></a><span class="lineno"> 3487</span>&#160;  }</div>
<div class="line"><a name="l03488"></a><span class="lineno"> 3488</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l03489"></a><span class="lineno"> 3489</span>&#160;  {</div>
<div class="line"><a name="l03490"></a><span class="lineno"> 3490</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#aed515d74eb0faafbaa8d63f05daf90b9">consume</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921abb75564bfe995225a6d177446540c352">TOKEN_LEFT_BRACE</a>, <span class="stringliteral">&quot;Expect &#39;{&#39; to begin method body.&quot;</span>);</div>
<div class="line"><a name="l03491"></a><span class="lineno"> 3491</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#ac1514744dedaa4c087738a38405e3778">finishBody</a>(&amp;methodCompiler);</div>
<div class="line"><a name="l03492"></a><span class="lineno"> 3492</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#a3d81a8f8607a9b8236f1e6e49410581a">endCompiler</a>(&amp;methodCompiler, fullSignature, length);</div>
<div class="line"><a name="l03493"></a><span class="lineno"> 3493</span>&#160;  }</div>
<div class="line"><a name="l03494"></a><span class="lineno"> 3494</span>&#160;  </div>
<div class="line"><a name="l03495"></a><span class="lineno"> 3495</span>&#160;  <span class="comment">// Define the method. For a constructor, this defines the instance</span></div>
<div class="line"><a name="l03496"></a><span class="lineno"> 3496</span>&#160;  <span class="comment">// initializer method.</span></div>
<div class="line"><a name="l03497"></a><span class="lineno"> 3497</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a8ec648c741d1eff279418c865b4f79f2">defineMethod</a>(compiler, classVariable, isStatic, <a class="code" href="../../d4/de2/wren__compiler_8c.html#ad1e91368551c7720efd9105fc37570a1">methodSymbol</a>);</div>
<div class="line"><a name="l03498"></a><span class="lineno"> 3498</span>&#160; </div>
<div class="line"><a name="l03499"></a><span class="lineno"> 3499</span>&#160;  <span class="keywordflow">if</span> (signature.type == <a class="code" href="../../d4/de2/wren__compiler_8c.html#a7456a1be27da2089f984a0ede62c6c50acc229831cb9cfa74b1ad2d11a37fe214">SIG_INITIALIZER</a>)</div>
<div class="line"><a name="l03500"></a><span class="lineno"> 3500</span>&#160;  {</div>
<div class="line"><a name="l03501"></a><span class="lineno"> 3501</span>&#160;    <span class="comment">// Also define a matching constructor method on the metaclass.</span></div>
<div class="line"><a name="l03502"></a><span class="lineno"> 3502</span>&#160;    signature.type = <a class="code" href="../../d4/de2/wren__compiler_8c.html#a7456a1be27da2089f984a0ede62c6c50af379038c458f7331b34fc5f3a05bea1b">SIG_METHOD</a>;</div>
<div class="line"><a name="l03503"></a><span class="lineno"> 3503</span>&#160;    <span class="keywordtype">int</span> constructorSymbol = <a class="code" href="../../d4/de2/wren__compiler_8c.html#aeca856979ea544d751ca03e0f3b9204c">signatureSymbol</a>(compiler, &amp;signature);</div>
<div class="line"><a name="l03504"></a><span class="lineno"> 3504</span>&#160;    </div>
<div class="line"><a name="l03505"></a><span class="lineno"> 3505</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#affafb7a1d6b4eb1e2efd926e875379fb">createConstructor</a>(compiler, &amp;signature, <a class="code" href="../../d4/de2/wren__compiler_8c.html#ad1e91368551c7720efd9105fc37570a1">methodSymbol</a>);</div>
<div class="line"><a name="l03506"></a><span class="lineno"> 3506</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#a8ec648c741d1eff279418c865b4f79f2">defineMethod</a>(compiler, classVariable, <span class="keyword">true</span>, constructorSymbol);</div>
<div class="line"><a name="l03507"></a><span class="lineno"> 3507</span>&#160;  }</div>
<div class="line"><a name="l03508"></a><span class="lineno"> 3508</span>&#160; </div>
<div class="line"><a name="l03509"></a><span class="lineno"> 3509</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l03510"></a><span class="lineno"> 3510</span>&#160;}</div>
<div class="line"><a name="l03511"></a><span class="lineno"> 3511</span>&#160; </div>
<div class="line"><a name="l03512"></a><span class="lineno"> 3512</span>&#160;<span class="comment">// Compiles a class definition. Assumes the &quot;class&quot; token has already been</span></div>
<div class="line"><a name="l03513"></a><span class="lineno"> 3513</span>&#160;<span class="comment">// consumed (along with a possibly preceding &quot;foreign&quot; token).</span></div>
<div class="line"><a name="l03514"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#acb2713c83e03d07b11beeca8a9f58539"> 3514</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#acb2713c83e03d07b11beeca8a9f58539">classDefinition</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler, <span class="keywordtype">bool</span> isForeign)</div>
<div class="line"><a name="l03515"></a><span class="lineno"> 3515</span>&#160;{</div>
<div class="line"><a name="l03516"></a><span class="lineno"> 3516</span>&#160;  <span class="comment">// Create a variable to store the class in.</span></div>
<div class="line"><a name="l03517"></a><span class="lineno"> 3517</span>&#160;  Variable classVariable;</div>
<div class="line"><a name="l03518"></a><span class="lineno"> 3518</span>&#160;  classVariable.scope = compiler-&gt;scopeDepth == -1 ? <a class="code" href="../../d4/de2/wren__compiler_8c.html#aaecc53892786f2fa11e682f633af84c6aa4cd1d716be5988e72bb08902f33270e">SCOPE_MODULE</a> : <a class="code" href="../../d4/de2/wren__compiler_8c.html#aaecc53892786f2fa11e682f633af84c6af828bc82c537119c89b55d2db41ec75b">SCOPE_LOCAL</a>;</div>
<div class="line"><a name="l03519"></a><span class="lineno"> 3519</span>&#160;  classVariable.index = <a class="code" href="../../d4/de2/wren__compiler_8c.html#ad162f798273bfdd4b16efc1ecc197ba3">declareNamedVariable</a>(compiler);</div>
<div class="line"><a name="l03520"></a><span class="lineno"> 3520</span>&#160;  </div>
<div class="line"><a name="l03521"></a><span class="lineno"> 3521</span>&#160;  <span class="comment">// Create shared class name value</span></div>
<div class="line"><a name="l03522"></a><span class="lineno"> 3522</span>&#160;  <a class="code" href="../../d2/d0a/wren__value_8h.html#ad777bf08d8e2b01df17ba5e3c51ae11f">Value</a> classNameString = <a class="code" href="../../da/dbe/wren__value_8c.html#a6f59ebcbdfd6eb24569b4d50cf85052b">wrenNewStringLength</a>(compiler-&gt;parser-&gt;vm,</div>
<div class="line"><a name="l03523"></a><span class="lineno"> 3523</span>&#160;      compiler-&gt;parser-&gt;previous.start, compiler-&gt;parser-&gt;previous.length);</div>
<div class="line"><a name="l03524"></a><span class="lineno"> 3524</span>&#160;  </div>
<div class="line"><a name="l03525"></a><span class="lineno"> 3525</span>&#160;  <span class="comment">// Create class name string to track method duplicates</span></div>
<div class="line"><a name="l03526"></a><span class="lineno"> 3526</span>&#160;  <a class="code" href="../../d1/d25/structs_obj_string.html">ObjString</a>* className = <a class="code" href="../../d2/d0a/wren__value_8h.html#a5ff8925170a2ed7f53d7d051a85d736f">AS_STRING</a>(classNameString);</div>
<div class="line"><a name="l03527"></a><span class="lineno"> 3527</span>&#160;  </div>
<div class="line"><a name="l03528"></a><span class="lineno"> 3528</span>&#160;  <span class="comment">// Make a string constant for the name.</span></div>
<div class="line"><a name="l03529"></a><span class="lineno"> 3529</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a6b4cd3d0c1a4cf34e42541f058f2e55b">emitConstant</a>(compiler, classNameString);</div>
<div class="line"><a name="l03530"></a><span class="lineno"> 3530</span>&#160; </div>
<div class="line"><a name="l03531"></a><span class="lineno"> 3531</span>&#160;  <span class="comment">// Load the superclass (if there is one).</span></div>
<div class="line"><a name="l03532"></a><span class="lineno"> 3532</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d4/de2/wren__compiler_8c.html#af4fe195796c3e700b61d62dafd263295">match</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a5ebaf8c36b5d84b1a717dfce0df266a8">TOKEN_IS</a>))</div>
<div class="line"><a name="l03533"></a><span class="lineno"> 3533</span>&#160;  {</div>
<div class="line"><a name="l03534"></a><span class="lineno"> 3534</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#a8dfb172d48944ba16bc5531170b66fe7">parsePrecedence</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa4e7d1a473d0280792d98ddb184d3006a935e24750e9ae953c5291c5567be873a">PREC_CALL</a>);</div>
<div class="line"><a name="l03535"></a><span class="lineno"> 3535</span>&#160;  }</div>
<div class="line"><a name="l03536"></a><span class="lineno"> 3536</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l03537"></a><span class="lineno"> 3537</span>&#160;  {</div>
<div class="line"><a name="l03538"></a><span class="lineno"> 3538</span>&#160;    <span class="comment">// Implicitly inherit from Object.</span></div>
<div class="line"><a name="l03539"></a><span class="lineno"> 3539</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa30b2bee45b3b4a728ebac4fb0e5a82b">loadCoreVariable</a>(compiler, <span class="stringliteral">&quot;Object&quot;</span>);</div>
<div class="line"><a name="l03540"></a><span class="lineno"> 3540</span>&#160;  }</div>
<div class="line"><a name="l03541"></a><span class="lineno"> 3541</span>&#160; </div>
<div class="line"><a name="l03542"></a><span class="lineno"> 3542</span>&#160;  <span class="comment">// Store a placeholder for the number of fields argument. We don&#39;t know the</span></div>
<div class="line"><a name="l03543"></a><span class="lineno"> 3543</span>&#160;  <span class="comment">// count until we&#39;ve compiled all the methods to see which fields are used.</span></div>
<div class="line"><a name="l03544"></a><span class="lineno"> 3544</span>&#160;  <span class="keywordtype">int</span> numFieldsInstruction = -1;</div>
<div class="line"><a name="l03545"></a><span class="lineno"> 3545</span>&#160;  <span class="keywordflow">if</span> (isForeign)</div>
<div class="line"><a name="l03546"></a><span class="lineno"> 3546</span>&#160;  {</div>
<div class="line"><a name="l03547"></a><span class="lineno"> 3547</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#a9cfaefaddfdf6eff5163d9638d141200">emitOp</a>(compiler, CODE_FOREIGN_CLASS);</div>
<div class="line"><a name="l03548"></a><span class="lineno"> 3548</span>&#160;  }</div>
<div class="line"><a name="l03549"></a><span class="lineno"> 3549</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l03550"></a><span class="lineno"> 3550</span>&#160;  {</div>
<div class="line"><a name="l03551"></a><span class="lineno"> 3551</span>&#160;    numFieldsInstruction = <a class="code" href="../../d4/de2/wren__compiler_8c.html#a57b01730ba60c3cf3d1237cfbd32b9cc">emitByteArg</a>(compiler, CODE_CLASS, 255);</div>
<div class="line"><a name="l03552"></a><span class="lineno"> 3552</span>&#160;  }</div>
<div class="line"><a name="l03553"></a><span class="lineno"> 3553</span>&#160; </div>
<div class="line"><a name="l03554"></a><span class="lineno"> 3554</span>&#160;  <span class="comment">// Store it in its name.</span></div>
<div class="line"><a name="l03555"></a><span class="lineno"> 3555</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aeb23f2220ff2337e38feb478573e24fb">defineVariable</a>(compiler, classVariable.index);</div>
<div class="line"><a name="l03556"></a><span class="lineno"> 3556</span>&#160; </div>
<div class="line"><a name="l03557"></a><span class="lineno"> 3557</span>&#160;  <span class="comment">// Push a local variable scope. Static fields in a class body are hoisted out</span></div>
<div class="line"><a name="l03558"></a><span class="lineno"> 3558</span>&#160;  <span class="comment">// into local variables declared in this scope. Methods that use them will</span></div>
<div class="line"><a name="l03559"></a><span class="lineno"> 3559</span>&#160;  <span class="comment">// have upvalues referencing them.</span></div>
<div class="line"><a name="l03560"></a><span class="lineno"> 3560</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#ad3240fb788071077fd8bc9e481079cda">pushScope</a>(compiler);</div>
<div class="line"><a name="l03561"></a><span class="lineno"> 3561</span>&#160; </div>
<div class="line"><a name="l03562"></a><span class="lineno"> 3562</span>&#160;  ClassInfo classInfo;</div>
<div class="line"><a name="l03563"></a><span class="lineno"> 3563</span>&#160;  classInfo.isForeign = isForeign;</div>
<div class="line"><a name="l03564"></a><span class="lineno"> 3564</span>&#160;  classInfo.name = className;</div>
<div class="line"><a name="l03565"></a><span class="lineno"> 3565</span>&#160; </div>
<div class="line"><a name="l03566"></a><span class="lineno"> 3566</span>&#160;  <span class="comment">// Allocate attribute maps if necessary. </span></div>
<div class="line"><a name="l03567"></a><span class="lineno"> 3567</span>&#160;  <span class="comment">// A method will allocate the methods one if needed</span></div>
<div class="line"><a name="l03568"></a><span class="lineno"> 3568</span>&#160;  classInfo.classAttributes = compiler-&gt;attributes-&gt;count &gt; 0 </div>
<div class="line"><a name="l03569"></a><span class="lineno"> 3569</span>&#160;        ? <a class="code" href="../../da/dbe/wren__value_8c.html#a12dd4cef62629e819f9eecb3e002a3da">wrenNewMap</a>(compiler-&gt;parser-&gt;vm) </div>
<div class="line"><a name="l03570"></a><span class="lineno"> 3570</span>&#160;        : <a class="code" href="../../da/d2d/_stdio_stream_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l03571"></a><span class="lineno"> 3571</span>&#160;  classInfo.methodAttributes = <a class="code" href="../../da/d2d/_stdio_stream_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l03572"></a><span class="lineno"> 3572</span>&#160;  <span class="comment">// Copy any existing attributes into the class</span></div>
<div class="line"><a name="l03573"></a><span class="lineno"> 3573</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#ad26f260d12aca9c0b1bd0ae201f760c1">copyAttributes</a>(compiler, classInfo.classAttributes);</div>
<div class="line"><a name="l03574"></a><span class="lineno"> 3574</span>&#160; </div>
<div class="line"><a name="l03575"></a><span class="lineno"> 3575</span>&#160;  <span class="comment">// Set up a symbol table for the class&#39;s fields. We&#39;ll initially compile</span></div>
<div class="line"><a name="l03576"></a><span class="lineno"> 3576</span>&#160;  <span class="comment">// them to slots starting at zero. When the method is bound to the class, the</span></div>
<div class="line"><a name="l03577"></a><span class="lineno"> 3577</span>&#160;  <span class="comment">// bytecode will be adjusted by [wrenBindMethod] to take inherited fields</span></div>
<div class="line"><a name="l03578"></a><span class="lineno"> 3578</span>&#160;  <span class="comment">// into account.</span></div>
<div class="line"><a name="l03579"></a><span class="lineno"> 3579</span>&#160;  <a class="code" href="../../de/d0d/wren__utils_8c.html#aaa1cfa95ee6675d7e00041ea1392f1b1">wrenSymbolTableInit</a>(&amp;classInfo.fields);</div>
<div class="line"><a name="l03580"></a><span class="lineno"> 3580</span>&#160;  </div>
<div class="line"><a name="l03581"></a><span class="lineno"> 3581</span>&#160;  <span class="comment">// Set up symbol buffers to track duplicate static and instance methods.</span></div>
<div class="line"><a name="l03582"></a><span class="lineno"> 3582</span>&#160;  wrenIntBufferInit(&amp;classInfo.methods);</div>
<div class="line"><a name="l03583"></a><span class="lineno"> 3583</span>&#160;  wrenIntBufferInit(&amp;classInfo.staticMethods);</div>
<div class="line"><a name="l03584"></a><span class="lineno"> 3584</span>&#160;  compiler-&gt;enclosingClass = &amp;classInfo;</div>
<div class="line"><a name="l03585"></a><span class="lineno"> 3585</span>&#160; </div>
<div class="line"><a name="l03586"></a><span class="lineno"> 3586</span>&#160;  <span class="comment">// Compile the method definitions.</span></div>
<div class="line"><a name="l03587"></a><span class="lineno"> 3587</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aed515d74eb0faafbaa8d63f05daf90b9">consume</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921abb75564bfe995225a6d177446540c352">TOKEN_LEFT_BRACE</a>, <span class="stringliteral">&quot;Expect &#39;{&#39; after class declaration.&quot;</span>);</div>
<div class="line"><a name="l03588"></a><span class="lineno"> 3588</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a0c05f397ec8eb9dd3f5994287510b132">matchLine</a>(compiler);</div>
<div class="line"><a name="l03589"></a><span class="lineno"> 3589</span>&#160; </div>
<div class="line"><a name="l03590"></a><span class="lineno"> 3590</span>&#160;  <span class="keywordflow">while</span> (!<a class="code" href="../../d4/de2/wren__compiler_8c.html#af4fe195796c3e700b61d62dafd263295">match</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a1c897c05771e2ebb01729d415d99308c">TOKEN_RIGHT_BRACE</a>))</div>
<div class="line"><a name="l03591"></a><span class="lineno"> 3591</span>&#160;  {</div>
<div class="line"><a name="l03592"></a><span class="lineno"> 3592</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d4/de2/wren__compiler_8c.html#a280648a47237a52319d293ace8edb7c8">method</a>(compiler, classVariable)) <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03593"></a><span class="lineno"> 3593</span>&#160;    </div>
<div class="line"><a name="l03594"></a><span class="lineno"> 3594</span>&#160;    <span class="comment">// Don&#39;t require a newline after the last definition.</span></div>
<div class="line"><a name="l03595"></a><span class="lineno"> 3595</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d4/de2/wren__compiler_8c.html#af4fe195796c3e700b61d62dafd263295">match</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a1c897c05771e2ebb01729d415d99308c">TOKEN_RIGHT_BRACE</a>)) <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03596"></a><span class="lineno"> 3596</span>&#160; </div>
<div class="line"><a name="l03597"></a><span class="lineno"> 3597</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#a6f9526219e47ab23cd6b5db273d13c8a">consumeLine</a>(compiler, <span class="stringliteral">&quot;Expect newline after definition in class.&quot;</span>);</div>
<div class="line"><a name="l03598"></a><span class="lineno"> 3598</span>&#160;  }</div>
<div class="line"><a name="l03599"></a><span class="lineno"> 3599</span>&#160;  </div>
<div class="line"><a name="l03600"></a><span class="lineno"> 3600</span>&#160;  <span class="comment">// If any attributes are present, </span></div>
<div class="line"><a name="l03601"></a><span class="lineno"> 3601</span>&#160;  <span class="comment">// instantiate a ClassAttributes instance for the class</span></div>
<div class="line"><a name="l03602"></a><span class="lineno"> 3602</span>&#160;  <span class="comment">// and send it over to CODE_END_CLASS</span></div>
<div class="line"><a name="l03603"></a><span class="lineno"> 3603</span>&#160;  <span class="keywordtype">bool</span> hasAttr = classInfo.classAttributes != <a class="code" href="../../da/d2d/_stdio_stream_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> || </div>
<div class="line"><a name="l03604"></a><span class="lineno"> 3604</span>&#160;                 classInfo.methodAttributes != <a class="code" href="../../da/d2d/_stdio_stream_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l03605"></a><span class="lineno"> 3605</span>&#160;  <span class="keywordflow">if</span>(hasAttr) {</div>
<div class="line"><a name="l03606"></a><span class="lineno"> 3606</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#ad596cab10744611b6321d2f883acf5f1">emitClassAttributes</a>(compiler, &amp;classInfo);</div>
<div class="line"><a name="l03607"></a><span class="lineno"> 3607</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#aac2c091d1986fa181a49452185f36799">loadVariable</a>(compiler, classVariable);</div>
<div class="line"><a name="l03608"></a><span class="lineno"> 3608</span>&#160;    <span class="comment">// At the moment, we don&#39;t have other uses for CODE_END_CLASS,</span></div>
<div class="line"><a name="l03609"></a><span class="lineno"> 3609</span>&#160;    <span class="comment">// so we put it inside this condition. Later, we can always</span></div>
<div class="line"><a name="l03610"></a><span class="lineno"> 3610</span>&#160;    <span class="comment">// emit it and use it as needed.</span></div>
<div class="line"><a name="l03611"></a><span class="lineno"> 3611</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#a9cfaefaddfdf6eff5163d9638d141200">emitOp</a>(compiler, CODE_END_CLASS);</div>
<div class="line"><a name="l03612"></a><span class="lineno"> 3612</span>&#160;  }</div>
<div class="line"><a name="l03613"></a><span class="lineno"> 3613</span>&#160; </div>
<div class="line"><a name="l03614"></a><span class="lineno"> 3614</span>&#160;  <span class="comment">// Update the class with the number of fields.</span></div>
<div class="line"><a name="l03615"></a><span class="lineno"> 3615</span>&#160;  <span class="keywordflow">if</span> (!isForeign)</div>
<div class="line"><a name="l03616"></a><span class="lineno"> 3616</span>&#160;  {</div>
<div class="line"><a name="l03617"></a><span class="lineno"> 3617</span>&#160;    compiler-&gt;fn-&gt;code.data[numFieldsInstruction] =</div>
<div class="line"><a name="l03618"></a><span class="lineno"> 3618</span>&#160;        (uint8_t)classInfo.fields.count;</div>
<div class="line"><a name="l03619"></a><span class="lineno"> 3619</span>&#160;  }</div>
<div class="line"><a name="l03620"></a><span class="lineno"> 3620</span>&#160;  </div>
<div class="line"><a name="l03621"></a><span class="lineno"> 3621</span>&#160;  <span class="comment">// Clear symbol tables for tracking field and method names.</span></div>
<div class="line"><a name="l03622"></a><span class="lineno"> 3622</span>&#160;  <a class="code" href="../../de/d0d/wren__utils_8c.html#adae9be1d00d2b9528bf753830354ee4f">wrenSymbolTableClear</a>(compiler-&gt;parser-&gt;vm, &amp;classInfo.fields);</div>
<div class="line"><a name="l03623"></a><span class="lineno"> 3623</span>&#160;  wrenIntBufferClear(compiler-&gt;parser-&gt;vm, &amp;classInfo.methods);</div>
<div class="line"><a name="l03624"></a><span class="lineno"> 3624</span>&#160;  wrenIntBufferClear(compiler-&gt;parser-&gt;vm, &amp;classInfo.staticMethods);</div>
<div class="line"><a name="l03625"></a><span class="lineno"> 3625</span>&#160;  compiler-&gt;enclosingClass = <a class="code" href="../../da/d2d/_stdio_stream_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l03626"></a><span class="lineno"> 3626</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a34f07e4ff7876be8b8cc88f2a7e3ebda">popScope</a>(compiler);</div>
<div class="line"><a name="l03627"></a><span class="lineno"> 3627</span>&#160;}</div>
<div class="line"><a name="l03628"></a><span class="lineno"> 3628</span>&#160; </div>
<div class="line"><a name="l03629"></a><span class="lineno"> 3629</span>&#160;<span class="comment">// Compiles an &quot;import&quot; statement.</span></div>
<div class="line"><a name="l03630"></a><span class="lineno"> 3630</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l03631"></a><span class="lineno"> 3631</span>&#160;<span class="comment">// An import compiles to a series of instructions. Given:</span></div>
<div class="line"><a name="l03632"></a><span class="lineno"> 3632</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l03633"></a><span class="lineno"> 3633</span>&#160;<span class="comment">//     import &quot;foo&quot; for Bar, Baz</span></div>
<div class="line"><a name="l03634"></a><span class="lineno"> 3634</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l03635"></a><span class="lineno"> 3635</span>&#160;<span class="comment">// We compile a single IMPORT_MODULE &quot;foo&quot; instruction to load the module</span></div>
<div class="line"><a name="l03636"></a><span class="lineno"> 3636</span>&#160;<span class="comment">// itself. When that finishes executing the imported module, it leaves the</span></div>
<div class="line"><a name="l03637"></a><span class="lineno"> 3637</span>&#160;<span class="comment">// ObjModule in vm-&gt;lastModule. Then, for Bar and Baz, we:</span></div>
<div class="line"><a name="l03638"></a><span class="lineno"> 3638</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l03639"></a><span class="lineno"> 3639</span>&#160;<span class="comment">// * Declare a variable in the current scope with that name.</span></div>
<div class="line"><a name="l03640"></a><span class="lineno"> 3640</span>&#160;<span class="comment">// * Emit an IMPORT_VARIABLE instruction to load the variable&#39;s value from the</span></div>
<div class="line"><a name="l03641"></a><span class="lineno"> 3641</span>&#160;<span class="comment">//   other module.</span></div>
<div class="line"><a name="l03642"></a><span class="lineno"> 3642</span>&#160;<span class="comment">// * Compile the code to store that value in the variable in this scope.</span></div>
<div class="line"><a name="l03643"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#a8817c0493130cea4fe71207cf5df5426"> 3643</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <span class="keyword">import</span>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler)</div>
<div class="line"><a name="l03644"></a><span class="lineno"> 3644</span>&#160;{</div>
<div class="line"><a name="l03645"></a><span class="lineno"> 3645</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#acbf1748d7e097833a292ee0caaa50d05">ignoreNewlines</a>(compiler);</div>
<div class="line"><a name="l03646"></a><span class="lineno"> 3646</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aed515d74eb0faafbaa8d63f05daf90b9">consume</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921afcaa8f23ed1d21aa5779451ed3c243ef">TOKEN_STRING</a>, <span class="stringliteral">&quot;Expect a string after &#39;import&#39;.&quot;</span>);</div>
<div class="line"><a name="l03647"></a><span class="lineno"> 3647</span>&#160;  <span class="keywordtype">int</span> moduleConstant = <a class="code" href="../../d4/de2/wren__compiler_8c.html#a0dc46acbdd511af1c3de1a937dca02b3">addConstant</a>(compiler, compiler-&gt;parser-&gt;previous.value);</div>
<div class="line"><a name="l03648"></a><span class="lineno"> 3648</span>&#160; </div>
<div class="line"><a name="l03649"></a><span class="lineno"> 3649</span>&#160;  <span class="comment">// Load the module.</span></div>
<div class="line"><a name="l03650"></a><span class="lineno"> 3650</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a3a17c9fef3d6388b2192ae1ce77483c1">emitShortArg</a>(compiler, CODE_IMPORT_MODULE, moduleConstant);</div>
<div class="line"><a name="l03651"></a><span class="lineno"> 3651</span>&#160; </div>
<div class="line"><a name="l03652"></a><span class="lineno"> 3652</span>&#160;  <span class="comment">// Discard the unused result value from calling the module body&#39;s closure.</span></div>
<div class="line"><a name="l03653"></a><span class="lineno"> 3653</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a9cfaefaddfdf6eff5163d9638d141200">emitOp</a>(compiler, CODE_POP);</div>
<div class="line"><a name="l03654"></a><span class="lineno"> 3654</span>&#160;  </div>
<div class="line"><a name="l03655"></a><span class="lineno"> 3655</span>&#160;  <span class="comment">// The for clause is optional.</span></div>
<div class="line"><a name="l03656"></a><span class="lineno"> 3656</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="../../d4/de2/wren__compiler_8c.html#af4fe195796c3e700b61d62dafd263295">match</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921aaca94097ec53cbcf93cdc0a493251040">TOKEN_FOR</a>)) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03657"></a><span class="lineno"> 3657</span>&#160; </div>
<div class="line"><a name="l03658"></a><span class="lineno"> 3658</span>&#160;  <span class="comment">// Compile the comma-separated list of variables to import.</span></div>
<div class="line"><a name="l03659"></a><span class="lineno"> 3659</span>&#160;  <span class="keywordflow">do</span></div>
<div class="line"><a name="l03660"></a><span class="lineno"> 3660</span>&#160;  {</div>
<div class="line"><a name="l03661"></a><span class="lineno"> 3661</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#acbf1748d7e097833a292ee0caaa50d05">ignoreNewlines</a>(compiler);</div>
<div class="line"><a name="l03662"></a><span class="lineno"> 3662</span>&#160;    </div>
<div class="line"><a name="l03663"></a><span class="lineno"> 3663</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#aed515d74eb0faafbaa8d63f05daf90b9">consume</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a56d9afac7a1508302f85a77d1f3ba8b2">TOKEN_NAME</a>, <span class="stringliteral">&quot;Expect variable name.&quot;</span>);</div>
<div class="line"><a name="l03664"></a><span class="lineno"> 3664</span>&#160;    </div>
<div class="line"><a name="l03665"></a><span class="lineno"> 3665</span>&#160;    <span class="comment">// We need to hold onto the source variable, </span></div>
<div class="line"><a name="l03666"></a><span class="lineno"> 3666</span>&#160;    <span class="comment">// in order to reference it in the import later</span></div>
<div class="line"><a name="l03667"></a><span class="lineno"> 3667</span>&#160;    Token sourceVariableToken = compiler-&gt;parser-&gt;previous;</div>
<div class="line"><a name="l03668"></a><span class="lineno"> 3668</span>&#160; </div>
<div class="line"><a name="l03669"></a><span class="lineno"> 3669</span>&#160;    <span class="comment">// Define a string constant for the original variable name.</span></div>
<div class="line"><a name="l03670"></a><span class="lineno"> 3670</span>&#160;    <span class="keywordtype">int</span> sourceVariableConstant = <a class="code" href="../../d4/de2/wren__compiler_8c.html#a0dc46acbdd511af1c3de1a937dca02b3">addConstant</a>(compiler,</div>
<div class="line"><a name="l03671"></a><span class="lineno"> 3671</span>&#160;          <a class="code" href="../../da/dbe/wren__value_8c.html#a6f59ebcbdfd6eb24569b4d50cf85052b">wrenNewStringLength</a>(compiler-&gt;parser-&gt;vm,</div>
<div class="line"><a name="l03672"></a><span class="lineno"> 3672</span>&#160;                        sourceVariableToken.start,</div>
<div class="line"><a name="l03673"></a><span class="lineno"> 3673</span>&#160;                        sourceVariableToken.length));</div>
<div class="line"><a name="l03674"></a><span class="lineno"> 3674</span>&#160; </div>
<div class="line"><a name="l03675"></a><span class="lineno"> 3675</span>&#160;    <span class="comment">// Store the symbol we care about for the variable</span></div>
<div class="line"><a name="l03676"></a><span class="lineno"> 3676</span>&#160;    <span class="keywordtype">int</span> slot = -1;</div>
<div class="line"><a name="l03677"></a><span class="lineno"> 3677</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="../../d4/de2/wren__compiler_8c.html#af4fe195796c3e700b61d62dafd263295">match</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921afb4035e70eacef7155e4c38833f93cbc">TOKEN_AS</a>))</div>
<div class="line"><a name="l03678"></a><span class="lineno"> 3678</span>&#160;    {</div>
<div class="line"><a name="l03679"></a><span class="lineno"> 3679</span>&#160;      <span class="comment">//import &quot;module&quot; for Source as Dest</span></div>
<div class="line"><a name="l03680"></a><span class="lineno"> 3680</span>&#160;      <span class="comment">//Use &#39;Dest&#39; as the name by declaring a new variable for it.</span></div>
<div class="line"><a name="l03681"></a><span class="lineno"> 3681</span>&#160;      <span class="comment">//This parses a name after the &#39;as&#39; and defines it.</span></div>
<div class="line"><a name="l03682"></a><span class="lineno"> 3682</span>&#160;      slot = <a class="code" href="../../d4/de2/wren__compiler_8c.html#ad162f798273bfdd4b16efc1ecc197ba3">declareNamedVariable</a>(compiler);</div>
<div class="line"><a name="l03683"></a><span class="lineno"> 3683</span>&#160;    }</div>
<div class="line"><a name="l03684"></a><span class="lineno"> 3684</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l03685"></a><span class="lineno"> 3685</span>&#160;    {</div>
<div class="line"><a name="l03686"></a><span class="lineno"> 3686</span>&#160;      <span class="comment">//import &quot;module&quot; for Source</span></div>
<div class="line"><a name="l03687"></a><span class="lineno"> 3687</span>&#160;      <span class="comment">//Uses &#39;Source&#39; as the name directly</span></div>
<div class="line"><a name="l03688"></a><span class="lineno"> 3688</span>&#160;      slot = <a class="code" href="../../d4/de2/wren__compiler_8c.html#a6f04eaffda4b4d4ee46d87aa3e9a8d2b">declareVariable</a>(compiler, &amp;sourceVariableToken);</div>
<div class="line"><a name="l03689"></a><span class="lineno"> 3689</span>&#160;    }</div>
<div class="line"><a name="l03690"></a><span class="lineno"> 3690</span>&#160; </div>
<div class="line"><a name="l03691"></a><span class="lineno"> 3691</span>&#160;    <span class="comment">// Load the variable from the other module.</span></div>
<div class="line"><a name="l03692"></a><span class="lineno"> 3692</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#a3a17c9fef3d6388b2192ae1ce77483c1">emitShortArg</a>(compiler, CODE_IMPORT_VARIABLE, sourceVariableConstant);</div>
<div class="line"><a name="l03693"></a><span class="lineno"> 3693</span>&#160; </div>
<div class="line"><a name="l03694"></a><span class="lineno"> 3694</span>&#160;    <span class="comment">// Store the result in the variable here.</span></div>
<div class="line"><a name="l03695"></a><span class="lineno"> 3695</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#aeb23f2220ff2337e38feb478573e24fb">defineVariable</a>(compiler, slot);</div>
<div class="line"><a name="l03696"></a><span class="lineno"> 3696</span>&#160;  } <span class="keywordflow">while</span> (<a class="code" href="../../d4/de2/wren__compiler_8c.html#af4fe195796c3e700b61d62dafd263295">match</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a8d265e17914bc733c8b9a880dd097a9e">TOKEN_COMMA</a>));</div>
<div class="line"><a name="l03697"></a><span class="lineno"> 3697</span>&#160;}</div>
<div class="line"><a name="l03698"></a><span class="lineno"> 3698</span>&#160; </div>
<div class="line"><a name="l03699"></a><span class="lineno"> 3699</span>&#160;<span class="comment">// Compiles a &quot;var&quot; variable definition statement.</span></div>
<div class="line"><a name="l03700"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#a05b35d7470ad01bbd67ffc19a9f161c5"> 3700</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a05b35d7470ad01bbd67ffc19a9f161c5">variableDefinition</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler)</div>
<div class="line"><a name="l03701"></a><span class="lineno"> 3701</span>&#160;{</div>
<div class="line"><a name="l03702"></a><span class="lineno"> 3702</span>&#160;  <span class="comment">// Grab its name, but don&#39;t declare it yet. A (local) variable shouldn&#39;t be</span></div>
<div class="line"><a name="l03703"></a><span class="lineno"> 3703</span>&#160;  <span class="comment">// in scope in its own initializer.</span></div>
<div class="line"><a name="l03704"></a><span class="lineno"> 3704</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aed515d74eb0faafbaa8d63f05daf90b9">consume</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a56d9afac7a1508302f85a77d1f3ba8b2">TOKEN_NAME</a>, <span class="stringliteral">&quot;Expect variable name.&quot;</span>);</div>
<div class="line"><a name="l03705"></a><span class="lineno"> 3705</span>&#160;  Token nameToken = compiler-&gt;parser-&gt;previous;</div>
<div class="line"><a name="l03706"></a><span class="lineno"> 3706</span>&#160; </div>
<div class="line"><a name="l03707"></a><span class="lineno"> 3707</span>&#160;  <span class="comment">// Compile the initializer.</span></div>
<div class="line"><a name="l03708"></a><span class="lineno"> 3708</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d4/de2/wren__compiler_8c.html#af4fe195796c3e700b61d62dafd263295">match</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921aeba19c29eb600289d1e973bf335139fe">TOKEN_EQ</a>))</div>
<div class="line"><a name="l03709"></a><span class="lineno"> 3709</span>&#160;  {</div>
<div class="line"><a name="l03710"></a><span class="lineno"> 3710</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#acbf1748d7e097833a292ee0caaa50d05">ignoreNewlines</a>(compiler);</div>
<div class="line"><a name="l03711"></a><span class="lineno"> 3711</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#ac20f67474558b6bf12fd74dd573ee7af">expression</a>(compiler);</div>
<div class="line"><a name="l03712"></a><span class="lineno"> 3712</span>&#160;  }</div>
<div class="line"><a name="l03713"></a><span class="lineno"> 3713</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l03714"></a><span class="lineno"> 3714</span>&#160;  {</div>
<div class="line"><a name="l03715"></a><span class="lineno"> 3715</span>&#160;    <span class="comment">// Default initialize it to null.</span></div>
<div class="line"><a name="l03716"></a><span class="lineno"> 3716</span>&#160;    <span class="keyword">null</span>(compiler, <span class="keyword">false</span>);</div>
<div class="line"><a name="l03717"></a><span class="lineno"> 3717</span>&#160;  }</div>
<div class="line"><a name="l03718"></a><span class="lineno"> 3718</span>&#160; </div>
<div class="line"><a name="l03719"></a><span class="lineno"> 3719</span>&#160;  <span class="comment">// Now put it in scope.</span></div>
<div class="line"><a name="l03720"></a><span class="lineno"> 3720</span>&#160;  <span class="keywordtype">int</span> symbol = <a class="code" href="../../d4/de2/wren__compiler_8c.html#a6f04eaffda4b4d4ee46d87aa3e9a8d2b">declareVariable</a>(compiler, &amp;nameToken);</div>
<div class="line"><a name="l03721"></a><span class="lineno"> 3721</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aeb23f2220ff2337e38feb478573e24fb">defineVariable</a>(compiler, symbol);</div>
<div class="line"><a name="l03722"></a><span class="lineno"> 3722</span>&#160;}</div>
<div class="line"><a name="l03723"></a><span class="lineno"> 3723</span>&#160; </div>
<div class="line"><a name="l03724"></a><span class="lineno"> 3724</span>&#160;<span class="comment">// Compiles a &quot;definition&quot;. These are the statements that bind new variables.</span></div>
<div class="line"><a name="l03725"></a><span class="lineno"> 3725</span>&#160;<span class="comment">// They can only appear at the top level of a block and are prohibited in places</span></div>
<div class="line"><a name="l03726"></a><span class="lineno"> 3726</span>&#160;<span class="comment">// like the non-curly body of an if or while.</span></div>
<div class="line"><a name="l03727"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#a3909aa8ee9218228fe302cab2e0d5d2f"> 3727</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a3909aa8ee9218228fe302cab2e0d5d2f">definition</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler)</div>
<div class="line"><a name="l03728"></a><span class="lineno"> 3728</span>&#160;{</div>
<div class="line"><a name="l03729"></a><span class="lineno"> 3729</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="../../d4/de2/wren__compiler_8c.html#a3fd2906d4bd1f4c07f61b64e9136dc15">matchAttribute</a>(compiler)) {</div>
<div class="line"><a name="l03730"></a><span class="lineno"> 3730</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#a3909aa8ee9218228fe302cab2e0d5d2f">definition</a>(compiler);</div>
<div class="line"><a name="l03731"></a><span class="lineno"> 3731</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03732"></a><span class="lineno"> 3732</span>&#160;  }</div>
<div class="line"><a name="l03733"></a><span class="lineno"> 3733</span>&#160; </div>
<div class="line"><a name="l03734"></a><span class="lineno"> 3734</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d4/de2/wren__compiler_8c.html#af4fe195796c3e700b61d62dafd263295">match</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a710fd04fc31582717222d447b5985a1f">TOKEN_CLASS</a>))</div>
<div class="line"><a name="l03735"></a><span class="lineno"> 3735</span>&#160;  {</div>
<div class="line"><a name="l03736"></a><span class="lineno"> 3736</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#acb2713c83e03d07b11beeca8a9f58539">classDefinition</a>(compiler, <span class="keyword">false</span>);</div>
<div class="line"><a name="l03737"></a><span class="lineno"> 3737</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03738"></a><span class="lineno"> 3738</span>&#160;  }</div>
<div class="line"><a name="l03739"></a><span class="lineno"> 3739</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d4/de2/wren__compiler_8c.html#af4fe195796c3e700b61d62dafd263295">match</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921af7597f04537d607509a57ce101c3a6de">TOKEN_FOREIGN</a>))</div>
<div class="line"><a name="l03740"></a><span class="lineno"> 3740</span>&#160;  {</div>
<div class="line"><a name="l03741"></a><span class="lineno"> 3741</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#aed515d74eb0faafbaa8d63f05daf90b9">consume</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a710fd04fc31582717222d447b5985a1f">TOKEN_CLASS</a>, <span class="stringliteral">&quot;Expect &#39;class&#39; after &#39;foreign&#39;.&quot;</span>);</div>
<div class="line"><a name="l03742"></a><span class="lineno"> 3742</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#acb2713c83e03d07b11beeca8a9f58539">classDefinition</a>(compiler, <span class="keyword">true</span>);</div>
<div class="line"><a name="l03743"></a><span class="lineno"> 3743</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03744"></a><span class="lineno"> 3744</span>&#160;  }</div>
<div class="line"><a name="l03745"></a><span class="lineno"> 3745</span>&#160; </div>
<div class="line"><a name="l03746"></a><span class="lineno"> 3746</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a576b164c108737d8d82019ec54a0d533">disallowAttributes</a>(compiler);</div>
<div class="line"><a name="l03747"></a><span class="lineno"> 3747</span>&#160; </div>
<div class="line"><a name="l03748"></a><span class="lineno"> 3748</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d4/de2/wren__compiler_8c.html#af4fe195796c3e700b61d62dafd263295">match</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a00a4852749fa7e7e4675f7843ae16642">TOKEN_IMPORT</a>))</div>
<div class="line"><a name="l03749"></a><span class="lineno"> 3749</span>&#160;  {</div>
<div class="line"><a name="l03750"></a><span class="lineno"> 3750</span>&#160;    <span class="keyword">import</span>(compiler);</div>
<div class="line"><a name="l03751"></a><span class="lineno"> 3751</span>&#160;  }</div>
<div class="line"><a name="l03752"></a><span class="lineno"> 3752</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d4/de2/wren__compiler_8c.html#af4fe195796c3e700b61d62dafd263295">match</a>(compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a7a01d5885def4a924f815ab4afdb477b">TOKEN_VAR</a>))</div>
<div class="line"><a name="l03753"></a><span class="lineno"> 3753</span>&#160;  {</div>
<div class="line"><a name="l03754"></a><span class="lineno"> 3754</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#a05b35d7470ad01bbd67ffc19a9f161c5">variableDefinition</a>(compiler);</div>
<div class="line"><a name="l03755"></a><span class="lineno"> 3755</span>&#160;  }</div>
<div class="line"><a name="l03756"></a><span class="lineno"> 3756</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l03757"></a><span class="lineno"> 3757</span>&#160;  {</div>
<div class="line"><a name="l03758"></a><span class="lineno"> 3758</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#a1b50adda3f611e35b1bf68776af68f6d">statement</a>(compiler);</div>
<div class="line"><a name="l03759"></a><span class="lineno"> 3759</span>&#160;  }</div>
<div class="line"><a name="l03760"></a><span class="lineno"> 3760</span>&#160;}</div>
<div class="line"><a name="l03761"></a><span class="lineno"> 3761</span>&#160; </div>
<div class="line"><a name="l03762"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#aedcc023430c3c9b1891dbdc4f7b8f0b8"> 3762</a></span>&#160;<a class="code" href="../../df/d87/struct_obj_fn.html">ObjFn</a>* <a class="code" href="../../d4/de2/wren__compiler_8c.html#aedcc023430c3c9b1891dbdc4f7b8f0b8">wrenCompile</a>(<a class="code" href="../../d7/ddb/struct_wren_v_m.html">WrenVM</a>* vm, <a class="code" href="../../df/d81/struct_obj_module.html">ObjModule</a>* module, <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="../../dd/df8/lz4_8h.html#a0211201f992ec3f0b641c9ceff5f837a">source</a>,</div>
<div class="line"><a name="l03763"></a><span class="lineno"> 3763</span>&#160;                   <span class="keywordtype">bool</span> isExpression, <span class="keywordtype">bool</span> printErrors)</div>
<div class="line"><a name="l03764"></a><span class="lineno"> 3764</span>&#160;{</div>
<div class="line"><a name="l03765"></a><span class="lineno"> 3765</span>&#160;  <span class="comment">// Skip the UTF-8 BOM if there is one.</span></div>
<div class="line"><a name="l03766"></a><span class="lineno"> 3766</span>&#160;  <span class="keywordflow">if</span> (strncmp(<a class="code" href="../../dd/df8/lz4_8h.html#a0211201f992ec3f0b641c9ceff5f837a">source</a>, <span class="stringliteral">&quot;\xEF\xBB\xBF&quot;</span>, 3) == 0) <a class="code" href="../../dd/df8/lz4_8h.html#a0211201f992ec3f0b641c9ceff5f837a">source</a> += 3;</div>
<div class="line"><a name="l03767"></a><span class="lineno"> 3767</span>&#160;  </div>
<div class="line"><a name="l03768"></a><span class="lineno"> 3768</span>&#160;  Parser parser;</div>
<div class="line"><a name="l03769"></a><span class="lineno"> 3769</span>&#160;  parser.vm = vm;</div>
<div class="line"><a name="l03770"></a><span class="lineno"> 3770</span>&#160;  parser.module = module;</div>
<div class="line"><a name="l03771"></a><span class="lineno"> 3771</span>&#160;  parser.source = <a class="code" href="../../dd/df8/lz4_8h.html#a0211201f992ec3f0b641c9ceff5f837a">source</a>;</div>
<div class="line"><a name="l03772"></a><span class="lineno"> 3772</span>&#160; </div>
<div class="line"><a name="l03773"></a><span class="lineno"> 3773</span>&#160;  parser.tokenStart = <a class="code" href="../../dd/df8/lz4_8h.html#a0211201f992ec3f0b641c9ceff5f837a">source</a>;</div>
<div class="line"><a name="l03774"></a><span class="lineno"> 3774</span>&#160;  parser.currentChar = <a class="code" href="../../dd/df8/lz4_8h.html#a0211201f992ec3f0b641c9ceff5f837a">source</a>;</div>
<div class="line"><a name="l03775"></a><span class="lineno"> 3775</span>&#160;  parser.currentLine = 1;</div>
<div class="line"><a name="l03776"></a><span class="lineno"> 3776</span>&#160;  parser.numParens = 0;</div>
<div class="line"><a name="l03777"></a><span class="lineno"> 3777</span>&#160; </div>
<div class="line"><a name="l03778"></a><span class="lineno"> 3778</span>&#160;  <span class="comment">// Zero-init the current token. This will get copied to previous when</span></div>
<div class="line"><a name="l03779"></a><span class="lineno"> 3779</span>&#160;  <span class="comment">// nextToken() is called below.</span></div>
<div class="line"><a name="l03780"></a><span class="lineno"> 3780</span>&#160;  parser.next.type = <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921abbfc577192f2423b39a5f693e260b615">TOKEN_ERROR</a>;</div>
<div class="line"><a name="l03781"></a><span class="lineno"> 3781</span>&#160;  parser.next.start = <a class="code" href="../../dd/df8/lz4_8h.html#a0211201f992ec3f0b641c9ceff5f837a">source</a>;</div>
<div class="line"><a name="l03782"></a><span class="lineno"> 3782</span>&#160;  parser.next.length = 0;</div>
<div class="line"><a name="l03783"></a><span class="lineno"> 3783</span>&#160;  parser.next.line = 0;</div>
<div class="line"><a name="l03784"></a><span class="lineno"> 3784</span>&#160;  parser.next.value = <a class="code" href="../../d2/d0a/wren__value_8h.html#a07ae6a286fd2358c66dad2df086ca785">UNDEFINED_VAL</a>;</div>
<div class="line"><a name="l03785"></a><span class="lineno"> 3785</span>&#160; </div>
<div class="line"><a name="l03786"></a><span class="lineno"> 3786</span>&#160;  parser.printErrors = printErrors;</div>
<div class="line"><a name="l03787"></a><span class="lineno"> 3787</span>&#160;  parser.hasError = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03788"></a><span class="lineno"> 3788</span>&#160; </div>
<div class="line"><a name="l03789"></a><span class="lineno"> 3789</span>&#160;  <span class="comment">// Read the first token into next</span></div>
<div class="line"><a name="l03790"></a><span class="lineno"> 3790</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aff9308c9745d77724d06dbc7f1e7bd34">nextToken</a>(&amp;parser);</div>
<div class="line"><a name="l03791"></a><span class="lineno"> 3791</span>&#160;  <span class="comment">// Copy next -&gt; current</span></div>
<div class="line"><a name="l03792"></a><span class="lineno"> 3792</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aff9308c9745d77724d06dbc7f1e7bd34">nextToken</a>(&amp;parser);</div>
<div class="line"><a name="l03793"></a><span class="lineno"> 3793</span>&#160; </div>
<div class="line"><a name="l03794"></a><span class="lineno"> 3794</span>&#160;  <span class="keywordtype">int</span> numExistingVariables = module-&gt;<a class="code" href="../../df/d81/struct_obj_module.html#ac4b3cf584974743fb71a1b73e6b5877c">variables</a>.count;</div>
<div class="line"><a name="l03795"></a><span class="lineno"> 3795</span>&#160; </div>
<div class="line"><a name="l03796"></a><span class="lineno"> 3796</span>&#160;  <a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a> compiler;</div>
<div class="line"><a name="l03797"></a><span class="lineno"> 3797</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a9cd38e83591679b9d3f9079885746744">initCompiler</a>(&amp;compiler, &amp;parser, <a class="code" href="../../da/d2d/_stdio_stream_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l03798"></a><span class="lineno"> 3798</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#acbf1748d7e097833a292ee0caaa50d05">ignoreNewlines</a>(&amp;compiler);</div>
<div class="line"><a name="l03799"></a><span class="lineno"> 3799</span>&#160; </div>
<div class="line"><a name="l03800"></a><span class="lineno"> 3800</span>&#160;  <span class="keywordflow">if</span> (isExpression)</div>
<div class="line"><a name="l03801"></a><span class="lineno"> 3801</span>&#160;  {</div>
<div class="line"><a name="l03802"></a><span class="lineno"> 3802</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#ac20f67474558b6bf12fd74dd573ee7af">expression</a>(&amp;compiler);</div>
<div class="line"><a name="l03803"></a><span class="lineno"> 3803</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#aed515d74eb0faafbaa8d63f05daf90b9">consume</a>(&amp;compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921aa130df27256cd45f5781fc74deeb50dc">TOKEN_EOF</a>, <span class="stringliteral">&quot;Expect end of expression.&quot;</span>);</div>
<div class="line"><a name="l03804"></a><span class="lineno"> 3804</span>&#160;  }</div>
<div class="line"><a name="l03805"></a><span class="lineno"> 3805</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l03806"></a><span class="lineno"> 3806</span>&#160;  {</div>
<div class="line"><a name="l03807"></a><span class="lineno"> 3807</span>&#160;    <span class="keywordflow">while</span> (!<a class="code" href="../../d4/de2/wren__compiler_8c.html#af4fe195796c3e700b61d62dafd263295">match</a>(&amp;compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921aa130df27256cd45f5781fc74deeb50dc">TOKEN_EOF</a>))</div>
<div class="line"><a name="l03808"></a><span class="lineno"> 3808</span>&#160;    {</div>
<div class="line"><a name="l03809"></a><span class="lineno"> 3809</span>&#160;      <a class="code" href="../../d4/de2/wren__compiler_8c.html#a3909aa8ee9218228fe302cab2e0d5d2f">definition</a>(&amp;compiler);</div>
<div class="line"><a name="l03810"></a><span class="lineno"> 3810</span>&#160;      </div>
<div class="line"><a name="l03811"></a><span class="lineno"> 3811</span>&#160;      <span class="comment">// If there is no newline, it must be the end of file on the same line.</span></div>
<div class="line"><a name="l03812"></a><span class="lineno"> 3812</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d4/de2/wren__compiler_8c.html#a0c05f397ec8eb9dd3f5994287510b132">matchLine</a>(&amp;compiler))</div>
<div class="line"><a name="l03813"></a><span class="lineno"> 3813</span>&#160;      {</div>
<div class="line"><a name="l03814"></a><span class="lineno"> 3814</span>&#160;        <a class="code" href="../../d4/de2/wren__compiler_8c.html#aed515d74eb0faafbaa8d63f05daf90b9">consume</a>(&amp;compiler, <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921aa130df27256cd45f5781fc74deeb50dc">TOKEN_EOF</a>, <span class="stringliteral">&quot;Expect end of file.&quot;</span>);</div>
<div class="line"><a name="l03815"></a><span class="lineno"> 3815</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03816"></a><span class="lineno"> 3816</span>&#160;      }</div>
<div class="line"><a name="l03817"></a><span class="lineno"> 3817</span>&#160;    }</div>
<div class="line"><a name="l03818"></a><span class="lineno"> 3818</span>&#160;    </div>
<div class="line"><a name="l03819"></a><span class="lineno"> 3819</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#a9cfaefaddfdf6eff5163d9638d141200">emitOp</a>(&amp;compiler, CODE_END_MODULE);</div>
<div class="line"><a name="l03820"></a><span class="lineno"> 3820</span>&#160;  }</div>
<div class="line"><a name="l03821"></a><span class="lineno"> 3821</span>&#160;  </div>
<div class="line"><a name="l03822"></a><span class="lineno"> 3822</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a9cfaefaddfdf6eff5163d9638d141200">emitOp</a>(&amp;compiler, CODE_RETURN);</div>
<div class="line"><a name="l03823"></a><span class="lineno"> 3823</span>&#160; </div>
<div class="line"><a name="l03824"></a><span class="lineno"> 3824</span>&#160;  <span class="comment">// See if there are any implicitly declared module-level variables that never</span></div>
<div class="line"><a name="l03825"></a><span class="lineno"> 3825</span>&#160;  <span class="comment">// got an explicit definition. They will have values that are numbers</span></div>
<div class="line"><a name="l03826"></a><span class="lineno"> 3826</span>&#160;  <span class="comment">// indicating the line where the variable was first used.</span></div>
<div class="line"><a name="l03827"></a><span class="lineno"> 3827</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = numExistingVariables; i &lt; parser.module-&gt;variables.count; i++)</div>
<div class="line"><a name="l03828"></a><span class="lineno"> 3828</span>&#160;  {</div>
<div class="line"><a name="l03829"></a><span class="lineno"> 3829</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d2/d0a/wren__value_8h.html#a513670ecdc3cb3fce1d696b5892aa691">IS_NUM</a>(parser.module-&gt;variables.data[i]))</div>
<div class="line"><a name="l03830"></a><span class="lineno"> 3830</span>&#160;    {</div>
<div class="line"><a name="l03831"></a><span class="lineno"> 3831</span>&#160;      <span class="comment">// Synthesize a token for the original use site.</span></div>
<div class="line"><a name="l03832"></a><span class="lineno"> 3832</span>&#160;      parser.previous.type = <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a56d9afac7a1508302f85a77d1f3ba8b2">TOKEN_NAME</a>;</div>
<div class="line"><a name="l03833"></a><span class="lineno"> 3833</span>&#160;      parser.previous.start = parser.module-&gt;variableNames.data[i]-&gt;value;</div>
<div class="line"><a name="l03834"></a><span class="lineno"> 3834</span>&#160;      parser.previous.length = parser.module-&gt;variableNames.data[i]-&gt;length;</div>
<div class="line"><a name="l03835"></a><span class="lineno"> 3835</span>&#160;      parser.previous.line = (int)<a class="code" href="../../d2/d0a/wren__value_8h.html#a254dfa03c8d1065fcef554fc8763e65f">AS_NUM</a>(parser.module-&gt;variables.data[i]);</div>
<div class="line"><a name="l03836"></a><span class="lineno"> 3836</span>&#160;      <a class="code" href="../../d4/de2/wren__compiler_8c.html#ae74f1b74c02154518d7162a728d6118a">error</a>(&amp;compiler, <span class="stringliteral">&quot;Variable is used but not defined.&quot;</span>);</div>
<div class="line"><a name="l03837"></a><span class="lineno"> 3837</span>&#160;    }</div>
<div class="line"><a name="l03838"></a><span class="lineno"> 3838</span>&#160;  }</div>
<div class="line"><a name="l03839"></a><span class="lineno"> 3839</span>&#160;  </div>
<div class="line"><a name="l03840"></a><span class="lineno"> 3840</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a3d81a8f8607a9b8236f1e6e49410581a">endCompiler</a>(&amp;compiler, <span class="stringliteral">&quot;(script)&quot;</span>, 8);</div>
<div class="line"><a name="l03841"></a><span class="lineno"> 3841</span>&#160;}</div>
<div class="line"><a name="l03842"></a><span class="lineno"> 3842</span>&#160; </div>
<div class="line"><a name="l03843"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#af83f50d55db1a996342186451b31d699"> 3843</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#af83f50d55db1a996342186451b31d699">wrenBindMethodCode</a>(<a class="code" href="../../d7/d64/structs_obj_class.html">ObjClass</a>* classObj, <a class="code" href="../../df/d87/struct_obj_fn.html">ObjFn</a>* <a class="code" href="../../d0/de9/receiver-less_01calls_012_8txt.html#a5d69482e1e5c9b54df78b8f9595d7952">fn</a>)</div>
<div class="line"><a name="l03844"></a><span class="lineno"> 3844</span>&#160;{</div>
<div class="line"><a name="l03845"></a><span class="lineno"> 3845</span>&#160;  <span class="keywordtype">int</span> ip = 0;</div>
<div class="line"><a name="l03846"></a><span class="lineno"> 3846</span>&#160;  <span class="keywordflow">for</span> (;;)</div>
<div class="line"><a name="l03847"></a><span class="lineno"> 3847</span>&#160;  {</div>
<div class="line"><a name="l03848"></a><span class="lineno"> 3848</span>&#160;    <a class="code" href="../../d5/db1/wren__vm_8h.html#af31477bc48f67856bedb0fa8e5b5281d">Code</a> instruction = (<a class="code" href="../../d5/db1/wren__vm_8h.html#af31477bc48f67856bedb0fa8e5b5281d">Code</a>)<a class="code" href="../../d0/de9/receiver-less_01calls_012_8txt.html#a5d69482e1e5c9b54df78b8f9595d7952">fn</a>-&gt;code.data[ip];</div>
<div class="line"><a name="l03849"></a><span class="lineno"> 3849</span>&#160;    switch (instruction)</div>
<div class="line"><a name="l03850"></a><span class="lineno"> 3850</span>&#160;    {</div>
<div class="line"><a name="l03851"></a><span class="lineno"> 3851</span>&#160;      <span class="keywordflow">case</span> CODE_LOAD_FIELD:</div>
<div class="line"><a name="l03852"></a><span class="lineno"> 3852</span>&#160;      <span class="keywordflow">case</span> CODE_STORE_FIELD:</div>
<div class="line"><a name="l03853"></a><span class="lineno"> 3853</span>&#160;      <span class="keywordflow">case</span> CODE_LOAD_FIELD_THIS:</div>
<div class="line"><a name="l03854"></a><span class="lineno"> 3854</span>&#160;      <span class="keywordflow">case</span> CODE_STORE_FIELD_THIS:</div>
<div class="line"><a name="l03855"></a><span class="lineno"> 3855</span>&#160;        <span class="comment">// Shift this class&#39;s fields down past the inherited ones. We don&#39;t</span></div>
<div class="line"><a name="l03856"></a><span class="lineno"> 3856</span>&#160;        <span class="comment">// check for overflow here because we&#39;ll see if the number of fields</span></div>
<div class="line"><a name="l03857"></a><span class="lineno"> 3857</span>&#160;        <span class="comment">// overflows when the subclass is created.</span></div>
<div class="line"><a name="l03858"></a><span class="lineno"> 3858</span>&#160;        <a class="code" href="../../d0/de9/receiver-less_01calls_012_8txt.html#a5d69482e1e5c9b54df78b8f9595d7952">fn</a>-&gt;code.data[ip + 1] += classObj-&gt;<a class="code" href="../../d7/d64/structs_obj_class.html#aaf47565ed24938493d4d74d17df44f31">superclass</a>-&gt;<a class="code" href="../../d7/d64/structs_obj_class.html#a402a4244ac7fb9e015a7c170b801bcd9">numFields</a>;</div>
<div class="line"><a name="l03859"></a><span class="lineno"> 3859</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03860"></a><span class="lineno"> 3860</span>&#160; </div>
<div class="line"><a name="l03861"></a><span class="lineno"> 3861</span>&#160;      <span class="keywordflow">case</span> CODE_SUPER_0:</div>
<div class="line"><a name="l03862"></a><span class="lineno"> 3862</span>&#160;      <span class="keywordflow">case</span> CODE_SUPER_1:</div>
<div class="line"><a name="l03863"></a><span class="lineno"> 3863</span>&#160;      <span class="keywordflow">case</span> CODE_SUPER_2:</div>
<div class="line"><a name="l03864"></a><span class="lineno"> 3864</span>&#160;      <span class="keywordflow">case</span> CODE_SUPER_3:</div>
<div class="line"><a name="l03865"></a><span class="lineno"> 3865</span>&#160;      <span class="keywordflow">case</span> CODE_SUPER_4:</div>
<div class="line"><a name="l03866"></a><span class="lineno"> 3866</span>&#160;      <span class="keywordflow">case</span> CODE_SUPER_5:</div>
<div class="line"><a name="l03867"></a><span class="lineno"> 3867</span>&#160;      <span class="keywordflow">case</span> CODE_SUPER_6:</div>
<div class="line"><a name="l03868"></a><span class="lineno"> 3868</span>&#160;      <span class="keywordflow">case</span> CODE_SUPER_7:</div>
<div class="line"><a name="l03869"></a><span class="lineno"> 3869</span>&#160;      <span class="keywordflow">case</span> CODE_SUPER_8:</div>
<div class="line"><a name="l03870"></a><span class="lineno"> 3870</span>&#160;      <span class="keywordflow">case</span> CODE_SUPER_9:</div>
<div class="line"><a name="l03871"></a><span class="lineno"> 3871</span>&#160;      <span class="keywordflow">case</span> CODE_SUPER_10:</div>
<div class="line"><a name="l03872"></a><span class="lineno"> 3872</span>&#160;      <span class="keywordflow">case</span> CODE_SUPER_11:</div>
<div class="line"><a name="l03873"></a><span class="lineno"> 3873</span>&#160;      <span class="keywordflow">case</span> CODE_SUPER_12:</div>
<div class="line"><a name="l03874"></a><span class="lineno"> 3874</span>&#160;      <span class="keywordflow">case</span> CODE_SUPER_13:</div>
<div class="line"><a name="l03875"></a><span class="lineno"> 3875</span>&#160;      <span class="keywordflow">case</span> CODE_SUPER_14:</div>
<div class="line"><a name="l03876"></a><span class="lineno"> 3876</span>&#160;      <span class="keywordflow">case</span> CODE_SUPER_15:</div>
<div class="line"><a name="l03877"></a><span class="lineno"> 3877</span>&#160;      <span class="keywordflow">case</span> CODE_SUPER_16:</div>
<div class="line"><a name="l03878"></a><span class="lineno"> 3878</span>&#160;      {</div>
<div class="line"><a name="l03879"></a><span class="lineno"> 3879</span>&#160;        <span class="comment">// Fill in the constant slot with a reference to the superclass.</span></div>
<div class="line"><a name="l03880"></a><span class="lineno"> 3880</span>&#160;        <span class="keywordtype">int</span> constant = (<a class="code" href="../../d0/de9/receiver-less_01calls_012_8txt.html#a5d69482e1e5c9b54df78b8f9595d7952">fn</a>-&gt;code.data[ip + 3] &lt;&lt; 8) | <a class="code" href="../../d0/de9/receiver-less_01calls_012_8txt.html#a5d69482e1e5c9b54df78b8f9595d7952">fn</a>-&gt;code.data[ip + 4];</div>
<div class="line"><a name="l03881"></a><span class="lineno"> 3881</span>&#160;        <a class="code" href="../../d0/de9/receiver-less_01calls_012_8txt.html#a5d69482e1e5c9b54df78b8f9595d7952">fn</a>-&gt;constants.data[constant] = <a class="code" href="../../d2/d0a/wren__value_8h.html#ae686330cf8b06442b1da208af1b867fc">OBJ_VAL</a>(classObj-&gt;<a class="code" href="../../d7/d64/structs_obj_class.html#aaf47565ed24938493d4d74d17df44f31">superclass</a>);</div>
<div class="line"><a name="l03882"></a><span class="lineno"> 3882</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03883"></a><span class="lineno"> 3883</span>&#160;      }</div>
<div class="line"><a name="l03884"></a><span class="lineno"> 3884</span>&#160; </div>
<div class="line"><a name="l03885"></a><span class="lineno"> 3885</span>&#160;      <span class="keywordflow">case</span> CODE_CLOSURE:</div>
<div class="line"><a name="l03886"></a><span class="lineno"> 3886</span>&#160;      {</div>
<div class="line"><a name="l03887"></a><span class="lineno"> 3887</span>&#160;        <span class="comment">// Bind the nested closure too.</span></div>
<div class="line"><a name="l03888"></a><span class="lineno"> 3888</span>&#160;        <span class="keywordtype">int</span> constant = (<a class="code" href="../../d0/de9/receiver-less_01calls_012_8txt.html#a5d69482e1e5c9b54df78b8f9595d7952">fn</a>-&gt;code.data[ip + 1] &lt;&lt; 8) | <a class="code" href="../../d0/de9/receiver-less_01calls_012_8txt.html#a5d69482e1e5c9b54df78b8f9595d7952">fn</a>-&gt;code.data[ip + 2];</div>
<div class="line"><a name="l03889"></a><span class="lineno"> 3889</span>&#160;        <a class="code" href="../../d4/de2/wren__compiler_8c.html#af83f50d55db1a996342186451b31d699">wrenBindMethodCode</a>(classObj, <a class="code" href="../../d2/d0a/wren__value_8h.html#a49e112f611425c34766bdefa343fe2b9">AS_FN</a>(<a class="code" href="../../d0/de9/receiver-less_01calls_012_8txt.html#a5d69482e1e5c9b54df78b8f9595d7952">fn</a>-&gt;constants.data[constant]));</div>
<div class="line"><a name="l03890"></a><span class="lineno"> 3890</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03891"></a><span class="lineno"> 3891</span>&#160;      }</div>
<div class="line"><a name="l03892"></a><span class="lineno"> 3892</span>&#160; </div>
<div class="line"><a name="l03893"></a><span class="lineno"> 3893</span>&#160;      <span class="keywordflow">case</span> CODE_END:</div>
<div class="line"><a name="l03894"></a><span class="lineno"> 3894</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03895"></a><span class="lineno"> 3895</span>&#160; </div>
<div class="line"><a name="l03896"></a><span class="lineno"> 3896</span>&#160;      <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l03897"></a><span class="lineno"> 3897</span>&#160;        <span class="comment">// Other instructions are unaffected, so just skip over them.</span></div>
<div class="line"><a name="l03898"></a><span class="lineno"> 3898</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03899"></a><span class="lineno"> 3899</span>&#160;    }</div>
<div class="line"><a name="l03900"></a><span class="lineno"> 3900</span>&#160;    ip += 1 + <a class="code" href="../../d4/de2/wren__compiler_8c.html#afd57b3f70dd82ffc95f0442863f34ad6">getByteCountForArguments</a>(<a class="code" href="../../d0/de9/receiver-less_01calls_012_8txt.html#a5d69482e1e5c9b54df78b8f9595d7952">fn</a>-&gt;code.data, <a class="code" href="../../d0/de9/receiver-less_01calls_012_8txt.html#a5d69482e1e5c9b54df78b8f9595d7952">fn</a>-&gt;constants.data, ip);</div>
<div class="line"><a name="l03901"></a><span class="lineno"> 3901</span>&#160;  }</div>
<div class="line"><a name="l03902"></a><span class="lineno"> 3902</span>&#160;}</div>
<div class="line"><a name="l03903"></a><span class="lineno"> 3903</span>&#160; </div>
<div class="line"><a name="l03904"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#ae9fe190a3aeb1626737b30b2c4f90f0a"> 3904</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#ae9fe190a3aeb1626737b30b2c4f90f0a">wrenMarkCompiler</a>(<a class="code" href="../../d7/ddb/struct_wren_v_m.html">WrenVM</a>* vm, <a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler)</div>
<div class="line"><a name="l03905"></a><span class="lineno"> 3905</span>&#160;{</div>
<div class="line"><a name="l03906"></a><span class="lineno"> 3906</span>&#160;  <a class="code" href="../../da/dbe/wren__value_8c.html#a9ee197ffca886cf280c83092383cc361">wrenGrayValue</a>(vm, compiler-&gt;parser-&gt;current.value);</div>
<div class="line"><a name="l03907"></a><span class="lineno"> 3907</span>&#160;  <a class="code" href="../../da/dbe/wren__value_8c.html#a9ee197ffca886cf280c83092383cc361">wrenGrayValue</a>(vm, compiler-&gt;parser-&gt;previous.value);</div>
<div class="line"><a name="l03908"></a><span class="lineno"> 3908</span>&#160;  <a class="code" href="../../da/dbe/wren__value_8c.html#a9ee197ffca886cf280c83092383cc361">wrenGrayValue</a>(vm, compiler-&gt;parser-&gt;next.value);</div>
<div class="line"><a name="l03909"></a><span class="lineno"> 3909</span>&#160; </div>
<div class="line"><a name="l03910"></a><span class="lineno"> 3910</span>&#160;  <span class="comment">// Walk up the parent chain to mark the outer compilers too. The VM only</span></div>
<div class="line"><a name="l03911"></a><span class="lineno"> 3911</span>&#160;  <span class="comment">// tracks the innermost one.</span></div>
<div class="line"><a name="l03912"></a><span class="lineno"> 3912</span>&#160;  <span class="keywordflow">do</span></div>
<div class="line"><a name="l03913"></a><span class="lineno"> 3913</span>&#160;  {</div>
<div class="line"><a name="l03914"></a><span class="lineno"> 3914</span>&#160;    <a class="code" href="../../da/dbe/wren__value_8c.html#a7b9e6e22f2376aaa1ecaef9e741646fa">wrenGrayObj</a>(vm, (<a class="code" href="../../d6/d93/structs_obj.html">Obj</a>*)compiler-&gt;fn);</div>
<div class="line"><a name="l03915"></a><span class="lineno"> 3915</span>&#160;    <a class="code" href="../../da/dbe/wren__value_8c.html#a7b9e6e22f2376aaa1ecaef9e741646fa">wrenGrayObj</a>(vm, (<a class="code" href="../../d6/d93/structs_obj.html">Obj</a>*)compiler-&gt;constants);</div>
<div class="line"><a name="l03916"></a><span class="lineno"> 3916</span>&#160;    <a class="code" href="../../da/dbe/wren__value_8c.html#a7b9e6e22f2376aaa1ecaef9e741646fa">wrenGrayObj</a>(vm, (<a class="code" href="../../d6/d93/structs_obj.html">Obj</a>*)compiler-&gt;attributes);</div>
<div class="line"><a name="l03917"></a><span class="lineno"> 3917</span>&#160;    </div>
<div class="line"><a name="l03918"></a><span class="lineno"> 3918</span>&#160;    <span class="keywordflow">if</span> (compiler-&gt;enclosingClass != <a class="code" href="../../da/d2d/_stdio_stream_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l03919"></a><span class="lineno"> 3919</span>&#160;    {</div>
<div class="line"><a name="l03920"></a><span class="lineno"> 3920</span>&#160;      <a class="code" href="../../de/d0d/wren__utils_8c.html#ae1d6dc2bc8c7ced1c6a1dcf9afc16110">wrenBlackenSymbolTable</a>(vm, &amp;compiler-&gt;enclosingClass-&gt;fields);</div>
<div class="line"><a name="l03921"></a><span class="lineno"> 3921</span>&#160; </div>
<div class="line"><a name="l03922"></a><span class="lineno"> 3922</span>&#160;      <span class="keywordflow">if</span>(compiler-&gt;enclosingClass-&gt;methodAttributes != <a class="code" href="../../da/d2d/_stdio_stream_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) </div>
<div class="line"><a name="l03923"></a><span class="lineno"> 3923</span>&#160;      {</div>
<div class="line"><a name="l03924"></a><span class="lineno"> 3924</span>&#160;        <a class="code" href="../../da/dbe/wren__value_8c.html#a7b9e6e22f2376aaa1ecaef9e741646fa">wrenGrayObj</a>(vm, (<a class="code" href="../../d6/d93/structs_obj.html">Obj</a>*)compiler-&gt;enclosingClass-&gt;methodAttributes);</div>
<div class="line"><a name="l03925"></a><span class="lineno"> 3925</span>&#160;      }</div>
<div class="line"><a name="l03926"></a><span class="lineno"> 3926</span>&#160;      <span class="keywordflow">if</span>(compiler-&gt;enclosingClass-&gt;classAttributes != <a class="code" href="../../da/d2d/_stdio_stream_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) </div>
<div class="line"><a name="l03927"></a><span class="lineno"> 3927</span>&#160;      {</div>
<div class="line"><a name="l03928"></a><span class="lineno"> 3928</span>&#160;        <a class="code" href="../../da/dbe/wren__value_8c.html#a7b9e6e22f2376aaa1ecaef9e741646fa">wrenGrayObj</a>(vm, (<a class="code" href="../../d6/d93/structs_obj.html">Obj</a>*)compiler-&gt;enclosingClass-&gt;classAttributes);</div>
<div class="line"><a name="l03929"></a><span class="lineno"> 3929</span>&#160;      }</div>
<div class="line"><a name="l03930"></a><span class="lineno"> 3930</span>&#160;    }</div>
<div class="line"><a name="l03931"></a><span class="lineno"> 3931</span>&#160;    </div>
<div class="line"><a name="l03932"></a><span class="lineno"> 3932</span>&#160;    compiler = compiler-&gt;parent;</div>
<div class="line"><a name="l03933"></a><span class="lineno"> 3933</span>&#160;  }</div>
<div class="line"><a name="l03934"></a><span class="lineno"> 3934</span>&#160;  <span class="keywordflow">while</span> (compiler != <a class="code" href="../../da/d2d/_stdio_stream_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l03935"></a><span class="lineno"> 3935</span>&#160;}</div>
<div class="line"><a name="l03936"></a><span class="lineno"> 3936</span>&#160; </div>
<div class="line"><a name="l03937"></a><span class="lineno"> 3937</span>&#160;<span class="comment">// Helpers for Attributes</span></div>
<div class="line"><a name="l03938"></a><span class="lineno"> 3938</span>&#160; </div>
<div class="line"><a name="l03939"></a><span class="lineno"> 3939</span>&#160;<span class="comment">// Throw an error if any attributes were found preceding, </span></div>
<div class="line"><a name="l03940"></a><span class="lineno"> 3940</span>&#160;<span class="comment">// and clear the attributes so the error doesn&#39;t keep happening.</span></div>
<div class="line"><a name="l03941"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#a576b164c108737d8d82019ec54a0d533"> 3941</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a576b164c108737d8d82019ec54a0d533">disallowAttributes</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler)</div>
<div class="line"><a name="l03942"></a><span class="lineno"> 3942</span>&#160;{</div>
<div class="line"><a name="l03943"></a><span class="lineno"> 3943</span>&#160;  <span class="keywordflow">if</span> (compiler-&gt;numAttributes &gt; 0)</div>
<div class="line"><a name="l03944"></a><span class="lineno"> 3944</span>&#160;  {</div>
<div class="line"><a name="l03945"></a><span class="lineno"> 3945</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#ae74f1b74c02154518d7162a728d6118a">error</a>(compiler, <span class="stringliteral">&quot;Attributes can only specified before a class or a method&quot;</span>);</div>
<div class="line"><a name="l03946"></a><span class="lineno"> 3946</span>&#160;    <a class="code" href="../../da/dbe/wren__value_8c.html#aa76904b8bcf2ed294521657095603a3c">wrenMapClear</a>(compiler-&gt;parser-&gt;vm, compiler-&gt;attributes);</div>
<div class="line"><a name="l03947"></a><span class="lineno"> 3947</span>&#160;    compiler-&gt;numAttributes = 0;</div>
<div class="line"><a name="l03948"></a><span class="lineno"> 3948</span>&#160;  }</div>
<div class="line"><a name="l03949"></a><span class="lineno"> 3949</span>&#160;}</div>
<div class="line"><a name="l03950"></a><span class="lineno"> 3950</span>&#160; </div>
<div class="line"><a name="l03951"></a><span class="lineno"> 3951</span>&#160;<span class="comment">// Add an attribute to a given group in the compiler attribues map</span></div>
<div class="line"><a name="l03952"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#ad7cf94c2202263aa2f1c991b8ed0c933"> 3952</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#ad7cf94c2202263aa2f1c991b8ed0c933">addToAttributeGroup</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler, </div>
<div class="line"><a name="l03953"></a><span class="lineno"> 3953</span>&#160;                                <a class="code" href="../../d2/d0a/wren__value_8h.html#ad777bf08d8e2b01df17ba5e3c51ae11f">Value</a> group, <a class="code" href="../../d2/d0a/wren__value_8h.html#ad777bf08d8e2b01df17ba5e3c51ae11f">Value</a> key, <a class="code" href="../../d2/d0a/wren__value_8h.html#ad777bf08d8e2b01df17ba5e3c51ae11f">Value</a> value) </div>
<div class="line"><a name="l03954"></a><span class="lineno"> 3954</span>&#160;{</div>
<div class="line"><a name="l03955"></a><span class="lineno"> 3955</span>&#160;  <a class="code" href="../../d7/ddb/struct_wren_v_m.html">WrenVM</a>* vm = compiler-&gt;parser-&gt;vm;</div>
<div class="line"><a name="l03956"></a><span class="lineno"> 3956</span>&#160; </div>
<div class="line"><a name="l03957"></a><span class="lineno"> 3957</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="../../d2/d0a/wren__value_8h.html#a4da06c994a3591d379aca99d26b7e7f5">IS_OBJ</a>(group)) <a class="code" href="../../de/db2/wren__vm_8c.html#ab604556ed8a6be6d88e7b4ddf4efd2e8">wrenPushRoot</a>(vm, <a class="code" href="../../d2/d0a/wren__value_8h.html#ae834650cc20489e3a20ebfca0d2a61bf">AS_OBJ</a>(group));</div>
<div class="line"><a name="l03958"></a><span class="lineno"> 3958</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="../../d2/d0a/wren__value_8h.html#a4da06c994a3591d379aca99d26b7e7f5">IS_OBJ</a>(key))   <a class="code" href="../../de/db2/wren__vm_8c.html#ab604556ed8a6be6d88e7b4ddf4efd2e8">wrenPushRoot</a>(vm, <a class="code" href="../../d2/d0a/wren__value_8h.html#ae834650cc20489e3a20ebfca0d2a61bf">AS_OBJ</a>(key));</div>
<div class="line"><a name="l03959"></a><span class="lineno"> 3959</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="../../d2/d0a/wren__value_8h.html#a4da06c994a3591d379aca99d26b7e7f5">IS_OBJ</a>(value)) <a class="code" href="../../de/db2/wren__vm_8c.html#ab604556ed8a6be6d88e7b4ddf4efd2e8">wrenPushRoot</a>(vm, <a class="code" href="../../d2/d0a/wren__value_8h.html#ae834650cc20489e3a20ebfca0d2a61bf">AS_OBJ</a>(value));</div>
<div class="line"><a name="l03960"></a><span class="lineno"> 3960</span>&#160; </div>
<div class="line"><a name="l03961"></a><span class="lineno"> 3961</span>&#160;  <a class="code" href="../../d2/d0a/wren__value_8h.html#ad777bf08d8e2b01df17ba5e3c51ae11f">Value</a> groupMapValue = <a class="code" href="../../da/dbe/wren__value_8c.html#a63b1d03d675e5e424c68640c88420ccf">wrenMapGet</a>(compiler-&gt;attributes, group);</div>
<div class="line"><a name="l03962"></a><span class="lineno"> 3962</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="../../d2/d0a/wren__value_8h.html#ade82ad35993f1f890644f8679f02f4b5">IS_UNDEFINED</a>(groupMapValue)) </div>
<div class="line"><a name="l03963"></a><span class="lineno"> 3963</span>&#160;  {</div>
<div class="line"><a name="l03964"></a><span class="lineno"> 3964</span>&#160;    groupMapValue = <a class="code" href="../../d2/d0a/wren__value_8h.html#ae686330cf8b06442b1da208af1b867fc">OBJ_VAL</a>(<a class="code" href="../../da/dbe/wren__value_8c.html#a12dd4cef62629e819f9eecb3e002a3da">wrenNewMap</a>(vm));</div>
<div class="line"><a name="l03965"></a><span class="lineno"> 3965</span>&#160;    <a class="code" href="../../da/dbe/wren__value_8c.html#a10e46c257fbf0a57bb2acef361bff562">wrenMapSet</a>(vm, compiler-&gt;attributes, group, groupMapValue);</div>
<div class="line"><a name="l03966"></a><span class="lineno"> 3966</span>&#160;  }</div>
<div class="line"><a name="l03967"></a><span class="lineno"> 3967</span>&#160; </div>
<div class="line"><a name="l03968"></a><span class="lineno"> 3968</span>&#160;  <span class="comment">//we store them as a map per so we can maintain duplicate keys </span></div>
<div class="line"><a name="l03969"></a><span class="lineno"> 3969</span>&#160;  <span class="comment">//group = { key:[value, ...], }</span></div>
<div class="line"><a name="l03970"></a><span class="lineno"> 3970</span>&#160;  <a class="code" href="../../d4/db1/struct_obj_map.html">ObjMap</a>* groupMap = <a class="code" href="../../d2/d0a/wren__value_8h.html#a55ed1aa901b5e571d47fec3286988c24">AS_MAP</a>(groupMapValue);</div>
<div class="line"><a name="l03971"></a><span class="lineno"> 3971</span>&#160; </div>
<div class="line"><a name="l03972"></a><span class="lineno"> 3972</span>&#160;  <span class="comment">//var keyItems = group[key]</span></div>
<div class="line"><a name="l03973"></a><span class="lineno"> 3973</span>&#160;  <span class="comment">//if(!keyItems) keyItems = group[key] = [] </span></div>
<div class="line"><a name="l03974"></a><span class="lineno"> 3974</span>&#160;  <a class="code" href="../../d2/d0a/wren__value_8h.html#ad777bf08d8e2b01df17ba5e3c51ae11f">Value</a> keyItemsValue = <a class="code" href="../../da/dbe/wren__value_8c.html#a63b1d03d675e5e424c68640c88420ccf">wrenMapGet</a>(groupMap, key);</div>
<div class="line"><a name="l03975"></a><span class="lineno"> 3975</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="../../d2/d0a/wren__value_8h.html#ade82ad35993f1f890644f8679f02f4b5">IS_UNDEFINED</a>(keyItemsValue)) </div>
<div class="line"><a name="l03976"></a><span class="lineno"> 3976</span>&#160;  {</div>
<div class="line"><a name="l03977"></a><span class="lineno"> 3977</span>&#160;    keyItemsValue = <a class="code" href="../../d2/d0a/wren__value_8h.html#ae686330cf8b06442b1da208af1b867fc">OBJ_VAL</a>(<a class="code" href="../../da/dbe/wren__value_8c.html#a53ba00979c5c328eeec49eb148799bb8">wrenNewList</a>(vm, 0));</div>
<div class="line"><a name="l03978"></a><span class="lineno"> 3978</span>&#160;    <a class="code" href="../../da/dbe/wren__value_8c.html#a10e46c257fbf0a57bb2acef361bff562">wrenMapSet</a>(vm, groupMap, key, keyItemsValue);</div>
<div class="line"><a name="l03979"></a><span class="lineno"> 3979</span>&#160;  }</div>
<div class="line"><a name="l03980"></a><span class="lineno"> 3980</span>&#160; </div>
<div class="line"><a name="l03981"></a><span class="lineno"> 3981</span>&#160;  <span class="comment">//keyItems.add(value)</span></div>
<div class="line"><a name="l03982"></a><span class="lineno"> 3982</span>&#160;  <a class="code" href="../../db/d98/struct_obj_list.html">ObjList</a>* keyItems = <a class="code" href="../../d2/d0a/wren__value_8h.html#a72634165ca1355eaa89a4c87db37f6b5">AS_LIST</a>(keyItemsValue);</div>
<div class="line"><a name="l03983"></a><span class="lineno"> 3983</span>&#160;  wrenValueBufferWrite(vm, &amp;keyItems-&gt;<a class="code" href="../../db/d98/struct_obj_list.html#a997093ce1b73e29f119278bbb1ee0fd3">elements</a>, value);</div>
<div class="line"><a name="l03984"></a><span class="lineno"> 3984</span>&#160; </div>
<div class="line"><a name="l03985"></a><span class="lineno"> 3985</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="../../d2/d0a/wren__value_8h.html#a4da06c994a3591d379aca99d26b7e7f5">IS_OBJ</a>(group)) <a class="code" href="../../de/db2/wren__vm_8c.html#a70c4570a3862c0981f165f4c08b94f3a">wrenPopRoot</a>(vm);</div>
<div class="line"><a name="l03986"></a><span class="lineno"> 3986</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="../../d2/d0a/wren__value_8h.html#a4da06c994a3591d379aca99d26b7e7f5">IS_OBJ</a>(key))   <a class="code" href="../../de/db2/wren__vm_8c.html#a70c4570a3862c0981f165f4c08b94f3a">wrenPopRoot</a>(vm);</div>
<div class="line"><a name="l03987"></a><span class="lineno"> 3987</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="../../d2/d0a/wren__value_8h.html#a4da06c994a3591d379aca99d26b7e7f5">IS_OBJ</a>(value)) <a class="code" href="../../de/db2/wren__vm_8c.html#a70c4570a3862c0981f165f4c08b94f3a">wrenPopRoot</a>(vm);</div>
<div class="line"><a name="l03988"></a><span class="lineno"> 3988</span>&#160;}</div>
<div class="line"><a name="l03989"></a><span class="lineno"> 3989</span>&#160; </div>
<div class="line"><a name="l03990"></a><span class="lineno"> 3990</span>&#160; </div>
<div class="line"><a name="l03991"></a><span class="lineno"> 3991</span>&#160;<span class="comment">// Emit the attributes in the give map onto the stack</span></div>
<div class="line"><a name="l03992"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#a4716244e490967ab0e98a209de45844e"> 3992</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a4716244e490967ab0e98a209de45844e">emitAttributes</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler, <a class="code" href="../../d4/db1/struct_obj_map.html">ObjMap</a>* attributes) </div>
<div class="line"><a name="l03993"></a><span class="lineno"> 3993</span>&#160;{</div>
<div class="line"><a name="l03994"></a><span class="lineno"> 3994</span>&#160;  <span class="comment">// Instantiate a new map for the attributes</span></div>
<div class="line"><a name="l03995"></a><span class="lineno"> 3995</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa30b2bee45b3b4a728ebac4fb0e5a82b">loadCoreVariable</a>(compiler, <span class="stringliteral">&quot;Map&quot;</span>);</div>
<div class="line"><a name="l03996"></a><span class="lineno"> 3996</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a659fca4caa4720785ab7fbddcb247fb7">callMethod</a>(compiler, 0, <span class="stringliteral">&quot;new()&quot;</span>, 5);</div>
<div class="line"><a name="l03997"></a><span class="lineno"> 3997</span>&#160; </div>
<div class="line"><a name="l03998"></a><span class="lineno"> 3998</span>&#160;  <span class="comment">// The attributes are stored as group = { key:[value, value, ...] }</span></div>
<div class="line"><a name="l03999"></a><span class="lineno"> 3999</span>&#160;  <span class="comment">// so our first level is the group map</span></div>
<div class="line"><a name="l04000"></a><span class="lineno"> 4000</span>&#160;  <span class="keywordflow">for</span>(uint32_t groupIdx = 0; groupIdx &lt; attributes-&gt;<a class="code" href="../../d4/db1/struct_obj_map.html#ae1f6f81559f425ce8e63dd05618561fb">capacity</a>; groupIdx++)</div>
<div class="line"><a name="l04001"></a><span class="lineno"> 4001</span>&#160;  {</div>
<div class="line"><a name="l04002"></a><span class="lineno"> 4002</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../d2/d99/struct_map_entry.html">MapEntry</a>* groupEntry = &amp;attributes-&gt;<a class="code" href="../../d4/db1/struct_obj_map.html#a64f2c89320a81194c709e8a2303c1c97">entries</a>[groupIdx];</div>
<div class="line"><a name="l04003"></a><span class="lineno"> 4003</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="../../d2/d0a/wren__value_8h.html#ade82ad35993f1f890644f8679f02f4b5">IS_UNDEFINED</a>(groupEntry-&gt;<a class="code" href="../../d2/d99/struct_map_entry.html#a069740bcf26cb28ae6b7ffcf8e597018">key</a>)) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l04004"></a><span class="lineno"> 4004</span>&#160;    <span class="comment">//group key</span></div>
<div class="line"><a name="l04005"></a><span class="lineno"> 4005</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#a6b4cd3d0c1a4cf34e42541f058f2e55b">emitConstant</a>(compiler, groupEntry-&gt;<a class="code" href="../../d2/d99/struct_map_entry.html#a069740bcf26cb28ae6b7ffcf8e597018">key</a>);</div>
<div class="line"><a name="l04006"></a><span class="lineno"> 4006</span>&#160; </div>
<div class="line"><a name="l04007"></a><span class="lineno"> 4007</span>&#160;    <span class="comment">//group value is gonna be a map</span></div>
<div class="line"><a name="l04008"></a><span class="lineno"> 4008</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa30b2bee45b3b4a728ebac4fb0e5a82b">loadCoreVariable</a>(compiler, <span class="stringliteral">&quot;Map&quot;</span>);</div>
<div class="line"><a name="l04009"></a><span class="lineno"> 4009</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#a659fca4caa4720785ab7fbddcb247fb7">callMethod</a>(compiler, 0, <span class="stringliteral">&quot;new()&quot;</span>, 5);</div>
<div class="line"><a name="l04010"></a><span class="lineno"> 4010</span>&#160; </div>
<div class="line"><a name="l04011"></a><span class="lineno"> 4011</span>&#160;    <a class="code" href="../../d4/db1/struct_obj_map.html">ObjMap</a>* groupItems = <a class="code" href="../../d2/d0a/wren__value_8h.html#a55ed1aa901b5e571d47fec3286988c24">AS_MAP</a>(groupEntry-&gt;<a class="code" href="../../d2/d99/struct_map_entry.html#ab4ac6925a8accf38133fdbe66ff9944d">value</a>);</div>
<div class="line"><a name="l04012"></a><span class="lineno"> 4012</span>&#160;    <span class="keywordflow">for</span>(uint32_t itemIdx = 0; itemIdx &lt; groupItems-&gt;<a class="code" href="../../d4/db1/struct_obj_map.html#ae1f6f81559f425ce8e63dd05618561fb">capacity</a>; itemIdx++)</div>
<div class="line"><a name="l04013"></a><span class="lineno"> 4013</span>&#160;    {</div>
<div class="line"><a name="l04014"></a><span class="lineno"> 4014</span>&#160;      <span class="keyword">const</span> <a class="code" href="../../d2/d99/struct_map_entry.html">MapEntry</a>* itemEntry = &amp;groupItems-&gt;<a class="code" href="../../d4/db1/struct_obj_map.html#a64f2c89320a81194c709e8a2303c1c97">entries</a>[itemIdx];</div>
<div class="line"><a name="l04015"></a><span class="lineno"> 4015</span>&#160;      <span class="keywordflow">if</span>(<a class="code" href="../../d2/d0a/wren__value_8h.html#ade82ad35993f1f890644f8679f02f4b5">IS_UNDEFINED</a>(itemEntry-&gt;<a class="code" href="../../d2/d99/struct_map_entry.html#a069740bcf26cb28ae6b7ffcf8e597018">key</a>)) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l04016"></a><span class="lineno"> 4016</span>&#160; </div>
<div class="line"><a name="l04017"></a><span class="lineno"> 4017</span>&#160;      <a class="code" href="../../d4/de2/wren__compiler_8c.html#a6b4cd3d0c1a4cf34e42541f058f2e55b">emitConstant</a>(compiler, itemEntry-&gt;<a class="code" href="../../d2/d99/struct_map_entry.html#a069740bcf26cb28ae6b7ffcf8e597018">key</a>);</div>
<div class="line"><a name="l04018"></a><span class="lineno"> 4018</span>&#160;      <span class="comment">// Attribute key value, key = []</span></div>
<div class="line"><a name="l04019"></a><span class="lineno"> 4019</span>&#160;      <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa30b2bee45b3b4a728ebac4fb0e5a82b">loadCoreVariable</a>(compiler, <span class="stringliteral">&quot;List&quot;</span>);</div>
<div class="line"><a name="l04020"></a><span class="lineno"> 4020</span>&#160;      <a class="code" href="../../d4/de2/wren__compiler_8c.html#a659fca4caa4720785ab7fbddcb247fb7">callMethod</a>(compiler, 0, <span class="stringliteral">&quot;new()&quot;</span>, 5);</div>
<div class="line"><a name="l04021"></a><span class="lineno"> 4021</span>&#160;      <span class="comment">// Add the items to the key list</span></div>
<div class="line"><a name="l04022"></a><span class="lineno"> 4022</span>&#160;      <a class="code" href="../../db/d98/struct_obj_list.html">ObjList</a>* items = <a class="code" href="../../d2/d0a/wren__value_8h.html#a72634165ca1355eaa89a4c87db37f6b5">AS_LIST</a>(itemEntry-&gt;<a class="code" href="../../d2/d99/struct_map_entry.html#ab4ac6925a8accf38133fdbe66ff9944d">value</a>);</div>
<div class="line"><a name="l04023"></a><span class="lineno"> 4023</span>&#160;      <span class="keywordflow">for</span>(<span class="keywordtype">int</span> itemIdx = 0; itemIdx &lt; items-&gt;<a class="code" href="../../db/d98/struct_obj_list.html#a997093ce1b73e29f119278bbb1ee0fd3">elements</a>.count; ++itemIdx)</div>
<div class="line"><a name="l04024"></a><span class="lineno"> 4024</span>&#160;      {</div>
<div class="line"><a name="l04025"></a><span class="lineno"> 4025</span>&#160;        <a class="code" href="../../d4/de2/wren__compiler_8c.html#a6b4cd3d0c1a4cf34e42541f058f2e55b">emitConstant</a>(compiler, items-&gt;<a class="code" href="../../db/d98/struct_obj_list.html#a997093ce1b73e29f119278bbb1ee0fd3">elements</a>.data[itemIdx]);</div>
<div class="line"><a name="l04026"></a><span class="lineno"> 4026</span>&#160;        <a class="code" href="../../d4/de2/wren__compiler_8c.html#a659fca4caa4720785ab7fbddcb247fb7">callMethod</a>(compiler, 1, <span class="stringliteral">&quot;addCore_(_)&quot;</span>, 11);</div>
<div class="line"><a name="l04027"></a><span class="lineno"> 4027</span>&#160;      }</div>
<div class="line"><a name="l04028"></a><span class="lineno"> 4028</span>&#160;      <span class="comment">// Add the list to the map</span></div>
<div class="line"><a name="l04029"></a><span class="lineno"> 4029</span>&#160;      <a class="code" href="../../d4/de2/wren__compiler_8c.html#a659fca4caa4720785ab7fbddcb247fb7">callMethod</a>(compiler, 2, <span class="stringliteral">&quot;addCore_(_,_)&quot;</span>, 13);</div>
<div class="line"><a name="l04030"></a><span class="lineno"> 4030</span>&#160;    }</div>
<div class="line"><a name="l04031"></a><span class="lineno"> 4031</span>&#160; </div>
<div class="line"><a name="l04032"></a><span class="lineno"> 4032</span>&#160;    <span class="comment">// Add the key/value to the map</span></div>
<div class="line"><a name="l04033"></a><span class="lineno"> 4033</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#a659fca4caa4720785ab7fbddcb247fb7">callMethod</a>(compiler, 2, <span class="stringliteral">&quot;addCore_(_,_)&quot;</span>, 13);</div>
<div class="line"><a name="l04034"></a><span class="lineno"> 4034</span>&#160;  }</div>
<div class="line"><a name="l04035"></a><span class="lineno"> 4035</span>&#160; </div>
<div class="line"><a name="l04036"></a><span class="lineno"> 4036</span>&#160;}</div>
<div class="line"><a name="l04037"></a><span class="lineno"> 4037</span>&#160; </div>
<div class="line"><a name="l04038"></a><span class="lineno"> 4038</span>&#160;<span class="comment">// Methods are stored as method &lt;-&gt; attributes, so we have to have </span></div>
<div class="line"><a name="l04039"></a><span class="lineno"> 4039</span>&#160;<span class="comment">// an indirection to resolve for methods</span></div>
<div class="line"><a name="l04040"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#ac0fd522b34e48c85c192b29593a79fb9"> 4040</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#ac0fd522b34e48c85c192b29593a79fb9">emitAttributeMethods</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler, <a class="code" href="../../d4/db1/struct_obj_map.html">ObjMap</a>* attributes)</div>
<div class="line"><a name="l04041"></a><span class="lineno"> 4041</span>&#160;{</div>
<div class="line"><a name="l04042"></a><span class="lineno"> 4042</span>&#160;    <span class="comment">// Instantiate a new map for the attributes</span></div>
<div class="line"><a name="l04043"></a><span class="lineno"> 4043</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa30b2bee45b3b4a728ebac4fb0e5a82b">loadCoreVariable</a>(compiler, <span class="stringliteral">&quot;Map&quot;</span>);</div>
<div class="line"><a name="l04044"></a><span class="lineno"> 4044</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a659fca4caa4720785ab7fbddcb247fb7">callMethod</a>(compiler, 0, <span class="stringliteral">&quot;new()&quot;</span>, 5);</div>
<div class="line"><a name="l04045"></a><span class="lineno"> 4045</span>&#160; </div>
<div class="line"><a name="l04046"></a><span class="lineno"> 4046</span>&#160;  <span class="keywordflow">for</span>(uint32_t methodIdx = 0; methodIdx &lt; attributes-&gt;<a class="code" href="../../d4/db1/struct_obj_map.html#ae1f6f81559f425ce8e63dd05618561fb">capacity</a>; methodIdx++)</div>
<div class="line"><a name="l04047"></a><span class="lineno"> 4047</span>&#160;  {</div>
<div class="line"><a name="l04048"></a><span class="lineno"> 4048</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../d2/d99/struct_map_entry.html">MapEntry</a>* methodEntry = &amp;attributes-&gt;<a class="code" href="../../d4/db1/struct_obj_map.html#a64f2c89320a81194c709e8a2303c1c97">entries</a>[methodIdx];</div>
<div class="line"><a name="l04049"></a><span class="lineno"> 4049</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="../../d2/d0a/wren__value_8h.html#ade82ad35993f1f890644f8679f02f4b5">IS_UNDEFINED</a>(methodEntry-&gt;<a class="code" href="../../d2/d99/struct_map_entry.html#a069740bcf26cb28ae6b7ffcf8e597018">key</a>)) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l04050"></a><span class="lineno"> 4050</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#a6b4cd3d0c1a4cf34e42541f058f2e55b">emitConstant</a>(compiler, methodEntry-&gt;<a class="code" href="../../d2/d99/struct_map_entry.html#a069740bcf26cb28ae6b7ffcf8e597018">key</a>);</div>
<div class="line"><a name="l04051"></a><span class="lineno"> 4051</span>&#160;    <a class="code" href="../../d4/db1/struct_obj_map.html">ObjMap</a>* attributeMap = <a class="code" href="../../d2/d0a/wren__value_8h.html#a55ed1aa901b5e571d47fec3286988c24">AS_MAP</a>(methodEntry-&gt;<a class="code" href="../../d2/d99/struct_map_entry.html#ab4ac6925a8accf38133fdbe66ff9944d">value</a>);</div>
<div class="line"><a name="l04052"></a><span class="lineno"> 4052</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#a4716244e490967ab0e98a209de45844e">emitAttributes</a>(compiler, attributeMap);</div>
<div class="line"><a name="l04053"></a><span class="lineno"> 4053</span>&#160;    <a class="code" href="../../d4/de2/wren__compiler_8c.html#a659fca4caa4720785ab7fbddcb247fb7">callMethod</a>(compiler, 2, <span class="stringliteral">&quot;addCore_(_,_)&quot;</span>, 13);</div>
<div class="line"><a name="l04054"></a><span class="lineno"> 4054</span>&#160;  }</div>
<div class="line"><a name="l04055"></a><span class="lineno"> 4055</span>&#160;}</div>
<div class="line"><a name="l04056"></a><span class="lineno"> 4056</span>&#160; </div>
<div class="line"><a name="l04057"></a><span class="lineno"> 4057</span>&#160; </div>
<div class="line"><a name="l04058"></a><span class="lineno"> 4058</span>&#160;<span class="comment">// Emit the final ClassAttributes that exists at runtime</span></div>
<div class="line"><a name="l04059"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#ad596cab10744611b6321d2f883acf5f1"> 4059</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#ad596cab10744611b6321d2f883acf5f1">emitClassAttributes</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler, ClassInfo* classInfo)</div>
<div class="line"><a name="l04060"></a><span class="lineno"> 4060</span>&#160;{</div>
<div class="line"><a name="l04061"></a><span class="lineno"> 4061</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#aa30b2bee45b3b4a728ebac4fb0e5a82b">loadCoreVariable</a>(compiler, <span class="stringliteral">&quot;ClassAttributes&quot;</span>);</div>
<div class="line"><a name="l04062"></a><span class="lineno"> 4062</span>&#160; </div>
<div class="line"><a name="l04063"></a><span class="lineno"> 4063</span>&#160;  classInfo-&gt;classAttributes </div>
<div class="line"><a name="l04064"></a><span class="lineno"> 4064</span>&#160;    ? <a class="code" href="../../d4/de2/wren__compiler_8c.html#a4716244e490967ab0e98a209de45844e">emitAttributes</a>(compiler, classInfo-&gt;classAttributes) </div>
<div class="line"><a name="l04065"></a><span class="lineno"> 4065</span>&#160;    : <span class="keyword">null</span>(compiler, <span class="keyword">false</span>);</div>
<div class="line"><a name="l04066"></a><span class="lineno"> 4066</span>&#160; </div>
<div class="line"><a name="l04067"></a><span class="lineno"> 4067</span>&#160;  classInfo-&gt;methodAttributes </div>
<div class="line"><a name="l04068"></a><span class="lineno"> 4068</span>&#160;    ? <a class="code" href="../../d4/de2/wren__compiler_8c.html#ac0fd522b34e48c85c192b29593a79fb9">emitAttributeMethods</a>(compiler, classInfo-&gt;methodAttributes) </div>
<div class="line"><a name="l04069"></a><span class="lineno"> 4069</span>&#160;    : <span class="keyword">null</span>(compiler, <span class="keyword">false</span>);</div>
<div class="line"><a name="l04070"></a><span class="lineno"> 4070</span>&#160; </div>
<div class="line"><a name="l04071"></a><span class="lineno"> 4071</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#a659fca4caa4720785ab7fbddcb247fb7">callMethod</a>(compiler, 2, <span class="stringliteral">&quot;new(_,_)&quot;</span>, 8);</div>
<div class="line"><a name="l04072"></a><span class="lineno"> 4072</span>&#160;}</div>
<div class="line"><a name="l04073"></a><span class="lineno"> 4073</span>&#160; </div>
<div class="line"><a name="l04074"></a><span class="lineno"> 4074</span>&#160;<span class="comment">// Copy the current attributes stored in the compiler into a destination map</span></div>
<div class="line"><a name="l04075"></a><span class="lineno"> 4075</span>&#160;<span class="comment">// This also resets the counter, since the intent is to consume the attributes</span></div>
<div class="line"><a name="l04076"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#ad26f260d12aca9c0b1bd0ae201f760c1"> 4076</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#ad26f260d12aca9c0b1bd0ae201f760c1">copyAttributes</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler, <a class="code" href="../../d4/db1/struct_obj_map.html">ObjMap</a>* into)</div>
<div class="line"><a name="l04077"></a><span class="lineno"> 4077</span>&#160;{</div>
<div class="line"><a name="l04078"></a><span class="lineno"> 4078</span>&#160;  compiler-&gt;numAttributes = 0;</div>
<div class="line"><a name="l04079"></a><span class="lineno"> 4079</span>&#160; </div>
<div class="line"><a name="l04080"></a><span class="lineno"> 4080</span>&#160;  <span class="keywordflow">if</span>(compiler-&gt;attributes-&gt;count == 0) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04081"></a><span class="lineno"> 4081</span>&#160;  <span class="keywordflow">if</span>(into == <a class="code" href="../../da/d2d/_stdio_stream_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04082"></a><span class="lineno"> 4082</span>&#160; </div>
<div class="line"><a name="l04083"></a><span class="lineno"> 4083</span>&#160;  <a class="code" href="../../d7/ddb/struct_wren_v_m.html">WrenVM</a>* vm = compiler-&gt;parser-&gt;vm;</div>
<div class="line"><a name="l04084"></a><span class="lineno"> 4084</span>&#160;  </div>
<div class="line"><a name="l04085"></a><span class="lineno"> 4085</span>&#160;  <span class="comment">// Note we copy the actual values as is since we&#39;ll take ownership </span></div>
<div class="line"><a name="l04086"></a><span class="lineno"> 4086</span>&#160;  <span class="comment">// and clear the original map</span></div>
<div class="line"><a name="l04087"></a><span class="lineno"> 4087</span>&#160;  <span class="keywordflow">for</span>(uint32_t attrIdx = 0; attrIdx &lt; compiler-&gt;attributes-&gt;capacity; attrIdx++)</div>
<div class="line"><a name="l04088"></a><span class="lineno"> 4088</span>&#160;  {</div>
<div class="line"><a name="l04089"></a><span class="lineno"> 4089</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../d2/d99/struct_map_entry.html">MapEntry</a>* attrEntry = &amp;compiler-&gt;attributes-&gt;entries[attrIdx];</div>
<div class="line"><a name="l04090"></a><span class="lineno"> 4090</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="../../d2/d0a/wren__value_8h.html#ade82ad35993f1f890644f8679f02f4b5">IS_UNDEFINED</a>(attrEntry-&gt;<a class="code" href="../../d2/d99/struct_map_entry.html#a069740bcf26cb28ae6b7ffcf8e597018">key</a>)) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l04091"></a><span class="lineno"> 4091</span>&#160;    <a class="code" href="../../da/dbe/wren__value_8c.html#a10e46c257fbf0a57bb2acef361bff562">wrenMapSet</a>(vm, into, attrEntry-&gt;<a class="code" href="../../d2/d99/struct_map_entry.html#a069740bcf26cb28ae6b7ffcf8e597018">key</a>, attrEntry-&gt;<a class="code" href="../../d2/d99/struct_map_entry.html#ab4ac6925a8accf38133fdbe66ff9944d">value</a>);</div>
<div class="line"><a name="l04092"></a><span class="lineno"> 4092</span>&#160;  }</div>
<div class="line"><a name="l04093"></a><span class="lineno"> 4093</span>&#160;  </div>
<div class="line"><a name="l04094"></a><span class="lineno"> 4094</span>&#160;  <a class="code" href="../../da/dbe/wren__value_8c.html#aa76904b8bcf2ed294521657095603a3c">wrenMapClear</a>(vm, compiler-&gt;attributes);</div>
<div class="line"><a name="l04095"></a><span class="lineno"> 4095</span>&#160;}</div>
<div class="line"><a name="l04096"></a><span class="lineno"> 4096</span>&#160; </div>
<div class="line"><a name="l04097"></a><span class="lineno"> 4097</span>&#160;<span class="comment">// Copy the current attributes stored in the compiler into the method specific</span></div>
<div class="line"><a name="l04098"></a><span class="lineno"> 4098</span>&#160;<span class="comment">// attributes for the current enclosingClass.</span></div>
<div class="line"><a name="l04099"></a><span class="lineno"> 4099</span>&#160;<span class="comment">// This also resets the counter, since the intent is to consume the attributes</span></div>
<div class="line"><a name="l04100"></a><span class="lineno"><a class="line" href="../../d4/de2/wren__compiler_8c.html#a2bd516d902a9b63aa8529ab50b938b03"> 4100</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/de2/wren__compiler_8c.html#a2bd516d902a9b63aa8529ab50b938b03">copyMethodAttributes</a>(<a class="code" href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a>* compiler, <span class="keywordtype">bool</span> isForeign,</div>
<div class="line"><a name="l04101"></a><span class="lineno"> 4101</span>&#160;            <span class="keywordtype">bool</span> isStatic, <span class="keyword">const</span> <span class="keywordtype">char</span>* fullSignature, int32_t length) </div>
<div class="line"><a name="l04102"></a><span class="lineno"> 4102</span>&#160;{</div>
<div class="line"><a name="l04103"></a><span class="lineno"> 4103</span>&#160;  compiler-&gt;numAttributes = 0;</div>
<div class="line"><a name="l04104"></a><span class="lineno"> 4104</span>&#160; </div>
<div class="line"><a name="l04105"></a><span class="lineno"> 4105</span>&#160;  <span class="keywordflow">if</span>(compiler-&gt;attributes-&gt;count == 0) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04106"></a><span class="lineno"> 4106</span>&#160; </div>
<div class="line"><a name="l04107"></a><span class="lineno"> 4107</span>&#160;  <a class="code" href="../../d7/ddb/struct_wren_v_m.html">WrenVM</a>* vm = compiler-&gt;parser-&gt;vm;</div>
<div class="line"><a name="l04108"></a><span class="lineno"> 4108</span>&#160;  </div>
<div class="line"><a name="l04109"></a><span class="lineno"> 4109</span>&#160;  <span class="comment">// Make a map for this method to copy into</span></div>
<div class="line"><a name="l04110"></a><span class="lineno"> 4110</span>&#160;  <a class="code" href="../../d4/db1/struct_obj_map.html">ObjMap</a>* methodAttr = <a class="code" href="../../da/dbe/wren__value_8c.html#a12dd4cef62629e819f9eecb3e002a3da">wrenNewMap</a>(vm);</div>
<div class="line"><a name="l04111"></a><span class="lineno"> 4111</span>&#160;  <a class="code" href="../../de/db2/wren__vm_8c.html#ab604556ed8a6be6d88e7b4ddf4efd2e8">wrenPushRoot</a>(vm, (<a class="code" href="../../d6/d93/structs_obj.html">Obj</a>*)methodAttr);</div>
<div class="line"><a name="l04112"></a><span class="lineno"> 4112</span>&#160;  <a class="code" href="../../d4/de2/wren__compiler_8c.html#ad26f260d12aca9c0b1bd0ae201f760c1">copyAttributes</a>(compiler, methodAttr);</div>
<div class="line"><a name="l04113"></a><span class="lineno"> 4113</span>&#160; </div>
<div class="line"><a name="l04114"></a><span class="lineno"> 4114</span>&#160;  <span class="comment">// Include &#39;foreign static &#39; in front as needed</span></div>
<div class="line"><a name="l04115"></a><span class="lineno"> 4115</span>&#160;  int32_t fullLength = length;</div>
<div class="line"><a name="l04116"></a><span class="lineno"> 4116</span>&#160;  <span class="keywordflow">if</span>(isForeign) fullLength += 8;</div>
<div class="line"><a name="l04117"></a><span class="lineno"> 4117</span>&#160;  <span class="keywordflow">if</span>(isStatic) fullLength += 7;</div>
<div class="line"><a name="l04118"></a><span class="lineno"> 4118</span>&#160;  <span class="keywordtype">char</span> fullSignatureWithPrefix[<a class="code" href="../../d3/d72/wren__common_8h.html#a163524fe2202302c975a36e392e8cade">MAX_METHOD_SIGNATURE</a> + 8 + 7];</div>
<div class="line"><a name="l04119"></a><span class="lineno"> 4119</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* foreignPrefix = isForeign ? <span class="stringliteral">&quot;foreign &quot;</span> : <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l04120"></a><span class="lineno"> 4120</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* staticPrefix = isStatic ? <span class="stringliteral">&quot;static &quot;</span> : <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l04121"></a><span class="lineno"> 4121</span>&#160;  sprintf(fullSignatureWithPrefix, <span class="stringliteral">&quot;%s%s%.*s&quot;</span>, foreignPrefix, staticPrefix, </div>
<div class="line"><a name="l04122"></a><span class="lineno"> 4122</span>&#160;                                               length, fullSignature);</div>
<div class="line"><a name="l04123"></a><span class="lineno"> 4123</span>&#160;  fullSignatureWithPrefix[fullLength] = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><a name="l04124"></a><span class="lineno"> 4124</span>&#160; </div>
<div class="line"><a name="l04125"></a><span class="lineno"> 4125</span>&#160;  <span class="keywordflow">if</span>(compiler-&gt;enclosingClass-&gt;methodAttributes == <a class="code" href="../../da/d2d/_stdio_stream_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line"><a name="l04126"></a><span class="lineno"> 4126</span>&#160;    compiler-&gt;enclosingClass-&gt;methodAttributes = <a class="code" href="../../da/dbe/wren__value_8c.html#a12dd4cef62629e819f9eecb3e002a3da">wrenNewMap</a>(vm);</div>
<div class="line"><a name="l04127"></a><span class="lineno"> 4127</span>&#160;  }</div>
<div class="line"><a name="l04128"></a><span class="lineno"> 4128</span>&#160;  </div>
<div class="line"><a name="l04129"></a><span class="lineno"> 4129</span>&#160;  <span class="comment">// Store the method attributes in the class map</span></div>
<div class="line"><a name="l04130"></a><span class="lineno"> 4130</span>&#160;  <a class="code" href="../../d2/d0a/wren__value_8h.html#ad777bf08d8e2b01df17ba5e3c51ae11f">Value</a> key = <a class="code" href="../../da/dbe/wren__value_8c.html#a6f59ebcbdfd6eb24569b4d50cf85052b">wrenNewStringLength</a>(vm, fullSignatureWithPrefix, fullLength);</div>
<div class="line"><a name="l04131"></a><span class="lineno"> 4131</span>&#160;  <a class="code" href="../../da/dbe/wren__value_8c.html#a10e46c257fbf0a57bb2acef361bff562">wrenMapSet</a>(vm, compiler-&gt;enclosingClass-&gt;methodAttributes, key, <a class="code" href="../../d2/d0a/wren__value_8h.html#ae686330cf8b06442b1da208af1b867fc">OBJ_VAL</a>(methodAttr));</div>
<div class="line"><a name="l04132"></a><span class="lineno"> 4132</span>&#160; </div>
<div class="line"><a name="l04133"></a><span class="lineno"> 4133</span>&#160;  <a class="code" href="../../de/db2/wren__vm_8c.html#a70c4570a3862c0981f165f4c08b94f3a">wrenPopRoot</a>(vm);</div>
<div class="line"><a name="l04134"></a><span class="lineno"> 4134</span>&#160;}</div>
<div class="ttc" id="a_eris_core_8cpp_html_a0b33edabd7f1c4e4a0bf32c67269be2f"><div class="ttname"><a href="../../d6/dd8/_eris_core_8cpp.html#a0b33edabd7f1c4e4a0bf32c67269be2f">loop</a></div><div class="ttdeci">void loop(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd8/_eris_core_8cpp_source.html#l00106">ErisCore.cpp:106</a></div></div>
<div class="ttc" id="a_sd_error_codes_8txt_html_a7e2759cf3ce335c21536207b75f30161"><div class="ttname"><a href="../../d9/dfc/_sd_error_codes_8txt.html#a7e2759cf3ce335c21536207b75f30161">count</a></div><div class="ttdeci">Run the SdErrorCode example to produce an updated list Symbol failed SD_CARD_ERROR_NONE No SD_CARD_ERROR_CMD0 Card reset SD_CARD_ERROR_CMD2 SDIO read SD_CARD_ERROR_CMD3 SDIO publish SD_CARD_ERROR_CMD6 Switch card SD_CARD_ERROR_CMD7 SDIO card SD_CARD_ERROR_CMD8 Send and check interface SD_CARD_ERROR_CMD9 Read CSD SD_CARD_ERROR_CMD10 Read CID SD_CARD_ERROR_CMD12 Stop multiple block SD_CARD_ERROR_CMD13 Read card SD_CARD_ERROR_CMD17 Read single SD_CARD_ERROR_CMD18 Read multiple SD_CARD_ERROR_CMD24 Write single SD_CARD_ERROR_CMD25 Write multiple SD_CARD_ERROR_CMD32 Set first erase SD_CARD_ERROR_CMD33 Set last erase SD_CARD_ERROR_CMD38 Erase selected SD_CARD_ERROR_CMD58 Read OCR SD_CARD_ERROR_CMD59 Set CRC SD_CARD_ERROR_ACMD6 Set SDIO bus SD_CARD_ERROR_ACMD13 Read extended SD_CARD_ERROR_ACMD23 Set pre erased count</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dfc/_sd_error_codes_8txt_source.html#l00028">SdErrorCodes.txt:29</a></div></div>
<div class="ttc" id="a_stdio_stream_8h_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../da/d2d/_stdio_stream_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d2d/_stdio_stream_8h_source.html#l00092">StdioStream.h:92</a></div></div>
<div class="ttc" id="alz4_8h_html_a0211201f992ec3f0b641c9ceff5f837a"><div class="ttname"><a href="../../dd/df8/lz4_8h.html#a0211201f992ec3f0b641c9ceff5f837a">source</a></div><div class="ttdeci">const char * source</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/df8/lz4_8h_source.html#l00699">lz4.h:699</a></div></div>
<div class="ttc" id="areceiver-less_01calls_012_8txt_html_a5d69482e1e5c9b54df78b8f9595d7952"><div class="ttname"><a href="../../d0/de9/receiver-less_01calls_012_8txt.html#a5d69482e1e5c9b54df78b8f9595d7952">fn</a></div><div class="ttdeci">var how do we tell if it we see if there are any private getters that were not implemented and define implicit getters for them that return fields That s weird if you take into account though compile it to getter call Then see setter defined for so we no longer implicitly make a field But there s no so now the above call will fail Probably do want call to fail so that may be OK Given how do we tell if it which returns a field that s a fn</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/de9/receiver-less_01calls_012_8txt_source.html#l00048">receiver-less calls 2.txt:48</a></div></div>
<div class="ttc" id="areceiver-less_01calls_8txt_html_a129a3e5535abc54e9be509a15befda36"><div class="ttname"><a href="../../df/d75/receiver-less_01calls_8txt.html#a129a3e5535abc54e9be509a15befda36">prefix</a></div><div class="ttdeci">Q1 then really means a call to static a method on the class surrounding the enclosing class I *don t *think we want the answer to the question to vary based on the name in question We can t rely on name resolution to disambiguate because we don t know the full set of surrounding names in a single pass compiler it s semantically squishier I think the right answer it s an implicit call on this That s what you want most I think For imported we could import them with a prefix(really import them as objects bound to named variables)</div></div>
<div class="ttc" id="astruct_map_entry_html"><div class="ttname"><a href="../../d2/d99/struct_map_entry.html">MapEntry</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0a/wren__value_8h_source.html#l00438">wren_value.h:439</a></div></div>
<div class="ttc" id="astruct_map_entry_html_a069740bcf26cb28ae6b7ffcf8e597018"><div class="ttname"><a href="../../d2/d99/struct_map_entry.html#a069740bcf26cb28ae6b7ffcf8e597018">MapEntry::key</a></div><div class="ttdeci">Value key</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0a/wren__value_8h_source.html#l00441">wren_value.h:441</a></div></div>
<div class="ttc" id="astruct_map_entry_html_ab4ac6925a8accf38133fdbe66ff9944d"><div class="ttname"><a href="../../d2/d99/struct_map_entry.html#ab4ac6925a8accf38133fdbe66ff9944d">MapEntry::value</a></div><div class="ttdeci">Value value</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0a/wren__value_8h_source.html#l00446">wren_value.h:446</a></div></div>
<div class="ttc" id="astruct_obj_fn_html"><div class="ttname"><a href="../../df/d87/struct_obj_fn.html">ObjFn</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0a/wren__value_8h_source.html#l00247">wren_value.h:248</a></div></div>
<div class="ttc" id="astruct_obj_fn_html_add1082b59693436c4a7ce103e2be5dff"><div class="ttname"><a href="../../df/d87/struct_obj_fn.html#add1082b59693436c4a7ce103e2be5dff">ObjFn::numUpvalues</a></div><div class="ttdeci">int numUpvalues</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0a/wren__value_8h_source.html#l00261">wren_value.h:261</a></div></div>
<div class="ttc" id="astruct_obj_list_html"><div class="ttname"><a href="../../db/d98/struct_obj_list.html">ObjList</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0a/wren__value_8h_source.html#l00430">wren_value.h:431</a></div></div>
<div class="ttc" id="astruct_obj_list_html_a997093ce1b73e29f119278bbb1ee0fd3"><div class="ttname"><a href="../../db/d98/struct_obj_list.html#a997093ce1b73e29f119278bbb1ee0fd3">ObjList::elements</a></div><div class="ttdeci">ValueBuffer elements</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0a/wren__value_8h_source.html#l00435">wren_value.h:435</a></div></div>
<div class="ttc" id="astruct_obj_map_html"><div class="ttname"><a href="../../d4/db1/struct_obj_map.html">ObjMap</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0a/wren__value_8h_source.html#l00466">wren_value.h:467</a></div></div>
<div class="ttc" id="astruct_obj_map_html_a64f2c89320a81194c709e8a2303c1c97"><div class="ttname"><a href="../../d4/db1/struct_obj_map.html#a64f2c89320a81194c709e8a2303c1c97">ObjMap::entries</a></div><div class="ttdeci">MapEntry * entries</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0a/wren__value_8h_source.html#l00477">wren_value.h:477</a></div></div>
<div class="ttc" id="astruct_obj_map_html_ae1f6f81559f425ce8e63dd05618561fb"><div class="ttname"><a href="../../d4/db1/struct_obj_map.html#ae1f6f81559f425ce8e63dd05618561fb">ObjMap::capacity</a></div><div class="ttdeci">uint32_t capacity</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0a/wren__value_8h_source.html#l00471">wren_value.h:471</a></div></div>
<div class="ttc" id="astruct_obj_module_html"><div class="ttname"><a href="../../df/d81/struct_obj_module.html">ObjModule</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0a/wren__value_8h_source.html#l00224">wren_value.h:225</a></div></div>
<div class="ttc" id="astruct_obj_module_html_ac4b3cf584974743fb71a1b73e6b5877c"><div class="ttname"><a href="../../df/d81/struct_obj_module.html#ac4b3cf584974743fb71a1b73e6b5877c">ObjModule::variables</a></div><div class="ttdeci">ValueBuffer variables</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0a/wren__value_8h_source.html#l00229">wren_value.h:229</a></div></div>
<div class="ttc" id="astruct_wren_v_m_html"><div class="ttname"><a href="../../d7/ddb/struct_wren_v_m.html">WrenVM</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/db1/wren__vm_8h_source.html#l00031">wren_vm.h:32</a></div></div>
<div class="ttc" id="astructs_obj_class_html"><div class="ttname"><a href="../../d7/d64/structs_obj_class.html">sObjClass</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0a/wren__value_8h_source.html#l00392">wren_value.h:393</a></div></div>
<div class="ttc" id="astructs_obj_class_html_a402a4244ac7fb9e015a7c170b801bcd9"><div class="ttname"><a href="../../d7/d64/structs_obj_class.html#a402a4244ac7fb9e015a7c170b801bcd9">sObjClass::numFields</a></div><div class="ttdeci">int numFields</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0a/wren__value_8h_source.html#l00399">wren_value.h:399</a></div></div>
<div class="ttc" id="astructs_obj_class_html_aaf47565ed24938493d4d74d17df44f31"><div class="ttname"><a href="../../d7/d64/structs_obj_class.html#aaf47565ed24938493d4d74d17df44f31">sObjClass::superclass</a></div><div class="ttdeci">ObjClass * superclass</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0a/wren__value_8h_source.html#l00395">wren_value.h:395</a></div></div>
<div class="ttc" id="astructs_obj_html"><div class="ttname"><a href="../../d6/d93/structs_obj.html">sObj</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0a/wren__value_8h_source.html#l00109">wren_value.h:110</a></div></div>
<div class="ttc" id="astructs_obj_string_html"><div class="ttname"><a href="../../d1/d25/structs_obj_string.html">sObjString</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0a/wren__value_8h_source.html#l00152">wren_value.h:153</a></div></div>
<div class="ttc" id="astructs_obj_string_html_a7d929e9bea31c7ee928fb1db26fe2fe9"><div class="ttname"><a href="../../d1/d25/structs_obj_string.html#a7d929e9bea31c7ee928fb1db26fe2fe9">sObjString::value</a></div><div class="ttdeci">char value[FLEXIBLE_ARRAY]</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0a/wren__value_8h_source.html#l00163">wren_value.h:163</a></div></div>
<div class="ttc" id="asvc_serial_command_interface_8cpp_html_a1d71425d9df28667d528833a4db10432"><div class="ttname"><a href="../../dd/dbe/svc_serial_command_interface_8cpp.html#a1d71425d9df28667d528833a4db10432">token</a></div><div class="ttdeci">char * token</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dbe/svc_serial_command_interface_8cpp_source.html#l00055">svcSerialCommandInterface.cpp:55</a></div></div>
<div class="ttc" id="awren_8h_html_ab1c7acdbcc2c71e81c92d6b1b060f971a4d8e7d0210dea8b187e040d7e6ca6ca3"><div class="ttname"><a href="../../dd/d19/wren_8h.html#ab1c7acdbcc2c71e81c92d6b1b060f971a4d8e7d0210dea8b187e040d7e6ca6ca3">WREN_ERROR_COMPILE</a></div><div class="ttdeci">@ WREN_ERROR_COMPILE</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d19/wren_8h_source.html#l00108">wren.h:108</a></div></div>
<div class="ttc" id="awren__common_8h_html"><div class="ttname"><a href="../../d3/d72/wren__common_8h.html">wren_common.h</a></div></div>
<div class="ttc" id="awren__common_8h_html_a0bc63b24b654ca433be7b97a3edde132"><div class="ttname"><a href="../../d3/d72/wren__common_8h.html#a0bc63b24b654ca433be7b97a3edde132">UNREACHABLE</a></div><div class="ttdeci">#define UNREACHABLE()</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d72/wren__common_8h_source.html#l00195">wren_common.h:195</a></div></div>
<div class="ttc" id="awren__common_8h_html_a163524fe2202302c975a36e392e8cade"><div class="ttname"><a href="../../d3/d72/wren__common_8h.html#a163524fe2202302c975a36e392e8cade">MAX_METHOD_SIGNATURE</a></div><div class="ttdeci">#define MAX_METHOD_SIGNATURE</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d72/wren__common_8h_source.html#l00103">wren_common.h:103</a></div></div>
<div class="ttc" id="awren__common_8h_html_a679dffecfb16ab6f5832ddf756b5fabd"><div class="ttname"><a href="../../d3/d72/wren__common_8h.html#a679dffecfb16ab6f5832ddf756b5fabd">MAX_FIELDS</a></div><div class="ttdeci">#define MAX_FIELDS</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d72/wren__common_8h_source.html#l00114">wren_common.h:114</a></div></div>
<div class="ttc" id="awren__common_8h_html_a68c7f0498bb1932350eb092be1b5e912"><div class="ttname"><a href="../../d3/d72/wren__common_8h.html#a68c7f0498bb1932350eb092be1b5e912">MAX_PARAMETERS</a></div><div class="ttdeci">#define MAX_PARAMETERS</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d72/wren__common_8h_source.html#l00086">wren_common.h:86</a></div></div>
<div class="ttc" id="awren__common_8h_html_aa06eedd6f738a415870e97a375337d51"><div class="ttname"><a href="../../d3/d72/wren__common_8h.html#aa06eedd6f738a415870e97a375337d51">ASSERT</a></div><div class="ttdeci">#define ASSERT(condition, message)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d72/wren__common_8h_source.html#l00187">wren_common.h:187</a></div></div>
<div class="ttc" id="awren__common_8h_html_aa692dbf91cd4e231e40dea73887e02ce"><div class="ttname"><a href="../../d3/d72/wren__common_8h.html#aa692dbf91cd4e231e40dea73887e02ce">MAX_VARIABLE_NAME</a></div><div class="ttdeci">#define MAX_VARIABLE_NAME</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d72/wren__common_8h_source.html#l00107">wren_common.h:107</a></div></div>
<div class="ttc" id="awren__common_8h_html_ae9f869779a6bca3e8df7e8d7f0ccb0a6"><div class="ttname"><a href="../../d3/d72/wren__common_8h.html#ae9f869779a6bca3e8df7e8d7f0ccb0a6">MAX_METHOD_NAME</a></div><div class="ttdeci">#define MAX_METHOD_NAME</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d72/wren__common_8h_source.html#l00091">wren_common.h:91</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_a00d4650384afa8e4b934f2dda47fd044"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#a00d4650384afa8e4b934f2dda47fd044">parameterList</a></div><div class="ttdeci">static void parameterList(Compiler *compiler, Signature *signature)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l02683">wren_compiler.c:2683</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_a010575aac4ed7c8c68ad4a660f885889"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#a010575aac4ed7c8c68ad4a660f885889">conditional</a></div><div class="ttdeci">static void conditional(Compiler *compiler, bool canAssign)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l02556">wren_compiler.c:2556</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_a05b35d7470ad01bbd67ffc19a9f161c5"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#a05b35d7470ad01bbd67ffc19a9f161c5">variableDefinition</a></div><div class="ttdeci">static void variableDefinition(Compiler *compiler)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l03700">wren_compiler.c:3700</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_a05c8d00faddc01e19b4e0655b0e917d9"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#a05c8d00faddc01e19b4e0655b0e917d9">stackEffects</a></div><div class="ttdeci">static const int stackEffects[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00414">wren_compiler.c:414</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_a074a1649744dc32a778909c5d5b24b14"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#a074a1649744dc32a778909c5d5b24b14">loopBody</a></div><div class="ttdeci">static void loopBody(Compiler *compiler)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l02986">wren_compiler.c:2986</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_a0a12e0946596048fabb91bc99d33c1a5"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#a0a12e0946596048fabb91bc99d33c1a5">MAX_LOCALS</a></div><div class="ttdeci">#define MAX_LOCALS</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00025">wren_compiler.c:25</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_a0a8cb504ca7e49b97ac975d128414786"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#a0a8cb504ca7e49b97ac975d128414786">list</a></div><div class="ttdeci">static void list(Compiler *compiler, bool canAssign)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l02146">wren_compiler.c:2146</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_a0c05f397ec8eb9dd3f5994287510b132"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#a0c05f397ec8eb9dd3f5994287510b132">matchLine</a></div><div class="ttdeci">static bool matchLine(Compiler *compiler)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l01281">wren_compiler.c:1281</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_a0dc46acbdd511af1c3de1a937dca02b3"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#a0dc46acbdd511af1c3de1a937dca02b3">addConstant</a></div><div class="ttdeci">static int addConstant(Compiler *compiler, Value constant)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00496">wren_compiler.c:496</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_a1044bcfbcf0d32964730d3af27f4b45d"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#a1044bcfbcf0d32964730d3af27f4b45d">isDigit</a></div><div class="ttdeci">static bool isDigit(char c)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00633">wren_compiler.c:633</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_a12bdbdb1e45706c48ef016e52b18c21a"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#a12bdbdb1e45706c48ef016e52b18c21a">allowLineBeforeDot</a></div><div class="ttdeci">static void allowLineBeforeDot(Compiler *compiler)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l01303">wren_compiler.c:1303</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_a16fd4c5c52c951aed01a1d0fcd6d71aa"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#a16fd4c5c52c951aed01a1d0fcd6d71aa">namedCall</a></div><div class="ttdeci">static void namedCall(Compiler *compiler, bool canAssign, Code instruction)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l02079">wren_compiler.c:2079</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_a1923996c19f9f549a909d1e2981971f1"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#a1923996c19f9f549a909d1e2981971f1">twoCharToken</a></div><div class="ttdeci">static void twoCharToken(Parser *parser, char c, TokenType two, TokenType one)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00684">wren_compiler.c:684</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_a1b50adda3f611e35b1bf68776af68f6d"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#a1b50adda3f611e35b1bf68776af68f6d">statement</a></div><div class="ttdeci">static void statement(Compiler *compiler)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l03175">wren_compiler.c:3175</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_a2160d6b03577cf35a7df0a4044fab492"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#a2160d6b03577cf35a7df0a4044fab492">Loop</a></div><div class="ttdeci">struct sLoop Loop</div></div>
<div class="ttc" id="awren__compiler_8c_html_a22c495e9344a9dc8eff660fcba96d843"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#a22c495e9344a9dc8eff660fcba96d843">printError</a></div><div class="ttdeci">static void printError(Parser *parser, int line, const char *label, const char *format, va_list args)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00420">wren_compiler.c:420</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_a280648a47237a52319d293ace8edb7c8"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#a280648a47237a52319d293ace8edb7c8">method</a></div><div class="ttdeci">static bool method(Compiler *compiler, Variable classVariable)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l03427">wren_compiler.c:3427</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_a2b984a98447b37936cb2339b07ba31a8"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#a2b984a98447b37936cb2339b07ba31a8">boolean</a></div><div class="ttdeci">static void boolean(Compiler *compiler, bool canAssign)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l02215">wren_compiler.c:2215</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_a2bd516d902a9b63aa8529ab50b938b03"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#a2bd516d902a9b63aa8529ab50b938b03">copyMethodAttributes</a></div><div class="ttdeci">static void copyMethodAttributes(Compiler *compiler, bool isForeign, bool isStatic, const char *fullSignature, int32_t length)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l04100">wren_compiler.c:4100</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_a2c404ef1792908a05d45d110401e9443"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#a2c404ef1792908a05d45d110401e9443">lexError</a></div><div class="ttdeci">static void lexError(Parser *parser, const char *format,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00443">wren_compiler.c:443</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_a2d20d4cbad146f301f87ee2af01148c1"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#a2d20d4cbad146f301f87ee2af01148c1">infixSignature</a></div><div class="ttdeci">void infixSignature(Compiler *compiler, Signature *signature)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l02599">wren_compiler.c:2599</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_a30f20ea88f6caecab888efea511fbb39"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#a30f20ea88f6caecab888efea511fbb39">unarySignature</a></div><div class="ttdeci">void unarySignature(Compiler *compiler, Signature *signature)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l02612">wren_compiler.c:2612</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_a330975026f92157ab60213398e685b2c"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#a330975026f92157ab60213398e685b2c">consumeLiteral</a></div><div class="ttdeci">static Value consumeLiteral(Compiler *compiler, const char *message)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l03344">wren_compiler.c:3344</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_a34f07e4ff7876be8b8cc88f2a7e3ebda"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#a34f07e4ff7876be8b8cc88f2a7e3ebda">popScope</a></div><div class="ttdeci">static void popScope(Compiler *compiler)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l01522">wren_compiler.c:1522</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_a36217037596077e796499013d5f89c42"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#a36217037596077e796499013d5f89c42">rules</a></div><div class="ttdeci">GrammarRule rules[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l02749">wren_compiler.c:2749</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_a3753cc085696e463597365c204ac56f3"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#a3753cc085696e463597365c204ac56f3">subscriptSignature</a></div><div class="ttdeci">void subscriptSignature(Compiler *compiler, Signature *signature)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l02666">wren_compiler.c:2666</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_a37c6651ed4eb1417ebd1c28fc6f5f4e4"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#a37c6651ed4eb1417ebd1c28fc6f5f4e4">startLoop</a></div><div class="ttdeci">static void startLoop(Compiler *compiler, Loop *loop)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l02968">wren_compiler.c:2968</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_a38d81393ddf947ea59ad1d15eaa868cf"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#a38d81393ddf947ea59ad1d15eaa868cf">callSignature</a></div><div class="ttdeci">static void callSignature(Compiler *compiler, Code instruction, Signature *signature)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l01974">wren_compiler.c:1974</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_a3909aa8ee9218228fe302cab2e0d5d2f"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#a3909aa8ee9218228fe302cab2e0d5d2f">definition</a></div><div class="ttdeci">static void definition(Compiler *compiler)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l03727">wren_compiler.c:3727</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_a3a17c9fef3d6388b2192ae1ce77483c1"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#a3a17c9fef3d6388b2192ae1ce77483c1">emitShortArg</a></div><div class="ttdeci">static void emitShortArg(Compiler *compiler, Code instruction, int arg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l01353">wren_compiler.c:1353</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_a3b31922ca0cec992bd4f6f6883d5eb4c"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#a3b31922ca0cec992bd4f6f6883d5eb4c">readHexDigit</a></div><div class="ttdeci">static int readHexDigit(Parser *parser)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00733">wren_compiler.c:733</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_a3b5f12d504fe199f09e2651235c398a5"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#a3b5f12d504fe199f09e2651235c398a5">peekChar</a></div><div class="ttdeci">static char peekChar(Parser *parser)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00639">wren_compiler.c:639</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_a3c508872fab66896719e75ae583758d9"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#a3c508872fab66896719e75ae583758d9">SignatureFn</a></div><div class="ttdeci">void(* SignatureFn)(Compiler *compiler, Signature *signature)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l01736">wren_compiler.c:1736</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_a3cad8aafffed68be975e83a055ce1b2c"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#a3cad8aafffed68be975e83a055ce1b2c">readString</a></div><div class="ttdeci">static void readString(Parser *parser)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00970">wren_compiler.c:970</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_a3cb62dee3888b5a3edadbd01d13ac723"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#a3cb62dee3888b5a3edadbd01d13ac723">MAX_INTERPOLATION_NESTING</a></div><div class="ttdeci">#define MAX_INTERPOLATION_NESTING</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00044">wren_compiler.c:44</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_a3d81a8f8607a9b8236f1e6e49410581a"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#a3d81a8f8607a9b8236f1e6e49410581a">endCompiler</a></div><div class="ttdeci">static ObjFn * endCompiler(Compiler *compiler, const char *debugName, int debugNameLength)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l01661">wren_compiler.c:1661</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_a3fd2906d4bd1f4c07f61b64e9136dc15"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#a3fd2906d4bd1f4c07f61b64e9136dc15">matchAttribute</a></div><div class="ttdeci">static bool matchAttribute(Compiler *compiler)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l03357">wren_compiler.c:3357</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_a41444a093a5170bf6ff69627445a457c"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#a41444a093a5170bf6ff69627445a457c">subscript</a></div><div class="ttdeci">static void subscript(Compiler *compiler, bool canAssign)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l02507">wren_compiler.c:2507</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_a41ed4497d9803ce9b48c00e808e315c6"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#a41ed4497d9803ce9b48c00e808e315c6">or_</a></div><div class="ttdeci">static void or_(Compiler *compiler, bool canAssign)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l02546">wren_compiler.c:2546</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_a453c440b666fc199fe15ae4fc94b0eb8"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#a453c440b666fc199fe15ae4fc94b0eb8">grouping</a></div><div class="ttdeci">static void grouping(Compiler *compiler, bool canAssign)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l02139">wren_compiler.c:2139</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_a4716244e490967ab0e98a209de45844e"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#a4716244e490967ab0e98a209de45844e">emitAttributes</a></div><div class="ttdeci">static void emitAttributes(Compiler *compiler, ObjMap *attributes)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l03992">wren_compiler.c:3992</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_a4b86346dfdb1db3a38675c77b11be8d3"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#a4b86346dfdb1db3a38675c77b11be8d3">nextChar</a></div><div class="ttdeci">static char nextChar(Parser *parser)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00653">wren_compiler.c:653</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_a4d3f766a087c68a45bac40c274896e15"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#a4d3f766a087c68a45bac40c274896e15">PREFIX</a></div><div class="ttdeci">#define PREFIX(fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l02743">wren_compiler.c:2743</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_a4e54b0530e648f4f3ef2b1163c9309d9"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#a4e54b0530e648f4f3ef2b1163c9309d9">endLoop</a></div><div class="ttdeci">static void endLoop(Compiler *compiler)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l02994">wren_compiler.c:2994</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_a4f4bae86546f2e4c8c4854d69a9b4636"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#a4f4bae86546f2e4c8c4854d69a9b4636">isName</a></div><div class="ttdeci">static bool isName(char c)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00627">wren_compiler.c:627</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_a5101848641cf7766dc317cf63d333c1d"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#a5101848641cf7766dc317cf63d333c1d">INFIX_OPERATOR</a></div><div class="ttdeci">#define INFIX_OPERATOR(prec, name)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l02745">wren_compiler.c:2745</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_a51f59acfb3ac3a9b347ed8fd5086ab46"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#a51f59acfb3ac3a9b347ed8fd5086ab46">patchJump</a></div><div class="ttdeci">static void patchJump(Compiler *compiler, int offset)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l01756">wren_compiler.c:1756</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_a55ffa49d00ce173be5cbd76358588d08"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#a55ffa49d00ce173be5cbd76358588d08">peek</a></div><div class="ttdeci">static TokenType peek(Compiler *compiler)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l01244">wren_compiler.c:1244</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_a576b164c108737d8d82019ec54a0d533"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#a576b164c108737d8d82019ec54a0d533">disallowAttributes</a></div><div class="ttdeci">static void disallowAttributes(Compiler *compiler)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l03941">wren_compiler.c:3941</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_a57b01730ba60c3cf3d1237cfbd32b9cc"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#a57b01730ba60c3cf3d1237cfbd32b9cc">emitByteArg</a></div><div class="ttdeci">static int emitByteArg(Compiler *compiler, Code instruction, int arg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l01345">wren_compiler.c:1345</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_a57cdd5f6031d050f5075bd276bc06c95"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#a57cdd5f6031d050f5075bd276bc06c95">readHexEscape</a></div><div class="ttdeci">static int readHexEscape(Parser *parser, int digits, const char *description)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00850">wren_compiler.c:850</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_a590c72120bf1ccc844e8c2ba7a63445a"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#a590c72120bf1ccc844e8c2ba7a63445a">map</a></div><div class="ttdeci">static void map(Compiler *compiler, bool canAssign)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l02171">wren_compiler.c:2171</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_a59935c559e6df5f8a5f95110a971014d"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#a59935c559e6df5f8a5f95110a971014d">name</a></div><div class="ttdeci">static void name(Compiler *compiler, bool canAssign)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l02364">wren_compiler.c:2364</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_a59c9947ace67700c2ba14902b13927e8"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#a59c9947ace67700c2ba14902b13927e8">readUnicodeEscape</a></div><div class="ttdeci">static void readUnicodeEscape(Parser *parser, ByteBuffer *string, int length)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00879">wren_compiler.c:879</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_a5ab3a18d8b41f2391de63d94f75d887f"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#a5ab3a18d8b41f2391de63d94f75d887f">getRule</a></div><div class="ttdeci">static GrammarRule * getRule(TokenType type)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l02818">wren_compiler.c:2818</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_a5c8500d7d0bb3ab4624b4053b3213d86"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#a5c8500d7d0bb3ab4624b4053b3213d86">readRawString</a></div><div class="ttdeci">static void readRawString(Parser *parser)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00892">wren_compiler.c:892</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_a63123f2816d2d9f3a7c145bd4e4fe81f"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#a63123f2816d2d9f3a7c145bd4e4fe81f">loadLocal</a></div><div class="ttdeci">static void loadLocal(Compiler *compiler, int slot)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l01647">wren_compiler.c:1647</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_a65889c0069858f7d0d6a459470a69c37"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#a65889c0069858f7d0d6a459470a69c37">skipBlockComment</a></div><div class="ttdeci">static void skipBlockComment(Parser *parser)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00699">wren_compiler.c:699</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_a659fca4caa4720785ab7fbddcb247fb7"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#a659fca4caa4720785ab7fbddcb247fb7">callMethod</a></div><div class="ttdeci">static void callMethod(Compiler *compiler, int numArgs, const char *name, int length)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l01995">wren_compiler.c:1995</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_a680da4c2a86185e71940e3bd830231f4"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#a680da4c2a86185e71940e3bd830231f4">whileStatement</a></div><div class="ttdeci">static void whileStatement(Compiler *compiler)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l03154">wren_compiler.c:3154</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_a690e2e36586b804ffda40a779731c271"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#a690e2e36586b804ffda40a779731c271">peekNext</a></div><div class="ttdeci">static TokenType peekNext(Compiler *compiler)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l01250">wren_compiler.c:1250</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_a6b4cd3d0c1a4cf34e42541f058f2e55b"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#a6b4cd3d0c1a4cf34e42541f058f2e55b">emitConstant</a></div><div class="ttdeci">static void emitConstant(Compiler *compiler, Value value)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l01371">wren_compiler.c:1371</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_a6d53c228b441f96cc87afd94542c8152"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#a6d53c228b441f96cc87afd94542c8152">validateNumParameters</a></div><div class="ttdeci">static void validateNumParameters(Compiler *compiler, int numArgs)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l01826">wren_compiler.c:1826</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_a6f04eaffda4b4d4ee46d87aa3e9a8d2b"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#a6f04eaffda4b4d4ee46d87aa3e9a8d2b">declareVariable</a></div><div class="ttdeci">static int declareVariable(Compiler *compiler, Token *token)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l01394">wren_compiler.c:1394</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_a6f9526219e47ab23cd6b5db273d13c8a"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#a6f9526219e47ab23cd6b5db273d13c8a">consumeLine</a></div><div class="ttdeci">static void consumeLine(Compiler *compiler, const char *errorMessage)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l01297">wren_compiler.c:1297</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_a7427f00898251d026c3b69ab90b92ed6"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#a7427f00898251d026c3b69ab90b92ed6">methodCall</a></div><div class="ttdeci">static void methodCall(Compiler *compiler, Code instruction, Signature *signature)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l02004">wren_compiler.c:2004</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_a7456a1be27da2089f984a0ede62c6c50"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#a7456a1be27da2089f984a0ede62c6c50">SignatureType</a></div><div class="ttdeci">SignatureType</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00259">wren_compiler.c:260</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_a7456a1be27da2089f984a0ede62c6c50a3c6a70ee605e103ae81714939f123c44"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#a7456a1be27da2089f984a0ede62c6c50a3c6a70ee605e103ae81714939f123c44">SIG_SETTER</a></div><div class="ttdeci">@ SIG_SETTER</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00269">wren_compiler.c:269</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_a7456a1be27da2089f984a0ede62c6c50a886e5cbc219aebd4f2677c108af4f769"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#a7456a1be27da2089f984a0ede62c6c50a886e5cbc219aebd4f2677c108af4f769">SIG_GETTER</a></div><div class="ttdeci">@ SIG_GETTER</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00266">wren_compiler.c:266</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_a7456a1be27da2089f984a0ede62c6c50a9f38bc394cbcd1405be8094564da7324"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#a7456a1be27da2089f984a0ede62c6c50a9f38bc394cbcd1405be8094564da7324">SIG_SUBSCRIPT</a></div><div class="ttdeci">@ SIG_SUBSCRIPT</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00272">wren_compiler.c:272</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_a7456a1be27da2089f984a0ede62c6c50acc229831cb9cfa74b1ad2d11a37fe214"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#a7456a1be27da2089f984a0ede62c6c50acc229831cb9cfa74b1ad2d11a37fe214">SIG_INITIALIZER</a></div><div class="ttdeci">@ SIG_INITIALIZER</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00281">wren_compiler.c:280</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_a7456a1be27da2089f984a0ede62c6c50ae0dd8195094045c31d6456d0838c8020"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#a7456a1be27da2089f984a0ede62c6c50ae0dd8195094045c31d6456d0838c8020">SIG_SUBSCRIPT_SETTER</a></div><div class="ttdeci">@ SIG_SUBSCRIPT_SETTER</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00275">wren_compiler.c:275</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_a7456a1be27da2089f984a0ede62c6c50af379038c458f7331b34fc5f3a05bea1b"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#a7456a1be27da2089f984a0ede62c6c50af379038c458f7331b34fc5f3a05bea1b">SIG_METHOD</a></div><div class="ttdeci">@ SIG_METHOD</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00263">wren_compiler.c:263</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_a792f34988d46a0659df39e49c9607880"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#a792f34988d46a0659df39e49c9607880">bareName</a></div><div class="ttdeci">static void bareName(Compiler *compiler, bool canAssign, Variable variable)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l02301">wren_compiler.c:2301</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_a7e54010dc9f49424bad8cabe47608f7c"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#a7e54010dc9f49424bad8cabe47608f7c">OPERATOR</a></div><div class="ttdeci">#define OPERATOR(name)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l02747">wren_compiler.c:2747</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_a82a42c1b41759f79a9e76c4c5a898ede"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#a82a42c1b41759f79a9e76c4c5a898ede">super_</a></div><div class="ttdeci">static void super_(Compiler *compiler, bool canAssign)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l02465">wren_compiler.c:2465</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_a8743e9688db1718a6a325ea9f27adb05"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#a8743e9688db1718a6a325ea9f27adb05">infixOp</a></div><div class="ttdeci">void infixOp(Compiler *compiler, bool canAssign)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l02583">wren_compiler.c:2583</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_a89156fcf9589f1e896bfcfede5fe8e78"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#a89156fcf9589f1e896bfcfede5fe8e78">namedSignature</a></div><div class="ttdeci">void namedSignature(Compiler *compiler, Signature *signature)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l02701">wren_compiler.c:2701</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_a8d337b902f95e30e2b5fcdbf11c20bfe"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#a8d337b902f95e30e2b5fcdbf11c20bfe">loadThis</a></div><div class="ttdeci">static void loadThis(Compiler *compiler)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l02124">wren_compiler.c:2124</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_a8d72014585e50329e9923ed2f9fdccad"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#a8d72014585e50329e9923ed2f9fdccad">skipLineComment</a></div><div class="ttdeci">static void skipLineComment(Parser *parser)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00690">wren_compiler.c:690</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_a8dfb172d48944ba16bc5531170b66fe7"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#a8dfb172d48944ba16bc5531170b66fe7">parsePrecedence</a></div><div class="ttdeci">static void parsePrecedence(Compiler *compiler, Precedence precedence)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l02824">wren_compiler.c:2824</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_a8ec648c741d1eff279418c865b4f79f2"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#a8ec648c741d1eff279418c865b4f79f2">defineMethod</a></div><div class="ttdeci">static void defineMethod(Compiler *compiler, Variable classVariable, bool isStatic, int methodSymbol)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l03301">wren_compiler.c:3301</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_a8ee09994b5ad4511965abd53ef245a8a"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#a8ee09994b5ad4511965abd53ef245a8a">resolveName</a></div><div class="ttdeci">static Variable resolveName(Compiler *compiler, const char *name, int length)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l01636">wren_compiler.c:1636</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_a959905d4b19d39ff14a74ff3d941c287"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#a959905d4b19d39ff14a74ff3d941c287">keywords</a></div><div class="ttdeci">static Keyword keywords[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00600">wren_compiler.c:600</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_a990f92b1a0017c13a94a4c02f5d736bc"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#a990f92b1a0017c13a94a4c02f5d736bc">signatureFromToken</a></div><div class="ttdeci">static Signature signatureFromToken(Compiler *compiler, SignatureType type)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l01936">wren_compiler.c:1936</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_a9bd2c0d9435a0ab262ba508ec071fa83"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#a9bd2c0d9435a0ab262ba508ec071fa83">addLocal</a></div><div class="ttdeci">static int addLocal(Compiler *compiler, const char *name, int length)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l01381">wren_compiler.c:1381</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_a9cd38e83591679b9d3f9079885746744"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#a9cd38e83591679b9d3f9079885746744">initCompiler</a></div><div class="ttdeci">static void initCompiler(Compiler *compiler, Parser *parser, Compiler *parent, bool isMethod)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00532">wren_compiler.c:532</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_a9cfaefaddfdf6eff5163d9638d141200"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#a9cfaefaddfdf6eff5163d9638d141200">emitOp</a></div><div class="ttdeci">static void emitOp(Compiler *compiler, Code instruction)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l01324">wren_compiler.c:1324</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_a9d18a27f98829f62d0d8c258197f1a17"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#a9d18a27f98829f62d0d8c258197f1a17">maybeSetter</a></div><div class="ttdeci">static bool maybeSetter(Compiler *compiler, Signature *signature)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l02640">wren_compiler.c:2640</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_a9f6b2894f12ed04b498c982012563dd0"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#a9f6b2894f12ed04b498c982012563dd0">MAX_JUMP</a></div><div class="ttdeci">#define MAX_JUMP</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00038">wren_compiler.c:38</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_aa0f3659cc8b19c66e2cbe89025a30d29"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#aa0f3659cc8b19c66e2cbe89025a30d29">discardLocals</a></div><div class="ttdeci">static int discardLocals(Compiler *compiler, int depth)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l01492">wren_compiler.c:1492</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_aa1f392a8806f59a267ba5c7b413b7577"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#aa1f392a8806f59a267ba5c7b413b7577">staticField</a></div><div class="ttdeci">static void staticField(Compiler *compiler, bool canAssign)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l02333">wren_compiler.c:2333</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_aa30b2bee45b3b4a728ebac4fb0e5a82b"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#aa30b2bee45b3b4a728ebac4fb0e5a82b">loadCoreVariable</a></div><div class="ttdeci">static void loadCoreVariable(Compiler *compiler, const char *name)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l02130">wren_compiler.c:2130</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_aa4e7d1a473d0280792d98ddb184d3006"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#aa4e7d1a473d0280792d98ddb184d3006">Precedence</a></div><div class="ttdeci">Precedence</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l01711">wren_compiler.c:1712</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_aa4e7d1a473d0280792d98ddb184d3006a0f109c9eef878893165c6180c86caa96"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#aa4e7d1a473d0280792d98ddb184d3006a0f109c9eef878893165c6180c86caa96">PREC_UNARY</a></div><div class="ttdeci">@ PREC_UNARY</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l01729">wren_compiler.c:1729</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_aa4e7d1a473d0280792d98ddb184d3006a2be887a6eb50f60bf0d6643d5986289c"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#aa4e7d1a473d0280792d98ddb184d3006a2be887a6eb50f60bf0d6643d5986289c">PREC_NONE</a></div><div class="ttdeci">@ PREC_NONE</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l01713">wren_compiler.c:1713</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_aa4e7d1a473d0280792d98ddb184d3006a336bf98f3bbc6c9ec4436e7728ca9389"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#aa4e7d1a473d0280792d98ddb184d3006a336bf98f3bbc6c9ec4436e7728ca9389">PREC_EQUALITY</a></div><div class="ttdeci">@ PREC_EQUALITY</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l01719">wren_compiler.c:1719</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_aa4e7d1a473d0280792d98ddb184d3006a4a6f91e6bc7a3c144f214c2e9263e674"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#aa4e7d1a473d0280792d98ddb184d3006a4a6f91e6bc7a3c144f214c2e9263e674">PREC_IS</a></div><div class="ttdeci">@ PREC_IS</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l01720">wren_compiler.c:1720</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_aa4e7d1a473d0280792d98ddb184d3006a512d339d43a8a07254dc51ae5cbf61de"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#aa4e7d1a473d0280792d98ddb184d3006a512d339d43a8a07254dc51ae5cbf61de">PREC_FACTOR</a></div><div class="ttdeci">@ PREC_FACTOR</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l01728">wren_compiler.c:1728</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_aa4e7d1a473d0280792d98ddb184d3006a5576e7223ab7e815dc3f0daefcaf5fe3"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#aa4e7d1a473d0280792d98ddb184d3006a5576e7223ab7e815dc3f0daefcaf5fe3">PREC_ASSIGNMENT</a></div><div class="ttdeci">@ PREC_ASSIGNMENT</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l01715">wren_compiler.c:1715</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_aa4e7d1a473d0280792d98ddb184d3006a59b5adac5b20fde37b2be48df04b90de"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#aa4e7d1a473d0280792d98ddb184d3006a59b5adac5b20fde37b2be48df04b90de">PREC_PRIMARY</a></div><div class="ttdeci">@ PREC_PRIMARY</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l01732">wren_compiler.c:1731</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_aa4e7d1a473d0280792d98ddb184d3006a64fa270482d302628e98c685632f4268"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#aa4e7d1a473d0280792d98ddb184d3006a64fa270482d302628e98c685632f4268">PREC_LOGICAL_OR</a></div><div class="ttdeci">@ PREC_LOGICAL_OR</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l01717">wren_compiler.c:1717</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_aa4e7d1a473d0280792d98ddb184d3006a76e3d5bfffbff44ebf531ac39e47aecf"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#aa4e7d1a473d0280792d98ddb184d3006a76e3d5bfffbff44ebf531ac39e47aecf">PREC_CONDITIONAL</a></div><div class="ttdeci">@ PREC_CONDITIONAL</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l01716">wren_compiler.c:1716</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_aa4e7d1a473d0280792d98ddb184d3006a875ea1a069608469e9aa3bb74191d912"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#aa4e7d1a473d0280792d98ddb184d3006a875ea1a069608469e9aa3bb74191d912">PREC_BITWISE_XOR</a></div><div class="ttdeci">@ PREC_BITWISE_XOR</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l01723">wren_compiler.c:1723</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_aa4e7d1a473d0280792d98ddb184d3006a8b419613155c8c7ce8a9e8d344715245"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#aa4e7d1a473d0280792d98ddb184d3006a8b419613155c8c7ce8a9e8d344715245">PREC_LOWEST</a></div><div class="ttdeci">@ PREC_LOWEST</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l01714">wren_compiler.c:1714</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_aa4e7d1a473d0280792d98ddb184d3006a8be9714d13699d89714562052521e6b2"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#aa4e7d1a473d0280792d98ddb184d3006a8be9714d13699d89714562052521e6b2">PREC_RANGE</a></div><div class="ttdeci">@ PREC_RANGE</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l01726">wren_compiler.c:1726</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_aa4e7d1a473d0280792d98ddb184d3006a903b18c3dbaf0566f1cbc06e049935ef"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#aa4e7d1a473d0280792d98ddb184d3006a903b18c3dbaf0566f1cbc06e049935ef">PREC_BITWISE_SHIFT</a></div><div class="ttdeci">@ PREC_BITWISE_SHIFT</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l01725">wren_compiler.c:1725</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_aa4e7d1a473d0280792d98ddb184d3006a935e24750e9ae953c5291c5567be873a"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#aa4e7d1a473d0280792d98ddb184d3006a935e24750e9ae953c5291c5567be873a">PREC_CALL</a></div><div class="ttdeci">@ PREC_CALL</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l01730">wren_compiler.c:1730</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_aa4e7d1a473d0280792d98ddb184d3006a97393227c3b9b3664833fb648de3c8af"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#aa4e7d1a473d0280792d98ddb184d3006a97393227c3b9b3664833fb648de3c8af">PREC_COMPARISON</a></div><div class="ttdeci">@ PREC_COMPARISON</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l01721">wren_compiler.c:1721</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_aa4e7d1a473d0280792d98ddb184d3006aadadbfbd7d5f8fb39a22da4c406567ef"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#aa4e7d1a473d0280792d98ddb184d3006aadadbfbd7d5f8fb39a22da4c406567ef">PREC_BITWISE_AND</a></div><div class="ttdeci">@ PREC_BITWISE_AND</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l01724">wren_compiler.c:1724</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_aa4e7d1a473d0280792d98ddb184d3006abe4cbc14e17bf6505d055c95368ca2e5"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#aa4e7d1a473d0280792d98ddb184d3006abe4cbc14e17bf6505d055c95368ca2e5">PREC_BITWISE_OR</a></div><div class="ttdeci">@ PREC_BITWISE_OR</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l01722">wren_compiler.c:1722</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_aa4e7d1a473d0280792d98ddb184d3006af6f26d1f69e85719e3acdb44ac4ee4ee"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#aa4e7d1a473d0280792d98ddb184d3006af6f26d1f69e85719e3acdb44ac4ee4ee">PREC_LOGICAL_AND</a></div><div class="ttdeci">@ PREC_LOGICAL_AND</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l01718">wren_compiler.c:1718</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_aa4e7d1a473d0280792d98ddb184d3006af8854b546d1ca4c09e1f8684a3cd6af3"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#aa4e7d1a473d0280792d98ddb184d3006af8854b546d1ca4c09e1f8684a3cd6af3">PREC_TERM</a></div><div class="ttdeci">@ PREC_TERM</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l01727">wren_compiler.c:1727</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_aa520fbf142ba1e7e659590c07da31921"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921">TokenType</a></div><div class="ttdeci">TokenType</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00053">wren_compiler.c:54</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_aa520fbf142ba1e7e659590c07da31921a00a4852749fa7e7e4675f7843ae16642"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a00a4852749fa7e7e4675f7843ae16642">TOKEN_IMPORT</a></div><div class="ttdeci">@ TOKEN_IMPORT</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00099">wren_compiler.c:99</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_aa520fbf142ba1e7e659590c07da31921a1109083cbeff0c33b619eb9b3177940a"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a1109083cbeff0c33b619eb9b3177940a">TOKEN_STAR</a></div><div class="ttdeci">@ TOKEN_STAR</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00066">wren_compiler.c:66</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_aa520fbf142ba1e7e659590c07da31921a1217e03cafd8282f9f0cf7709f6b04b1"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a1217e03cafd8282f9f0cf7709f6b04b1">TOKEN_SUPER</a></div><div class="ttdeci">@ TOKEN_SUPER</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00106">wren_compiler.c:106</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_aa520fbf142ba1e7e659590c07da31921a1331d6f8b29f0469958ccb3ac34fc335"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a1331d6f8b29f0469958ccb3ac34fc335">TOKEN_STATIC_FIELD</a></div><div class="ttdeci">@ TOKEN_STATIC_FIELD</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00113">wren_compiler.c:113</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_aa520fbf142ba1e7e659590c07da31921a160171b541dcf45a3bd712598963ea39"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a160171b541dcf45a3bd712598963ea39">TOKEN_MINUS</a></div><div class="ttdeci">@ TOKEN_MINUS</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00071">wren_compiler.c:71</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_aa520fbf142ba1e7e659590c07da31921a16431c3218c17195ca372d1a9ac55c09"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a16431c3218c17195ca372d1a9ac55c09">TOKEN_AMP</a></div><div class="ttdeci">@ TOKEN_AMP</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00077">wren_compiler.c:77</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_aa520fbf142ba1e7e659590c07da31921a1c897c05771e2ebb01729d415d99308c"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a1c897c05771e2ebb01729d415d99308c">TOKEN_RIGHT_BRACE</a></div><div class="ttdeci">@ TOKEN_RIGHT_BRACE</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00060">wren_compiler.c:60</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_aa520fbf142ba1e7e659590c07da31921a221bd5c5f9c87bfb8bd33243a49b2f54"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a221bd5c5f9c87bfb8bd33243a49b2f54">TOKEN_HASH</a></div><div class="ttdeci">@ TOKEN_HASH</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00069">wren_compiler.c:69</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_aa520fbf142ba1e7e659590c07da31921a2dd89e6192a4d3a7aee35c99a5f88075"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a2dd89e6192a4d3a7aee35c99a5f88075">TOKEN_TRUE</a></div><div class="ttdeci">@ TOKEN_TRUE</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00108">wren_compiler.c:108</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_aa520fbf142ba1e7e659590c07da31921a48b74bd21671b5a4a713dd8ddf57c917"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a48b74bd21671b5a4a713dd8ddf57c917">TOKEN_BANG</a></div><div class="ttdeci">@ TOKEN_BANG</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00079">wren_compiler.c:79</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_aa520fbf142ba1e7e659590c07da31921a56d9afac7a1508302f85a77d1f3ba8b2"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a56d9afac7a1508302f85a77d1f3ba8b2">TOKEN_NAME</a></div><div class="ttdeci">@ TOKEN_NAME</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00114">wren_compiler.c:114</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_aa520fbf142ba1e7e659590c07da31921a5ad99434caa3395bb10d41afcb7305f8"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a5ad99434caa3395bb10d41afcb7305f8">TOKEN_CARET</a></div><div class="ttdeci">@ TOKEN_CARET</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00076">wren_compiler.c:76</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_aa520fbf142ba1e7e659590c07da31921a5c0ace9d9e5399a93f5603e145cc48d4"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a5c0ace9d9e5399a93f5603e145cc48d4">TOKEN_LTLT</a></div><div class="ttdeci">@ TOKEN_LTLT</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00072">wren_compiler.c:72</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_aa520fbf142ba1e7e659590c07da31921a5ebaf8c36b5d84b1a717dfce0df266a8"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a5ebaf8c36b5d84b1a717dfce0df266a8">TOKEN_IS</a></div><div class="ttdeci">@ TOKEN_IS</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00102">wren_compiler.c:102</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_aa520fbf142ba1e7e659590c07da31921a60e4bab14680522185007fe87240e707"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a60e4bab14680522185007fe87240e707">TOKEN_LEFT_BRACKET</a></div><div class="ttdeci">@ TOKEN_LEFT_BRACKET</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00057">wren_compiler.c:57</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_aa520fbf142ba1e7e659590c07da31921a6aaf2e9d817fd7cd807c6fc2f6f6fe5c"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a6aaf2e9d817fd7cd807c6fc2f6f6fe5c">TOKEN_FALSE</a></div><div class="ttdeci">@ TOKEN_FALSE</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00095">wren_compiler.c:95</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_aa520fbf142ba1e7e659590c07da31921a6b3f6ac3cbe7a3bacd547075bd7212d4"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a6b3f6ac3cbe7a3bacd547075bd7212d4">TOKEN_INTERPOLATION</a></div><div class="ttdeci">@ TOKEN_INTERPOLATION</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00133">wren_compiler.c:133</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_aa520fbf142ba1e7e659590c07da31921a6d39f93a351e0b853977018d48c47ca2"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a6d39f93a351e0b853977018d48c47ca2">TOKEN_IF</a></div><div class="ttdeci">@ TOKEN_IF</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00098">wren_compiler.c:98</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_aa520fbf142ba1e7e659590c07da31921a710fd04fc31582717222d447b5985a1f"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a710fd04fc31582717222d447b5985a1f">TOKEN_CLASS</a></div><div class="ttdeci">@ TOKEN_CLASS</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00092">wren_compiler.c:92</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_aa520fbf142ba1e7e659590c07da31921a733edc9ed5eee3298868693b3bce7561"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a733edc9ed5eee3298868693b3bce7561">TOKEN_CONTINUE</a></div><div class="ttdeci">@ TOKEN_CONTINUE</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00091">wren_compiler.c:91</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_aa520fbf142ba1e7e659590c07da31921a7a01d5885def4a924f815ab4afdb477b"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a7a01d5885def4a924f815ab4afdb477b">TOKEN_VAR</a></div><div class="ttdeci">@ TOKEN_VAR</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00109">wren_compiler.c:109</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_aa520fbf142ba1e7e659590c07da31921a7bb488da02f984b2c055687da13856e2"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a7bb488da02f984b2c055687da13856e2">TOKEN_SLASH</a></div><div class="ttdeci">@ TOKEN_SLASH</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00067">wren_compiler.c:67</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_aa520fbf142ba1e7e659590c07da31921a7db8f1fe352e6cf1ed6b880432b585d5"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a7db8f1fe352e6cf1ed6b880432b585d5">TOKEN_RIGHT_PAREN</a></div><div class="ttdeci">@ TOKEN_RIGHT_PAREN</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00056">wren_compiler.c:56</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_aa520fbf142ba1e7e659590c07da31921a7f0601b40fea37f0d4598b0a61f828f2"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a7f0601b40fea37f0d4598b0a61f828f2">TOKEN_PLUS</a></div><div class="ttdeci">@ TOKEN_PLUS</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00070">wren_compiler.c:70</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_aa520fbf142ba1e7e659590c07da31921a7f752de15cbf51e0933afbddd6ad8d82"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a7f752de15cbf51e0933afbddd6ad8d82">TOKEN_PIPEPIPE</a></div><div class="ttdeci">@ TOKEN_PIPEPIPE</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00075">wren_compiler.c:75</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_aa520fbf142ba1e7e659590c07da31921a7ffecbddda5a17a256351520595ff925"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a7ffecbddda5a17a256351520595ff925">TOKEN_PERCENT</a></div><div class="ttdeci">@ TOKEN_PERCENT</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00068">wren_compiler.c:68</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_aa520fbf142ba1e7e659590c07da31921a8d265e17914bc733c8b9a880dd097a9e"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a8d265e17914bc733c8b9a880dd097a9e">TOKEN_COMMA</a></div><div class="ttdeci">@ TOKEN_COMMA</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00065">wren_compiler.c:65</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_aa520fbf142ba1e7e659590c07da31921a9215d0c00f6467e5491576492e73bbec"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a9215d0c00f6467e5491576492e73bbec">TOKEN_GTEQ</a></div><div class="ttdeci">@ TOKEN_GTEQ</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00086">wren_compiler.c:86</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_aa520fbf142ba1e7e659590c07da31921a92a2f9e402c2beb509fe0d879017eae4"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a92a2f9e402c2beb509fe0d879017eae4">TOKEN_LTEQ</a></div><div class="ttdeci">@ TOKEN_LTEQ</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00085">wren_compiler.c:85</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_aa520fbf142ba1e7e659590c07da31921a92a35ac6329421e77882bf3739a75e47"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a92a35ac6329421e77882bf3739a75e47">TOKEN_COLON</a></div><div class="ttdeci">@ TOKEN_COLON</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00061">wren_compiler.c:61</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_aa520fbf142ba1e7e659590c07da31921a93000ce4e0f00f6f294a98192f705910"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921a93000ce4e0f00f6f294a98192f705910">TOKEN_PIPE</a></div><div class="ttdeci">@ TOKEN_PIPE</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00074">wren_compiler.c:74</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_aa520fbf142ba1e7e659590c07da31921aa130df27256cd45f5781fc74deeb50dc"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921aa130df27256cd45f5781fc74deeb50dc">TOKEN_EOF</a></div><div class="ttdeci">@ TOKEN_EOF</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00139">wren_compiler.c:138</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_aa520fbf142ba1e7e659590c07da31921aa3667833295e7097424957cf261b2527"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921aa3667833295e7097424957cf261b2527">TOKEN_LINE</a></div><div class="ttdeci">@ TOKEN_LINE</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00135">wren_compiler.c:135</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_aa520fbf142ba1e7e659590c07da31921aa3aef76940413ed1a121e71fa1b82519"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921aa3aef76940413ed1a121e71fa1b82519">TOKEN_LT</a></div><div class="ttdeci">@ TOKEN_LT</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00083">wren_compiler.c:83</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_aa520fbf142ba1e7e659590c07da31921aa42fbee15a56484e7cc6daaaa552107a"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921aa42fbee15a56484e7cc6daaaa552107a">TOKEN_RIGHT_BRACKET</a></div><div class="ttdeci">@ TOKEN_RIGHT_BRACKET</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00058">wren_compiler.c:58</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_aa520fbf142ba1e7e659590c07da31921aa5d81c076968a75a50ec61593495d894"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921aa5d81c076968a75a50ec61593495d894">TOKEN_GT</a></div><div class="ttdeci">@ TOKEN_GT</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00084">wren_compiler.c:84</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_aa520fbf142ba1e7e659590c07da31921aa9d81762207f9f71bc650cbd9a0c4202"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921aa9d81762207f9f71bc650cbd9a0c4202">TOKEN_BREAK</a></div><div class="ttdeci">@ TOKEN_BREAK</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00090">wren_compiler.c:90</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_aa520fbf142ba1e7e659590c07da31921aab6505c0fd8126a58622ad931de3ce86"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921aab6505c0fd8126a58622ad931de3ce86">TOKEN_IN</a></div><div class="ttdeci">@ TOKEN_IN</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00101">wren_compiler.c:101</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_aa520fbf142ba1e7e659590c07da31921aaca94097ec53cbcf93cdc0a493251040"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921aaca94097ec53cbcf93cdc0a493251040">TOKEN_FOR</a></div><div class="ttdeci">@ TOKEN_FOR</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00096">wren_compiler.c:96</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_aa520fbf142ba1e7e659590c07da31921ab2af03662d780038284bc9c09e11c452"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921ab2af03662d780038284bc9c09e11c452">TOKEN_NUMBER</a></div><div class="ttdeci">@ TOKEN_NUMBER</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00115">wren_compiler.c:115</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_aa520fbf142ba1e7e659590c07da31921ab2be2b4740bdcc2c060f7e31d128567e"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921ab2be2b4740bdcc2c060f7e31d128567e">TOKEN_EQEQ</a></div><div class="ttdeci">@ TOKEN_EQEQ</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00087">wren_compiler.c:87</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_aa520fbf142ba1e7e659590c07da31921ab565ebfaaa53dcee6ddda201e270733e"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921ab565ebfaaa53dcee6ddda201e270733e">TOKEN_DOT</a></div><div class="ttdeci">@ TOKEN_DOT</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00062">wren_compiler.c:62</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_aa520fbf142ba1e7e659590c07da31921ab958e67632477fb20b223edfef5a4a3f"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921ab958e67632477fb20b223edfef5a4a3f">TOKEN_LEFT_PAREN</a></div><div class="ttdeci">@ TOKEN_LEFT_PAREN</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00055">wren_compiler.c:55</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_aa520fbf142ba1e7e659590c07da31921abb75564bfe995225a6d177446540c352"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921abb75564bfe995225a6d177446540c352">TOKEN_LEFT_BRACE</a></div><div class="ttdeci">@ TOKEN_LEFT_BRACE</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00059">wren_compiler.c:59</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_aa520fbf142ba1e7e659590c07da31921abbfc577192f2423b39a5f693e260b615"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921abbfc577192f2423b39a5f693e260b615">TOKEN_ERROR</a></div><div class="ttdeci">@ TOKEN_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00137">wren_compiler.c:137</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_aa520fbf142ba1e7e659590c07da31921abfb5ad8d3eb3f9245ce9f0beede5b5aa"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921abfb5ad8d3eb3f9245ce9f0beede5b5aa">TOKEN_AMPAMP</a></div><div class="ttdeci">@ TOKEN_AMPAMP</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00078">wren_compiler.c:78</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_aa520fbf142ba1e7e659590c07da31921ac39dbc9a4fa9be2e062e38ff7a5764f4"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921ac39dbc9a4fa9be2e062e38ff7a5764f4">TOKEN_GTGT</a></div><div class="ttdeci">@ TOKEN_GTGT</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00073">wren_compiler.c:73</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_aa520fbf142ba1e7e659590c07da31921acc13b68e6911dd0080248030ecb95cd6"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921acc13b68e6911dd0080248030ecb95cd6">TOKEN_WHILE</a></div><div class="ttdeci">@ TOKEN_WHILE</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00110">wren_compiler.c:110</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_aa520fbf142ba1e7e659590c07da31921adb8474a4aab7093a6fa4f4e2f8ed4d35"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921adb8474a4aab7093a6fa4f4e2f8ed4d35">TOKEN_BANGEQ</a></div><div class="ttdeci">@ TOKEN_BANGEQ</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00088">wren_compiler.c:88</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_aa520fbf142ba1e7e659590c07da31921ae4def7ca080dbd4f6bcaac5a6889a37a"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921ae4def7ca080dbd4f6bcaac5a6889a37a">TOKEN_NULL</a></div><div class="ttdeci">@ TOKEN_NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00103">wren_compiler.c:103</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_aa520fbf142ba1e7e659590c07da31921ae52dd0b54e9522dc1dce5f6294f26b08"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921ae52dd0b54e9522dc1dce5f6294f26b08">TOKEN_RETURN</a></div><div class="ttdeci">@ TOKEN_RETURN</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00104">wren_compiler.c:104</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_aa520fbf142ba1e7e659590c07da31921ae9d8c03a94ac5b659addd3bd0a69072c"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921ae9d8c03a94ac5b659addd3bd0a69072c">TOKEN_QUESTION</a></div><div class="ttdeci">@ TOKEN_QUESTION</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00081">wren_compiler.c:81</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_aa520fbf142ba1e7e659590c07da31921aeb355a0f42c7b11efb9be89700b1d502"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921aeb355a0f42c7b11efb9be89700b1d502">TOKEN_TILDE</a></div><div class="ttdeci">@ TOKEN_TILDE</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00080">wren_compiler.c:80</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_aa520fbf142ba1e7e659590c07da31921aeba19c29eb600289d1e973bf335139fe"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921aeba19c29eb600289d1e973bf335139fe">TOKEN_EQ</a></div><div class="ttdeci">@ TOKEN_EQ</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00082">wren_compiler.c:82</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_aa520fbf142ba1e7e659590c07da31921aec8baaf1a4cefc29ecae2da1ae2aa557"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921aec8baaf1a4cefc29ecae2da1ae2aa557">TOKEN_DOTDOTDOT</a></div><div class="ttdeci">@ TOKEN_DOTDOTDOT</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00064">wren_compiler.c:64</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_aa520fbf142ba1e7e659590c07da31921af1444e318c1d452a3c6dbb924a7e932a"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921af1444e318c1d452a3c6dbb924a7e932a">TOKEN_ELSE</a></div><div class="ttdeci">@ TOKEN_ELSE</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00094">wren_compiler.c:94</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_aa520fbf142ba1e7e659590c07da31921af510cb3065af330dd089ba71aba43756"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921af510cb3065af330dd089ba71aba43756">TOKEN_CONSTRUCT</a></div><div class="ttdeci">@ TOKEN_CONSTRUCT</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00093">wren_compiler.c:93</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_aa520fbf142ba1e7e659590c07da31921af7597f04537d607509a57ce101c3a6de"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921af7597f04537d607509a57ce101c3a6de">TOKEN_FOREIGN</a></div><div class="ttdeci">@ TOKEN_FOREIGN</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00097">wren_compiler.c:97</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_aa520fbf142ba1e7e659590c07da31921af902561d021c19798c960f45d013575b"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921af902561d021c19798c960f45d013575b">TOKEN_THIS</a></div><div class="ttdeci">@ TOKEN_THIS</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00107">wren_compiler.c:107</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_aa520fbf142ba1e7e659590c07da31921afb4035e70eacef7155e4c38833f93cbc"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921afb4035e70eacef7155e4c38833f93cbc">TOKEN_AS</a></div><div class="ttdeci">@ TOKEN_AS</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00100">wren_compiler.c:100</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_aa520fbf142ba1e7e659590c07da31921afbb543acd52617c9616c3c4e0c6093d0"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921afbb543acd52617c9616c3c4e0c6093d0">TOKEN_FIELD</a></div><div class="ttdeci">@ TOKEN_FIELD</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00112">wren_compiler.c:112</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_aa520fbf142ba1e7e659590c07da31921afca69b5a56f15fbc4af6ad4b99e35296"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921afca69b5a56f15fbc4af6ad4b99e35296">TOKEN_STATIC</a></div><div class="ttdeci">@ TOKEN_STATIC</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00105">wren_compiler.c:105</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_aa520fbf142ba1e7e659590c07da31921afcaa8f23ed1d21aa5779451ed3c243ef"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921afcaa8f23ed1d21aa5779451ed3c243ef">TOKEN_STRING</a></div><div class="ttdeci">@ TOKEN_STRING</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00119">wren_compiler.c:119</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_aa520fbf142ba1e7e659590c07da31921afe0f79003a508c29b6f1312a28102a4c"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#aa520fbf142ba1e7e659590c07da31921afe0f79003a508c29b6f1312a28102a4c">TOKEN_DOTDOT</a></div><div class="ttdeci">@ TOKEN_DOTDOT</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00063">wren_compiler.c:63</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_aab0a13b4d7d1c5702629f14d89297fbb"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#aab0a13b4d7d1c5702629f14d89297fbb">INFIX</a></div><div class="ttdeci">#define INFIX(prec, fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l02744">wren_compiler.c:2744</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_aab6a09fed2816d59ff4ec4b2d3b00e3a"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#aab6a09fed2816d59ff4ec4b2d3b00e3a">finishParameterList</a></div><div class="ttdeci">static void finishParameterList(Compiler *compiler, Signature *signature)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l01839">wren_compiler.c:1839</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_aac2c091d1986fa181a49452185f36799"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#aac2c091d1986fa181a49452185f36799">loadVariable</a></div><div class="ttdeci">static void loadVariable(Compiler *compiler, Variable variable)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l02104">wren_compiler.c:2104</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_aae9d87e942ec21e7de756387b4f28f6a"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#aae9d87e942ec21e7de756387b4f28f6a">mixedSignature</a></div><div class="ttdeci">void mixedSignature(Compiler *compiler, Signature *signature)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l02620">wren_compiler.c:2620</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_aaecc53892786f2fa11e682f633af84c6"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#aaecc53892786f2fa11e682f633af84c6">Scope</a></div><div class="ttdeci">Scope</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00381">wren_compiler.c:382</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_aaecc53892786f2fa11e682f633af84c6a9c17ce3e01d23ef646abc7a330a1244a"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#aaecc53892786f2fa11e682f633af84c6a9c17ce3e01d23ef646abc7a330a1244a">SCOPE_UPVALUE</a></div><div class="ttdeci">@ SCOPE_UPVALUE</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00387">wren_compiler.c:387</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_aaecc53892786f2fa11e682f633af84c6aa4cd1d716be5988e72bb08902f33270e"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#aaecc53892786f2fa11e682f633af84c6aa4cd1d716be5988e72bb08902f33270e">SCOPE_MODULE</a></div><div class="ttdeci">@ SCOPE_MODULE</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00391">wren_compiler.c:390</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_aaecc53892786f2fa11e682f633af84c6af828bc82c537119c89b55d2db41ec75b"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#aaecc53892786f2fa11e682f633af84c6af828bc82c537119c89b55d2db41ec75b">SCOPE_LOCAL</a></div><div class="ttdeci">@ SCOPE_LOCAL</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00384">wren_compiler.c:384</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_aaf25e0c94fad40c04caf138b3f838484"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#aaf25e0c94fad40c04caf138b3f838484">readName</a></div><div class="ttdeci">static void readName(Parser *parser, TokenType type, char firstChar)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00818">wren_compiler.c:818</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_ab2a608b8c30efb11ff62686f61b95c05"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#ab2a608b8c30efb11ff62686f61b95c05">emitShort</a></div><div class="ttdeci">static void emitShort(Compiler *compiler, int arg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l01337">wren_compiler.c:1337</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_ab340843ddcc4e86bcca961782d54d1f6"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#ab340843ddcc4e86bcca961782d54d1f6">declareMethod</a></div><div class="ttdeci">static int declareMethod(Compiler *compiler, Signature *signature, const char *name, int length)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l03320">wren_compiler.c:3320</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_ab3f241e328328e3814e5244dde86ad98"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#ab3f241e328328e3814e5244dde86ad98">findUpvalue</a></div><div class="ttdeci">static int findUpvalue(Compiler *compiler, const char *name, int length)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l01577">wren_compiler.c:1577</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_ab71a28cb5b340c1121e54aa887f96d60"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#ab71a28cb5b340c1121e54aa887f96d60">MAX_UPVALUES</a></div><div class="ttdeci">#define MAX_UPVALUES</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00029">wren_compiler.c:29</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_aba0b44d974c3aaf9e72e55ce709cc5ac"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#aba0b44d974c3aaf9e72e55ce709cc5ac">unaryOp</a></div><div class="ttdeci">static void unaryOp(Compiler *compiler, bool canAssign)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l02202">wren_compiler.c:2202</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_abc28d53c9cefc405f7f74cd877d037d1"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#abc28d53c9cefc405f7f74cd877d037d1">call</a></div><div class="ttdeci">static void call(Compiler *compiler, bool canAssign)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l02529">wren_compiler.c:2529</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_abcdd139278dedb26f772b0b373cdb7bf"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#abcdd139278dedb26f772b0b373cdb7bf">readNumber</a></div><div class="ttdeci">static void readNumber(Parser *parser)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00785">wren_compiler.c:785</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_ac0fd522b34e48c85c192b29593a79fb9"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#ac0fd522b34e48c85c192b29593a79fb9">emitAttributeMethods</a></div><div class="ttdeci">static void emitAttributeMethods(Compiler *compiler, ObjMap *attributes)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l04040">wren_compiler.c:4040</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_ac0ffb0aaacc8800a0580e625000e333a"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#ac0ffb0aaacc8800a0580e625000e333a">makeNumber</a></div><div class="ttdeci">static void makeNumber(Parser *parser, bool isHex)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00747">wren_compiler.c:747</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_ac1514744dedaa4c087738a38405e3778"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#ac1514744dedaa4c087738a38405e3778">finishBody</a></div><div class="ttdeci">static void finishBody(Compiler *compiler)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l01803">wren_compiler.c:1803</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_ac159f93f4e0bca9340f8bf13dda218d9"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#ac159f93f4e0bca9340f8bf13dda218d9">addUpvalue</a></div><div class="ttdeci">static int addUpvalue(Compiler *compiler, bool isLocal, int index)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l01551">wren_compiler.c:1551</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_ac193a2eaa589f497f8147efe1dfca7a8"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#ac193a2eaa589f497f8147efe1dfca7a8">resolveLocal</a></div><div class="ttdeci">static int resolveLocal(Compiler *compiler, const char *name, int length)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l01532">wren_compiler.c:1532</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_ac20f67474558b6bf12fd74dd573ee7af"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#ac20f67474558b6bf12fd74dd573ee7af">expression</a></div><div class="ttdeci">static void expression(Compiler *compiler)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l02855">wren_compiler.c:2855</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_ac30bdcdc8f7ab87bb8f844b7d2bcd113"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#ac30bdcdc8f7ab87bb8f844b7d2bcd113">emitJump</a></div><div class="ttdeci">static int emitJump(Compiler *compiler, Code instruction)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l01362">wren_compiler.c:1362</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_ac5855f1df10bbda532ef62084fda7df4"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#ac5855f1df10bbda532ef62084fda7df4">readHexNumber</a></div><div class="ttdeci">static void readHexNumber(Parser *parser)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00773">wren_compiler.c:773</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_ac5f5084320f6c2e1493095709ece0678"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#ac5f5084320f6c2e1493095709ece0678">getEnclosingClass</a></div><div class="ttdeci">static ClassInfo * getEnclosingClass(Compiler *compiler)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l02236">wren_compiler.c:2236</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_ac712f9fee52f55578ff47f1d4d40f27f"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#ac712f9fee52f55578ff47f1d4d40f27f">peekNextChar</a></div><div class="ttdeci">static char peekNextChar(Parser *parser)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00645">wren_compiler.c:645</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_ac8d1d75280e54ef6c6d6367ff1f26aef"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#ac8d1d75280e54ef6c6d6367ff1f26aef">signatureToString</a></div><div class="ttdeci">static void signatureToString(Signature *signature, char name[MAX_METHOD_SIGNATURE], int *length)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l01879">wren_compiler.c:1879</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_ac9bdea9edffa976d376376d9ca6d042a"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#ac9bdea9edffa976d376376d9ca6d042a">this_</a></div><div class="ttdeci">static void this_(Compiler *compiler, bool canAssign)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l02495">wren_compiler.c:2495</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_acb2713c83e03d07b11beeca8a9f58539"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#acb2713c83e03d07b11beeca8a9f58539">classDefinition</a></div><div class="ttdeci">static void classDefinition(Compiler *compiler, bool isForeign)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l03514">wren_compiler.c:3514</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_acbf1748d7e097833a292ee0caaa50d05"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#acbf1748d7e097833a292ee0caaa50d05">ignoreNewlines</a></div><div class="ttdeci">static void ignoreNewlines(Compiler *compiler)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l01290">wren_compiler.c:1290</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_ad162f798273bfdd4b16efc1ecc197ba3"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#ad162f798273bfdd4b16efc1ecc197ba3">declareNamedVariable</a></div><div class="ttdeci">static int declareNamedVariable(Compiler *compiler)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l01460">wren_compiler.c:1460</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_ad1e91368551c7720efd9105fc37570a1"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#ad1e91368551c7720efd9105fc37570a1">methodSymbol</a></div><div class="ttdeci">static int methodSymbol(Compiler *compiler, const char *name, int length)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l01853">wren_compiler.c:1853</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_ad26f260d12aca9c0b1bd0ae201f760c1"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#ad26f260d12aca9c0b1bd0ae201f760c1">copyAttributes</a></div><div class="ttdeci">static void copyAttributes(Compiler *compiler, ObjMap *into)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l04076">wren_compiler.c:4076</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_ad3240fb788071077fd8bc9e481079cda"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#ad3240fb788071077fd8bc9e481079cda">pushScope</a></div><div class="ttdeci">static void pushScope(Compiler *compiler)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l01480">wren_compiler.c:1480</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_ad596cab10744611b6321d2f883acf5f1"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#ad596cab10744611b6321d2f883acf5f1">emitClassAttributes</a></div><div class="ttdeci">static void emitClassAttributes(Compiler *compiler, ClassInfo *classInfo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l04059">wren_compiler.c:4059</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_ad5bbc381038389282731d29e3f95971f"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#ad5bbc381038389282731d29e3f95971f">makeToken</a></div><div class="ttdeci">static void makeToken(Parser *parser, TokenType type)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00671">wren_compiler.c:671</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_ad66cbe4ed73e01794803b167c7430752"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#ad66cbe4ed73e01794803b167c7430752">emitByte</a></div><div class="ttdeci">static int emitByte(Compiler *compiler, int byte)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l01312">wren_compiler.c:1312</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_ad7cf94c2202263aa2f1c991b8ed0c933"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#ad7cf94c2202263aa2f1c991b8ed0c933">addToAttributeGroup</a></div><div class="ttdeci">static void addToAttributeGroup(Compiler *compiler, Value group, Value key, Value value)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l03952">wren_compiler.c:3952</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_ad911c5983e96a9527dac91f1c86607ec"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#ad911c5983e96a9527dac91f1c86607ec">finishBlock</a></div><div class="ttdeci">static bool finishBlock(Compiler *compiler)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l01771">wren_compiler.c:1771</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_ad9ec60a22d39b63da0a035113d8a39d0"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#ad9ec60a22d39b63da0a035113d8a39d0">finishArgumentList</a></div><div class="ttdeci">static void finishArgumentList(Compiler *compiler, Signature *signature)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l01959">wren_compiler.c:1959</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_add86bdd6e3897cf94eba510d97e12f25"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#add86bdd6e3897cf94eba510d97e12f25">field</a></div><div class="ttdeci">static void field(Compiler *compiler, bool canAssign)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l02242">wren_compiler.c:2242</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_addf5ec070e9499d36b7f2009ce736076"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#addf5ec070e9499d36b7f2009ce736076">UNUSED</a></div><div class="ttdeci">#define UNUSED</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l02742">wren_compiler.c:2742</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_adfb08e31817eba31a39cbab6810f5756"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#adfb08e31817eba31a39cbab6810f5756">ERROR_MESSAGE_SIZE</a></div><div class="ttdeci">#define ERROR_MESSAGE_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00051">wren_compiler.c:51</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_ae4e9f96269b4e830731a0c5fcdb28d97"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#ae4e9f96269b4e830731a0c5fcdb28d97">literal</a></div><div class="ttdeci">static void literal(Compiler *compiler, bool canAssign)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l02421">wren_compiler.c:2421</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_ae65b6e8e2808fdfbc9bd8078332f4ca9"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#ae65b6e8e2808fdfbc9bd8078332f4ca9">ifStatement</a></div><div class="ttdeci">static void ifStatement(Compiler *compiler)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l03123">wren_compiler.c:3123</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_ae6988eadccdfeea0f29b0c2d0d7323ae"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#ae6988eadccdfeea0f29b0c2d0d7323ae">MAX_CONSTANTS</a></div><div class="ttdeci">#define MAX_CONSTANTS</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00034">wren_compiler.c:34</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_ae74f1b74c02154518d7162a728d6118a"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#ae74f1b74c02154518d7162a728d6118a">error</a></div><div class="ttdeci">static void error(Compiler *compiler, const char *format,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00459">wren_compiler.c:459</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_ae9fe190a3aeb1626737b30b2c4f90f0a"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#ae9fe190a3aeb1626737b30b2c4f90f0a">wrenMarkCompiler</a></div><div class="ttdeci">void wrenMarkCompiler(WrenVM *vm, Compiler *compiler)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l03904">wren_compiler.c:3904</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_aeb23f2220ff2337e38feb478573e24fb"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#aeb23f2220ff2337e38feb478573e24fb">defineVariable</a></div><div class="ttdeci">static void defineVariable(Compiler *compiler, int symbol)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l01467">wren_compiler.c:1467</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_aeca856979ea544d751ca03e0f3b9204c"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#aeca856979ea544d751ca03e0f3b9204c">signatureSymbol</a></div><div class="ttdeci">static int signatureSymbol(Compiler *compiler, Signature *signature)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l01925">wren_compiler.c:1925</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_aed2d1974206db7567f37dc7e9096f086"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#aed2d1974206db7567f37dc7e9096f086">getEnclosingClassCompiler</a></div><div class="ttdeci">static Compiler * getEnclosingClassCompiler(Compiler *compiler)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l02223">wren_compiler.c:2223</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_aed515d74eb0faafbaa8d63f05daf90b9"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#aed515d74eb0faafbaa8d63f05daf90b9">consume</a></div><div class="ttdeci">static void consume(Compiler *compiler, TokenType expected, const char *errorMessage)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l01266">wren_compiler.c:1266</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_aedcc023430c3c9b1891dbdc4f7b8f0b8"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#aedcc023430c3c9b1891dbdc4f7b8f0b8">wrenCompile</a></div><div class="ttdeci">ObjFn * wrenCompile(WrenVM *vm, ObjModule *module, const char *source, bool isExpression, bool printErrors)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l03762">wren_compiler.c:3762</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_aeead4115d1ddc029dcd2a2b406cab6a9"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#aeead4115d1ddc029dcd2a2b406cab6a9">resolveNonmodule</a></div><div class="ttdeci">static Variable resolveNonmodule(Compiler *compiler, const char *name, int length)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l01618">wren_compiler.c:1618</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_af0278a0c6c812bdb67378f6b686499e6"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#af0278a0c6c812bdb67378f6b686499e6">forStatement</a></div><div class="ttdeci">static void forStatement(Compiler *compiler)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l03025">wren_compiler.c:3025</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_af17ed8f9c4320c542124f9f70dd05382"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#af17ed8f9c4320c542124f9f70dd05382">GrammarFn</a></div><div class="ttdeci">void(* GrammarFn)(Compiler *, bool canAssign)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l01734">wren_compiler.c:1734</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_af4fe195796c3e700b61d62dafd263295"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#af4fe195796c3e700b61d62dafd263295">match</a></div><div class="ttdeci">static bool match(Compiler *compiler, TokenType expected)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l01257">wren_compiler.c:1257</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_af8117cefc422a62d8544bc726143a24a"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#af8117cefc422a62d8544bc726143a24a">matchChar</a></div><div class="ttdeci">static bool matchChar(Parser *parser, char c)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l00662">wren_compiler.c:662</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_af83f50d55db1a996342186451b31d699"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#af83f50d55db1a996342186451b31d699">wrenBindMethodCode</a></div><div class="ttdeci">void wrenBindMethodCode(ObjClass *classObj, ObjFn *fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l03843">wren_compiler.c:3843</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_af9ced5f005c5b4903f97418d7070c0e5"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#af9ced5f005c5b4903f97418d7070c0e5">testExitLoop</a></div><div class="ttdeci">static void testExitLoop(Compiler *compiler)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l02979">wren_compiler.c:2979</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_afaaf49cc08d58cc733fc68c2c1696bb5"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#afaaf49cc08d58cc733fc68c2c1696bb5">and_</a></div><div class="ttdeci">static void and_(Compiler *compiler, bool canAssign)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l02536">wren_compiler.c:2536</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_afab80431e74139737000d66fdcf06e1d"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#afab80431e74139737000d66fdcf06e1d">PREFIX_OPERATOR</a></div><div class="ttdeci">#define PREFIX_OPERATOR(name)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l02746">wren_compiler.c:2746</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_afbde727a3fafa6041cfd3ffbe17c8e4f"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#afbde727a3fafa6041cfd3ffbe17c8e4f">stringInterpolation</a></div><div class="ttdeci">static void stringInterpolation(Compiler *compiler, bool canAssign)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l02436">wren_compiler.c:2436</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_afd4e5fb23443ab31b9160488d6de132c"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#afd4e5fb23443ab31b9160488d6de132c">signatureParameterList</a></div><div class="ttdeci">static void signatureParameterList(char name[MAX_METHOD_SIGNATURE], int *length, int numParams, char leftBracket, char rightBracket)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l01861">wren_compiler.c:1861</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_afd57b3f70dd82ffc95f0442863f34ad6"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#afd57b3f70dd82ffc95f0442863f34ad6">getByteCountForArguments</a></div><div class="ttdeci">static int getByteCountForArguments(const uint8_t *bytecode, const Value *constants, int ip)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l02862">wren_compiler.c:2862</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_aff6717562bb3c8c6b5d6f23b43b510b2"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#aff6717562bb3c8c6b5d6f23b43b510b2">constructorSignature</a></div><div class="ttdeci">void constructorSignature(Compiler *compiler, Signature *signature)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l02713">wren_compiler.c:2713</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_aff9308c9745d77724d06dbc7f1e7bd34"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#aff9308c9745d77724d06dbc7f1e7bd34">nextToken</a></div><div class="ttdeci">static void nextToken(Parser *parser)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l01051">wren_compiler.c:1051</a></div></div>
<div class="ttc" id="awren__compiler_8c_html_affafb7a1d6b4eb1e2efd926e875379fb"><div class="ttname"><a href="../../d4/de2/wren__compiler_8c.html#affafb7a1d6b4eb1e2efd926e875379fb">createConstructor</a></div><div class="ttdeci">static void createConstructor(Compiler *compiler, Signature *signature, int initializerSymbol)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de2/wren__compiler_8c_source.html#l03279">wren_compiler.c:3279</a></div></div>
<div class="ttc" id="awren__compiler_8h_html"><div class="ttname"><a href="../../d7/db9/wren__compiler_8h.html">wren_compiler.h</a></div></div>
<div class="ttc" id="awren__compiler_8h_html_a49ab53997891041cac4a764241f75e81"><div class="ttname"><a href="../../d7/db9/wren__compiler_8h.html#a49ab53997891041cac4a764241f75e81">Compiler</a></div><div class="ttdeci">struct sCompiler Compiler</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db9/wren__compiler_8h_source.html#l00001">wren_compiler.h:7</a></div></div>
<div class="ttc" id="awren__debug_8c_html_aa2c414b0072f4d1437303ff0cf5eb371"><div class="ttname"><a href="../../d8/df0/wren__debug_8c.html#aa2c414b0072f4d1437303ff0cf5eb371">wrenDumpCode</a></div><div class="ttdeci">void wrenDumpCode(WrenVM *vm, ObjFn *fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/df0/wren__debug_8c_source.html#l00361">wren_debug.c:361</a></div></div>
<div class="ttc" id="awren__debug_8h_html"><div class="ttname"><a href="../../dd/df7/wren__debug_8h.html">wren_debug.h</a></div></div>
<div class="ttc" id="awren__opcodes_8h_html"><div class="ttname"><a href="../../da/dc1/wren__opcodes_8h.html">wren_opcodes.h</a></div></div>
<div class="ttc" id="awren__utils_8c_html_a13c5ea2d24f15c1cf197e685b444401d"><div class="ttname"><a href="../../de/d0d/wren__utils_8c.html#a13c5ea2d24f15c1cf197e685b444401d">wrenUtf8Encode</a></div><div class="ttdeci">int wrenUtf8Encode(int value, uint8_t *bytes)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d0d/wren__utils_8c_source.html#l00078">wren_utils.c:78</a></div></div>
<div class="ttc" id="awren__utils_8c_html_a2b92b4262704a7cebf6f3bd0a853b1eb"><div class="ttname"><a href="../../de/d0d/wren__utils_8c.html#a2b92b4262704a7cebf6f3bd0a853b1eb">wrenSymbolTableFind</a></div><div class="ttdeci">int wrenSymbolTableFind(const SymbolTable *symbols, const char *name, size_t length)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d0d/wren__utils_8c_source.html#l00043">wren_utils.c:43</a></div></div>
<div class="ttc" id="awren__utils_8c_html_a6b05b8c90f08e2ad66ba510f591042c5"><div class="ttname"><a href="../../de/d0d/wren__utils_8c.html#a6b05b8c90f08e2ad66ba510f591042c5">wrenSymbolTableEnsure</a></div><div class="ttdeci">int wrenSymbolTableEnsure(WrenVM *vm, SymbolTable *symbols, const char *name, size_t length)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d0d/wren__utils_8c_source.html#l00032">wren_utils.c:32</a></div></div>
<div class="ttc" id="awren__utils_8c_html_a85fac2a3e202a3273d4a1616fa77a2af"><div class="ttname"><a href="../../de/d0d/wren__utils_8c.html#a85fac2a3e202a3273d4a1616fa77a2af">wrenUtf8EncodeNumBytes</a></div><div class="ttdeci">int wrenUtf8EncodeNumBytes(int value)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d0d/wren__utils_8c_source.html#l00067">wren_utils.c:67</a></div></div>
<div class="ttc" id="awren__utils_8c_html_aaa1cfa95ee6675d7e00041ea1392f1b1"><div class="ttname"><a href="../../de/d0d/wren__utils_8c.html#aaa1cfa95ee6675d7e00041ea1392f1b1">wrenSymbolTableInit</a></div><div class="ttdeci">void wrenSymbolTableInit(SymbolTable *symbols)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d0d/wren__utils_8c_source.html#l00010">wren_utils.c:10</a></div></div>
<div class="ttc" id="awren__utils_8c_html_adae9be1d00d2b9528bf753830354ee4f"><div class="ttname"><a href="../../de/d0d/wren__utils_8c.html#adae9be1d00d2b9528bf753830354ee4f">wrenSymbolTableClear</a></div><div class="ttdeci">void wrenSymbolTableClear(WrenVM *vm, SymbolTable *symbols)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d0d/wren__utils_8c_source.html#l00015">wren_utils.c:15</a></div></div>
<div class="ttc" id="awren__utils_8c_html_ae1d6dc2bc8c7ced1c6a1dcf9afc16110"><div class="ttname"><a href="../../de/d0d/wren__utils_8c.html#ae1d6dc2bc8c7ced1c6a1dcf9afc16110">wrenBlackenSymbolTable</a></div><div class="ttdeci">void wrenBlackenSymbolTable(WrenVM *vm, SymbolTable *symbolTable)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d0d/wren__utils_8c_source.html#l00056">wren_utils.c:56</a></div></div>
<div class="ttc" id="awren__utils_8h_html_a05bef0ea62f4104514bea6af6fdef135"><div class="ttname"><a href="../../d1/df1/wren__utils_8h.html#a05bef0ea62f4104514bea6af6fdef135">SymbolTable</a></div><div class="ttdeci">StringBuffer SymbolTable</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/df1/wren__utils_8h_source.html#l00071">wren_utils.h:71</a></div></div>
<div class="ttc" id="awren__value_8c_html_a10e46c257fbf0a57bb2acef361bff562"><div class="ttname"><a href="../../da/dbe/wren__value_8c.html#a10e46c257fbf0a57bb2acef361bff562">wrenMapSet</a></div><div class="ttdeci">void wrenMapSet(WrenVM *vm, ObjMap *map, Value key, Value value)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/wren__value_8c_source.html#l00582">wren_value.c:582</a></div></div>
<div class="ttc" id="awren__value_8c_html_a12dd4cef62629e819f9eecb3e002a3da"><div class="ttname"><a href="../../da/dbe/wren__value_8c.html#a12dd4cef62629e819f9eecb3e002a3da">wrenNewMap</a></div><div class="ttdeci">ObjMap * wrenNewMap(WrenVM *vm)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/wren__value_8c_source.html#l00363">wren_value.c:363</a></div></div>
<div class="ttc" id="awren__value_8c_html_a4d0488e1efabc7dbbdeca5dc860c9158"><div class="ttname"><a href="../../da/dbe/wren__value_8c.html#a4d0488e1efabc7dbbdeca5dc860c9158">wrenNewFunction</a></div><div class="ttdeci">ObjFn * wrenNewFunction(WrenVM *vm, ObjModule *module, int maxSlots)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/wren__value_8c_source.html#l00244">wren_value.c:244</a></div></div>
<div class="ttc" id="awren__value_8c_html_a53ba00979c5c328eeec49eb148799bb8"><div class="ttname"><a href="../../da/dbe/wren__value_8c.html#a53ba00979c5c328eeec49eb148799bb8">wrenNewList</a></div><div class="ttdeci">ObjList * wrenNewList(WrenVM *vm, uint32_t numElements)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/wren__value_8c_source.html#l00286">wren_value.c:286</a></div></div>
<div class="ttc" id="awren__value_8c_html_a5bee43c863271994d3c97825e1482a89"><div class="ttname"><a href="../../da/dbe/wren__value_8c.html#a5bee43c863271994d3c97825e1482a89">wrenFunctionBindName</a></div><div class="ttdeci">void wrenFunctionBindName(WrenVM *vm, ObjFn *fn, const char *name, int length)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/wren__value_8c_source.html#l00264">wren_value.c:264</a></div></div>
<div class="ttc" id="awren__value_8c_html_a63b1d03d675e5e424c68640c88420ccf"><div class="ttname"><a href="../../da/dbe/wren__value_8c.html#a63b1d03d675e5e424c68640c88420ccf">wrenMapGet</a></div><div class="ttdeci">Value wrenMapGet(ObjMap *map, Value key)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/wren__value_8c_source.html#l00574">wren_value.c:574</a></div></div>
<div class="ttc" id="awren__value_8c_html_a6f59ebcbdfd6eb24569b4d50cf85052b"><div class="ttname"><a href="../../da/dbe/wren__value_8c.html#a6f59ebcbdfd6eb24569b4d50cf85052b">wrenNewStringLength</a></div><div class="ttdeci">Value wrenNewStringLength(WrenVM *vm, const char *text, size_t length)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/wren__value_8c_source.html#l00712">wren_value.c:712</a></div></div>
<div class="ttc" id="awren__value_8c_html_a7b9e6e22f2376aaa1ecaef9e741646fa"><div class="ttname"><a href="../../da/dbe/wren__value_8c.html#a7b9e6e22f2376aaa1ecaef9e741646fa">wrenGrayObj</a></div><div class="ttdeci">void wrenGrayObj(WrenVM *vm, Obj *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/wren__value_8c_source.html#l00976">wren_value.c:976</a></div></div>
<div class="ttc" id="awren__value_8c_html_a9ee197ffca886cf280c83092383cc361"><div class="ttname"><a href="../../da/dbe/wren__value_8c.html#a9ee197ffca886cf280c83092383cc361">wrenGrayValue</a></div><div class="ttdeci">void wrenGrayValue(WrenVM *vm, Value value)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/wren__value_8c_source.html#l00999">wren_value.c:999</a></div></div>
<div class="ttc" id="awren__value_8c_html_aa76904b8bcf2ed294521657095603a3c"><div class="ttname"><a href="../../da/dbe/wren__value_8c.html#aa76904b8bcf2ed294521657095603a3c">wrenMapClear</a></div><div class="ttdeci">void wrenMapClear(WrenVM *vm, ObjMap *map)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/wren__value_8c_source.html#l00601">wren_value.c:601</a></div></div>
<div class="ttc" id="awren__value_8h_html_a07ae6a286fd2358c66dad2df086ca785"><div class="ttname"><a href="../../d2/d0a/wren__value_8h.html#a07ae6a286fd2358c66dad2df086ca785">UNDEFINED_VAL</a></div><div class="ttdeci">#define UNDEFINED_VAL</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0a/wren__value_8h_source.html#l00591">wren_value.h:591</a></div></div>
<div class="ttc" id="awren__value_8h_html_a254dfa03c8d1065fcef554fc8763e65f"><div class="ttname"><a href="../../d2/d0a/wren__value_8h.html#a254dfa03c8d1065fcef554fc8763e65f">AS_NUM</a></div><div class="ttdeci">#define AS_NUM(value)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0a/wren__value_8h_source.html#l00058">wren_value.h:58</a></div></div>
<div class="ttc" id="awren__value_8h_html_a49e112f611425c34766bdefa343fe2b9"><div class="ttname"><a href="../../d2/d0a/wren__value_8h.html#a49e112f611425c34766bdefa343fe2b9">AS_FN</a></div><div class="ttdeci">#define AS_FN(value)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0a/wren__value_8h_source.html#l00052">wren_value.h:52</a></div></div>
<div class="ttc" id="awren__value_8h_html_a4cc9cc92f3facf53e9c801be21a97af3"><div class="ttname"><a href="../../d2/d0a/wren__value_8h.html#a4cc9cc92f3facf53e9c801be21a97af3">TRUE_VAL</a></div><div class="ttdeci">#define TRUE_VAL</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0a/wren__value_8h_source.html#l00590">wren_value.h:590</a></div></div>
<div class="ttc" id="awren__value_8h_html_a4da06c994a3591d379aca99d26b7e7f5"><div class="ttname"><a href="../../d2/d0a/wren__value_8h.html#a4da06c994a3591d379aca99d26b7e7f5">IS_OBJ</a></div><div class="ttdeci">#define IS_OBJ(value)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0a/wren__value_8h_source.html#l00562">wren_value.h:562</a></div></div>
<div class="ttc" id="awren__value_8h_html_a513670ecdc3cb3fce1d696b5892aa691"><div class="ttname"><a href="../../d2/d0a/wren__value_8h.html#a513670ecdc3cb3fce1d696b5892aa691">IS_NUM</a></div><div class="ttdeci">#define IS_NUM(value)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0a/wren__value_8h_source.html#l00559">wren_value.h:559</a></div></div>
<div class="ttc" id="awren__value_8h_html_a55ed1aa901b5e571d47fec3286988c24"><div class="ttname"><a href="../../d2/d0a/wren__value_8h.html#a55ed1aa901b5e571d47fec3286988c24">AS_MAP</a></div><div class="ttdeci">#define AS_MAP(value)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0a/wren__value_8h_source.html#l00056">wren_value.h:56</a></div></div>
<div class="ttc" id="awren__value_8h_html_a5ff8925170a2ed7f53d7d051a85d736f"><div class="ttname"><a href="../../d2/d0a/wren__value_8h.html#a5ff8925170a2ed7f53d7d051a85d736f">AS_STRING</a></div><div class="ttdeci">#define AS_STRING(v)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0a/wren__value_8h_source.html#l00060">wren_value.h:60</a></div></div>
<div class="ttc" id="awren__value_8h_html_a72634165ca1355eaa89a4c87db37f6b5"><div class="ttname"><a href="../../d2/d0a/wren__value_8h.html#a72634165ca1355eaa89a4c87db37f6b5">AS_LIST</a></div><div class="ttdeci">#define AS_LIST(value)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0a/wren__value_8h_source.html#l00055">wren_value.h:55</a></div></div>
<div class="ttc" id="awren__value_8h_html_a9ace511b01bc4d6263defc40aae2d7bf"><div class="ttname"><a href="../../d2/d0a/wren__value_8h.html#a9ace511b01bc4d6263defc40aae2d7bf">NUM_VAL</a></div><div class="ttdeci">#define NUM_VAL(num)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0a/wren__value_8h_source.html#l00067">wren_value.h:67</a></div></div>
<div class="ttc" id="awren__value_8h_html_ac08440d026076c9f8a9d6f72ea5458d4"><div class="ttname"><a href="../../d2/d0a/wren__value_8h.html#ac08440d026076c9f8a9d6f72ea5458d4">FALSE_VAL</a></div><div class="ttdeci">#define FALSE_VAL</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0a/wren__value_8h_source.html#l00589">wren_value.h:589</a></div></div>
<div class="ttc" id="awren__value_8h_html_ad777bf08d8e2b01df17ba5e3c51ae11f"><div class="ttname"><a href="../../d2/d0a/wren__value_8h.html#ad777bf08d8e2b01df17ba5e3c51ae11f">Value</a></div><div class="ttdeci">uint64_t Value</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0a/wren__value_8h_source.html#l00123">wren_value.h:123</a></div></div>
<div class="ttc" id="awren__value_8h_html_ade82ad35993f1f890644f8679f02f4b5"><div class="ttname"><a href="../../d2/d0a/wren__value_8h.html#ade82ad35993f1f890644f8679f02f4b5">IS_UNDEFINED</a></div><div class="ttdeci">#define IS_UNDEFINED(value)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0a/wren__value_8h_source.html#l00566">wren_value.h:566</a></div></div>
<div class="ttc" id="awren__value_8h_html_ae686330cf8b06442b1da208af1b867fc"><div class="ttname"><a href="../../d2/d0a/wren__value_8h.html#ae686330cf8b06442b1da208af1b867fc">OBJ_VAL</a></div><div class="ttdeci">#define OBJ_VAL(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0a/wren__value_8h_source.html#l00068">wren_value.h:68</a></div></div>
<div class="ttc" id="awren__value_8h_html_ae834650cc20489e3a20ebfca0d2a61bf"><div class="ttname"><a href="../../d2/d0a/wren__value_8h.html#ae834650cc20489e3a20ebfca0d2a61bf">AS_OBJ</a></div><div class="ttdeci">#define AS_OBJ(value)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0a/wren__value_8h_source.html#l00585">wren_value.h:585</a></div></div>
<div class="ttc" id="awren__value_8h_html_afc64b30e282747645e8e6db5023797b7"><div class="ttname"><a href="../../d2/d0a/wren__value_8h.html#afc64b30e282747645e8e6db5023797b7">NULL_VAL</a></div><div class="ttdeci">#define NULL_VAL</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0a/wren__value_8h_source.html#l00588">wren_value.h:588</a></div></div>
<div class="ttc" id="awren__vm_8c_html_a70c4570a3862c0981f165f4c08b94f3a"><div class="ttname"><a href="../../de/db2/wren__vm_8c.html#a70c4570a3862c0981f165f4c08b94f3a">wrenPopRoot</a></div><div class="ttdeci">void wrenPopRoot(WrenVM *vm)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/db2/wren__vm_8c_source.html#l01622">wren_vm.c:1622</a></div></div>
<div class="ttc" id="awren__vm_8c_html_a8029dc51bbcbc74faeac5d556ebd959b"><div class="ttname"><a href="../../de/db2/wren__vm_8c.html#a8029dc51bbcbc74faeac5d556ebd959b">wrenDeclareVariable</a></div><div class="ttdeci">int wrenDeclareVariable(WrenVM *vm, ObjModule *module, const char *name, size_t length, int line)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/db2/wren__vm_8c_source.html#l01563">wren_vm.c:1563</a></div></div>
<div class="ttc" id="awren__vm_8c_html_aa5a59b96d405cd396e60139df76c5d60"><div class="ttname"><a href="../../de/db2/wren__vm_8c.html#aa5a59b96d405cd396e60139df76c5d60">wrenDefineVariable</a></div><div class="ttdeci">int wrenDefineVariable(WrenVM *vm, ObjModule *module, const char *name, size_t length, Value value, int *line)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/db2/wren__vm_8c_source.html#l01575">wren_vm.c:1575</a></div></div>
<div class="ttc" id="awren__vm_8c_html_ab604556ed8a6be6d88e7b4ddf4efd2e8"><div class="ttname"><a href="../../de/db2/wren__vm_8c.html#ab604556ed8a6be6d88e7b4ddf4efd2e8">wrenPushRoot</a></div><div class="ttdeci">void wrenPushRoot(WrenVM *vm, Obj *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/db2/wren__vm_8c_source.html#l01614">wren_vm.c:1614</a></div></div>
<div class="ttc" id="awren__vm_8h_html"><div class="ttname"><a href="../../d5/db1/wren__vm_8h.html">wren_vm.h</a></div></div>
<div class="ttc" id="awren__vm_8h_html_ad5841e4f80635751bee172e9be691411"><div class="ttname"><a href="../../d5/db1/wren__vm_8h.html#ad5841e4f80635751bee172e9be691411">wrenIsLocalName</a></div><div class="ttdeci">static bool wrenIsLocalName(const char *name)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/db1/wren__vm_8h_source.html#l00241">wren_vm.h:241</a></div></div>
<div class="ttc" id="awren__vm_8h_html_af31477bc48f67856bedb0fa8e5b5281d"><div class="ttname"><a href="../../d5/db1/wren__vm_8h.html#af31477bc48f67856bedb0fa8e5b5281d">Code</a></div><div class="ttdeci">Code</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/db1/wren__vm_8h_source.html#l00013">wren_vm.h:14</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_607444457ce7ff98031c3752bb27f7b6.html">ERISCore</a></li><li class="navelem"><a class="el" href="../../dir_5b5543e87200f107623567781f7f5b13.html">lib</a></li><li class="navelem"><a class="el" href="../../dir_d921a9989195241ee3ffeeb054317b0b.html">wren</a></li><li class="navelem"><a class="el" href="../../dir_917fe7b91870e398d310fc553a9da786.html">src</a></li><li class="navelem"><a class="el" href="../../d4/de2/wren__compiler_8c.html">wren_compiler.c</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
