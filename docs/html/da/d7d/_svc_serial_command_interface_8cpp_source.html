<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ERIS CORE: ERISCore/src/SvcSerialCommandInterface.cpp Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../ErisCore_Documentation_Logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ERIS CORE
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('da/d7d/_svc_serial_command_interface_8cpp_source.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">SvcSerialCommandInterface.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="../../da/d7d/_svc_serial_command_interface_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160; </div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#include &lt;ctype.h&gt;</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../de/d46/_svc_serial_command_interface_8h.html">svcSerialCommandInterface.h</a>&quot;</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../df/d72/_app_manager_8h.html">AppManager.h</a>&quot;</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &quot;lz4.h&quot;</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &lt;base64.hpp&gt;</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &lt;pgmspace.h&gt;</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../df/d51/_eris_utils_8h.html">ErisUtils.h</a>&quot;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &lt;base64.hpp&gt;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">// AppSerialCommandInterface</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">INCOMMING MESSAGES:</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment">    HELO</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment">    LS [PATH]</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment">    GET [PATH]  (get file is responded with FS messages)</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment">    ACON        (request current audio block connections)</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment">    CONNECT     (make an audio block connection)</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment">    DISCONNECT  (break an audio block connection)</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="comment">    AA          (broadcast message to active app )</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="comment">    STATS</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="comment">    CQT_CFG     request a dump of the cqt bin configs</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="comment">    GET_DD      request a dump of the data dictionary   </span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="comment">    GET_RAM2    reqquest a dump of ram2</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="comment">    WREN_SCRIPT_START   indicates the start of a bulk text transfer</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="comment">    WREN_SCRIPT_END     ends the bulk text transfer</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="comment">    WREN_SCRIPT_EXECUTE executes the transfered script</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="comment">    WREN_SCRIPT_COMPILE compiles the transfered script and reports any errors</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="comment">OUTPUT MESSAGES:</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="comment">    CQT_H  (CQT BINS - High Range)</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="comment">    CQT_L  (CQT  &quot;     Low Range&quot;)</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="comment">    CQT_EOF (End of analysis frame)</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="comment">    DIR  (directory contents - aka the result of the ls command)</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="comment">    DIR_EOF</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="comment">    S   (FFT window stream)</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="comment">    FS   (file stream)</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="comment">    FS_END (file stream end, indicate to client eof)</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="comment">    GET_ERR (error response )</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="comment">    ACON START (begin audio connection list)</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="comment">    ACON END (end audio connection list)</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="comment">    RAM {JSON}</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="comment">*/</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="keyword">extern</span> SdFs <a class="code" href="../../da/d7d/_svc_serial_command_interface_8cpp_a6385eecb021ea6dc1e9b5597cfe94b85.html#a6385eecb021ea6dc1e9b5597cfe94b85">sd</a>;</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160; </div>
<div class="line"><a name="l00061"></a><span class="lineno"><a class="line" href="../../da/d7d/_svc_serial_command_interface_8cpp_a1d71425d9df28667d528833a4db10432.html#a1d71425d9df28667d528833a4db10432">   61</a></span>&#160;<span class="keywordtype">char</span>* <a class="code" href="../../da/d7d/_svc_serial_command_interface_8cpp_a1d71425d9df28667d528833a4db10432.html#a1d71425d9df28667d528833a4db10432">token</a>;</div>
<div class="line"><a name="l00062"></a><span class="lineno"><a class="line" href="../../da/d7d/_svc_serial_command_interface_8cpp_ab4b2f46f6bc0178f1f3efc5dba880bf8.html#ab4b2f46f6bc0178f1f3efc5dba880bf8">   62</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="../../da/d7d/_svc_serial_command_interface_8cpp_ab4b2f46f6bc0178f1f3efc5dba880bf8.html#ab4b2f46f6bc0178f1f3efc5dba880bf8">newline</a> = <span class="charliteral">&#39;\n&#39;</span>;</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160; </div>
<div class="line"><a name="l00064"></a><span class="lineno"><a class="line" href="../../da/d7d/_svc_serial_command_interface_8cpp_a462ba08568f93a3fec6a44898d5989da.html#a462ba08568f93a3fec6a44898d5989da">   64</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="../../da/d7d/_svc_serial_command_interface_8cpp_a462ba08568f93a3fec6a44898d5989da.html#a462ba08568f93a3fec6a44898d5989da">gWelcomeMessage</a> = </div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="stringliteral">&quot;M .▄▄▄▄▄▄▄▄▄▄▄..▄▄▄▄▄▄▄▄▄▄▄..▄▄▄▄▄▄▄▄▄▄▄..▄▄▄▄▄▄▄▄▄▄▄.\n&quot;</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="stringliteral">&quot;M ▐░░░░░░░░░░░▌▐░░░░░░░░░░░▌▐░░░░░░░░░░░▌▐░░░░░░░░░░░▌\n&quot;</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="stringliteral">&quot;M ▐░█▀▀▀▀▀▀▀▀▀.▐░█▀▀▀▀▀▀▀█░▌.▀▀▀▀█░█▀▀▀▀.▐░█▀▀▀▀▀▀▀▀▀.\n&quot;</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="stringliteral">&quot;M ▐░▌..........▐░▌.......▐░▌.....▐░▌.....▐░▌..........\n&quot;</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="stringliteral">&quot;M ▐░█▄▄▄▄▄▄▄▄▄.▐░█▄▄▄▄▄▄▄█░▌.....▐░▌.....▐░█▄▄▄▄▄▄▄▄▄.\n&quot;</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="stringliteral">&quot;M ▐░░░░░░░░░░░▌▐░░░░░░░░░░░▌.....▐░▌.....▐░░░░░░░░░░░▌\n&quot;</span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="stringliteral">&quot;M ▐░█▀▀▀▀▀▀▀▀▀.▐░█▀▀▀▀█░█▀▀......▐░▌......▀▀▀▀▀▀▀▀▀█░▌\n&quot;</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="stringliteral">&quot;M ▐░▌..........▐░▌.....▐░▌.......▐░▌...............▐░▌\n&quot;</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="stringliteral">&quot;M ▐░█▄▄▄▄▄▄▄▄▄.▐░▌......▐░▌..▄▄▄▄█░█▄▄▄▄..▄▄▄▄▄▄▄▄▄█░▌\n&quot;</span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="stringliteral">&quot;M ▐░░░░░░░░░░░▌▐░▌.......▐░▌▐░░░░░░░░░░░▌▐░░░░░░░░░░░▌\n&quot;</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="stringliteral">&quot;M .▀▀▀▀▀▀▀▀▀▀▀..▀.........▀..▀▀▀▀▀▀▀▀▀▀▀..▀▀▀▀▀▀▀▀▀▀▀.\n&quot;</span></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="stringliteral">&quot;M ....................................................\n&quot;</span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="stringliteral">&quot;M .▄▄▄▄▄▄▄▄▄▄▄..▄▄▄▄▄▄▄▄▄▄▄..▄▄▄▄▄▄▄▄▄▄▄..▄▄▄▄▄▄▄▄▄▄▄.\n&quot;</span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="stringliteral">&quot;M ▐░░░░░░░░░░░▌▐░░░░░░░░░░░▌▐░░░░░░░░░░░▌▐░░░░░░░░░░░▌\n&quot;</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="stringliteral">&quot;M ▐░█▀▀▀▀▀▀▀▀▀.▐░█▀▀▀▀▀▀▀█░▌▐░█▀▀▀▀▀▀▀█░▌▐░█▀▀▀▀▀▀▀▀▀.\n&quot;</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="stringliteral">&quot;M ▐░▌..........▐░▌.......▐░▌▐░▌.......▐░▌▐░▌..........\n&quot;</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="stringliteral">&quot;M ▐░▌..........▐░▌.......▐░▌▐░█▄▄▄▄▄▄▄█░▌▐░█▄▄▄▄▄▄▄▄▄.\n&quot;</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="stringliteral">&quot;M ▐░▌..........▐░▌.......▐░▌▐░░░░░░░░░░░▌▐░░░░░░░░░░░▌\n&quot;</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="stringliteral">&quot;M ▐░▌..........▐░▌.......▐░▌▐░█▀▀▀▀█░█▀▀.▐░█▀▀▀▀▀▀▀▀▀.\n&quot;</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="stringliteral">&quot;M ▐░▌..........▐░▌.......▐░▌▐░▌.....▐░▌..▐░▌..........\n&quot;</span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="stringliteral">&quot;M ▐░█▄▄▄▄▄▄▄▄▄.▐░█▄▄▄▄▄▄▄█░▌▐░▌......▐░▌.▐░█▄▄▄▄▄▄▄▄▄.\n&quot;</span></div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="stringliteral">&quot;M ▐░░░░░░░░░░░▌▐░░░░░░░░░░░▌▐░▌.......▐░▌▐░░░░░░░░░░░▌\n&quot;</span></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="stringliteral">&quot;M .▀▀▀▀▀▀▀▀▀▀▀..▀▀▀▀▀▀▀▀▀▀▀..▀.........▀..▀▀▀▀▀▀▀▀▀▀▀.\n&quot;</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="stringliteral">&quot;M Connected to the Serial Command Interface           \n&quot;</span>;</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160; </div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160; </div>
<div class="line"><a name="l00091"></a><span class="lineno"><a class="line" href="../../da/d7d/_svc_serial_command_interface_8cpp_a0f3daef760195868b4aef06728c4119f.html#a0f3daef760195868b4aef06728c4119f">   91</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../da/d7d/_svc_serial_command_interface_8cpp_a0f3daef760195868b4aef06728c4119f.html#a0f3daef760195868b4aef06728c4119f">replacechar</a>(<span class="keywordtype">char</span> *str, <span class="keywordtype">char</span> orig, <span class="keywordtype">char</span> rep) {</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <span class="keywordtype">char</span> *ix = str;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    <span class="keywordtype">int</span> n = 0;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <span class="keywordflow">while</span>((ix = strchr(ix, orig)) != NULL) {</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;        *ix++ = rep;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;        n++;</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    }</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    <span class="keywordflow">return</span> n;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;}</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160; </div>
<div class="line"><a name="l00101"></a><span class="lineno"><a class="line" href="../../d2/da8/class_svc_serial_command_interface_ac0a8b5ba3a88dcc655f0f6c6c4818291.html#ac0a8b5ba3a88dcc655f0f6c6c4818291">  101</a></span>&#160;uint16_t <a class="code" href="../../d2/da8/class_svc_serial_command_interface_ac0a8b5ba3a88dcc655f0f6c6c4818291.html#ac0a8b5ba3a88dcc655f0f6c6c4818291">SvcSerialCommandInterface::checksum</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *msg){</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    uint16_t csum;</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    csum=0;</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <span class="keywordflow">for</span>(uint16_t i = 0;i&lt;strlen(msg);i++){</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;        csum += msg[i];</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    }</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <span class="keywordflow">return</span> csum;</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;}</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160; </div>
<div class="line"><a name="l00115"></a><span class="lineno"><a class="line" href="../../d2/da8/class_svc_serial_command_interface_adaa3d36d4c1a1784a1c18f87d756296e.html#adaa3d36d4c1a1784a1c18f87d756296e">  115</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d2/da8/class_svc_serial_command_interface_adaa3d36d4c1a1784a1c18f87d756296e.html#adaa3d36d4c1a1784a1c18f87d756296e">SvcSerialCommandInterface::sendLZ4Message</a>(){</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    uint16_t compressed_len,uncompressed_len;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="preprocessor">#ifdef USE_EXTMEM</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <span class="comment">//do nothing - one time malloc in the constructor</span></div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    <span class="keywordtype">char</span> workingBuffer[<a class="code" href="../../db/d46/_eris_globals_8h_a2e63e4023af076c8c199ede80957755e.html#a2e63e4023af076c8c199ede80957755e">SERIAL_WORKING_BUFFER_SIZE</a>];</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160; </div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    memset(<a class="code" href="../../d2/da8/class_svc_serial_command_interface_a075f61b693a6555fa1b77b40bf6c6883.html#a075f61b693a6555fa1b77b40bf6c6883">p_working_buffer</a>,0,<a class="code" href="../../db/d46/_eris_globals_8h_a2e63e4023af076c8c199ede80957755e.html#a2e63e4023af076c8c199ede80957755e">SERIAL_WORKING_BUFFER_SIZE</a>);</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    uncompressed_len = <a class="code" href="../../d2/da8/class_svc_serial_command_interface_ae440a4e85836972ce2765d98eaccf718.html#ae440a4e85836972ce2765d98eaccf718">index_tx_buffer</a>;</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    compressed_len = LZ4_compress_fast(<a class="code" href="../../d2/da8/class_svc_serial_command_interface_a2d7255a6df2e04c79dad445759ca968e.html#a2d7255a6df2e04c79dad445759ca968e">tx_Buffer</a>,<a class="code" href="../../d2/da8/class_svc_serial_command_interface_a075f61b693a6555fa1b77b40bf6c6883.html#a075f61b693a6555fa1b77b40bf6c6883">p_working_buffer</a>,<a class="code" href="../../d2/da8/class_svc_serial_command_interface_ae440a4e85836972ce2765d98eaccf718.html#ae440a4e85836972ce2765d98eaccf718">index_tx_buffer</a>,<a class="code" href="../../db/d46/_eris_globals_8h_a2e63e4023af076c8c199ede80957755e.html#a2e63e4023af076c8c199ede80957755e">SERIAL_WORKING_BUFFER_SIZE</a>,1);</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    <a class="code" href="../../d2/da8/class_svc_serial_command_interface_a809cc3d22320bdd8c54044e278e188f0.html#a809cc3d22320bdd8c54044e278e188f0">empty</a>();</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    encode_base64((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)<a class="code" href="../../d2/da8/class_svc_serial_command_interface_a075f61b693a6555fa1b77b40bf6c6883.html#a075f61b693a6555fa1b77b40bf6c6883">p_working_buffer</a>, compressed_len, (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)<a class="code" href="../../d2/da8/class_svc_serial_command_interface_a2d7255a6df2e04c79dad445759ca968e.html#a2d7255a6df2e04c79dad445759ca968e">tx_Buffer</a>);</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    <span class="keywordflow">while</span>(<a class="code" href="../../d2/da8/class_svc_serial_command_interface_a72fa7592492598637d233d9abe27f8f0.html#a72fa7592492598637d233d9abe27f8f0">throttle</a>()){</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;        delay(5);</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    };</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    Serial.print(<span class="stringliteral">&quot; &quot;</span>);</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    Serial.print(uncompressed_len);</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    Serial.print(<span class="stringliteral">&quot; &quot;</span>);</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    Serial.println(<a class="code" href="../../d2/da8/class_svc_serial_command_interface_a2d7255a6df2e04c79dad445759ca968e.html#a2d7255a6df2e04c79dad445759ca968e">tx_Buffer</a>);</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <span class="comment">//empty();</span></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    <span class="comment">//while(throttle()){</span></div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    <span class="comment">//    delay(50);</span></div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <span class="comment">//};</span></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160; </div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="preprocessor">#ifdef USE_EXTMEM</span></div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <span class="comment">//do nothing - one time malloc in the constructor</span></div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <span class="comment">//do nothing - local var</span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;}</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160; </div>
<div class="line"><a name="l00151"></a><span class="lineno"><a class="line" href="../../d2/da8/class_svc_serial_command_interface_a0c889fc44a89c71adbcb1bf1bddbf397.html#a0c889fc44a89c71adbcb1bf1bddbf397">  151</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d2/da8/class_svc_serial_command_interface_a0c889fc44a89c71adbcb1bf1bddbf397.html#a0c889fc44a89c71adbcb1bf1bddbf397">SvcSerialCommandInterface::send</a>(){</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    <span class="keywordflow">while</span>(<a class="code" href="../../d2/da8/class_svc_serial_command_interface_a72fa7592492598637d233d9abe27f8f0.html#a72fa7592492598637d233d9abe27f8f0">throttle</a>()){</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        delay(50);</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    }</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <span class="keywordflow">if</span> (strlen(<a class="code" href="../../d2/da8/class_svc_serial_command_interface_a2d7255a6df2e04c79dad445759ca968e.html#a2d7255a6df2e04c79dad445759ca968e">tx_Buffer</a>) &gt; 0 ) Serial.print(<a class="code" href="../../d2/da8/class_svc_serial_command_interface_a2d7255a6df2e04c79dad445759ca968e.html#a2d7255a6df2e04c79dad445759ca968e">tx_Buffer</a>);</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    memset(<a class="code" href="../../d2/da8/class_svc_serial_command_interface_a2d7255a6df2e04c79dad445759ca968e.html#a2d7255a6df2e04c79dad445759ca968e">tx_Buffer</a>,0,<a class="code" href="../../db/d46/_eris_globals_8h_abfe80eb43785493f268187a201692d8e.html#abfe80eb43785493f268187a201692d8e">SERIAL_OUTPUT_BUFFER_SIZE</a>);</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <a class="code" href="../../d2/da8/class_svc_serial_command_interface_ae440a4e85836972ce2765d98eaccf718.html#ae440a4e85836972ce2765d98eaccf718">index_tx_buffer</a> = 0;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <a class="code" href="../../d2/da8/class_svc_serial_command_interface_a9214245f4de217141e2b0d2adc0e47e9.html#a9214245f4de217141e2b0d2adc0e47e9">tx_buffer_overflow_flag</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;}</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160; </div>
<div class="line"><a name="l00170"></a><span class="lineno"><a class="line" href="../../d2/da8/class_svc_serial_command_interface_a72fa7592492598637d233d9abe27f8f0.html#a72fa7592492598637d233d9abe27f8f0">  170</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../d2/da8/class_svc_serial_command_interface_a72fa7592492598637d233d9abe27f8f0.html#a72fa7592492598637d233d9abe27f8f0">SvcSerialCommandInterface::throttle</a>(){</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    uint16_t avail;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    avail = Serial.availableForWrite();</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160; </div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <span class="keywordflow">if</span>(avail &lt; <a class="code" href="../../db/d46/_eris_globals_8h_a6eb9a70da8c657508b7ca74addedf167.html#a6eb9a70da8c657508b7ca74addedf167">SERIAL_THROTTLE_CHECK_CONNECTION_BUFFER_THRESHOLD</a>){</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;        uint16_t delta_avail;</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;        uint16_t msec_delay_counter = 0;</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;        <span class="comment">//serial tx buffer not available</span></div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;        <span class="keywordflow">do</span>{</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;            delay(80);</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;            msec_delay_counter += 80;</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;            delta_avail = Serial.availableForWrite();</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;            <span class="keywordflow">if</span> (delta_avail &gt; <a class="code" href="../../db/d46/_eris_globals_8h_a6eb9a70da8c657508b7ca74addedf167.html#a6eb9a70da8c657508b7ca74addedf167">SERIAL_THROTTLE_CHECK_CONNECTION_BUFFER_THRESHOLD</a>) <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;        } <span class="keywordflow">while</span> (msec_delay_counter &lt; <a class="code" href="../../db/d46/_eris_globals_8h_aeb045751fa9d9425113c60662a4e65b6.html#aeb045751fa9d9425113c60662a4e65b6">SERIAL_THROTTLE_CHECK_CONNECTION_MAX_DELAY</a>);</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;        </div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;        <span class="keywordflow">if</span>(avail == delta_avail){</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;            Serial.flush();</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;            Serial.println(F(<span class="stringliteral">&quot;M WRN flush&quot;</span>));</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;        } <span class="keywordflow">else</span>{</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;            <span class="comment">//Serial.println(F(&quot;M WRN throttling&quot;));//use this for debug only!</span></div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;            <a class="code" href="../../db/d69/class_app_base_class_a6baed35a61a4cae1b3c67113aa6ec1dd.html#a6baed35a61a4cae1b3c67113aa6ec1dd">am</a>-&gt;<a class="code" href="../../da/d96/class_app_manager_a702921f08484c897380064116a4a23a6.html#a702921f08484c897380064116a4a23a6">data</a>-&gt;increment(<span class="stringliteral">&quot;SERIAL_THROTTLE_EVENTS&quot;</span>);</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;        }</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    }</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <span class="keywordflow">if</span>(avail &lt; <a class="code" href="../../db/d46/_eris_globals_8h_aca228ee6133a5dbbe4c9e26751b8a28b.html#aca228ee6133a5dbbe4c9e26751b8a28b">SERIAL_THROTTLE_BUFFER_THRESHOLD</a>) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;}</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160; </div>
<div class="line"><a name="l00197"></a><span class="lineno"><a class="line" href="../../d2/da8/class_svc_serial_command_interface_ad90206ca0d83334fb9ce0cc4633d97dc.html#ad90206ca0d83334fb9ce0cc4633d97dc">  197</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d2/da8/class_svc_serial_command_interface_ad90206ca0d83334fb9ce0cc4633d97dc.html#ad90206ca0d83334fb9ce0cc4633d97dc">SvcSerialCommandInterface::txOverflowHandler</a>(){</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    <span class="keywordtype">char</span>* <a class="code" href="../../db/d46/_eris_globals_8h_ac2254e411e388869ad4f7490e7aa3ede.html#ac2254e411e388869ad4f7490e7aa3ede">s</a>;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <a class="code" href="../../db/d46/_eris_globals_8h_ac2254e411e388869ad4f7490e7aa3ede.html#ac2254e411e388869ad4f7490e7aa3ede">s</a> = strrchr(<a class="code" href="../../d2/da8/class_svc_serial_command_interface_a2d7255a6df2e04c79dad445759ca968e.html#a2d7255a6df2e04c79dad445759ca968e">tx_Buffer</a>,<span class="charliteral">&#39;\r&#39;</span>);<span class="comment">//find last new line</span></div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    <a class="code" href="../../db/d46/_eris_globals_8h_ac2254e411e388869ad4f7490e7aa3ede.html#ac2254e411e388869ad4f7490e7aa3ede">s</a>[0] = 0;</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    <a class="code" href="../../da/d7d/_svc_serial_command_interface_8cpp_a1d71425d9df28667d528833a4db10432.html#a1d71425d9df28667d528833a4db10432">token</a> = strtok(<a class="code" href="../../d2/da8/class_svc_serial_command_interface_a2d7255a6df2e04c79dad445759ca968e.html#a2d7255a6df2e04c79dad445759ca968e">tx_Buffer</a>, &amp;<a class="code" href="../../da/d7d/_svc_serial_command_interface_8cpp_ab4b2f46f6bc0178f1f3efc5dba880bf8.html#ab4b2f46f6bc0178f1f3efc5dba880bf8">newline</a>);</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    <span class="keywordflow">while</span>( <a class="code" href="../../da/d7d/_svc_serial_command_interface_8cpp_a1d71425d9df28667d528833a4db10432.html#a1d71425d9df28667d528833a4db10432">token</a> != NULL ) {     </div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;        <span class="keywordflow">while</span>(<a class="code" href="../../d2/da8/class_svc_serial_command_interface_a72fa7592492598637d233d9abe27f8f0.html#a72fa7592492598637d233d9abe27f8f0">throttle</a>()){</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;            delay(50);</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;        }                </div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d2/da8/class_svc_serial_command_interface_a9214245f4de217141e2b0d2adc0e47e9.html#a9214245f4de217141e2b0d2adc0e47e9">tx_buffer_overflow_flag</a>==<span class="keyword">false</span>){</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;            <span class="comment">//txBufferOverflowFlag=true;</span></div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;            Serial.print(F(<span class="stringliteral">&quot;\&quot;&quot;</span>));</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;        }<span class="keywordflow">else</span>{</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;            Serial.print(F(<span class="stringliteral">&quot;,\&quot;&quot;</span>));</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;        }</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;        <span class="comment">//replaceAll(token,&#39;\r&#39;,0);</span></div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;        Serial.print(<a class="code" href="../../da/d7d/_svc_serial_command_interface_8cpp_a1d71425d9df28667d528833a4db10432.html#a1d71425d9df28667d528833a4db10432">token</a>);</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;        Serial.print(F(<span class="stringliteral">&quot;\&quot;&quot;</span>));</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;        <a class="code" href="../../da/d7d/_svc_serial_command_interface_8cpp_a1d71425d9df28667d528833a4db10432.html#a1d71425d9df28667d528833a4db10432">token</a> = strtok(NULL, &amp;<a class="code" href="../../da/d7d/_svc_serial_command_interface_8cpp_ab4b2f46f6bc0178f1f3efc5dba880bf8.html#ab4b2f46f6bc0178f1f3efc5dba880bf8">newline</a>);</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    }</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <span class="comment">//close the tag</span></div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    Serial.println(<span class="stringliteral">&quot;]&quot;</span>);</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    <span class="comment">//start the next part of the multipart message</span></div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    Serial.print(&amp;<a class="code" href="../../d2/da8/class_svc_serial_command_interface_afefe4ffe8389e6e818892e5cd935f161.html#afefe4ffe8389e6e818892e5cd935f161">multipart_header</a>[0]);</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    <a class="code" href="../../db/d46/_eris_globals_8h_ac2254e411e388869ad4f7490e7aa3ede.html#ac2254e411e388869ad4f7490e7aa3ede">s</a> = strrchr(<a class="code" href="../../d2/da8/class_svc_serial_command_interface_a2d7255a6df2e04c79dad445759ca968e.html#a2d7255a6df2e04c79dad445759ca968e">tx_Buffer</a>,<span class="charliteral">&#39;\r&#39;</span>);<span class="comment">//find last new line</span></div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    <span class="comment">//s = strrchr(s,&#39;\r&#39;);//find last new line</span></div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    <a class="code" href="../../db/d46/_eris_globals_8h_ac2254e411e388869ad4f7490e7aa3ede.html#ac2254e411e388869ad4f7490e7aa3ede">s</a>+=2;</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    SerialUSB1.printf(<span class="stringliteral">&quot;VM %s %s\n&quot;</span>,&amp;<a class="code" href="../../d2/da8/class_svc_serial_command_interface_afefe4ffe8389e6e818892e5cd935f161.html#afefe4ffe8389e6e818892e5cd935f161">multipart_header</a>[0],<a class="code" href="../../db/d46/_eris_globals_8h_ac2254e411e388869ad4f7490e7aa3ede.html#ac2254e411e388869ad4f7490e7aa3ede">s</a>);</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    <span class="comment">//SerialUSB1.flush();</span></div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    <a class="code" href="../../d2/da8/class_svc_serial_command_interface_ae440a4e85836972ce2765d98eaccf718.html#ae440a4e85836972ce2765d98eaccf718">index_tx_buffer</a> = strlen(<a class="code" href="../../db/d46/_eris_globals_8h_ac2254e411e388869ad4f7490e7aa3ede.html#ac2254e411e388869ad4f7490e7aa3ede">s</a>);</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <a class="code" href="../../df/d51/_eris_utils_8h_acf90b2b3b47174f2ad15f9397a36dca1.html#acf90b2b3b47174f2ad15f9397a36dca1">safer_strncpy</a>(<a class="code" href="../../d2/da8/class_svc_serial_command_interface_a2d7255a6df2e04c79dad445759ca968e.html#a2d7255a6df2e04c79dad445759ca968e">tx_Buffer</a>,<a class="code" href="../../db/d46/_eris_globals_8h_ac2254e411e388869ad4f7490e7aa3ede.html#ac2254e411e388869ad4f7490e7aa3ede">s</a>,<span class="keyword">sizeof</span>(<a class="code" href="../../d2/da8/class_svc_serial_command_interface_a2d7255a6df2e04c79dad445759ca968e.html#a2d7255a6df2e04c79dad445759ca968e">tx_Buffer</a>));</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    <span class="comment">//SerialUSB1.printf(&quot;VM remainder %s&quot;,txBuffer);</span></div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;}</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160; </div>
<div class="line"><a name="l00231"></a><span class="lineno"><a class="line" href="../../d2/da8/class_svc_serial_command_interface_add54582c8a1dae31f0d69bea84c65c84.html#add54582c8a1dae31f0d69bea84c65c84">  231</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d2/da8/class_svc_serial_command_interface_add54582c8a1dae31f0d69bea84c65c84.html#add54582c8a1dae31f0d69bea84c65c84">SvcSerialCommandInterface::streamHandler</a>(){</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    <span class="keywordtype">char</span> bufferChr; <span class="comment">//only need one char - 512 size is due to a potential bug in the teensy library identified by covintry static analysis</span></div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    <span class="keywordtype">char</span> hexBuffer[8];</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    uint16_t payload_len;</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    uint16_t compressed_len,uncompressed_len;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <span class="keywordflow">if</span>(Serial.availableForWrite() &lt; 6000) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    <a class="code" href="../../d2/da8/class_svc_serial_command_interface_af990f28a8289b373073bbc8dec8c36be.html#af990f28a8289b373073bbc8dec8c36be">p_SD</a>-&gt;chdir(<a class="code" href="../../d2/da8/class_svc_serial_command_interface_a16e45c7aa993f2c967886b11badde293.html#a16e45c7aa993f2c967886b11badde293">stream_path</a>);</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d2/da8/class_svc_serial_command_interface_af990f28a8289b373073bbc8dec8c36be.html#af990f28a8289b373073bbc8dec8c36be">p_SD</a>-&gt;exists(<a class="code" href="../../d2/da8/class_svc_serial_command_interface_a0f6637d67b1dfd1fa96ddd10f8f14873.html#a0f6637d67b1dfd1fa96ddd10f8f14873">stream_file</a>)){</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;        payload_len = 0;</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;        <span class="keywordflow">if</span>(!<a class="code" href="../../d2/da8/class_svc_serial_command_interface_ac17addc8ec6cc9ff4f15c2afcd4f472c.html#ac17addc8ec6cc9ff4f15c2afcd4f472c">file</a>.open(<a class="code" href="../../d2/da8/class_svc_serial_command_interface_a0f6637d67b1dfd1fa96ddd10f8f14873.html#a0f6637d67b1dfd1fa96ddd10f8f14873">stream_file</a>, O_READ)){ </div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;            Serial.println(F(<span class="stringliteral">&quot;M GET_ERR FILE OPEN ERROR&quot;</span>));</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;            <a class="code" href="../../d2/da8/class_svc_serial_command_interface_a6ef09b9a0a8e5dfe394340921717e12f.html#a6ef09b9a0a8e5dfe394340921717e12f">is_streaming_file</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;            <a class="code" href="../../d2/da8/class_svc_serial_command_interface_a30754b909a8f6911ffe8cb4b5872e1a0.html#a30754b909a8f6911ffe8cb4b5872e1a0">is_periodic_messages_enabled</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;            <a class="code" href="../../d2/da8/class_svc_serial_command_interface_a8cf62cf33b60dab489173b92ac278b5a.html#a8cf62cf33b60dab489173b92ac278b5a">stream_pos</a> = 0;</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;        }</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;        <span class="comment">//updateRT_priority = 10;</span></div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;        <a class="code" href="../../d2/da8/class_svc_serial_command_interface_a42055ffe62395b2d4ee7ca7ef44f1a50.html#a42055ffe62395b2d4ee7ca7ef44f1a50">startLZ4Message</a>();</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;        print(<span class="stringliteral">&quot;FS &quot;</span>);</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;        <a class="code" href="../../d2/da8/class_svc_serial_command_interface_ac17addc8ec6cc9ff4f15c2afcd4f472c.html#ac17addc8ec6cc9ff4f15c2afcd4f472c">file</a>.seek(<a class="code" href="../../d2/da8/class_svc_serial_command_interface_a8cf62cf33b60dab489173b92ac278b5a.html#a8cf62cf33b60dab489173b92ac278b5a">stream_pos</a>);</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;        <span class="comment">//send the next chunked message until eof</span></div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;        uint64_t i;</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;        i = <a class="code" href="../../d2/da8/class_svc_serial_command_interface_ac17addc8ec6cc9ff4f15c2afcd4f472c.html#ac17addc8ec6cc9ff4f15c2afcd4f472c">file</a>.available();</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;        <span class="keywordflow">if</span>(i&gt;0){</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;            <span class="comment">//if i is zero then last chunk was eof</span></div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;            <span class="keywordflow">if</span>(i &gt; <a class="code" href="../../db/d46/_eris_globals_8h_a5bbe063c9ff2ad8940b615fdab34110d.html#a5bbe063c9ff2ad8940b615fdab34110d">SERIAL_FILESTREAM_PAYLOAD_SIZE</a>) i = <a class="code" href="../../db/d46/_eris_globals_8h_a5bbe063c9ff2ad8940b615fdab34110d.html#a5bbe063c9ff2ad8940b615fdab34110d">SERIAL_FILESTREAM_PAYLOAD_SIZE</a>;</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;            <span class="keywordflow">for</span>(;i &gt; 0; i--){</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;                payload_len += 1;</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="../../d2/da8/class_svc_serial_command_interface_ac17addc8ec6cc9ff4f15c2afcd4f472c.html#ac17addc8ec6cc9ff4f15c2afcd4f472c">file</a>.read(&amp;bufferChr,1) &lt; 0){</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;                    Serial.println(F(<span class="stringliteral">&quot;\nM GET_ERR FILE READ ERROR&quot;</span>));</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;                    <a class="code" href="../../d2/da8/class_svc_serial_command_interface_a6ef09b9a0a8e5dfe394340921717e12f.html#a6ef09b9a0a8e5dfe394340921717e12f">is_streaming_file</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;                    <a class="code" href="../../d2/da8/class_svc_serial_command_interface_a30754b909a8f6911ffe8cb4b5872e1a0.html#a30754b909a8f6911ffe8cb4b5872e1a0">is_periodic_messages_enabled</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;                    <a class="code" href="../../d2/da8/class_svc_serial_command_interface_a8cf62cf33b60dab489173b92ac278b5a.html#a8cf62cf33b60dab489173b92ac278b5a">stream_pos</a> = 0;</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;                    <a class="code" href="../../d2/da8/class_svc_serial_command_interface_ac17addc8ec6cc9ff4f15c2afcd4f472c.html#ac17addc8ec6cc9ff4f15c2afcd4f472c">file</a>.close();</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;                    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;                }</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;                sprintf(hexBuffer,<span class="stringliteral">&quot;%02X,&quot;</span>,(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)bufferChr);</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;                print(hexBuffer);</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;            }</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;            <span class="keywordflow">if</span>(<a class="code" href="../../d2/da8/class_svc_serial_command_interface_ae440a4e85836972ce2765d98eaccf718.html#ae440a4e85836972ce2765d98eaccf718">index_tx_buffer</a> &gt; 0) <a class="code" href="../../d2/da8/class_svc_serial_command_interface_a2d7255a6df2e04c79dad445759ca968e.html#a2d7255a6df2e04c79dad445759ca968e">tx_Buffer</a>[--<a class="code" href="../../d2/da8/class_svc_serial_command_interface_ae440a4e85836972ce2765d98eaccf718.html#ae440a4e85836972ce2765d98eaccf718">index_tx_buffer</a>] = <span class="charliteral">&#39;\0&#39;</span>; <span class="comment">//remove last comma</span></div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;            <a class="code" href="../../d2/da8/class_svc_serial_command_interface_a8cf62cf33b60dab489173b92ac278b5a.html#a8cf62cf33b60dab489173b92ac278b5a">stream_pos</a> = <a class="code" href="../../d2/da8/class_svc_serial_command_interface_ac17addc8ec6cc9ff4f15c2afcd4f472c.html#ac17addc8ec6cc9ff4f15c2afcd4f472c">file</a>.position();</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;            println(<span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;        }</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;        <a class="code" href="../../d2/da8/class_svc_serial_command_interface_ac17addc8ec6cc9ff4f15c2afcd4f472c.html#ac17addc8ec6cc9ff4f15c2afcd4f472c">file</a>.close();</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;        <span class="keywordflow">if</span> (payload_len == 0){</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;            <span class="comment">//no data to tx; @ eof</span></div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;            <a class="code" href="../../d2/da8/class_svc_serial_command_interface_adaa3d36d4c1a1784a1c18f87d756296e.html#adaa3d36d4c1a1784a1c18f87d756296e">sendLZ4Message</a>();</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;            Serial.println(<span class="stringliteral">&quot;FS_END&quot;</span>);</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;            <a class="code" href="../../d2/da8/class_svc_serial_command_interface_a6ef09b9a0a8e5dfe394340921717e12f.html#a6ef09b9a0a8e5dfe394340921717e12f">is_streaming_file</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;            <a class="code" href="../../d2/da8/class_svc_serial_command_interface_a30754b909a8f6911ffe8cb4b5872e1a0.html#a30754b909a8f6911ffe8cb4b5872e1a0">is_periodic_messages_enabled</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;            <a class="code" href="../../d2/da8/class_svc_serial_command_interface_a8cf62cf33b60dab489173b92ac278b5a.html#a8cf62cf33b60dab489173b92ac278b5a">stream_pos</a> = 0;</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;            <a class="code" href="../../db/d69/class_app_base_class_ab7b8b8499bd4cf04468085761a4287e9.html#ab7b8b8499bd4cf04468085761a4287e9">update_priority</a> = 0;</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;        }</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (payload_len &lt; <a class="code" href="../../db/d46/_eris_globals_8h_a5bbe063c9ff2ad8940b615fdab34110d.html#a5bbe063c9ff2ad8940b615fdab34110d">SERIAL_FILESTREAM_PAYLOAD_SIZE</a>) {</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;            <a class="code" href="../../d2/da8/class_svc_serial_command_interface_adaa3d36d4c1a1784a1c18f87d756296e.html#adaa3d36d4c1a1784a1c18f87d756296e">sendLZ4Message</a>();</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;            Serial.println(<span class="stringliteral">&quot;FS_END&quot;</span>);</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;            <a class="code" href="../../d2/da8/class_svc_serial_command_interface_a809cc3d22320bdd8c54044e278e188f0.html#a809cc3d22320bdd8c54044e278e188f0">empty</a>();</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;            <a class="code" href="../../d2/da8/class_svc_serial_command_interface_a6ef09b9a0a8e5dfe394340921717e12f.html#a6ef09b9a0a8e5dfe394340921717e12f">is_streaming_file</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;            <a class="code" href="../../d2/da8/class_svc_serial_command_interface_a30754b909a8f6911ffe8cb4b5872e1a0.html#a30754b909a8f6911ffe8cb4b5872e1a0">is_periodic_messages_enabled</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;            <a class="code" href="../../d2/da8/class_svc_serial_command_interface_a8cf62cf33b60dab489173b92ac278b5a.html#a8cf62cf33b60dab489173b92ac278b5a">stream_pos</a> = 0;</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;            <a class="code" href="../../db/d69/class_app_base_class_ab7b8b8499bd4cf04468085761a4287e9.html#ab7b8b8499bd4cf04468085761a4287e9">update_priority</a> = 0;</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;            <span class="comment">//delayMicroseconds(3000);</span></div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;        } <span class="keywordflow">else</span>{</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;            <span class="comment">//send file chunk</span></div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;            <a class="code" href="../../d2/da8/class_svc_serial_command_interface_adaa3d36d4c1a1784a1c18f87d756296e.html#adaa3d36d4c1a1784a1c18f87d756296e">sendLZ4Message</a>();</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;        }             </div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    } </div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <span class="keywordflow">else</span>{</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;        Serial.print(F(<span class="stringliteral">&quot;M GET_ERR FILE NOT FOUND &quot;</span>));</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;        Serial.println(<a class="code" href="../../d2/da8/class_svc_serial_command_interface_a0f6637d67b1dfd1fa96ddd10f8f14873.html#a0f6637d67b1dfd1fa96ddd10f8f14873">stream_file</a>);</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;        <a class="code" href="../../d2/da8/class_svc_serial_command_interface_a6ef09b9a0a8e5dfe394340921717e12f.html#a6ef09b9a0a8e5dfe394340921717e12f">is_streaming_file</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;        <a class="code" href="../../d2/da8/class_svc_serial_command_interface_a8cf62cf33b60dab489173b92ac278b5a.html#a8cf62cf33b60dab489173b92ac278b5a">stream_pos</a> = 0;</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    }</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;};</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160; </div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160; </div>
<div class="line"><a name="l00311"></a><span class="lineno"><a class="line" href="../../d2/da8/class_svc_serial_command_interface_af993c07bcbc2bdb566c5660eeb31f1ca.html#af993c07bcbc2bdb566c5660eeb31f1ca">  311</a></span>&#160;<span class="keywordtype">void</span> FASTRUN <a class="code" href="../../d2/da8/class_svc_serial_command_interface_af993c07bcbc2bdb566c5660eeb31f1ca.html#af993c07bcbc2bdb566c5660eeb31f1ca">SvcSerialCommandInterface::update</a>(){ </div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    <span class="keywordtype">char</span> endMarker = <span class="charliteral">&#39;\n&#39;</span>;</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    <span class="keywordtype">boolean</span> newRxMsg = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    <span class="keywordtype">char</span> bufferChr;</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="../../d2/da8/class_svc_serial_command_interface_aac499491449cd984d318a1166fbec4e5.html#aac499491449cd984d318a1166fbec4e5">is_capturing_bulk_data</a>){</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;        Serial.println(F(<span class="stringliteral">&quot;M SvcSerialCommandInterface::updateRT isCapturingBulkData&quot;</span>));</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;        <span class="keywordtype">char</span>* f;</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;        <span class="keywordflow">do</span>{</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;            <span class="keywordflow">do</span>{</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;                <a class="code" href="../../d2/da8/class_svc_serial_command_interface_a840b78c06a070b8245fb851073834f4d.html#a840b78c06a070b8245fb851073834f4d">p_capture_buffer</a>[<a class="code" href="../../d2/da8/class_svc_serial_command_interface_af010243244540ea1407475bf0865682c.html#af010243244540ea1407475bf0865682c">index_capture_buffer</a>] = Serial.read();</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;                <span class="keywordflow">if</span>(<a class="code" href="../../d2/da8/class_svc_serial_command_interface_a840b78c06a070b8245fb851073834f4d.html#a840b78c06a070b8245fb851073834f4d">p_capture_buffer</a>[<a class="code" href="../../d2/da8/class_svc_serial_command_interface_af010243244540ea1407475bf0865682c.html#af010243244540ea1407475bf0865682c">index_capture_buffer</a>] != 0xFF) <a class="code" href="../../d2/da8/class_svc_serial_command_interface_af010243244540ea1407475bf0865682c.html#af010243244540ea1407475bf0865682c">index_capture_buffer</a>++;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;            }<span class="keywordflow">while</span> (Serial.available() &amp;&amp; <a class="code" href="../../d2/da8/class_svc_serial_command_interface_af010243244540ea1407475bf0865682c.html#af010243244540ea1407475bf0865682c">index_capture_buffer</a> &lt; <a class="code" href="../../db/d46/_eris_globals_8h_a7facb41097ec90e24263ff9825caf028.html#a7facb41097ec90e24263ff9825caf028">SERIAL_RX_CAPTURE_BUFFER_SIZE</a>-1);<span class="comment">//in case were asking for the streaming data faster than it&#39;s being sent</span></div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;            <span class="keywordflow">if</span>(<a class="code" href="../../d2/da8/class_svc_serial_command_interface_af010243244540ea1407475bf0865682c.html#af010243244540ea1407475bf0865682c">index_capture_buffer</a> == <a class="code" href="../../db/d46/_eris_globals_8h_a7facb41097ec90e24263ff9825caf028.html#a7facb41097ec90e24263ff9825caf028">SERIAL_RX_CAPTURE_BUFFER_SIZE</a>-1){</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;                Serial.println(F(<span class="stringliteral">&quot;M SvcSerialCommandInterface::updateRT Wren Script ERROR: Input buffer full&quot;</span>));</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;                Serial.flush();</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;                <a class="code" href="../../d2/da8/class_svc_serial_command_interface_aac499491449cd984d318a1166fbec4e5.html#aac499491449cd984d318a1166fbec4e5">is_capturing_bulk_data</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;                <a class="code" href="../../d2/da8/class_svc_serial_command_interface_af010243244540ea1407475bf0865682c.html#af010243244540ea1407475bf0865682c">index_capture_buffer</a> = 0;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;            }</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;            f = strstr(<a class="code" href="../../d2/da8/class_svc_serial_command_interface_a840b78c06a070b8245fb851073834f4d.html#a840b78c06a070b8245fb851073834f4d">p_capture_buffer</a>,<span class="stringliteral">&quot;WREN_SCRIPT_END&quot;</span>);</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;            <span class="keywordflow">if</span> (f &gt; 0){</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;                Serial.println(F(<span class="stringliteral">&quot;M SvcSerialCommandInterface::updateRT Wren Script Received&quot;</span>));</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;                memset(f,0,strlen(<span class="stringliteral">&quot;WREN_SCRIPT_END&quot;</span>));<span class="comment">//remove the EOF marker</span></div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;                <span class="comment">//stream complete</span></div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;                <a class="code" href="../../d2/da8/class_svc_serial_command_interface_aac499491449cd984d318a1166fbec4e5.html#aac499491449cd984d318a1166fbec4e5">is_capturing_bulk_data</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;            }</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;        }<span class="keywordflow">while</span>(<a class="code" href="../../d2/da8/class_svc_serial_command_interface_aac499491449cd984d318a1166fbec4e5.html#aac499491449cd984d318a1166fbec4e5">is_capturing_bulk_data</a>);</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    }<span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d2/da8/class_svc_serial_command_interface_a6ef09b9a0a8e5dfe394340921717e12f.html#a6ef09b9a0a8e5dfe394340921717e12f">is_streaming_file</a>){</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;        <a class="code" href="../../d2/da8/class_svc_serial_command_interface_add54582c8a1dae31f0d69bea84c65c84.html#add54582c8a1dae31f0d69bea84c65c84">streamHandler</a>();</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    }<span class="keywordflow">else</span> <span class="keywordflow">if</span> (Serial.available() &gt; 0 &amp;&amp; <span class="keyword">false</span> == newRxMsg ) {</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;        bufferChr = Serial.read();</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;        <a class="code" href="../../d2/da8/class_svc_serial_command_interface_a80229feee4cd0f6a7676374b0c3f73d3.html#a80229feee4cd0f6a7676374b0c3f73d3">received_chars</a>[<a class="code" href="../../d2/da8/class_svc_serial_command_interface_abc9cf7b45383c0db7d607528f76dd595.html#abc9cf7b45383c0db7d607528f76dd595">index_rx_buffer</a>++] = bufferChr;</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160; </div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="../../d2/da8/class_svc_serial_command_interface_abc9cf7b45383c0db7d607528f76dd595.html#abc9cf7b45383c0db7d607528f76dd595">index_rx_buffer</a> &gt;= (<a class="code" href="../../db/d46/_eris_globals_8h_aba0ceec384cf3acb51e0d6f45f31379c.html#aba0ceec384cf3acb51e0d6f45f31379c">SERIAL_RX_BUFFER_SIZE</a>-16)){</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;            <span class="comment">//input overflow - clear serial input and reset the index</span></div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;            <a class="code" href="../../d2/da8/class_svc_serial_command_interface_abc9cf7b45383c0db7d607528f76dd595.html#abc9cf7b45383c0db7d607528f76dd595">index_rx_buffer</a> = 0;</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;            Serial.clear();</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;            Serial.clearReadError();</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;        }</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160; </div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;        <span class="keywordflow">if</span> (bufferChr == endMarker){</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;            <a class="code" href="../../d2/da8/class_svc_serial_command_interface_a80229feee4cd0f6a7676374b0c3f73d3.html#a80229feee4cd0f6a7676374b0c3f73d3">received_chars</a>[--<a class="code" href="../../d2/da8/class_svc_serial_command_interface_abc9cf7b45383c0db7d607528f76dd595.html#abc9cf7b45383c0db7d607528f76dd595">index_rx_buffer</a>] = <span class="charliteral">&#39;\0&#39;</span>; <span class="comment">//remove the end marker and null terminate the string</span></div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;            <a class="code" href="../../d2/da8/class_svc_serial_command_interface_abc9cf7b45383c0db7d607528f76dd595.html#abc9cf7b45383c0db7d607528f76dd595">index_rx_buffer</a> = 0; <span class="comment">//reset the input write index</span></div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;            newRxMsg = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;        }</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160; </div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;        <span class="keywordflow">if</span> (newRxMsg){</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;            <span class="keywordtype">char</span> cmd[128], param[128],param2[128];</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;            <span class="keywordtype">int</span> total_read;</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;            total_read = sscanf(<a class="code" href="../../d2/da8/class_svc_serial_command_interface_a80229feee4cd0f6a7676374b0c3f73d3.html#a80229feee4cd0f6a7676374b0c3f73d3">received_chars</a>, <span class="stringliteral">&quot;%127s %127s&quot;</span> , cmd, param);</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;            <span class="keywordflow">if</span> (strncmp(cmd, <span class="stringliteral">&quot;LS&quot;</span>,<span class="keyword">sizeof</span>(cmd)) == 0){</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;                <span class="keywordtype">bool</span> first;</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;                <span class="keywordflow">if</span> (total_read &lt; 2){</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;                    <span class="comment">//send the root directory</span></div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;                    <span class="comment">//delay(100);</span></div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;                    <a class="code" href="../../d2/da8/class_svc_serial_command_interface_a809cc3d22320bdd8c54044e278e188f0.html#a809cc3d22320bdd8c54044e278e188f0">empty</a>();</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;                    println(F(<span class="stringliteral">&quot;DIR&quot;</span>));</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;                    print(F(<span class="stringliteral">&quot;LS . [&quot;</span>));</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;<span class="preprocessor">#ifdef USE_EXTMEM</span></div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;                    <span class="comment">//do nothing - one time malloc in the constructor</span></div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;                    workingBuffer = (<span class="keywordtype">char</span>*)malloc(<a class="code" href="../../db/d46/_eris_globals_8h_a2e63e4023af076c8c199ede80957755e.html#a2e63e4023af076c8c199ede80957755e">SERIAL_WORKING_BUFFER_SIZE</a>);</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;                    strcpy(<a class="code" href="../../d2/da8/class_svc_serial_command_interface_a075f61b693a6555fa1b77b40bf6c6883.html#a075f61b693a6555fa1b77b40bf6c6883">p_working_buffer</a>,<a class="code" href="../../d2/da8/class_svc_serial_command_interface_a2d7255a6df2e04c79dad445759ca968e.html#a2d7255a6df2e04c79dad445759ca968e">tx_Buffer</a>);</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;                    <a class="code" href="../../d2/da8/class_svc_serial_command_interface_a809cc3d22320bdd8c54044e278e188f0.html#a809cc3d22320bdd8c54044e278e188f0">empty</a>();</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;                    Serial.print(<a class="code" href="../../d2/da8/class_svc_serial_command_interface_a075f61b693a6555fa1b77b40bf6c6883.html#a075f61b693a6555fa1b77b40bf6c6883">p_working_buffer</a>);</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;                    <a class="code" href="../../db/d69/class_app_base_class_ab763cbfec90f6608f36dfeb36c1e11dd.html#ab763cbfec90f6608f36dfeb36c1e11dd">sd</a>-&gt;chdir();</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;                    <a class="code" href="../../d2/da8/class_svc_serial_command_interface_a9214245f4de217141e2b0d2adc0e47e9.html#a9214245f4de217141e2b0d2adc0e47e9">tx_buffer_overflow_flag</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;                    <a class="code" href="../../db/d69/class_app_base_class_ab763cbfec90f6608f36dfeb36c1e11dd.html#ab763cbfec90f6608f36dfeb36c1e11dd">sd</a>-&gt;ls(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;                    memset(<a class="code" href="../../d2/da8/class_svc_serial_command_interface_a075f61b693a6555fa1b77b40bf6c6883.html#a075f61b693a6555fa1b77b40bf6c6883">p_working_buffer</a>,0,<a class="code" href="../../db/d46/_eris_globals_8h_a2e63e4023af076c8c199ede80957755e.html#a2e63e4023af076c8c199ede80957755e">SERIAL_WORKING_BUFFER_SIZE</a>);</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;                    strcpy(<a class="code" href="../../d2/da8/class_svc_serial_command_interface_a075f61b693a6555fa1b77b40bf6c6883.html#a075f61b693a6555fa1b77b40bf6c6883">p_working_buffer</a>,<a class="code" href="../../d2/da8/class_svc_serial_command_interface_a2d7255a6df2e04c79dad445759ca968e.html#a2d7255a6df2e04c79dad445759ca968e">tx_Buffer</a>);</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;                    <a class="code" href="../../d2/da8/class_svc_serial_command_interface_a809cc3d22320bdd8c54044e278e188f0.html#a809cc3d22320bdd8c54044e278e188f0">empty</a>();</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;                    first = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;                    <a class="code" href="../../da/d7d/_svc_serial_command_interface_8cpp_a1d71425d9df28667d528833a4db10432.html#a1d71425d9df28667d528833a4db10432">token</a> = strtok(<a class="code" href="../../d2/da8/class_svc_serial_command_interface_a075f61b693a6555fa1b77b40bf6c6883.html#a075f61b693a6555fa1b77b40bf6c6883">p_working_buffer</a>, &amp;<a class="code" href="../../da/d7d/_svc_serial_command_interface_8cpp_ab4b2f46f6bc0178f1f3efc5dba880bf8.html#ab4b2f46f6bc0178f1f3efc5dba880bf8">newline</a>);</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;                    <span class="keywordflow">while</span>( <a class="code" href="../../da/d7d/_svc_serial_command_interface_8cpp_a1d71425d9df28667d528833a4db10432.html#a1d71425d9df28667d528833a4db10432">token</a> != NULL ) {</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;                        <span class="keywordflow">if</span> (first &amp;&amp; !<a class="code" href="../../d2/da8/class_svc_serial_command_interface_a9214245f4de217141e2b0d2adc0e47e9.html#a9214245f4de217141e2b0d2adc0e47e9">tx_buffer_overflow_flag</a>) Serial.print(F(<span class="stringliteral">&quot;\&quot;&quot;</span>));</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;                        <span class="keywordflow">else</span> Serial.print(F(<span class="stringliteral">&quot;,\&quot;&quot;</span>));</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;                        Serial.print(<a class="code" href="../../da/d7d/_svc_serial_command_interface_8cpp_a1d71425d9df28667d528833a4db10432.html#a1d71425d9df28667d528833a4db10432">token</a>);</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;                        Serial.print(F(<span class="stringliteral">&quot;\&quot;&quot;</span>));</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;                        <a class="code" href="../../da/d7d/_svc_serial_command_interface_8cpp_a1d71425d9df28667d528833a4db10432.html#a1d71425d9df28667d528833a4db10432">token</a> = strtok(NULL, &amp;<a class="code" href="../../da/d7d/_svc_serial_command_interface_8cpp_ab4b2f46f6bc0178f1f3efc5dba880bf8.html#ab4b2f46f6bc0178f1f3efc5dba880bf8">newline</a>);</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;                        first = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;                    }</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;                    Serial.println(F(<span class="stringliteral">&quot;]&quot;</span>));</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;                    Serial.println(F(<span class="stringliteral">&quot;DIR_EOF&quot;</span>));</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;<span class="preprocessor">#ifdef USE_EXTMEM                    </span></div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;                    <span class="comment">//do nothing - one time malloc in the constructor</span></div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;                    <a class="code" href="../../de/d24/_creative_01_commons_01_attribution_014_80_01_international_01_public_01_license_8txt_ad60615c03295d4d2fad448999bddbe3b.html#ad60615c03295d4d2fad448999bddbe3b">free</a>(workingBuffer);</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;                    <span class="comment">//delay(200);</span></div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;                } <span class="keywordflow">else</span>{</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;                    <span class="comment">//send the requested path</span></div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;                    <a class="code" href="../../da/d7d/_svc_serial_command_interface_8cpp_a0f3daef760195868b4aef06728c4119f.html#a0f3daef760195868b4aef06728c4119f">replacechar</a>(param,<span class="charliteral">&#39;:&#39;</span>,<span class="charliteral">&#39; &#39;</span>); <span class="comment">//replace space token used to tx the path</span></div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;                    <a class="code" href="../../d2/da8/class_svc_serial_command_interface_a809cc3d22320bdd8c54044e278e188f0.html#a809cc3d22320bdd8c54044e278e188f0">empty</a>();</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;                    print(F(<span class="stringliteral">&quot;M &quot;</span>));</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;                    println(param);</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;                    println(F(<span class="stringliteral">&quot;DIR&quot;</span>));</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;                    <a class="code" href="../../d2/da8/class_svc_serial_command_interface_a0c889fc44a89c71adbcb1bf1bddbf397.html#a0c889fc44a89c71adbcb1bf1bddbf397">send</a>();</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;                    <a class="code" href="../../db/d69/class_app_base_class_ab763cbfec90f6608f36dfeb36c1e11dd.html#ab763cbfec90f6608f36dfeb36c1e11dd">sd</a>-&gt;chdir();</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;                    <a class="code" href="../../da/d7d/_svc_serial_command_interface_8cpp_a0f3daef760195868b4aef06728c4119f.html#a0f3daef760195868b4aef06728c4119f">replacechar</a>(param,<span class="charliteral">&#39; &#39;</span>,<span class="charliteral">&#39;:&#39;</span>); <span class="comment">//replace any spaces in the transmitted path to &#39;:&#39;</span></div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;                    sprintf(<a class="code" href="../../d2/da8/class_svc_serial_command_interface_afefe4ffe8389e6e818892e5cd935f161.html#afefe4ffe8389e6e818892e5cd935f161">multipart_header</a>, <span class="stringliteral">&quot;LS %s [&quot;</span>, param);</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;                    Serial.print(<a class="code" href="../../d2/da8/class_svc_serial_command_interface_afefe4ffe8389e6e818892e5cd935f161.html#afefe4ffe8389e6e818892e5cd935f161">multipart_header</a>);</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;                    <a class="code" href="../../da/d7d/_svc_serial_command_interface_8cpp_a0f3daef760195868b4aef06728c4119f.html#a0f3daef760195868b4aef06728c4119f">replacechar</a>(param,<span class="charliteral">&#39;:&#39;</span>,<span class="charliteral">&#39; &#39;</span>); <span class="comment">// put the spaces back in time for the ls command</span></div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;                    <a class="code" href="../../db/d69/class_app_base_class_ab763cbfec90f6608f36dfeb36c1e11dd.html#ab763cbfec90f6608f36dfeb36c1e11dd">sd</a>-&gt;ls(<span class="keyword">this</span>,param,<span class="keyword">false</span>);</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;                    first = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;                    <a class="code" href="../../da/d7d/_svc_serial_command_interface_8cpp_a1d71425d9df28667d528833a4db10432.html#a1d71425d9df28667d528833a4db10432">token</a> = strtok(<a class="code" href="../../d2/da8/class_svc_serial_command_interface_a2d7255a6df2e04c79dad445759ca968e.html#a2d7255a6df2e04c79dad445759ca968e">tx_Buffer</a>, &amp;<a class="code" href="../../da/d7d/_svc_serial_command_interface_8cpp_ab4b2f46f6bc0178f1f3efc5dba880bf8.html#ab4b2f46f6bc0178f1f3efc5dba880bf8">newline</a>);</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;                    <span class="keywordflow">while</span>( <a class="code" href="../../da/d7d/_svc_serial_command_interface_8cpp_a1d71425d9df28667d528833a4db10432.html#a1d71425d9df28667d528833a4db10432">token</a> != NULL &amp;&amp; <a class="code" href="../../d2/da8/class_svc_serial_command_interface_ae440a4e85836972ce2765d98eaccf718.html#ae440a4e85836972ce2765d98eaccf718">index_tx_buffer</a> &gt; 1) {                        </div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;                        <span class="keywordflow">if</span> (first &amp;&amp; !<a class="code" href="../../d2/da8/class_svc_serial_command_interface_a9214245f4de217141e2b0d2adc0e47e9.html#a9214245f4de217141e2b0d2adc0e47e9">tx_buffer_overflow_flag</a>) Serial.print(F(<span class="stringliteral">&quot;\&quot;&quot;</span>));</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;                        <span class="keywordflow">else</span> Serial.print(F(<span class="stringliteral">&quot;,\&quot;&quot;</span>));</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;                        <a class="code" href="../../da/d7d/_svc_serial_command_interface_8cpp_a0f3daef760195868b4aef06728c4119f.html#a0f3daef760195868b4aef06728c4119f">replacechar</a>(<a class="code" href="../../da/d7d/_svc_serial_command_interface_8cpp_a1d71425d9df28667d528833a4db10432.html#a1d71425d9df28667d528833a4db10432">token</a>,<span class="charliteral">&#39;\r&#39;</span>,0);</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;                        Serial.print(<a class="code" href="../../da/d7d/_svc_serial_command_interface_8cpp_a1d71425d9df28667d528833a4db10432.html#a1d71425d9df28667d528833a4db10432">token</a>);</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;                        Serial.print(F(<span class="stringliteral">&quot;\&quot;&quot;</span>));</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;                        <a class="code" href="../../da/d7d/_svc_serial_command_interface_8cpp_a1d71425d9df28667d528833a4db10432.html#a1d71425d9df28667d528833a4db10432">token</a> = strtok(NULL, &amp;<a class="code" href="../../da/d7d/_svc_serial_command_interface_8cpp_ab4b2f46f6bc0178f1f3efc5dba880bf8.html#ab4b2f46f6bc0178f1f3efc5dba880bf8">newline</a>);</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;                        first = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;                        <span class="keywordflow">while</span>(<a class="code" href="../../d2/da8/class_svc_serial_command_interface_a72fa7592492598637d233d9abe27f8f0.html#a72fa7592492598637d233d9abe27f8f0">throttle</a>()){</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;                            delay(50);</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;                        }</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;                    }</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;                    Serial.println(F(<span class="stringliteral">&quot;]&quot;</span>));</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;                    Serial.println(F(<span class="stringliteral">&quot;DIR_EOF&quot;</span>));</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;                }</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;            }<span class="keywordflow">else</span> <span class="keywordflow">if</span> (strncmp(cmd, <span class="stringliteral">&quot;GET&quot;</span>,<span class="keyword">sizeof</span>(cmd)) == 0){</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;                total_read = sscanf(<a class="code" href="../../d2/da8/class_svc_serial_command_interface_a80229feee4cd0f6a7676374b0c3f73d3.html#a80229feee4cd0f6a7676374b0c3f73d3">received_chars</a>, <span class="stringliteral">&quot;%127s %127s %127s&quot;</span> , cmd, param,param2);</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;                <span class="keywordflow">if</span> (total_read &lt; 3){</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;                    Serial.print(F(<span class="stringliteral">&quot;M GET_ERR WRONG PARAM COUNT&quot;</span>));</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;                    Serial.println(param);</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;                } <span class="keywordflow">else</span>{</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;                    <span class="comment">//file streaming request ok</span></div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;                    <span class="comment">//init the transfer</span></div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;                    Serial.print(F(<span class="stringliteral">&quot;M GET_OK &quot;</span>)); </div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;                    Serial.print(param);</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;                    Serial.print(<span class="stringliteral">&quot; &quot;</span>);</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;                    Serial.println(param2);</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;                    strcpy(<a class="code" href="../../d2/da8/class_svc_serial_command_interface_a16e45c7aa993f2c967886b11badde293.html#a16e45c7aa993f2c967886b11badde293">stream_path</a>,param);</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;                    strcpy(<a class="code" href="../../d2/da8/class_svc_serial_command_interface_a0f6637d67b1dfd1fa96ddd10f8f14873.html#a0f6637d67b1dfd1fa96ddd10f8f14873">stream_file</a>,param2);</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;                    Serial.println(F(<span class="stringliteral">&quot;FS_START&quot;</span>));</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;                    <a class="code" href="../../d2/da8/class_svc_serial_command_interface_a6ef09b9a0a8e5dfe394340921717e12f.html#a6ef09b9a0a8e5dfe394340921717e12f">is_streaming_file</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;                    <a class="code" href="../../d2/da8/class_svc_serial_command_interface_a30754b909a8f6911ffe8cb4b5872e1a0.html#a30754b909a8f6911ffe8cb4b5872e1a0">is_periodic_messages_enabled</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;                    <a class="code" href="../../d2/da8/class_svc_serial_command_interface_a8cf62cf33b60dab489173b92ac278b5a.html#a8cf62cf33b60dab489173b92ac278b5a">stream_pos</a> = 0;</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;                }</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;            }<span class="keywordflow">else</span> <span class="keywordflow">if</span> (strncmp(cmd, <span class="stringliteral">&quot;ACON&quot;</span>,<span class="keyword">sizeof</span>(cmd)) == 0){ <span class="comment">//audio connections</span></div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;                uint16_t i;  </div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;                <span class="keywordtype">char</span> csBuffer[128];</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;                i = 0;</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;                Serial.println(F(<span class="stringliteral">&quot;M ACON START&quot;</span>));</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;                </div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;                <span class="keywordflow">while</span>(<a class="code" href="../../db/d69/class_app_base_class_ad66a3cbbe4a3b973dea5c83a068bc79f.html#ad66a3cbbe4a3b973dea5c83a068bc79f">ad</a>-&gt;<a class="code" href="../../d8/d1c/class_audio_director_a3aac7905bf91399796f415898fc63cd1.html#a3aac7905bf91399796f415898fc63cd1">getConnectionString</a>(i,csBuffer)){</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;                    i += 1;</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;                    Serial.print(<span class="stringliteral">&quot;M &quot;</span>);</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;                    Serial.println(csBuffer);</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;                }</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;                Serial.println(F(<span class="stringliteral">&quot;M ACON END&quot;</span>));</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160; </div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;            }<span class="keywordflow">else</span> <span class="keywordflow">if</span> (strncmp(cmd, <span class="stringliteral">&quot;CONNECT&quot;</span>,<span class="keyword">sizeof</span>(cmd)) == 0){</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;                <span class="keywordtype">int</span> source_port;</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;                <span class="keywordtype">int</span> dest_port;</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;                </div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;                total_read = sscanf(<a class="code" href="../../d2/da8/class_svc_serial_command_interface_a80229feee4cd0f6a7676374b0c3f73d3.html#a80229feee4cd0f6a7676374b0c3f73d3">received_chars</a>, <span class="stringliteral">&quot;%127s %127s %d %127s %d&quot;</span> , cmd, param,&amp;source_port,param2,&amp;dest_port);</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;                <span class="keywordflow">if</span> (total_read &lt; 3){</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;                    Serial.print(F(<span class="stringliteral">&quot;M CONNECT WRONG PARAM COUNT &quot;</span>));</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;                    Serial.println(<a class="code" href="../../d2/da8/class_svc_serial_command_interface_a80229feee4cd0f6a7676374b0c3f73d3.html#a80229feee4cd0f6a7676374b0c3f73d3">received_chars</a>);</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;                } <span class="keywordflow">else</span>{</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;                    <a class="code" href="../../db/d69/class_app_base_class_ad66a3cbbe4a3b973dea5c83a068bc79f.html#ad66a3cbbe4a3b973dea5c83a068bc79f">ad</a>-&gt;<a class="code" href="../../d8/d1c/class_audio_director_ab4957e373e5d9078454d07da471f1d94.html#ab4957e373e5d9078454d07da471f1d94">connect</a>(param,source_port,param2,dest_port);</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;                }</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;            }<span class="keywordflow">else</span> <span class="keywordflow">if</span> (strncmp(cmd, <span class="stringliteral">&quot;DISCONNECT&quot;</span>,<span class="keyword">sizeof</span>(cmd)) == 0){</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;                <span class="keywordtype">int</span> dest_port;</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;                total_read = sscanf(<a class="code" href="../../d2/da8/class_svc_serial_command_interface_a80229feee4cd0f6a7676374b0c3f73d3.html#a80229feee4cd0f6a7676374b0c3f73d3">received_chars</a>, <span class="stringliteral">&quot;%127s %127s %d&quot;</span> , cmd, param,&amp;dest_port);</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;                <span class="keywordflow">if</span> (total_read &lt; 2){</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;                    Serial.print(F(<span class="stringliteral">&quot;M DISCONNECT WRONG PARAM COUNT &quot;</span>));</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;                    Serial.println(<a class="code" href="../../d2/da8/class_svc_serial_command_interface_a80229feee4cd0f6a7676374b0c3f73d3.html#a80229feee4cd0f6a7676374b0c3f73d3">received_chars</a>);</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;                } <span class="keywordflow">else</span>{</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="../../db/d69/class_app_base_class_ad66a3cbbe4a3b973dea5c83a068bc79f.html#ad66a3cbbe4a3b973dea5c83a068bc79f">ad</a>-&gt;<a class="code" href="../../d8/d1c/class_audio_director_aae48fff50fc2763f06611db46ae7c94e.html#aae48fff50fc2763f06611db46ae7c94e">disconnect</a>(param,dest_port)){</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;                        Serial.printf(F(<span class="stringliteral">&quot;M DISCONNECTED %s %d\n&quot;</span>),param,dest_port);</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;                    }<span class="keywordflow">else</span>{</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;                        Serial.printf(F(<span class="stringliteral">&quot;M FAILED DISCONNECT OF %s %d\n&quot;</span>),param,dest_port);</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;                    }</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;                }</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;            }<span class="keywordflow">else</span> <span class="keywordflow">if</span> (strncmp(cmd, <span class="stringliteral">&quot;AA&quot;</span>,<span class="keyword">sizeof</span>(cmd)) == 0){         <span class="comment">//active app message</span></div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;                <span class="keywordflow">if</span> (total_read &gt; 1) <a class="code" href="../../db/d69/class_app_base_class_a6baed35a61a4cae1b3c67113aa6ec1dd.html#a6baed35a61a4cae1b3c67113aa6ec1dd">am</a>-&gt;<a class="code" href="../../da/d96/class_app_manager_aae60a456d65e4cdf7a3455e288a9a052.html#aae60a456d65e4cdf7a3455e288a9a052">getActiveApp</a>()-&gt;<a class="code" href="../../db/d69/class_app_base_class_ae1c0e3873bd65919752776311c7c509b.html#ae1c0e3873bd65919752776311c7c509b">messageHandler</a>(<span class="keyword">this</span>,param);</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;            }<span class="keywordflow">else</span> <span class="keywordflow">if</span> (strncmp(cmd, <span class="stringliteral">&quot;APC&quot;</span>,<span class="keyword">sizeof</span>(cmd)) == 0){</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;                <span class="comment">//forward the message to the SvcErisAudioParameterController</span></div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;                <a class="code" href="../../db/d69/class_app_base_class_a6baed35a61a4cae1b3c67113aa6ec1dd.html#a6baed35a61a4cae1b3c67113aa6ec1dd">am</a>-&gt;<a class="code" href="../../da/d96/class_app_manager_a08daaf40a3ddaa938603039eb1e67d09.html#a08daaf40a3ddaa938603039eb1e67d09">getAppByName</a>(<span class="stringliteral">&quot;APC&quot;</span>)-&gt;<a class="code" href="../../db/d69/class_app_base_class_ae1c0e3873bd65919752776311c7c509b.html#ae1c0e3873bd65919752776311c7c509b">messageHandler</a>(<span class="keyword">this</span>,<a class="code" href="../../d2/da8/class_svc_serial_command_interface_a80229feee4cd0f6a7676374b0c3f73d3.html#a80229feee4cd0f6a7676374b0c3f73d3">received_chars</a> + 4);</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;            }<span class="keywordflow">else</span> <span class="keywordflow">if</span> (strncmp(cmd, <span class="stringliteral">&quot;STATS&quot;</span>,<span class="keyword">sizeof</span>(cmd)) == 0){</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;                <a class="code" href="../../db/d69/class_app_base_class_ad66a3cbbe4a3b973dea5c83a068bc79f.html#ad66a3cbbe4a3b973dea5c83a068bc79f">ad</a>-&gt;<a class="code" href="../../d8/d1c/class_audio_director_a0e1e6093fa5c9c76f11483ac5c9cc776.html#a0e1e6093fa5c9c76f11483ac5c9cc776">printStats</a>();</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;                <span class="keywordflow">while</span>(<a class="code" href="../../d2/da8/class_svc_serial_command_interface_a72fa7592492598637d233d9abe27f8f0.html#a72fa7592492598637d233d9abe27f8f0">throttle</a>()){delay(2);}</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;                <a class="code" href="../../db/d69/class_app_base_class_a6baed35a61a4cae1b3c67113aa6ec1dd.html#a6baed35a61a4cae1b3c67113aa6ec1dd">am</a>-&gt;<a class="code" href="../../da/d96/class_app_manager_a648bf66164619cfcc0f0b41e7b3a022f.html#a648bf66164619cfcc0f0b41e7b3a022f">printStats</a>();</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;            }<span class="keywordflow">else</span> <span class="keywordflow">if</span> (strncmp(cmd, <span class="stringliteral">&quot;CQT_CFG&quot;</span>,<span class="keyword">sizeof</span>(cmd)) == 0){ </div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;                <a class="code" href="../../db/d69/class_app_base_class_a6baed35a61a4cae1b3c67113aa6ec1dd.html#a6baed35a61a4cae1b3c67113aa6ec1dd">am</a>-&gt;<a class="code" href="../../da/d96/class_app_manager_aa4f7649ae1aa1a567286d73981f00090.html#aa4f7649ae1aa1a567286d73981f00090">sendMessage</a>(<span class="keyword">this</span>,<span class="stringliteral">&quot;AppCQT&quot;</span>,<span class="stringliteral">&quot;CQT_INFO&quot;</span>);</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;            }<span class="keywordflow">else</span> <span class="keywordflow">if</span> (strncmp(cmd, <span class="stringliteral">&quot;GET_DD&quot;</span>,<span class="keyword">sizeof</span>(cmd)) == 0){ </div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;                <a class="code" href="../../db/d69/class_app_base_class_a6baed35a61a4cae1b3c67113aa6ec1dd.html#a6baed35a61a4cae1b3c67113aa6ec1dd">am</a>-&gt;<a class="code" href="../../da/d96/class_app_manager_a702921f08484c897380064116a4a23a6.html#a702921f08484c897380064116a4a23a6">data</a>-&gt;printDictionary(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;            }<span class="keywordflow">else</span> <span class="keywordflow">if</span> (strncmp(cmd, <span class="stringliteral">&quot;GET_WREN_SCRIPT&quot;</span>,<span class="keyword">sizeof</span>(cmd)) == 0){ </div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;                <span class="keywordflow">if</span>(!<a class="code" href="../../d2/da8/class_svc_serial_command_interface_a0793f597a16bd5e1b99084354ac0415e.html#a0793f597a16bd5e1b99084354ac0415e">requestStartLZ4Message</a>()) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;                println(<span class="stringliteral">&quot;#WREN_START!&quot;</span>); </div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;                println(g_wrenScript);</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;                println(<span class="stringliteral">&quot;#WREN_EOF!&quot;</span>);</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;                <a class="code" href="../../d2/da8/class_svc_serial_command_interface_adaa3d36d4c1a1784a1c18f87d756296e.html#adaa3d36d4c1a1784a1c18f87d756296e">sendLZ4Message</a>();</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;            }<span class="keywordflow">else</span> <span class="keywordflow">if</span> (strncmp(cmd, <span class="stringliteral">&quot;WREN_SCRIPT_START&quot;</span>,<span class="keyword">sizeof</span>(cmd)) == 0){</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;                <a class="code" href="../../d2/da8/class_svc_serial_command_interface_aac499491449cd984d318a1166fbec4e5.html#aac499491449cd984d318a1166fbec4e5">is_capturing_bulk_data</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;<span class="preprocessor">#ifndef USE_EXTMEM</span></div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;                <span class="keywordtype">char</span>* tmp;</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;                tmp = (<span class="keywordtype">char</span>*)realloc(captureBuffer,<a class="code" href="../../db/d46/_eris_globals_8h_a7facb41097ec90e24263ff9825caf028.html#a7facb41097ec90e24263ff9825caf028">SERIAL_RX_CAPTURE_BUFFER_SIZE</a>);</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;                <span class="keywordflow">if</span>(tmp==NULL){</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;                    <span class="comment">//realloc failed; release the pointer and try again</span></div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;                    <a class="code" href="../../de/d24/_creative_01_commons_01_attribution_014_80_01_international_01_public_01_license_8txt_ad60615c03295d4d2fad448999bddbe3b.html#ad60615c03295d4d2fad448999bddbe3b">free</a>(captureBuffer);</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;                    captureBuffer = (<span class="keywordtype">char</span>*)malloc(<a class="code" href="../../db/d46/_eris_globals_8h_a7facb41097ec90e24263ff9825caf028.html#a7facb41097ec90e24263ff9825caf028">SERIAL_RX_CAPTURE_BUFFER_SIZE</a>);</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;                } <span class="keywordflow">else</span> captureBuffer = tmp;</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;                <span class="keywordflow">if</span>(<a class="code" href="../../d2/da8/class_svc_serial_command_interface_a840b78c06a070b8245fb851073834f4d.html#a840b78c06a070b8245fb851073834f4d">p_capture_buffer</a>!=NULL){</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;                    memset(<a class="code" href="../../d2/da8/class_svc_serial_command_interface_a840b78c06a070b8245fb851073834f4d.html#a840b78c06a070b8245fb851073834f4d">p_capture_buffer</a>,0,<a class="code" href="../../db/d46/_eris_globals_8h_a7facb41097ec90e24263ff9825caf028.html#a7facb41097ec90e24263ff9825caf028">SERIAL_RX_CAPTURE_BUFFER_SIZE</a>);</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;                    <a class="code" href="../../d2/da8/class_svc_serial_command_interface_af010243244540ea1407475bf0865682c.html#af010243244540ea1407475bf0865682c">index_capture_buffer</a> = 0;</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;                    Serial.println(F(<span class="stringliteral">&quot;M SvcSerialCommandInterface::updateRT: captureBuffer allocated and initalized&quot;</span>));</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;                } <span class="keywordflow">else</span>{</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;                    <a class="code" href="../../d2/da8/class_svc_serial_command_interface_aac499491449cd984d318a1166fbec4e5.html#aac499491449cd984d318a1166fbec4e5">is_capturing_bulk_data</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;                    Serial.println(F(<span class="stringliteral">&quot;M SvcSerialCommandInterface::updateRT: ERROR: realloc(SERIAL_RX_CAPTURE_BUFFER_SIZE) failed&quot;</span>));</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;                    Serial.flush();</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;                }</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;            }<span class="keywordflow">else</span> <span class="keywordflow">if</span> (strncmp(cmd, <span class="stringliteral">&quot;WREN_SCRIPT_COMPILE&quot;</span>,<span class="keyword">sizeof</span>(cmd)) == 0){</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;                <span class="keywordflow">if</span>(<a class="code" href="../../d2/da8/class_svc_serial_command_interface_a840b78c06a070b8245fb851073834f4d.html#a840b78c06a070b8245fb851073834f4d">p_capture_buffer</a> != NULL){</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;                    Serial.println(F(<span class="stringliteral">&quot;M SvcSerialCommandInterface::updateRT: script compile request&quot;</span>));</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;                    <a class="code" href="../../db/d69/class_app_base_class_a6baed35a61a4cae1b3c67113aa6ec1dd.html#a6baed35a61a4cae1b3c67113aa6ec1dd">am</a>-&gt;<a class="code" href="../../da/d96/class_app_manager_aa4f7649ae1aa1a567286d73981f00090.html#aa4f7649ae1aa1a567286d73981f00090">sendMessage</a>(<span class="keyword">this</span>,<span class="stringliteral">&quot;AppWren&quot;</span>,<span class="stringliteral">&quot;WREN_SCRIPT_COMPILE&quot;</span>);</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;                    <a class="code" href="../../db/d69/class_app_base_class_a6baed35a61a4cae1b3c67113aa6ec1dd.html#a6baed35a61a4cae1b3c67113aa6ec1dd">am</a>-&gt;<a class="code" href="../../da/d96/class_app_manager_aa4f7649ae1aa1a567286d73981f00090.html#aa4f7649ae1aa1a567286d73981f00090">sendMessage</a>(<span class="keyword">this</span>,<span class="stringliteral">&quot;AppWren&quot;</span>,<a class="code" href="../../d2/da8/class_svc_serial_command_interface_a840b78c06a070b8245fb851073834f4d.html#a840b78c06a070b8245fb851073834f4d">p_capture_buffer</a>);</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;<span class="preprocessor">#ifndef USE_EXTMEM</span></div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;                    captureBuffer = (<span class="keywordtype">char</span>*)realloc(captureBuffer,0);</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;                    Serial.println(F(<span class="stringliteral">&quot;M SvcSerialCommandInterface::updateRT: captureBuffer released&quot;</span>));</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;                } <span class="keywordflow">else</span> Serial.println(F(<span class="stringliteral">&quot;M SvcSerialCommandInterface::updateRT: captureBuffer is NULL&quot;</span>));    </div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;            }<span class="keywordflow">else</span> <span class="keywordflow">if</span> (strncmp(cmd, <span class="stringliteral">&quot;WREN_SCRIPT_EXECUTE&quot;</span>,<span class="keyword">sizeof</span>(cmd)) == 0){</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;                <span class="keywordflow">if</span>(<a class="code" href="../../d2/da8/class_svc_serial_command_interface_a840b78c06a070b8245fb851073834f4d.html#a840b78c06a070b8245fb851073834f4d">p_capture_buffer</a> != NULL){</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;                    Serial.println(F(<span class="stringliteral">&quot;M SvcSerialCommandInterface::updateRT: script execute request&quot;</span>));</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;                    <a class="code" href="../../db/d69/class_app_base_class_a6baed35a61a4cae1b3c67113aa6ec1dd.html#a6baed35a61a4cae1b3c67113aa6ec1dd">am</a>-&gt;<a class="code" href="../../da/d96/class_app_manager_aa4f7649ae1aa1a567286d73981f00090.html#aa4f7649ae1aa1a567286d73981f00090">sendMessage</a>(<span class="keyword">this</span>,<span class="stringliteral">&quot;AppWren&quot;</span>,<span class="stringliteral">&quot;WREN_SCRIPT_EXECUTE&quot;</span>);</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;                    <a class="code" href="../../db/d69/class_app_base_class_a6baed35a61a4cae1b3c67113aa6ec1dd.html#a6baed35a61a4cae1b3c67113aa6ec1dd">am</a>-&gt;<a class="code" href="../../da/d96/class_app_manager_aa4f7649ae1aa1a567286d73981f00090.html#aa4f7649ae1aa1a567286d73981f00090">sendMessage</a>(<span class="keyword">this</span>,<span class="stringliteral">&quot;AppWren&quot;</span>,<a class="code" href="../../d2/da8/class_svc_serial_command_interface_a840b78c06a070b8245fb851073834f4d.html#a840b78c06a070b8245fb851073834f4d">p_capture_buffer</a>);</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;<span class="preprocessor">#ifndef USE_EXTMEM</span></div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;                    captureBuffer = (<span class="keywordtype">char</span>*)realloc(captureBuffer,0);</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;                    Serial.println(F(<span class="stringliteral">&quot;M SvcSerialCommandInterface::updateRT: captureBuffer released&quot;</span>));</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;                } <span class="keywordflow">else</span> Serial.println(F(<span class="stringliteral">&quot;M SvcSerialCommandInterface::updateRT: captureBuffer is NULL&quot;</span>));</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;            }<span class="keywordflow">else</span> <span class="keywordflow">if</span> (strncmp(cmd, <span class="stringliteral">&quot;WREN_SCRIPT_SAVE&quot;</span>,<span class="keyword">sizeof</span>(cmd)) == 0){</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;                <span class="keywordflow">if</span>(<a class="code" href="../../d2/da8/class_svc_serial_command_interface_a840b78c06a070b8245fb851073834f4d.html#a840b78c06a070b8245fb851073834f4d">p_capture_buffer</a> != NULL){</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;                    Serial.println(F(<span class="stringliteral">&quot;M SvcSerialCommandInterface::updateRT: script save request&quot;</span>));</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;                    <a class="code" href="../../db/d69/class_app_base_class_a6baed35a61a4cae1b3c67113aa6ec1dd.html#a6baed35a61a4cae1b3c67113aa6ec1dd">am</a>-&gt;<a class="code" href="../../da/d96/class_app_manager_aa4f7649ae1aa1a567286d73981f00090.html#aa4f7649ae1aa1a567286d73981f00090">sendMessage</a>(<span class="keyword">this</span>,<span class="stringliteral">&quot;AppWren&quot;</span>,<a class="code" href="../../d2/da8/class_svc_serial_command_interface_a80229feee4cd0f6a7676374b0c3f73d3.html#a80229feee4cd0f6a7676374b0c3f73d3">received_chars</a>);<span class="comment">//&quot;WREN_SCRIPT_SAVE [modulename]&quot;);</span></div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;                    <a class="code" href="../../db/d69/class_app_base_class_a6baed35a61a4cae1b3c67113aa6ec1dd.html#a6baed35a61a4cae1b3c67113aa6ec1dd">am</a>-&gt;<a class="code" href="../../da/d96/class_app_manager_aa4f7649ae1aa1a567286d73981f00090.html#aa4f7649ae1aa1a567286d73981f00090">sendMessage</a>(<span class="keyword">this</span>,<span class="stringliteral">&quot;AppWren&quot;</span>,<a class="code" href="../../d2/da8/class_svc_serial_command_interface_a840b78c06a070b8245fb851073834f4d.html#a840b78c06a070b8245fb851073834f4d">p_capture_buffer</a>);</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;<span class="preprocessor">#ifndef USE_EXTMEM</span></div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;                    captureBuffer = (<span class="keywordtype">char</span>*)realloc(captureBuffer,0);</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;                    Serial.println(F(<span class="stringliteral">&quot;M SvcSerialCommandInterface::updateRT: captureBuffer released&quot;</span>));</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;                } <span class="keywordflow">else</span> Serial.println(F(<span class="stringliteral">&quot;M SvcSerialCommandInterface::updateRT: captureBuffer is NULL&quot;</span>));</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;            }<span class="keywordflow">else</span> <span class="keywordflow">if</span> (strncmp(cmd, <span class="stringliteral">&quot;UPDATE_DD&quot;</span>,<span class="keyword">sizeof</span>(cmd)) == 0){</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;                int32_t val;</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;                float32_t fval;</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;                total_read = sscanf(<a class="code" href="../../d2/da8/class_svc_serial_command_interface_a80229feee4cd0f6a7676374b0c3f73d3.html#a80229feee4cd0f6a7676374b0c3f73d3">received_chars</a>, <span class="stringliteral">&quot;%127s %127s %d&quot;</span> , cmd, param,(<span class="keywordtype">int</span>*)&amp;val);</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;                <span class="keywordflow">if</span> (total_read &lt; 3){</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;                    total_read = sscanf(<a class="code" href="../../d2/da8/class_svc_serial_command_interface_a80229feee4cd0f6a7676374b0c3f73d3.html#a80229feee4cd0f6a7676374b0c3f73d3">received_chars</a>, <span class="stringliteral">&quot;%127s %127s %f&quot;</span> , cmd, param,(float32_t*)&amp;fval);</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;                    <span class="keywordflow">if</span> (total_read &lt; 3){</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;                        Serial.print(F(<span class="stringliteral">&quot;M WRONG PARAM COUNT&quot;</span>));</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;                        Serial.println(total_read);</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;                    } <span class="keywordflow">else</span> <a class="code" href="../../db/d69/class_app_base_class_a6baed35a61a4cae1b3c67113aa6ec1dd.html#a6baed35a61a4cae1b3c67113aa6ec1dd">am</a>-&gt;<a class="code" href="../../da/d96/class_app_manager_a702921f08484c897380064116a4a23a6.html#a702921f08484c897380064116a4a23a6">data</a>-&gt;update(param,fval); </div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;                }<span class="keywordflow">else</span> <span class="keywordflow">if</span>(!<a class="code" href="../../db/d69/class_app_base_class_a6baed35a61a4cae1b3c67113aa6ec1dd.html#a6baed35a61a4cae1b3c67113aa6ec1dd">am</a>-&gt;<a class="code" href="../../da/d96/class_app_manager_a702921f08484c897380064116a4a23a6.html#a702921f08484c897380064116a4a23a6">data</a>-&gt;update(param,val)){</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;                    total_read = sscanf(<a class="code" href="../../d2/da8/class_svc_serial_command_interface_a80229feee4cd0f6a7676374b0c3f73d3.html#a80229feee4cd0f6a7676374b0c3f73d3">received_chars</a>, <span class="stringliteral">&quot;%127s %127s %f&quot;</span> , cmd, param,(float32_t*)&amp;fval);</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;                    <a class="code" href="../../db/d69/class_app_base_class_a6baed35a61a4cae1b3c67113aa6ec1dd.html#a6baed35a61a4cae1b3c67113aa6ec1dd">am</a>-&gt;<a class="code" href="../../da/d96/class_app_manager_a702921f08484c897380064116a4a23a6.html#a702921f08484c897380064116a4a23a6">data</a>-&gt;update(param,fval);</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;                }</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;            }<span class="keywordflow">else</span> <span class="keywordflow">if</span> (strncmp(cmd, <span class="stringliteral">&quot;HELO&quot;</span>,<span class="keyword">sizeof</span>(cmd)) == 0){ </div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;                <span class="keywordflow">if</span>(<a class="code" href="../../d2/da8/class_svc_serial_command_interface_a0793f597a16bd5e1b99084354ac0415e.html#a0793f597a16bd5e1b99084354ac0415e">requestStartLZ4Message</a>()){</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;                    println(<a class="code" href="../../da/d7d/_svc_serial_command_interface_8cpp_a462ba08568f93a3fec6a44898d5989da.html#a462ba08568f93a3fec6a44898d5989da">gWelcomeMessage</a>);</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;                    <a class="code" href="../../d2/da8/class_svc_serial_command_interface_adaa3d36d4c1a1784a1c18f87d756296e.html#adaa3d36d4c1a1784a1c18f87d756296e">sendLZ4Message</a>();</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;                }</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;            }<span class="keywordflow">else</span> <span class="keywordflow">if</span> (strncmp(cmd, <span class="stringliteral">&quot;GET_RAM&quot;</span>,<span class="keyword">sizeof</span>(cmd)) == 0){ </div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;                <span class="keywordtype">char</span>* mp;</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;                <span class="keywordtype">long</span> num;</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;                num = strtol(param,NULL,10);</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;                mp = (<span class="keywordtype">char</span>*)num;</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;                Serial.printf(<span class="stringliteral">&quot;M GET_RAM {\&quot;addr\&quot;:\&quot;%08X\&quot;,\&quot;data\&quot;:\&quot;%02X\&quot;}\n&quot;</span>,num,(uint8_t)*mp);</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;            }<span class="keywordflow">else</span> <span class="keywordflow">if</span> (strncmp(cmd, <span class="stringliteral">&quot;GET_RAM2&quot;</span>,<span class="keyword">sizeof</span>(cmd)) == 0){ </div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;                <span class="keywordtype">char</span>* mp = 0;</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;                <span class="keywordtype">char</span> c;</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;<span class="preprocessor">#ifdef USE_EXTMEM</span></div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;                <span class="keywordtype">char</span> tmp[1000];</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;                <span class="comment">//tmp = (char*)extmem_malloc(1000);</span></div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;                <span class="keywordtype">char</span>* tmp;</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;                tmp = (<span class="keywordtype">char</span>*)malloc(1000);</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;                <span class="keywordflow">while</span>(<a class="code" href="../../d2/da8/class_svc_serial_command_interface_a72fa7592492598637d233d9abe27f8f0.html#a72fa7592492598637d233d9abe27f8f0">throttle</a>()){delay(100);}</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;                <span class="keywordflow">if</span>(!<a class="code" href="../../d2/da8/class_svc_serial_command_interface_a0793f597a16bd5e1b99084354ac0415e.html#a0793f597a16bd5e1b99084354ac0415e">requestStartLZ4Message</a>()) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;                strcpy(tmp,<span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;                printf(F(<span class="stringliteral">&quot;RAM {\&quot;RAM2\&quot;:{\&quot;addr\&quot;:\&quot;%08X\&quot;,\&quot;chunk\&quot;:\&quot;&quot;</span>),0x20000000);</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;                <span class="comment">//RAM2 always ends at 0x20280000</span></div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;                <span class="keywordflow">for</span>(uint32_t i = 0x20000000; i &lt; 0x20280000; i+=1){</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;                    <span class="keywordflow">if</span> (i == 0x20010000) i = 0x20200000;</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;                    mp = (<span class="keywordtype">char</span>*)i;</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;                    c = *mp;</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;                    c = (c &amp; 0xFF);</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;                    <span class="keywordflow">if</span>(i%32==0 &amp;&amp; i != 0x20000000){</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;                        print(F(<span class="stringliteral">&quot;\&quot;,\&quot;decode\&quot;:\&quot;&quot;</span>));</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;                        print(tmp);</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;                        println(F(<span class="stringliteral">&quot;\&quot;}}&quot;</span>));</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;                        <a class="code" href="../../d2/da8/class_svc_serial_command_interface_adaa3d36d4c1a1784a1c18f87d756296e.html#adaa3d36d4c1a1784a1c18f87d756296e">sendLZ4Message</a>();</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;                        strcpy(tmp,<span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;                        <span class="keywordflow">while</span>(<a class="code" href="../../d2/da8/class_svc_serial_command_interface_a72fa7592492598637d233d9abe27f8f0.html#a72fa7592492598637d233d9abe27f8f0">throttle</a>()){delay(50);}</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;                        <span class="keywordflow">if</span>(i%1024==0){</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;                            float32_t pct;</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;                            pct = 100.0 * ((float)(i-0x20000000)/(float)(0x20280000-0x20000000));</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;                            Serial.printf(F(<span class="stringliteral">&quot;CLS\nM GET_RAM2 %08X %.0f pct &quot;</span>),i,pct);</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;                            <span class="keywordflow">for</span>(uint16_t div = 0; div &lt; (uint16_t)pct; div += 5){</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;                                Serial.printf(<span class="stringliteral">&quot;*&quot;</span>);</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;                            }</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;                            Serial.println(<span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;                        }</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;                        <a class="code" href="../../d2/da8/class_svc_serial_command_interface_a42055ffe62395b2d4ee7ca7ef44f1a50.html#a42055ffe62395b2d4ee7ca7ef44f1a50">startLZ4Message</a>();</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;                        printf(F(<span class="stringliteral">&quot;RAM {\&quot;RAM2\&quot;:{\&quot;addr\&quot;:\&quot;%08X\&quot;,\&quot;chunk\&quot;:\&quot;&quot;</span>),i);</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;                    }</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160; </div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;                    printf(<span class="stringliteral">&quot;%02X &quot;</span>,(uint8_t)c);</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;                    <span class="keyword">const</span> <span class="keywordtype">char</span>* escape = <span class="stringliteral">&quot;\\&quot;</span>;</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;                    <span class="keywordflow">if</span> (c==<span class="charliteral">&#39;&quot;&#39;</span>){                        </div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;                        strncat(tmp, escape, 1);</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;                        strncat(tmp, &amp;c, 1);</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;                    }<span class="keywordflow">else</span> <span class="keywordflow">if</span> (c==<span class="charliteral">&#39;\&#39;&#39;</span>){</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;                        strncat(tmp, escape, 1);</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;                        strncat(tmp, &amp;c, 1);</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;                    }<span class="keywordflow">else</span> <span class="keywordflow">if</span> (isprint((<span class="keywordtype">int</span>)c)){ </div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;                        strncat(tmp, &amp;c, 1);</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;                    }<span class="keywordflow">else</span> <span class="keywordflow">if</span> (iscntrl((<span class="keywordtype">int</span>)c)){</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;                        c = <span class="charliteral">&#39;.&#39;</span>;</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;                        strncat(tmp, &amp;c, 1);</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;                    }<span class="keywordflow">else</span>{</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;                        c = <span class="charliteral">&#39;?&#39;</span>;</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;                        strncat(tmp, &amp;c, 1);</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;                    }</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;                }</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;                println(<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;                println(F(<span class="stringliteral">&quot;RAM END&quot;</span>));</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;                <a class="code" href="../../d2/da8/class_svc_serial_command_interface_adaa3d36d4c1a1784a1c18f87d756296e.html#adaa3d36d4c1a1784a1c18f87d756296e">sendLZ4Message</a>();</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;<span class="preprocessor">#ifdef USE_EXTMEM</span></div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;                <span class="comment">//do nothing - local var</span></div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;<span class="preprocessor">#else       </span></div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;                <a class="code" href="../../de/d24/_creative_01_commons_01_attribution_014_80_01_international_01_public_01_license_8txt_ad60615c03295d4d2fad448999bddbe3b.html#ad60615c03295d4d2fad448999bddbe3b">free</a>(tmp);</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;            }<span class="keywordflow">else</span> <span class="keywordflow">if</span> (strncmp(cmd, <span class="stringliteral">&quot;GET_RAM1&quot;</span>,<span class="keyword">sizeof</span>(cmd)) == 0){ </div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;                <span class="keywordtype">char</span>* mp = 0;</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;                <span class="keywordtype">char</span> c;</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;<span class="preprocessor">#ifdef USE_EXTMEM</span></div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;                <span class="keywordtype">char</span> tmp[1000];</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;                <span class="comment">//tmp = (char*)extmem_malloc(1000);</span></div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;                <span class="keywordtype">char</span>* tmp;</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;                tmp = (<span class="keywordtype">char</span>*)malloc(1000);</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;                <span class="keywordflow">while</span>(<a class="code" href="../../d2/da8/class_svc_serial_command_interface_a72fa7592492598637d233d9abe27f8f0.html#a72fa7592492598637d233d9abe27f8f0">throttle</a>()){delay(100);}</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;                <span class="keywordflow">if</span>(!<a class="code" href="../../d2/da8/class_svc_serial_command_interface_a0793f597a16bd5e1b99084354ac0415e.html#a0793f597a16bd5e1b99084354ac0415e">requestStartLZ4Message</a>()) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;                strcpy(tmp,<span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;                printf(F(<span class="stringliteral">&quot;RAM {\&quot;RAM1\&quot;:{\&quot;addr\&quot;:\&quot;%08X\&quot;,\&quot;chunk\&quot;:\&quot;&quot;</span>),0x000000);</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;                </div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;                <span class="keywordflow">for</span>(uint32_t i = 0x00070000; i &lt; 0x0007F000; i+=1){</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;                    <span class="comment">//if (i == 0x20010000) i = 0x20200000;</span></div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;                    mp = (<span class="keywordtype">char</span>*)i;</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;                    c = *mp;</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;                    c = (c &amp; 0xFF);</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;                    <span class="keywordflow">if</span>(i%32==0 &amp;&amp; i != 0x00070000){</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;                        print(F(<span class="stringliteral">&quot;\&quot;,\&quot;decode\&quot;:\&quot;&quot;</span>));</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;                        print(tmp);</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;                        println(F(<span class="stringliteral">&quot;\&quot;}}&quot;</span>));</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;                        <a class="code" href="../../d2/da8/class_svc_serial_command_interface_adaa3d36d4c1a1784a1c18f87d756296e.html#adaa3d36d4c1a1784a1c18f87d756296e">sendLZ4Message</a>();</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;                        strcpy(tmp,<span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;                        <span class="keywordflow">while</span>(<a class="code" href="../../d2/da8/class_svc_serial_command_interface_a72fa7592492598637d233d9abe27f8f0.html#a72fa7592492598637d233d9abe27f8f0">throttle</a>()){delay(150);}</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;                        <span class="keywordflow">if</span>(i%1024==0){</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;                            float32_t pct;</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;                            pct = 100.0 * ((float)(i-0x00070000)/(float)(0x0007F000));</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;                            Serial.printf(F(<span class="stringliteral">&quot;CLS\nM GET_RAM1 %08X %.0f pct &quot;</span>),i,pct);</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;                            <span class="keywordflow">for</span>(uint16_t div = 0; div &lt; (uint16_t)pct; div += 5){</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;                                Serial.printf(<span class="stringliteral">&quot;*&quot;</span>);</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;                            }</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;                            Serial.println(<span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;                        }</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;                        <a class="code" href="../../d2/da8/class_svc_serial_command_interface_a42055ffe62395b2d4ee7ca7ef44f1a50.html#a42055ffe62395b2d4ee7ca7ef44f1a50">startLZ4Message</a>();</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;                        printf(F(<span class="stringliteral">&quot;RAM {\&quot;RAM1\&quot;:{\&quot;addr\&quot;:\&quot;%08X\&quot;,\&quot;chunk\&quot;:\&quot;&quot;</span>),i);</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;                    }</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160; </div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;                    printf(<span class="stringliteral">&quot;%02X &quot;</span>,(uint8_t)c);</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;                    <span class="keyword">const</span> <span class="keywordtype">char</span>* escape = <span class="stringliteral">&quot;\\&quot;</span>;</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;                    <span class="keywordflow">if</span> (c==<span class="charliteral">&#39;&quot;&#39;</span>){                        </div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;                        strncat(tmp, escape, 1);</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;                        strncat(tmp, &amp;c, 1);</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;                    }<span class="keywordflow">else</span> <span class="keywordflow">if</span> (c==<span class="charliteral">&#39;\&#39;&#39;</span>){</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;                        strncat(tmp, escape, 1);</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;                        strncat(tmp, &amp;c, 1);</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;                    }<span class="keywordflow">else</span> <span class="keywordflow">if</span> (isprint((<span class="keywordtype">int</span>)c)){ </div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;                        strncat(tmp, &amp;c, 1);</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;                    }<span class="keywordflow">else</span> <span class="keywordflow">if</span> (iscntrl((<span class="keywordtype">int</span>)c)){</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;                        c = <span class="charliteral">&#39;.&#39;</span>;</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;                        strncat(tmp, &amp;c, 1);</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;                    }<span class="keywordflow">else</span>{</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;                        c = <span class="charliteral">&#39;?&#39;</span>;</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;                        strncat(tmp, &amp;c, 1);</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;                    }</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;                }</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;                println(<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;                println(F(<span class="stringliteral">&quot;RAM END&quot;</span>));</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;                <a class="code" href="../../d2/da8/class_svc_serial_command_interface_adaa3d36d4c1a1784a1c18f87d756296e.html#adaa3d36d4c1a1784a1c18f87d756296e">sendLZ4Message</a>();</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;<span class="preprocessor">#ifdef USE_EXTMEM</span></div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;                <span class="comment">//do nothing - local var</span></div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;<span class="preprocessor">#else       </span></div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;                <a class="code" href="../../de/d24/_creative_01_commons_01_attribution_014_80_01_international_01_public_01_license_8txt_ad60615c03295d4d2fad448999bddbe3b.html#ad60615c03295d4d2fad448999bddbe3b">free</a>(tmp);</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;            }<span class="keywordflow">else</span> <span class="keywordflow">if</span> (strncmp(cmd, <span class="stringliteral">&quot;AUDIO_NO_INTERRUPTS&quot;</span>,<span class="keyword">sizeof</span>(cmd)) == 0){</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;                AudioNoInterrupts();</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;            }<span class="keywordflow">else</span> <span class="keywordflow">if</span> (strncmp(cmd, <span class="stringliteral">&quot;AUDIO_INTERRUPTS&quot;</span>,<span class="keyword">sizeof</span>(cmd)) == 0){</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;                AudioInterrupts();</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;            }</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;            <span class="comment">//END</span></div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;            newRxMsg = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;        }</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;    }</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;    <a class="code" href="../../d2/da8/class_svc_serial_command_interface_a3ba7df1a46eec801d057d286169bfe3b.html#a3ba7df1a46eec801d057d286169bfe3b">et_since_poll</a> = 0;</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;    </div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;    <span class="comment">//tx periodic messages</span></div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;<span class="preprocessor">    #ifdef SERIAL_AUTO_TRANSMIT_DATA_PERIODICALLY</span></div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="../../d2/da8/class_svc_serial_command_interface_a30754b909a8f6911ffe8cb4b5872e1a0.html#a30754b909a8f6911ffe8cb4b5872e1a0">is_periodic_messages_enabled</a>){</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d2/da8/class_svc_serial_command_interface_ab2bf9b4e9d65e3c8cf742b1465752c74.html#ab2bf9b4e9d65e3c8cf742b1465752c74">et_since_periodic_stats_tx</a> &gt; <a class="code" href="../../db/d46/_eris_globals_8h_a16044bbd4199388bc90d1f84e4ea8b0c.html#a16044bbd4199388bc90d1f84e4ea8b0c">SERIAL_AUTO_TRANSMIT_STATS_PERIOD</a> &amp;&amp; !<a class="code" href="../../d2/da8/class_svc_serial_command_interface_a72fa7592492598637d233d9abe27f8f0.html#a72fa7592492598637d233d9abe27f8f0">throttle</a>()){</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;            <a class="code" href="../../d2/da8/class_svc_serial_command_interface_ab2bf9b4e9d65e3c8cf742b1465752c74.html#ab2bf9b4e9d65e3c8cf742b1465752c74">et_since_periodic_stats_tx</a> = 0; </div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;            <a class="code" href="../../da/d96/class_app_manager_aa76d9691e8d029656413590fbe4dee86.html#aa76d9691e8d029656413590fbe4dee86">AppManager::getInstance</a>()-&gt;<a class="code" href="../../da/d96/class_app_manager_a648bf66164619cfcc0f0b41e7b3a022f.html#a648bf66164619cfcc0f0b41e7b3a022f">printStats</a>();</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;            <a class="code" href="../../db/d69/class_app_base_class_ad66a3cbbe4a3b973dea5c83a068bc79f.html#ad66a3cbbe4a3b973dea5c83a068bc79f">ad</a>-&gt;<a class="code" href="../../d8/d1c/class_audio_director_a0e1e6093fa5c9c76f11483ac5c9cc776.html#a0e1e6093fa5c9c76f11483ac5c9cc776">printStats</a>();</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;        }<span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d2/da8/class_svc_serial_command_interface_aba66dfb362c933a723de3e94475abe6e.html#aba66dfb362c933a723de3e94475abe6e">et_since_periodic_data_dict_tx</a> &gt; <a class="code" href="../../db/d46/_eris_globals_8h_a8d90241f7aafcab3c052f260976580ce.html#a8d90241f7aafcab3c052f260976580ce">SERIAL_AUTO_TRANSMIT_DATA_DICT_PERIOD</a> &amp;&amp; !<a class="code" href="../../d2/da8/class_svc_serial_command_interface_a72fa7592492598637d233d9abe27f8f0.html#a72fa7592492598637d233d9abe27f8f0">throttle</a>()){</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;            <a class="code" href="../../d2/da8/class_svc_serial_command_interface_aba66dfb362c933a723de3e94475abe6e.html#aba66dfb362c933a723de3e94475abe6e">et_since_periodic_data_dict_tx</a> = 0;</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;            <a class="code" href="../../d2/da8/class_svc_serial_command_interface_ab2bf9b4e9d65e3c8cf742b1465752c74.html#ab2bf9b4e9d65e3c8cf742b1465752c74">et_since_periodic_stats_tx</a> = 0; </div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;            <a class="code" href="../../da/d96/class_app_manager_aa76d9691e8d029656413590fbe4dee86.html#aa76d9691e8d029656413590fbe4dee86">AppManager::getInstance</a>()-&gt;<a class="code" href="../../da/d96/class_app_manager_a702921f08484c897380064116a4a23a6.html#a702921f08484c897380064116a4a23a6">data</a>-&gt;printDictionary(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;        }</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;    }</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;<span class="preprocessor">    #endif</span></div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;<span class="preprocessor">}; </span><span class="comment">//allways called even if app is not active</span></div>
<div class="ttc" id="a_app_manager_8h_html"><div class="ttname"><a href="../../df/d72/_app_manager_8h.html">AppManager.h</a></div></div>
<div class="ttc" id="a_creative_01_commons_01_attribution_014_80_01_international_01_public_01_license_8txt_ad60615c03295d4d2fad448999bddbe3b_html_ad60615c03295d4d2fad448999bddbe3b"><div class="ttname"><a href="../../de/d24/_creative_01_commons_01_attribution_014_80_01_international_01_public_01_license_8txt_ad60615c03295d4d2fad448999bddbe3b.html#ad60615c03295d4d2fad448999bddbe3b">free</a></div><div class="ttdeci">Creative Commons Attribution International Public License By exercising the Licensed You accept and agree to be bound by the terms and conditions of this Creative Commons Attribution International Public You are granted the Licensed Rights in consideration of Your acceptance of these terms and and the Licensor grants You such rights in consideration of benefits the Licensor receives from making the Licensed Material available under these terms and conditions Section – Definitions Adapted Material means material subject to Copyright and Similar Rights that is derived from or based upon the Licensed Material and in which the Licensed Material is or otherwise modified in a manner requiring permission under the Copyright and Similar Rights held by the Licensor For purposes of this Public where the Licensed Material is a musical or sound Adapted Material is always produced where the Licensed Material is synched in timed relation with a moving image Adapter s License means the license You apply to Your Copyright and Similar Rights in Your contributions to Adapted Material in accordance with the terms and conditions of this Public License Copyright and Similar Rights means copyright and or similar rights closely related to copyright without sound and Sui Generis Database without regard to how the rights are labeled or categorized For purposes of this Public the rights specified in Section() in the absence of proper may not be circumvented under laws fulfilling obligations under Article of the WIPO Copyright Treaty adopted on and or similar international agreements Exceptions and Limitations means fair fair and or any other exception or limitation to Copyright and Similar Rights that applies to Your use of the Licensed Material Licensed Material means the artistic or literary work database or other material to which the Licensor applied this Public License Licensed Rights means the rights granted to You subject to the terms and conditions of this Public License which are limited to all Copyright and Similar Rights that apply to Your use of the Licensed Material and that the Licensor has authority to license Licensor means the such as public public or and to make material available to the public including in ways that members of the public may access the material from a place and at a time individually chosen by them Sui Generis Database Rights means rights other than copyright resulting from Directive EC of the European Parliament and of the Council of March on the legal protection of as amended and or as well as other essentially equivalent rights anywhere in the world You means the individual or entity exercising the Licensed Rights under this Public License Your has a corresponding meaning Section – Scope License grant Subject to the terms and conditions of this Public the Licensor hereby grants You a royalty free</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d24/_creative_01_commons_01_attribution_014_80_01_international_01_public_01_license_8txt_source.html#l00020">Creative Commons Attribution 4.0 International Public License.txt:20</a></div></div>
<div class="ttc" id="a_eris_globals_8h_a16044bbd4199388bc90d1f84e4ea8b0c_html_a16044bbd4199388bc90d1f84e4ea8b0c"><div class="ttname"><a href="../../db/d46/_eris_globals_8h_a16044bbd4199388bc90d1f84e4ea8b0c.html#a16044bbd4199388bc90d1f84e4ea8b0c">SERIAL_AUTO_TRANSMIT_STATS_PERIOD</a></div><div class="ttdeci">#define SERIAL_AUTO_TRANSMIT_STATS_PERIOD</div><div class="ttdoc">transmission rate of the stats</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d46/_eris_globals_8h_source.html#l00155">ErisGlobals.h:155</a></div></div>
<div class="ttc" id="a_eris_globals_8h_a2e63e4023af076c8c199ede80957755e_html_a2e63e4023af076c8c199ede80957755e"><div class="ttname"><a href="../../db/d46/_eris_globals_8h_a2e63e4023af076c8c199ede80957755e.html#a2e63e4023af076c8c199ede80957755e">SERIAL_WORKING_BUFFER_SIZE</a></div><div class="ttdeci">#define SERIAL_WORKING_BUFFER_SIZE</div><div class="ttdoc">working buffer size</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d46/_eris_globals_8h_source.html#l00131">ErisGlobals.h:131</a></div></div>
<div class="ttc" id="a_eris_globals_8h_a5bbe063c9ff2ad8940b615fdab34110d_html_a5bbe063c9ff2ad8940b615fdab34110d"><div class="ttname"><a href="../../db/d46/_eris_globals_8h_a5bbe063c9ff2ad8940b615fdab34110d.html#a5bbe063c9ff2ad8940b615fdab34110d">SERIAL_FILESTREAM_PAYLOAD_SIZE</a></div><div class="ttdeci">#define SERIAL_FILESTREAM_PAYLOAD_SIZE</div><div class="ttdoc">filestream payload size used for multipart transmission of files</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d46/_eris_globals_8h_source.html#l00140">ErisGlobals.h:140</a></div></div>
<div class="ttc" id="a_eris_globals_8h_a6eb9a70da8c657508b7ca74addedf167_html_a6eb9a70da8c657508b7ca74addedf167"><div class="ttname"><a href="../../db/d46/_eris_globals_8h_a6eb9a70da8c657508b7ca74addedf167.html#a6eb9a70da8c657508b7ca74addedf167">SERIAL_THROTTLE_CHECK_CONNECTION_BUFFER_THRESHOLD</a></div><div class="ttdeci">#define SERIAL_THROTTLE_CHECK_CONNECTION_BUFFER_THRESHOLD</div><div class="ttdoc">min delta threshold after a throttle event which will trigger an output flush</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d46/_eris_globals_8h_source.html#l00091">ErisGlobals.h:91</a></div></div>
<div class="ttc" id="a_eris_globals_8h_a7facb41097ec90e24263ff9825caf028_html_a7facb41097ec90e24263ff9825caf028"><div class="ttname"><a href="../../db/d46/_eris_globals_8h_a7facb41097ec90e24263ff9825caf028.html#a7facb41097ec90e24263ff9825caf028">SERIAL_RX_CAPTURE_BUFFER_SIZE</a></div><div class="ttdeci">#define SERIAL_RX_CAPTURE_BUFFER_SIZE</div><div class="ttdoc">serial rx capture buffer size</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d46/_eris_globals_8h_source.html#l00112">ErisGlobals.h:112</a></div></div>
<div class="ttc" id="a_eris_globals_8h_a8d90241f7aafcab3c052f260976580ce_html_a8d90241f7aafcab3c052f260976580ce"><div class="ttname"><a href="../../db/d46/_eris_globals_8h_a8d90241f7aafcab3c052f260976580ce.html#a8d90241f7aafcab3c052f260976580ce">SERIAL_AUTO_TRANSMIT_DATA_DICT_PERIOD</a></div><div class="ttdeci">#define SERIAL_AUTO_TRANSMIT_DATA_DICT_PERIOD</div><div class="ttdoc">transmission rate of the data dictionary</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d46/_eris_globals_8h_source.html#l00150">ErisGlobals.h:150</a></div></div>
<div class="ttc" id="a_eris_globals_8h_aba0ceec384cf3acb51e0d6f45f31379c_html_aba0ceec384cf3acb51e0d6f45f31379c"><div class="ttname"><a href="../../db/d46/_eris_globals_8h_aba0ceec384cf3acb51e0d6f45f31379c.html#aba0ceec384cf3acb51e0d6f45f31379c">SERIAL_RX_BUFFER_SIZE</a></div><div class="ttdeci">#define SERIAL_RX_BUFFER_SIZE</div><div class="ttdoc">serial rx buffer size</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d46/_eris_globals_8h_source.html#l00106">ErisGlobals.h:106</a></div></div>
<div class="ttc" id="a_eris_globals_8h_abfe80eb43785493f268187a201692d8e_html_abfe80eb43785493f268187a201692d8e"><div class="ttname"><a href="../../db/d46/_eris_globals_8h_abfe80eb43785493f268187a201692d8e.html#abfe80eb43785493f268187a201692d8e">SERIAL_OUTPUT_BUFFER_SIZE</a></div><div class="ttdeci">#define SERIAL_OUTPUT_BUFFER_SIZE</div><div class="ttdoc">output buffer size</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d46/_eris_globals_8h_source.html#l00125">ErisGlobals.h:125</a></div></div>
<div class="ttc" id="a_eris_globals_8h_ac2254e411e388869ad4f7490e7aa3ede_html_ac2254e411e388869ad4f7490e7aa3ede"><div class="ttname"><a href="../../db/d46/_eris_globals_8h_ac2254e411e388869ad4f7490e7aa3ede.html#ac2254e411e388869ad4f7490e7aa3ede">s</a></div><div class="ttdeci">const char PROGMEM s[][16]</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d46/_eris_globals_8h_source.html#l00204">ErisGlobals.h:204</a></div></div>
<div class="ttc" id="a_eris_globals_8h_aca228ee6133a5dbbe4c9e26751b8a28b_html_aca228ee6133a5dbbe4c9e26751b8a28b"><div class="ttname"><a href="../../db/d46/_eris_globals_8h_aca228ee6133a5dbbe4c9e26751b8a28b.html#aca228ee6133a5dbbe4c9e26751b8a28b">SERIAL_THROTTLE_BUFFER_THRESHOLD</a></div><div class="ttdeci">#define SERIAL_THROTTLE_BUFFER_THRESHOLD</div><div class="ttdoc">threshold at which point serial transmission is throttled</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d46/_eris_globals_8h_source.html#l00086">ErisGlobals.h:86</a></div></div>
<div class="ttc" id="a_eris_globals_8h_aeb045751fa9d9425113c60662a4e65b6_html_aeb045751fa9d9425113c60662a4e65b6"><div class="ttname"><a href="../../db/d46/_eris_globals_8h_aeb045751fa9d9425113c60662a4e65b6.html#aeb045751fa9d9425113c60662a4e65b6">SERIAL_THROTTLE_CHECK_CONNECTION_MAX_DELAY</a></div><div class="ttdeci">#define SERIAL_THROTTLE_CHECK_CONNECTION_MAX_DELAY</div><div class="ttdoc">throttle delay used to capture the delta change used in the delta threshold check</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d46/_eris_globals_8h_source.html#l00096">ErisGlobals.h:96</a></div></div>
<div class="ttc" id="a_eris_utils_8h_acf90b2b3b47174f2ad15f9397a36dca1_html_acf90b2b3b47174f2ad15f9397a36dca1"><div class="ttname"><a href="../../df/d51/_eris_utils_8h_acf90b2b3b47174f2ad15f9397a36dca1.html#acf90b2b3b47174f2ad15f9397a36dca1">safer_strncpy</a></div><div class="ttdeci">bool safer_strncpy(char *dest, const char *source, uint16_t dest_size)</div><div class="ttdoc">a safer strncpy</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d94/_eris_utils_8cpp_source.html#l00020">ErisUtils.cpp:20</a></div></div>
<div class="ttc" id="a_eris_utils_8h_html"><div class="ttname"><a href="../../df/d51/_eris_utils_8h.html">ErisUtils.h</a></div></div>
<div class="ttc" id="a_svc_serial_command_interface_8cpp_a0f3daef760195868b4aef06728c4119f_html_a0f3daef760195868b4aef06728c4119f"><div class="ttname"><a href="../../da/d7d/_svc_serial_command_interface_8cpp_a0f3daef760195868b4aef06728c4119f.html#a0f3daef760195868b4aef06728c4119f">replacechar</a></div><div class="ttdeci">int replacechar(char *str, char orig, char rep)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d7d/_svc_serial_command_interface_8cpp_source.html#l00091">SvcSerialCommandInterface.cpp:91</a></div></div>
<div class="ttc" id="a_svc_serial_command_interface_8cpp_a1d71425d9df28667d528833a4db10432_html_a1d71425d9df28667d528833a4db10432"><div class="ttname"><a href="../../da/d7d/_svc_serial_command_interface_8cpp_a1d71425d9df28667d528833a4db10432.html#a1d71425d9df28667d528833a4db10432">token</a></div><div class="ttdeci">char * token</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d7d/_svc_serial_command_interface_8cpp_source.html#l00061">SvcSerialCommandInterface.cpp:61</a></div></div>
<div class="ttc" id="a_svc_serial_command_interface_8cpp_a462ba08568f93a3fec6a44898d5989da_html_a462ba08568f93a3fec6a44898d5989da"><div class="ttname"><a href="../../da/d7d/_svc_serial_command_interface_8cpp_a462ba08568f93a3fec6a44898d5989da.html#a462ba08568f93a3fec6a44898d5989da">gWelcomeMessage</a></div><div class="ttdeci">const char * gWelcomeMessage</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d7d/_svc_serial_command_interface_8cpp_source.html#l00064">SvcSerialCommandInterface.cpp:64</a></div></div>
<div class="ttc" id="a_svc_serial_command_interface_8cpp_a6385eecb021ea6dc1e9b5597cfe94b85_html_a6385eecb021ea6dc1e9b5597cfe94b85"><div class="ttname"><a href="../../da/d7d/_svc_serial_command_interface_8cpp_a6385eecb021ea6dc1e9b5597cfe94b85.html#a6385eecb021ea6dc1e9b5597cfe94b85">sd</a></div><div class="ttdeci">SdFs sd</div></div>
<div class="ttc" id="a_svc_serial_command_interface_8cpp_ab4b2f46f6bc0178f1f3efc5dba880bf8_html_ab4b2f46f6bc0178f1f3efc5dba880bf8"><div class="ttname"><a href="../../da/d7d/_svc_serial_command_interface_8cpp_ab4b2f46f6bc0178f1f3efc5dba880bf8.html#ab4b2f46f6bc0178f1f3efc5dba880bf8">newline</a></div><div class="ttdeci">const char newline</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d7d/_svc_serial_command_interface_8cpp_source.html#l00062">SvcSerialCommandInterface.cpp:62</a></div></div>
<div class="ttc" id="a_svc_serial_command_interface_8h_html"><div class="ttname"><a href="../../de/d46/_svc_serial_command_interface_8h.html">SvcSerialCommandInterface.h</a></div></div>
<div class="ttc" id="aclass_app_base_class_a6baed35a61a4cae1b3c67113aa6ec1dd_html_a6baed35a61a4cae1b3c67113aa6ec1dd"><div class="ttname"><a href="../../db/d69/class_app_base_class_a6baed35a61a4cae1b3c67113aa6ec1dd.html#a6baed35a61a4cae1b3c67113aa6ec1dd">AppBaseClass::am</a></div><div class="ttdeci">AppManager * am</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d3e/_app_base_class_8h_source.html#l00043">AppBaseClass.h:43</a></div></div>
<div class="ttc" id="aclass_app_base_class_ab763cbfec90f6608f36dfeb36c1e11dd_html_ab763cbfec90f6608f36dfeb36c1e11dd"><div class="ttname"><a href="../../db/d69/class_app_base_class_ab763cbfec90f6608f36dfeb36c1e11dd.html#ab763cbfec90f6608f36dfeb36c1e11dd">AppBaseClass::sd</a></div><div class="ttdeci">SdFs * sd</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d3e/_app_base_class_8h_source.html#l00045">AppBaseClass.h:45</a></div></div>
<div class="ttc" id="aclass_app_base_class_ab7b8b8499bd4cf04468085761a4287e9_html_ab7b8b8499bd4cf04468085761a4287e9"><div class="ttname"><a href="../../db/d69/class_app_base_class_ab7b8b8499bd4cf04468085761a4287e9.html#ab7b8b8499bd4cf04468085761a4287e9">AppBaseClass::update_priority</a></div><div class="ttdeci">uint16_t update_priority</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d3e/_app_base_class_8h_source.html#l00057">AppBaseClass.h:57</a></div></div>
<div class="ttc" id="aclass_app_base_class_ad66a3cbbe4a3b973dea5c83a068bc79f_html_ad66a3cbbe4a3b973dea5c83a068bc79f"><div class="ttname"><a href="../../db/d69/class_app_base_class_ad66a3cbbe4a3b973dea5c83a068bc79f.html#ad66a3cbbe4a3b973dea5c83a068bc79f">AppBaseClass::ad</a></div><div class="ttdeci">AudioDirector * ad</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d3e/_app_base_class_8h_source.html#l00042">AppBaseClass.h:42</a></div></div>
<div class="ttc" id="aclass_app_base_class_ae1c0e3873bd65919752776311c7c509b_html_ae1c0e3873bd65919752776311c7c509b"><div class="ttname"><a href="../../db/d69/class_app_base_class_ae1c0e3873bd65919752776311c7c509b.html#ae1c0e3873bd65919752776311c7c509b">AppBaseClass::messageHandler</a></div><div class="ttdeci">virtual void messageHandler(AppBaseClass *sender, const char *message)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d3e/_app_base_class_8h_source.html#l00111">AppBaseClass.h:111</a></div></div>
<div class="ttc" id="aclass_app_manager_a08daaf40a3ddaa938603039eb1e67d09_html_a08daaf40a3ddaa938603039eb1e67d09"><div class="ttname"><a href="../../da/d96/class_app_manager_a08daaf40a3ddaa938603039eb1e67d09.html#a08daaf40a3ddaa938603039eb1e67d09">AppManager::getAppByName</a></div><div class="ttdeci">AppBaseClass * getAppByName(const char *appName)</div><div class="ttdoc">Get the App pointer By Name. Returns NULL if not found.</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d40/_app_manager_8cpp_source.html#l00449">AppManager.cpp:449</a></div></div>
<div class="ttc" id="aclass_app_manager_a648bf66164619cfcc0f0b41e7b3a022f_html_a648bf66164619cfcc0f0b41e7b3a022f"><div class="ttname"><a href="../../da/d96/class_app_manager_a648bf66164619cfcc0f0b41e7b3a022f.html#a648bf66164619cfcc0f0b41e7b3a022f">AppManager::printStats</a></div><div class="ttdeci">void printStats()</div><div class="ttdoc">prints out some stats in JSON format to the serial port</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d40/_app_manager_8cpp_source.html#l00464">AppManager.cpp:464</a></div></div>
<div class="ttc" id="aclass_app_manager_a702921f08484c897380064116a4a23a6_html_a702921f08484c897380064116a4a23a6"><div class="ttname"><a href="../../da/d96/class_app_manager_a702921f08484c897380064116a4a23a6.html#a702921f08484c897380064116a4a23a6">AppManager::data</a></div><div class="ttdeci">SvcDataDictionary * data</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d72/_app_manager_8h_source.html#l00061">AppManager.h:61</a></div></div>
<div class="ttc" id="aclass_app_manager_aa4f7649ae1aa1a567286d73981f00090_html_aa4f7649ae1aa1a567286d73981f00090"><div class="ttname"><a href="../../da/d96/class_app_manager_aa4f7649ae1aa1a567286d73981f00090.html#aa4f7649ae1aa1a567286d73981f00090">AppManager::sendMessage</a></div><div class="ttdeci">bool sendMessage(AppBaseClass *sender, const char *to_app, const char *message)</div><div class="ttdoc">provides an interface for apps to send messages to other apps</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d40/_app_manager_8cpp_source.html#l00429">AppManager.cpp:429</a></div></div>
<div class="ttc" id="aclass_app_manager_aa76d9691e8d029656413590fbe4dee86_html_aa76d9691e8d029656413590fbe4dee86"><div class="ttname"><a href="../../da/d96/class_app_manager_aa76d9691e8d029656413590fbe4dee86.html#aa76d9691e8d029656413590fbe4dee86">AppManager::getInstance</a></div><div class="ttdeci">static AppManager * getInstance()</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d72/_app_manager_8h_source.html#l00064">AppManager.h:64</a></div></div>
<div class="ttc" id="aclass_app_manager_aae60a456d65e4cdf7a3455e288a9a052_html_aae60a456d65e4cdf7a3455e288a9a052"><div class="ttname"><a href="../../da/d96/class_app_manager_aae60a456d65e4cdf7a3455e288a9a052.html#aae60a456d65e4cdf7a3455e288a9a052">AppManager::getActiveApp</a></div><div class="ttdeci">AppBaseClass * getActiveApp()</div><div class="ttdoc">provides an interface for apps to request the active app object</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d40/_app_manager_8cpp_source.html#l00419">AppManager.cpp:419</a></div></div>
<div class="ttc" id="aclass_audio_director_a0e1e6093fa5c9c76f11483ac5c9cc776_html_a0e1e6093fa5c9c76f11483ac5c9cc776"><div class="ttname"><a href="../../d8/d1c/class_audio_director_a0e1e6093fa5c9c76f11483ac5c9cc776.html#a0e1e6093fa5c9c76f11483ac5c9cc776">AudioDirector::printStats</a></div><div class="ttdeci">void printStats()</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d2c/_audio_director_8cpp_source.html#l00141">AudioDirector.cpp:141</a></div></div>
<div class="ttc" id="aclass_audio_director_a3aac7905bf91399796f415898fc63cd1_html_a3aac7905bf91399796f415898fc63cd1"><div class="ttname"><a href="../../d8/d1c/class_audio_director_a3aac7905bf91399796f415898fc63cd1.html#a3aac7905bf91399796f415898fc63cd1">AudioDirector::getConnectionString</a></div><div class="ttdeci">bool getConnectionString(uint16_t connectionIndex, char *connectionStringBuffer)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d2c/_audio_director_8cpp_source.html#l00270">AudioDirector.cpp:270</a></div></div>
<div class="ttc" id="aclass_audio_director_aae48fff50fc2763f06611db46ae7c94e_html_aae48fff50fc2763f06611db46ae7c94e"><div class="ttname"><a href="../../d8/d1c/class_audio_director_aae48fff50fc2763f06611db46ae7c94e.html#aae48fff50fc2763f06611db46ae7c94e">AudioDirector::disconnect</a></div><div class="ttdeci">bool disconnect(AudioStream *destination, int destinationInput)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d2c/_audio_director_8cpp_source.html#l00397">AudioDirector.cpp:397</a></div></div>
<div class="ttc" id="aclass_audio_director_ab4957e373e5d9078454d07da471f1d94_html_ab4957e373e5d9078454d07da471f1d94"><div class="ttname"><a href="../../d8/d1c/class_audio_director_ab4957e373e5d9078454d07da471f1d94.html#ab4957e373e5d9078454d07da471f1d94">AudioDirector::connect</a></div><div class="ttdeci">bool connect(AudioStream *source, int sourceOutput, AudioStream *destination, int destinationInput)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d2c/_audio_director_8cpp_source.html#l00297">AudioDirector.cpp:297</a></div></div>
<div class="ttc" id="aclass_svc_serial_command_interface_a075f61b693a6555fa1b77b40bf6c6883_html_a075f61b693a6555fa1b77b40bf6c6883"><div class="ttname"><a href="../../d2/da8/class_svc_serial_command_interface_a075f61b693a6555fa1b77b40bf6c6883.html#a075f61b693a6555fa1b77b40bf6c6883">SvcSerialCommandInterface::p_working_buffer</a></div><div class="ttdeci">char * p_working_buffer</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d46/_svc_serial_command_interface_8h_source.html#l00111">SvcSerialCommandInterface.h:111</a></div></div>
<div class="ttc" id="aclass_svc_serial_command_interface_a0793f597a16bd5e1b99084354ac0415e_html_a0793f597a16bd5e1b99084354ac0415e"><div class="ttname"><a href="../../d2/da8/class_svc_serial_command_interface_a0793f597a16bd5e1b99084354ac0415e.html#a0793f597a16bd5e1b99084354ac0415e">SvcSerialCommandInterface::requestStartLZ4Message</a></div><div class="ttdeci">bool requestStartLZ4Message()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d46/_svc_serial_command_interface_8h_source.html#l00091">SvcSerialCommandInterface.h:91</a></div></div>
<div class="ttc" id="aclass_svc_serial_command_interface_a0c889fc44a89c71adbcb1bf1bddbf397_html_a0c889fc44a89c71adbcb1bf1bddbf397"><div class="ttname"><a href="../../d2/da8/class_svc_serial_command_interface_a0c889fc44a89c71adbcb1bf1bddbf397.html#a0c889fc44a89c71adbcb1bf1bddbf397">SvcSerialCommandInterface::send</a></div><div class="ttdeci">void send()</div><div class="ttdoc">immediately transmit then clear the txBuffer</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d7d/_svc_serial_command_interface_8cpp_source.html#l00151">SvcSerialCommandInterface.cpp:151</a></div></div>
<div class="ttc" id="aclass_svc_serial_command_interface_a0f6637d67b1dfd1fa96ddd10f8f14873_html_a0f6637d67b1dfd1fa96ddd10f8f14873"><div class="ttname"><a href="../../d2/da8/class_svc_serial_command_interface_a0f6637d67b1dfd1fa96ddd10f8f14873.html#a0f6637d67b1dfd1fa96ddd10f8f14873">SvcSerialCommandInterface::stream_file</a></div><div class="ttdeci">char stream_file[SERIAL_PARAM_BUFFER_SIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d46/_svc_serial_command_interface_8h_source.html#l00108">SvcSerialCommandInterface.h:108</a></div></div>
<div class="ttc" id="aclass_svc_serial_command_interface_a16e45c7aa993f2c967886b11badde293_html_a16e45c7aa993f2c967886b11badde293"><div class="ttname"><a href="../../d2/da8/class_svc_serial_command_interface_a16e45c7aa993f2c967886b11badde293.html#a16e45c7aa993f2c967886b11badde293">SvcSerialCommandInterface::stream_path</a></div><div class="ttdeci">char stream_path[SERIAL_PARAM_BUFFER_SIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d46/_svc_serial_command_interface_8h_source.html#l00107">SvcSerialCommandInterface.h:107</a></div></div>
<div class="ttc" id="aclass_svc_serial_command_interface_a2d7255a6df2e04c79dad445759ca968e_html_a2d7255a6df2e04c79dad445759ca968e"><div class="ttname"><a href="../../d2/da8/class_svc_serial_command_interface_a2d7255a6df2e04c79dad445759ca968e.html#a2d7255a6df2e04c79dad445759ca968e">SvcSerialCommandInterface::tx_Buffer</a></div><div class="ttdeci">char tx_Buffer[SERIAL_OUTPUT_BUFFER_SIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d46/_svc_serial_command_interface_8h_source.html#l00109">SvcSerialCommandInterface.h:109</a></div></div>
<div class="ttc" id="aclass_svc_serial_command_interface_a30754b909a8f6911ffe8cb4b5872e1a0_html_a30754b909a8f6911ffe8cb4b5872e1a0"><div class="ttname"><a href="../../d2/da8/class_svc_serial_command_interface_a30754b909a8f6911ffe8cb4b5872e1a0.html#a30754b909a8f6911ffe8cb4b5872e1a0">SvcSerialCommandInterface::is_periodic_messages_enabled</a></div><div class="ttdeci">bool is_periodic_messages_enabled</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d46/_svc_serial_command_interface_8h_source.html#l00116">SvcSerialCommandInterface.h:116</a></div></div>
<div class="ttc" id="aclass_svc_serial_command_interface_a3ba7df1a46eec801d057d286169bfe3b_html_a3ba7df1a46eec801d057d286169bfe3b"><div class="ttname"><a href="../../d2/da8/class_svc_serial_command_interface_a3ba7df1a46eec801d057d286169bfe3b.html#a3ba7df1a46eec801d057d286169bfe3b">SvcSerialCommandInterface::et_since_poll</a></div><div class="ttdeci">elapsedMillis et_since_poll</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d46/_svc_serial_command_interface_8h_source.html#l00118">SvcSerialCommandInterface.h:118</a></div></div>
<div class="ttc" id="aclass_svc_serial_command_interface_a42055ffe62395b2d4ee7ca7ef44f1a50_html_a42055ffe62395b2d4ee7ca7ef44f1a50"><div class="ttname"><a href="../../d2/da8/class_svc_serial_command_interface_a42055ffe62395b2d4ee7ca7ef44f1a50.html#a42055ffe62395b2d4ee7ca7ef44f1a50">SvcSerialCommandInterface::startLZ4Message</a></div><div class="ttdeci">void startLZ4Message()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d46/_svc_serial_command_interface_8h_source.html#l00126">SvcSerialCommandInterface.h:126</a></div></div>
<div class="ttc" id="aclass_svc_serial_command_interface_a6ef09b9a0a8e5dfe394340921717e12f_html_a6ef09b9a0a8e5dfe394340921717e12f"><div class="ttname"><a href="../../d2/da8/class_svc_serial_command_interface_a6ef09b9a0a8e5dfe394340921717e12f.html#a6ef09b9a0a8e5dfe394340921717e12f">SvcSerialCommandInterface::is_streaming_file</a></div><div class="ttdeci">bool is_streaming_file</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d46/_svc_serial_command_interface_8h_source.html#l00114">SvcSerialCommandInterface.h:114</a></div></div>
<div class="ttc" id="aclass_svc_serial_command_interface_a72fa7592492598637d233d9abe27f8f0_html_a72fa7592492598637d233d9abe27f8f0"><div class="ttname"><a href="../../d2/da8/class_svc_serial_command_interface_a72fa7592492598637d233d9abe27f8f0.html#a72fa7592492598637d233d9abe27f8f0">SvcSerialCommandInterface::throttle</a></div><div class="ttdeci">bool throttle()</div><div class="ttdoc">returns true if the available serial buffer falls below SERIAL_THROTTLE_BUFFER_REMAINING_THRESHOLD if...</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d7d/_svc_serial_command_interface_8cpp_source.html#l00170">SvcSerialCommandInterface.cpp:170</a></div></div>
<div class="ttc" id="aclass_svc_serial_command_interface_a80229feee4cd0f6a7676374b0c3f73d3_html_a80229feee4cd0f6a7676374b0c3f73d3"><div class="ttname"><a href="../../d2/da8/class_svc_serial_command_interface_a80229feee4cd0f6a7676374b0c3f73d3.html#a80229feee4cd0f6a7676374b0c3f73d3">SvcSerialCommandInterface::received_chars</a></div><div class="ttdeci">char received_chars[SERIAL_RX_BUFFER_SIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d46/_svc_serial_command_interface_8h_source.html#l00106">SvcSerialCommandInterface.h:106</a></div></div>
<div class="ttc" id="aclass_svc_serial_command_interface_a809cc3d22320bdd8c54044e278e188f0_html_a809cc3d22320bdd8c54044e278e188f0"><div class="ttname"><a href="../../d2/da8/class_svc_serial_command_interface_a809cc3d22320bdd8c54044e278e188f0.html#a809cc3d22320bdd8c54044e278e188f0">SvcSerialCommandInterface::empty</a></div><div class="ttdeci">void empty()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d46/_svc_serial_command_interface_8h_source.html#l00086">SvcSerialCommandInterface.h:86</a></div></div>
<div class="ttc" id="aclass_svc_serial_command_interface_a840b78c06a070b8245fb851073834f4d_html_a840b78c06a070b8245fb851073834f4d"><div class="ttname"><a href="../../d2/da8/class_svc_serial_command_interface_a840b78c06a070b8245fb851073834f4d.html#a840b78c06a070b8245fb851073834f4d">SvcSerialCommandInterface::p_capture_buffer</a></div><div class="ttdeci">char * p_capture_buffer</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d46/_svc_serial_command_interface_8h_source.html#l00112">SvcSerialCommandInterface.h:112</a></div></div>
<div class="ttc" id="aclass_svc_serial_command_interface_a8cf62cf33b60dab489173b92ac278b5a_html_a8cf62cf33b60dab489173b92ac278b5a"><div class="ttname"><a href="../../d2/da8/class_svc_serial_command_interface_a8cf62cf33b60dab489173b92ac278b5a.html#a8cf62cf33b60dab489173b92ac278b5a">SvcSerialCommandInterface::stream_pos</a></div><div class="ttdeci">uint64_t stream_pos</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d46/_svc_serial_command_interface_8h_source.html#l00113">SvcSerialCommandInterface.h:113</a></div></div>
<div class="ttc" id="aclass_svc_serial_command_interface_a9214245f4de217141e2b0d2adc0e47e9_html_a9214245f4de217141e2b0d2adc0e47e9"><div class="ttname"><a href="../../d2/da8/class_svc_serial_command_interface_a9214245f4de217141e2b0d2adc0e47e9.html#a9214245f4de217141e2b0d2adc0e47e9">SvcSerialCommandInterface::tx_buffer_overflow_flag</a></div><div class="ttdeci">volatile bool tx_buffer_overflow_flag</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d46/_svc_serial_command_interface_8h_source.html#l00117">SvcSerialCommandInterface.h:117</a></div></div>
<div class="ttc" id="aclass_svc_serial_command_interface_aac499491449cd984d318a1166fbec4e5_html_aac499491449cd984d318a1166fbec4e5"><div class="ttname"><a href="../../d2/da8/class_svc_serial_command_interface_aac499491449cd984d318a1166fbec4e5.html#aac499491449cd984d318a1166fbec4e5">SvcSerialCommandInterface::is_capturing_bulk_data</a></div><div class="ttdeci">bool is_capturing_bulk_data</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d46/_svc_serial_command_interface_8h_source.html#l00115">SvcSerialCommandInterface.h:115</a></div></div>
<div class="ttc" id="aclass_svc_serial_command_interface_ab2bf9b4e9d65e3c8cf742b1465752c74_html_ab2bf9b4e9d65e3c8cf742b1465752c74"><div class="ttname"><a href="../../d2/da8/class_svc_serial_command_interface_ab2bf9b4e9d65e3c8cf742b1465752c74.html#ab2bf9b4e9d65e3c8cf742b1465752c74">SvcSerialCommandInterface::et_since_periodic_stats_tx</a></div><div class="ttdeci">elapsedMillis et_since_periodic_stats_tx</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d46/_svc_serial_command_interface_8h_source.html#l00120">SvcSerialCommandInterface.h:120</a></div></div>
<div class="ttc" id="aclass_svc_serial_command_interface_aba66dfb362c933a723de3e94475abe6e_html_aba66dfb362c933a723de3e94475abe6e"><div class="ttname"><a href="../../d2/da8/class_svc_serial_command_interface_aba66dfb362c933a723de3e94475abe6e.html#aba66dfb362c933a723de3e94475abe6e">SvcSerialCommandInterface::et_since_periodic_data_dict_tx</a></div><div class="ttdeci">elapsedMillis et_since_periodic_data_dict_tx</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d46/_svc_serial_command_interface_8h_source.html#l00119">SvcSerialCommandInterface.h:119</a></div></div>
<div class="ttc" id="aclass_svc_serial_command_interface_abc9cf7b45383c0db7d607528f76dd595_html_abc9cf7b45383c0db7d607528f76dd595"><div class="ttname"><a href="../../d2/da8/class_svc_serial_command_interface_abc9cf7b45383c0db7d607528f76dd595.html#abc9cf7b45383c0db7d607528f76dd595">SvcSerialCommandInterface::index_rx_buffer</a></div><div class="ttdeci">uint16_t index_rx_buffer</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d46/_svc_serial_command_interface_8h_source.html#l00102">SvcSerialCommandInterface.h:102</a></div></div>
<div class="ttc" id="aclass_svc_serial_command_interface_ac0a8b5ba3a88dcc655f0f6c6c4818291_html_ac0a8b5ba3a88dcc655f0f6c6c4818291"><div class="ttname"><a href="../../d2/da8/class_svc_serial_command_interface_ac0a8b5ba3a88dcc655f0f6c6c4818291.html#ac0a8b5ba3a88dcc655f0f6c6c4818291">SvcSerialCommandInterface::checksum</a></div><div class="ttdeci">uint16_t checksum(const char *msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d7d/_svc_serial_command_interface_8cpp_source.html#l00101">SvcSerialCommandInterface.cpp:101</a></div></div>
<div class="ttc" id="aclass_svc_serial_command_interface_ac17addc8ec6cc9ff4f15c2afcd4f472c_html_ac17addc8ec6cc9ff4f15c2afcd4f472c"><div class="ttname"><a href="../../d2/da8/class_svc_serial_command_interface_ac17addc8ec6cc9ff4f15c2afcd4f472c.html#ac17addc8ec6cc9ff4f15c2afcd4f472c">SvcSerialCommandInterface::file</a></div><div class="ttdeci">FsFile file</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d46/_svc_serial_command_interface_8h_source.html#l00101">SvcSerialCommandInterface.h:101</a></div></div>
<div class="ttc" id="aclass_svc_serial_command_interface_ad90206ca0d83334fb9ce0cc4633d97dc_html_ad90206ca0d83334fb9ce0cc4633d97dc"><div class="ttname"><a href="../../d2/da8/class_svc_serial_command_interface_ad90206ca0d83334fb9ce0cc4633d97dc.html#ad90206ca0d83334fb9ce0cc4633d97dc">SvcSerialCommandInterface::txOverflowHandler</a></div><div class="ttdeci">void txOverflowHandler()</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d7d/_svc_serial_command_interface_8cpp_source.html#l00197">SvcSerialCommandInterface.cpp:197</a></div></div>
<div class="ttc" id="aclass_svc_serial_command_interface_adaa3d36d4c1a1784a1c18f87d756296e_html_adaa3d36d4c1a1784a1c18f87d756296e"><div class="ttname"><a href="../../d2/da8/class_svc_serial_command_interface_adaa3d36d4c1a1784a1c18f87d756296e.html#adaa3d36d4c1a1784a1c18f87d756296e">SvcSerialCommandInterface::sendLZ4Message</a></div><div class="ttdeci">void sendLZ4Message()</div><div class="ttdoc">Calling this function signals the end of a compressed message. The current txBuffer is lz4 compressed...</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d7d/_svc_serial_command_interface_8cpp_source.html#l00115">SvcSerialCommandInterface.cpp:115</a></div></div>
<div class="ttc" id="aclass_svc_serial_command_interface_add54582c8a1dae31f0d69bea84c65c84_html_add54582c8a1dae31f0d69bea84c65c84"><div class="ttname"><a href="../../d2/da8/class_svc_serial_command_interface_add54582c8a1dae31f0d69bea84c65c84.html#add54582c8a1dae31f0d69bea84c65c84">SvcSerialCommandInterface::streamHandler</a></div><div class="ttdeci">void streamHandler()</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d7d/_svc_serial_command_interface_8cpp_source.html#l00231">SvcSerialCommandInterface.cpp:231</a></div></div>
<div class="ttc" id="aclass_svc_serial_command_interface_ae440a4e85836972ce2765d98eaccf718_html_ae440a4e85836972ce2765d98eaccf718"><div class="ttname"><a href="../../d2/da8/class_svc_serial_command_interface_ae440a4e85836972ce2765d98eaccf718.html#ae440a4e85836972ce2765d98eaccf718">SvcSerialCommandInterface::index_tx_buffer</a></div><div class="ttdeci">uint16_t index_tx_buffer</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d46/_svc_serial_command_interface_8h_source.html#l00104">SvcSerialCommandInterface.h:104</a></div></div>
<div class="ttc" id="aclass_svc_serial_command_interface_af010243244540ea1407475bf0865682c_html_af010243244540ea1407475bf0865682c"><div class="ttname"><a href="../../d2/da8/class_svc_serial_command_interface_af010243244540ea1407475bf0865682c.html#af010243244540ea1407475bf0865682c">SvcSerialCommandInterface::index_capture_buffer</a></div><div class="ttdeci">uint32_t index_capture_buffer</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d46/_svc_serial_command_interface_8h_source.html#l00103">SvcSerialCommandInterface.h:103</a></div></div>
<div class="ttc" id="aclass_svc_serial_command_interface_af990f28a8289b373073bbc8dec8c36be_html_af990f28a8289b373073bbc8dec8c36be"><div class="ttname"><a href="../../d2/da8/class_svc_serial_command_interface_af990f28a8289b373073bbc8dec8c36be.html#af990f28a8289b373073bbc8dec8c36be">SvcSerialCommandInterface::p_SD</a></div><div class="ttdeci">SdFs * p_SD</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d46/_svc_serial_command_interface_8h_source.html#l00100">SvcSerialCommandInterface.h:100</a></div></div>
<div class="ttc" id="aclass_svc_serial_command_interface_af993c07bcbc2bdb566c5660eeb31f1ca_html_af993c07bcbc2bdb566c5660eeb31f1ca"><div class="ttname"><a href="../../d2/da8/class_svc_serial_command_interface_af993c07bcbc2bdb566c5660eeb31f1ca.html#af993c07bcbc2bdb566c5660eeb31f1ca">SvcSerialCommandInterface::update</a></div><div class="ttdeci">void update() override</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d7d/_svc_serial_command_interface_8cpp_source.html#l00311">SvcSerialCommandInterface.cpp:311</a></div></div>
<div class="ttc" id="aclass_svc_serial_command_interface_afefe4ffe8389e6e818892e5cd935f161_html_afefe4ffe8389e6e818892e5cd935f161"><div class="ttname"><a href="../../d2/da8/class_svc_serial_command_interface_afefe4ffe8389e6e818892e5cd935f161.html#afefe4ffe8389e6e818892e5cd935f161">SvcSerialCommandInterface::multipart_header</a></div><div class="ttdeci">char multipart_header[SERIAL_TX_HEADER_BUFFER_SIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d46/_svc_serial_command_interface_8h_source.html#l00105">SvcSerialCommandInterface.h:105</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_607444457ce7ff98031c3752bb27f7b6.html">ERISCore</a></li><li class="navelem"><a class="el" href="../../dir_f1e3bca27cd5c1a41cd71dfe2401704d.html">src</a></li><li class="navelem"><a class="el" href="../../da/d7d/_svc_serial_command_interface_8cpp.html">SvcSerialCommandInterface.cpp</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
