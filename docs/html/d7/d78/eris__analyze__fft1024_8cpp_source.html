<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ERIS CORE: ERISCore/lib/Audio/eris_analyze_fft1024.cpp Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../ErisCore_Documentation_Logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ERIS CORE
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('d7/d78/eris__analyze__fft1024_8cpp_source.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">eris_analyze_fft1024.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="../../d7/d78/eris__analyze__fft1024_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/* Audio Library for Teensy 3.X</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * Copyright (c) 2014, Paul Stoffregen, paul@pjrc.com</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> * Development of this audio library was funded by PJRC.COM, LLC by sales of</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> * Teensy and Audio Adaptor boards.  Please support PJRC&#39;s efforts to develop</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> * open source software by purchasing Teensy or other PJRC products.</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> * Permission is hereby granted, free of charge, to any person obtaining a copy</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> * of this software and associated documentation files (the &quot;Software&quot;), to deal</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> * in the Software without restriction, including without limitation the rights</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> * copies of the Software, and to permit persons to whom the Software is</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> * furnished to do so, subject to the following conditions:</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> * The above copyright notice, development funding notice, and this permission</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> * notice shall be included in all copies or substantial portions of the Software.</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"> * THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment"> * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment"> * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment"> * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment"> * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment"> * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment"> * THE SOFTWARE.</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160; </div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &lt;cmath&gt;</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &lt;Arduino.h&gt;</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d4/dfc/eris__analyze__fft1024_8h.html">eris_analyze_fft1024.h</a>&quot;</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &quot;sqrt_integer.h&quot;</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &quot;utility/dspinst.h&quot;</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &quot;arm_const_structs.h&quot;</span> <span class="comment">//WILL BE NEEDED FOR IMPLEMENTING f32 FFT</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160; </div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160; </div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="comment">//static name used for looking up shortname by classname </span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="../../d0/d55/classeris_audio_analyze_f_f_t1024_ae56c5b2ce09ec1d604c76e0dbedd5336.html#ae56c5b2ce09ec1d604c76e0dbedd5336">erisAudioAnalyzeFFT1024::short_name_lookup</a> = <span class="stringliteral">&quot;fft1024&quot;</span>;</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160; </div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="comment">// Approximates atan2(y, x) normalized to the [0,4] range</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="comment">// with a maximum error of 0.1620 degrees</span></div>
<div class="line"><a name="l00052"></a><span class="lineno"><a class="line" href="../../d7/d78/eris__analyze__fft1024_8cpp_a2cefdbd0c6b27b7e8dbcf4d513d7c1fd.html#a2cefdbd0c6b27b7e8dbcf4d513d7c1fd">   52</a></span>&#160;<span class="keywordtype">float</span> <a class="code" href="../../d7/d78/eris__analyze__fft1024_8cpp_a2cefdbd0c6b27b7e8dbcf4d513d7c1fd.html#a2cefdbd0c6b27b7e8dbcf4d513d7c1fd">normalized_atan2</a>( <span class="keywordtype">float</span> y, <span class="keywordtype">float</span> x )</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;{</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    <span class="comment">//return 0;</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> uint32_t sign_mask = 0x80000000;</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">float</span> <a class="code" href="../../de/d24/_creative_01_commons_01_attribution_014_80_01_international_01_public_01_license_8txt_a497e3d0ae5481c638bca24b31d7fd29c.html#a497e3d0ae5481c638bca24b31d7fd29c">b</a> = 0.596227f;</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160; </div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    uint32_t ux;</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    uint32_t uy;</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    memcpy(&amp;ux, &amp;x, <span class="keyword">sizeof</span>(x));</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    memcpy(&amp;uy, &amp;y, <span class="keyword">sizeof</span>(x));</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    <span class="comment">// Extract the sign bits</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    <span class="comment">//uint32_t ux_s  = sign_mask &amp; (uint32_t &amp;)x;</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    <span class="comment">//uint32_t uy_s  = sign_mask &amp; (uint32_t &amp;)y;</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    uint32_t ux_s  = sign_mask &amp; ux;</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    uint32_t uy_s  = sign_mask &amp; uy;</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160; </div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    <span class="comment">// Determine the quadrant offset</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    <span class="keywordtype">float</span> q = (float)( ( ~ux_s &amp; uy_s ) &gt;&gt; 29 | ux_s &gt;&gt; 30 ); </div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160; </div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    <span class="comment">// Calculate the arctangent in the first quadrant</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    <span class="keywordtype">float</span> bxy_a = ::fabs( <a class="code" href="../../de/d24/_creative_01_commons_01_attribution_014_80_01_international_01_public_01_license_8txt_a497e3d0ae5481c638bca24b31d7fd29c.html#a497e3d0ae5481c638bca24b31d7fd29c">b</a> * x * y );</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    <span class="keywordtype">float</span> num = bxy_a + y * y;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    <span class="keywordtype">float</span> atan_1q =  num / ( x * x + bxy_a + num );</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160; </div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    uint32_t uatan;</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    memcpy(&amp;uatan, &amp;atan_1q, <span class="keyword">sizeof</span>(atan_1q));</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <span class="comment">// Translate it to the proper quadrant</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    uint32_t uatan_2q = (ux_s ^ uy_s) | uatan;</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    memcpy(&amp;atan_1q, &amp;uatan_2q, <span class="keyword">sizeof</span>(uatan_2q));</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <span class="keywordflow">return</span> q + atan_1q;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;} </div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160; </div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160; </div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160; </div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="comment">//Fat Audio - to add trailing zeros to fft buffer</span></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="comment">static void zero_to_fft_buffer(void *destination)</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="comment">{</span></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="comment">    uint32_t *dst = (uint32_t *)destination;</span></div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="comment">    for (int i=0; i &lt; AUDIO_BLOCK_SAMPLES; i++) {</span></div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="comment">        *dst++ = 0;</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="comment">    }</span></div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="comment">}</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="comment">*/</span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="comment">// 140312 - PAH - slightly faster copy</span></div>
<div class="line"><a name="l00097"></a><span class="lineno"><a class="line" href="../../d0/d55/classeris_audio_analyze_f_f_t1024_a4ab75e9715a7ed5e4839599f3720299d.html#a4ab75e9715a7ed5e4839599f3720299d">   97</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d0/d55/classeris_audio_analyze_f_f_t1024_a4ab75e9715a7ed5e4839599f3720299d.html#a4ab75e9715a7ed5e4839599f3720299d">erisAudioAnalyzeFFT1024::copy_to_fft_buffer</a>(<span class="keywordtype">void</span> *destination, <span class="keyword">const</span> <span class="keywordtype">void</span> *source,<span class="keywordtype">int</span> subsample)</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;{</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    <span class="keyword">const</span> uint16_t *src = (<span class="keyword">const</span> uint16_t *)source;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    uint16_t *dst = (uint16_t *)destination;</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <span class="comment">//Fat Audio - dumb downsample</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <span class="keywordflow">for</span> (; <a class="code" href="../../d0/d55/classeris_audio_analyze_f_f_t1024_a2fd4c8c1a3c0fbd59f741442d01cfc56.html#a2fd4c8c1a3c0fbd59f741442d01cfc56">SAMPLING_INDEX</a> &lt; <a class="code" href="../../df/d6c/_audio_stream_8h_ad762f9826d4325643328dc53fae4fcb6.html#ad762f9826d4325643328dc53fae4fcb6">AUDIO_BLOCK_SAMPLES</a>; ) {</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;        *dst++ = src[<a class="code" href="../../d0/d55/classeris_audio_analyze_f_f_t1024_a2fd4c8c1a3c0fbd59f741442d01cfc56.html#a2fd4c8c1a3c0fbd59f741442d01cfc56">SAMPLING_INDEX</a>];</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;        <a class="code" href="../../d0/d55/classeris_audio_analyze_f_f_t1024_a2fd4c8c1a3c0fbd59f741442d01cfc56.html#a2fd4c8c1a3c0fbd59f741442d01cfc56">SAMPLING_INDEX</a>+=subsample;</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    }</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    <a class="code" href="../../d0/d55/classeris_audio_analyze_f_f_t1024_a2fd4c8c1a3c0fbd59f741442d01cfc56.html#a2fd4c8c1a3c0fbd59f741442d01cfc56">SAMPLING_INDEX</a> -= <a class="code" href="../../df/d6c/_audio_stream_8h_ad762f9826d4325643328dc53fae4fcb6.html#ad762f9826d4325643328dc53fae4fcb6">AUDIO_BLOCK_SAMPLES</a>;</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;}</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160; </div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="preprocessor">#ifndef ENABLE_F32_FFT</span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> apply_window_to_fft_buffer(<span class="keywordtype">void</span> *buffer, <span class="keyword">const</span> <span class="keywordtype">void</span> *window)</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;{</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    int16_t *buf = (int16_t *)buffer;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <span class="keyword">const</span> int16_t *win = (int16_t *)window;;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160; </div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i &lt; 1024; i++) {</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;        int32_t val = *buf * *win++;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;        <span class="comment">//*buf = signed_saturate_rshift(val, 16, 15);</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;        *buf = val &gt;&gt; 15;</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;        buf += 2;</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    }</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160; </div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;}</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00124"></a><span class="lineno"><a class="line" href="../../d7/d78/eris__analyze__fft1024_8cpp_a2531887360a2419a3ec3ac88dbd74fd1.html#a2531887360a2419a3ec3ac88dbd74fd1">  124</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d7/d78/eris__analyze__fft1024_8cpp_a2531887360a2419a3ec3ac88dbd74fd1.html#a2531887360a2419a3ec3ac88dbd74fd1">apply_window_to_fft_buffer_f32</a>(float32_t *buffer, <span class="keyword">const</span> float32_t *window)</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;{</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    float32_t *buf = (float32_t *)buffer;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <span class="keyword">const</span> float32_t *win = (float32_t *)window;;</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160; </div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <span class="keywordflow">for</span> (int16_t i=0; i &lt; 1024; i++) {</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;        *buf++ *= *win++;</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    }</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    </div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;}</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160; </div>
<div class="line"><a name="l00136"></a><span class="lineno"><a class="line" href="../../d0/d55/classeris_audio_analyze_f_f_t1024_aedd9781ee771b0a277277871ec5a0c36.html#aedd9781ee771b0a277277871ec5a0c36">  136</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../d0/d55/classeris_audio_analyze_f_f_t1024_aedd9781ee771b0a277277871ec5a0c36.html#aedd9781ee771b0a277277871ec5a0c36">erisAudioAnalyzeFFT1024::capture</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;{</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d0/d55/classeris_audio_analyze_f_f_t1024_aea6497b66755dd3d6f96ae3286f15927.html#aea6497b66755dd3d6f96ae3286f15927">outputflag</a> == <span class="keyword">false</span>) <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">//no new data frame to analyze</span></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <a class="code" href="../../d0/d55/classeris_audio_analyze_f_f_t1024_abe1ae7071ba1322a30d29cbd0f87600a.html#abe1ae7071ba1322a30d29cbd0f87600a">is_analyzed</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;}</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160; </div>
<div class="line"><a name="l00143"></a><span class="lineno"><a class="line" href="../../d0/d55/classeris_audio_analyze_f_f_t1024_adaa8219e3ba39881ca0e59eaa85e96f8.html#adaa8219e3ba39881ca0e59eaa85e96f8">  143</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d0/d55/classeris_audio_analyze_f_f_t1024_adaa8219e3ba39881ca0e59eaa85e96f8.html#adaa8219e3ba39881ca0e59eaa85e96f8">erisAudioAnalyzeFFT1024::analyze</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;{</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <span class="keywordtype">float</span> <a class="code" href="../../db/d46/_eris_globals_8h_afd28d6122a77394af9280cd72366345f.html#afd28d6122a77394af9280cd72366345f">p</a>;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160; </div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d0/d55/classeris_audio_analyze_f_f_t1024_abe1ae7071ba1322a30d29cbd0f87600a.html#abe1ae7071ba1322a30d29cbd0f87600a">is_analyzed</a>) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    <span class="comment">//(NVIC_DISABLE_IRQ(IRQ_SOFTWARE));</span></div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160; </div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    <a class="code" href="../../d7/d78/eris__analyze__fft1024_8cpp_a2531887360a2419a3ec3ac88dbd74fd1.html#a2531887360a2419a3ec3ac88dbd74fd1">apply_window_to_fft_buffer_f32</a>((float32_t*)tmp_buffer, <a class="code" href="../../d0/d55/classeris_audio_analyze_f_f_t1024_a85ffb58a9a40df085141b0b836f3008a.html#a85ffb58a9a40df085141b0b836f3008a">window_f32</a>);</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    arm_fill_f32(0,(float32_t*)&amp;tmp_buffer[1024],1024);</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    arm_cfft_radix4_f32(&amp;<a class="code" href="../../d0/d55/classeris_audio_analyze_f_f_t1024_aa46aeffc013d22a7c2684e967eb5d5d1.html#aa46aeffc013d22a7c2684e967eb5d5d1">fft_inst</a>, (float32_t*)tmp_buffer);</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <span class="comment">//extract the polar phase from the interleaved real and imag </span></div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    </div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <span class="keywordflow">for</span>(int16_t i=0;i &lt; 1024;i+=2){</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;        <a class="code" href="../../db/d46/_eris_globals_8h_afd28d6122a77394af9280cd72366345f.html#afd28d6122a77394af9280cd72366345f">p</a> = <a class="code" href="../../d7/d78/eris__analyze__fft1024_8cpp_a2cefdbd0c6b27b7e8dbcf4d513d7c1fd.html#a2cefdbd0c6b27b7e8dbcf4d513d7c1fd">normalized_atan2</a>(tmp_buffer[i],tmp_buffer[i+1]);</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;        <span class="keywordflow">if</span> (!std::isfinite(<a class="code" href="../../db/d46/_eris_globals_8h_afd28d6122a77394af9280cd72366345f.html#afd28d6122a77394af9280cd72366345f">p</a>)) <a class="code" href="../../db/d46/_eris_globals_8h_afd28d6122a77394af9280cd72366345f.html#afd28d6122a77394af9280cd72366345f">p</a> = 0;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;        phase[i/2] = 360.0 * (<a class="code" href="../../db/d46/_eris_globals_8h_afd28d6122a77394af9280cd72366345f.html#afd28d6122a77394af9280cd72366345f">p</a>/4.0);</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    }</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    </div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <span class="comment">// Process the data through the Complex Magnitude Module for calculating the magnitude at each bin </span></div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    arm_cmplx_mag_f32((float32_t*)tmp_buffer, (float32_t*)output, 1024);</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160; </div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    <span class="comment">//(NVIC_ENABLE_IRQ(IRQ_SOFTWARE));</span></div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160; </div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <span class="comment">//spectralFilter();</span></div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160; </div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <a class="code" href="../../d0/d55/classeris_audio_analyze_f_f_t1024_aea6497b66755dd3d6f96ae3286f15927.html#aea6497b66755dd3d6f96ae3286f15927">outputflag</a> = <span class="keyword">false</span>; <span class="comment">//current frame is analyzed and ready to use</span></div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <a class="code" href="../../d0/d55/classeris_audio_analyze_f_f_t1024_abe1ae7071ba1322a30d29cbd0f87600a.html#abe1ae7071ba1322a30d29cbd0f87600a">is_analyzed</a> = <span class="keyword">true</span>; </div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;}</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160; </div>
<div class="line"><a name="l00173"></a><span class="lineno"><a class="line" href="../../d0/d55/classeris_audio_analyze_f_f_t1024_a4984b3fda16edc12b3b12abf302a5a04.html#a4984b3fda16edc12b3b12abf302a5a04">  173</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d0/d55/classeris_audio_analyze_f_f_t1024_a4984b3fda16edc12b3b12abf302a5a04.html#a4984b3fda16edc12b3b12abf302a5a04">erisAudioAnalyzeFFT1024::update</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;{</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <a class="code" href="../../de/dd6/structaudio__block__struct.html">audio_block_t</a> *block;</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160; </div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    block = <a class="code" href="../../d5/d96/class_audio_stream_a9599ba022ef3e214243ce4dee9717019.html#a9599ba022ef3e214243ce4dee9717019">receiveReadOnly</a>();</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    <span class="keywordflow">if</span> (!block) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160; </div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160; </div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <span class="comment">//FAT Audio - add the ability to turn FFT on or OFF to save CPU</span></div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d55/classeris_audio_analyze_f_f_t1024_ae0014e691b676a2ff446fee87bf825b8.html#ae0014e691b676a2ff446fee87bf825b8">enabled</a>){</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;        <a class="code" href="../../d5/d96/class_audio_stream_a29a40aab8fe15aeee2f0a131da381424.html#a29a40aab8fe15aeee2f0a131da381424">release</a>(block);</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    };</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160; </div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    uint16_t ofs;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <span class="comment">//calcuate active subsampling step and offset</span></div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d0/d55/classeris_audio_analyze_f_f_t1024_ae5ad1f76be2a9ed7c8479838f0783f22.html#ae5ad1f76be2a9ed7c8479838f0783f22">ssr</a> == <a class="code" href="../../d4/dfc/eris__analyze__fft1024_8h_af1f4ed6c31e28ce8075c254e6ed3ab18.html#af1f4ed6c31e28ce8075c254e6ed3ab18a5600bd44fc82db1c9a04eacb575b576f">SS_LOWFREQ</a>){</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;        <a class="code" href="../../d0/d55/classeris_audio_analyze_f_f_t1024_a50000ac8856adf1d02c82188bedb5868.html#a50000ac8856adf1d02c82188bedb5868">MEM_STEP</a> = <a class="code" href="../../d0/d55/classeris_audio_analyze_f_f_t1024_a91889d0bb480235cc3e845e27c663a64.html#a91889d0bb480235cc3e845e27c663a64">subsample_lowfreqrange</a>;</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;        <a class="code" href="../../d0/d55/classeris_audio_analyze_f_f_t1024_a21d7f8bf6b0b75d69d0ddf4e4f988879.html#a21d7f8bf6b0b75d69d0ddf4e4f988879">subsample_by</a> = (int)<a class="code" href="../../d0/d55/classeris_audio_analyze_f_f_t1024_a91889d0bb480235cc3e845e27c663a64.html#a91889d0bb480235cc3e845e27c663a64">subsample_lowfreqrange</a>;</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    }</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d0/d55/classeris_audio_analyze_f_f_t1024_ae5ad1f76be2a9ed7c8479838f0783f22.html#ae5ad1f76be2a9ed7c8479838f0783f22">ssr</a> == <a class="code" href="../../d4/dfc/eris__analyze__fft1024_8h_af1f4ed6c31e28ce8075c254e6ed3ab18.html#af1f4ed6c31e28ce8075c254e6ed3ab18aac99589a7b422519f7ad7bfdacfa823b">SS_HIGHFREQ</a>){</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;        <a class="code" href="../../d0/d55/classeris_audio_analyze_f_f_t1024_a50000ac8856adf1d02c82188bedb5868.html#a50000ac8856adf1d02c82188bedb5868">MEM_STEP</a> = <a class="code" href="../../d0/d55/classeris_audio_analyze_f_f_t1024_a030afe911464dfa088492c820bf122bf.html#a030afe911464dfa088492c820bf122bf">subsample_highfreqrange</a>;</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;        <a class="code" href="../../d0/d55/classeris_audio_analyze_f_f_t1024_a21d7f8bf6b0b75d69d0ddf4e4f988879.html#a21d7f8bf6b0b75d69d0ddf4e4f988879">subsample_by</a> = (int)<a class="code" href="../../d0/d55/classeris_audio_analyze_f_f_t1024_a030afe911464dfa088492c820bf122bf.html#a030afe911464dfa088492c820bf122bf">subsample_highfreqrange</a>;</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    }</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    <a class="code" href="../../d0/d55/classeris_audio_analyze_f_f_t1024_afee01517c1aac8bee46725a5ea8e1acd.html#afee01517c1aac8bee46725a5ea8e1acd">BLOCKS_PER_FFT</a> = ((1024 / <a class="code" href="../../df/d6c/_audio_stream_8h_ad762f9826d4325643328dc53fae4fcb6.html#ad762f9826d4325643328dc53fae4fcb6">AUDIO_BLOCK_SAMPLES</a>) * <a class="code" href="../../d0/d55/classeris_audio_analyze_f_f_t1024_a21d7f8bf6b0b75d69d0ddf4e4f988879.html#a21d7f8bf6b0b75d69d0ddf4e4f988879">subsample_by</a>);</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    <a class="code" href="../../d0/d55/classeris_audio_analyze_f_f_t1024_a13275ffa5b4e3b8ea5a2ececcd8689d8.html#a13275ffa5b4e3b8ea5a2ececcd8689d8">BLOCK_REFRESH_SIZE</a> = <a class="code" href="../../d0/d55/classeris_audio_analyze_f_f_t1024_afee01517c1aac8bee46725a5ea8e1acd.html#afee01517c1aac8bee46725a5ea8e1acd">BLOCKS_PER_FFT</a>/16;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d0/d55/classeris_audio_analyze_f_f_t1024_ae5ad1f76be2a9ed7c8479838f0783f22.html#ae5ad1f76be2a9ed7c8479838f0783f22">ssr</a> == <a class="code" href="../../d4/dfc/eris__analyze__fft1024_8h_af1f4ed6c31e28ce8075c254e6ed3ab18.html#af1f4ed6c31e28ce8075c254e6ed3ab18a5600bd44fc82db1c9a04eacb575b576f">SS_LOWFREQ</a>) <a class="code" href="../../d0/d55/classeris_audio_analyze_f_f_t1024_a13275ffa5b4e3b8ea5a2ececcd8689d8.html#a13275ffa5b4e3b8ea5a2ececcd8689d8">BLOCK_REFRESH_SIZE</a> = <a class="code" href="../../d0/d55/classeris_audio_analyze_f_f_t1024_afee01517c1aac8bee46725a5ea8e1acd.html#afee01517c1aac8bee46725a5ea8e1acd">BLOCKS_PER_FFT</a>/8;<span class="comment">//((subsample_lowfreqrange/subsample_highfreqrange) * 2);//BLOCK_REFRESH_SIZE/(subsample_lowfreqrange/2);//BLOCKS_PER_FFT/4;</span></div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160; </div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    ofs = (<a class="code" href="../../df/d6c/_audio_stream_8h_ad762f9826d4325643328dc53fae4fcb6.html#ad762f9826d4325643328dc53fae4fcb6">AUDIO_BLOCK_SAMPLES</a>/<a class="code" href="../../d0/d55/classeris_audio_analyze_f_f_t1024_a21d7f8bf6b0b75d69d0ddf4e4f988879.html#a21d7f8bf6b0b75d69d0ddf4e4f988879">subsample_by</a>) * (<a class="code" href="../../d0/d55/classeris_audio_analyze_f_f_t1024_a57c40498a4375d38bc4c05b77fe763ed.html#a57c40498a4375d38bc4c05b77fe763ed">sample_block</a>);</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160; </div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d0/d55/classeris_audio_analyze_f_f_t1024_a57c40498a4375d38bc4c05b77fe763ed.html#a57c40498a4375d38bc4c05b77fe763ed">sample_block</a> &lt; <a class="code" href="../../d0/d55/classeris_audio_analyze_f_f_t1024_afee01517c1aac8bee46725a5ea8e1acd.html#afee01517c1aac8bee46725a5ea8e1acd">BLOCKS_PER_FFT</a> -1){</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;        <a class="code" href="../../d0/d55/classeris_audio_analyze_f_f_t1024_a4ab75e9715a7ed5e4839599f3720299d.html#a4ab75e9715a7ed5e4839599f3720299d">copy_to_fft_buffer</a>(buffer+ofs, block-&gt;<a class="code" href="../../de/dd6/structaudio__block__struct_a68d5c70bc46a92800b24bd278dfec719.html#a68d5c70bc46a92800b24bd278dfec719">data</a>,<a class="code" href="../../d0/d55/classeris_audio_analyze_f_f_t1024_a21d7f8bf6b0b75d69d0ddf4e4f988879.html#a21d7f8bf6b0b75d69d0ddf4e4f988879">subsample_by</a>);</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;        <a class="code" href="../../d5/d96/class_audio_stream_a29a40aab8fe15aeee2f0a131da381424.html#a29a40aab8fe15aeee2f0a131da381424">release</a>(block);</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;        <a class="code" href="../../d0/d55/classeris_audio_analyze_f_f_t1024_a57c40498a4375d38bc4c05b77fe763ed.html#a57c40498a4375d38bc4c05b77fe763ed">sample_block</a>++;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    } <span class="keywordflow">else</span>{</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;        <a class="code" href="../../d0/d55/classeris_audio_analyze_f_f_t1024_a4ab75e9715a7ed5e4839599f3720299d.html#a4ab75e9715a7ed5e4839599f3720299d">copy_to_fft_buffer</a>(buffer+ofs, block-&gt;<a class="code" href="../../de/dd6/structaudio__block__struct_a68d5c70bc46a92800b24bd278dfec719.html#a68d5c70bc46a92800b24bd278dfec719">data</a>,<a class="code" href="../../d0/d55/classeris_audio_analyze_f_f_t1024_a21d7f8bf6b0b75d69d0ddf4e4f988879.html#a21d7f8bf6b0b75d69d0ddf4e4f988879">subsample_by</a>);</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;        <a class="code" href="../../d5/d96/class_audio_stream_a29a40aab8fe15aeee2f0a131da381424.html#a29a40aab8fe15aeee2f0a131da381424">release</a>(block);</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;<span class="preprocessor">        #ifdef ENABLE_F32_FFT</span></div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160; </div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;        <span class="comment">//copy buffer while casting to float and scale to the range -1 to 1</span></div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;        <span class="comment">//(NVIC_DISABLE_IRQ(IRQ_SOFTWARE));</span></div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="../../d0/d55/classeris_audio_analyze_f_f_t1024_aea6497b66755dd3d6f96ae3286f15927.html#aea6497b66755dd3d6f96ae3286f15927">outputflag</a> == <span class="keyword">false</span> &amp;&amp; <a class="code" href="../../d0/d55/classeris_audio_analyze_f_f_t1024_abe1ae7071ba1322a30d29cbd0f87600a.html#abe1ae7071ba1322a30d29cbd0f87600a">is_analyzed</a>){</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;            <span class="keywordflow">for</span> (int16_t i=0; i &lt; 1024; i++){</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;                tmp_buffer[i] = ((float32_t)buffer[i] / (float32_t)32768.0);</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;                <span class="comment">//if (SS_LOWFREQ) tmp_buffer[i] *= subsample_lowfreqrange/(float32_t)subsample_highfreqrange; //scale match the low range</span></div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;                <span class="keywordflow">if</span> (!std::isfinite(tmp_buffer[i])) tmp_buffer[i] = 0.0;</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;            }</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;            <a class="code" href="../../d0/d55/classeris_audio_analyze_f_f_t1024_aea6497b66755dd3d6f96ae3286f15927.html#aea6497b66755dd3d6f96ae3286f15927">outputflag</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;        }</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;        <span class="comment">//(NVIC_ENABLE_IRQ(IRQ_SOFTWARE));</span></div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160; </div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;<span class="preprocessor">        #else</span></div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;        memcpy(tmp_buffer,buffer,2048 * <span class="keyword">sizeof</span>(int16_t));</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;        apply_window_to_fft_buffer(tmp_buffer, <a class="code" href="../../d0/d55/classeris_audio_analyze_f_f_t1024_aa912b4a80d03e8ed2bea94f02361b73d.html#aa912b4a80d03e8ed2bea94f02361b73d">window</a>);</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;        arm_cfft_radix4_q15(&amp;<a class="code" href="../../d0/d55/classeris_audio_analyze_f_f_t1024_aa46aeffc013d22a7c2684e967eb5d5d1.html#aa46aeffc013d22a7c2684e967eb5d5d1">fft_inst</a>, tmp_buffer);</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;        <a class="code" href="../../d0/d55/classeris_audio_analyze_f_f_t1024_aea6497b66755dd3d6f96ae3286f15927.html#aea6497b66755dd3d6f96ae3286f15927">outputflag</a> = <span class="keyword">false</span>; <span class="comment">//output flag is false while updating the fft results</span></div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;        </div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i &lt; 512; i++) {</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;            uint32_t tmp = *((uint32_t *)tmp_buffer + i); <span class="comment">// real &amp; imag</span></div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;            uint32_t magsq = multiply_16tx16t_add_16bx16b(tmp, tmp);</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;            output[i] = sqrt_uint32_approx(magsq);</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;            output_packed[i] = tmp;<span class="comment">//normalized_atan2((float)real,(float)imag)*180/PI;//atan2(imag,real)*180/PI;</span></div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;        }</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;<span class="preprocessor">        #endif</span></div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160; </div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d0/d55/classeris_audio_analyze_f_f_t1024_a57c40498a4375d38bc4c05b77fe763ed.html#a57c40498a4375d38bc4c05b77fe763ed">sample_block</a>!= 0){</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;            <a class="code" href="../../d0/d55/classeris_audio_analyze_f_f_t1024_a57c40498a4375d38bc4c05b77fe763ed.html#a57c40498a4375d38bc4c05b77fe763ed">sample_block</a> = <a class="code" href="../../d0/d55/classeris_audio_analyze_f_f_t1024_afee01517c1aac8bee46725a5ea8e1acd.html#afee01517c1aac8bee46725a5ea8e1acd">BLOCKS_PER_FFT</a> - <a class="code" href="../../d0/d55/classeris_audio_analyze_f_f_t1024_a13275ffa5b4e3b8ea5a2ececcd8689d8.html#a13275ffa5b4e3b8ea5a2ececcd8689d8">BLOCK_REFRESH_SIZE</a>;</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;            ofs = (<a class="code" href="../../df/d6c/_audio_stream_8h_ad762f9826d4325643328dc53fae4fcb6.html#ad762f9826d4325643328dc53fae4fcb6">AUDIO_BLOCK_SAMPLES</a>/<a class="code" href="../../d0/d55/classeris_audio_analyze_f_f_t1024_a21d7f8bf6b0b75d69d0ddf4e4f988879.html#a21d7f8bf6b0b75d69d0ddf4e4f988879">subsample_by</a>) * <a class="code" href="../../d0/d55/classeris_audio_analyze_f_f_t1024_a57c40498a4375d38bc4c05b77fe763ed.html#a57c40498a4375d38bc4c05b77fe763ed">sample_block</a>;</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;            <span class="comment">//fft overlap - restore tmp cpy of last half to first half</span></div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;            memmove(buffer,&amp;buffer[(<a class="code" href="../../df/d6c/_audio_stream_8h_ad762f9826d4325643328dc53fae4fcb6.html#ad762f9826d4325643328dc53fae4fcb6">AUDIO_BLOCK_SAMPLES</a>/<a class="code" href="../../d0/d55/classeris_audio_analyze_f_f_t1024_a21d7f8bf6b0b75d69d0ddf4e4f988879.html#a21d7f8bf6b0b75d69d0ddf4e4f988879">subsample_by</a>)*<a class="code" href="../../d0/d55/classeris_audio_analyze_f_f_t1024_a13275ffa5b4e3b8ea5a2ececcd8689d8.html#a13275ffa5b4e3b8ea5a2ececcd8689d8">BLOCK_REFRESH_SIZE</a>], (<a class="code" href="../../df/d6c/_audio_stream_8h_ad762f9826d4325643328dc53fae4fcb6.html#ad762f9826d4325643328dc53fae4fcb6">AUDIO_BLOCK_SAMPLES</a>/<a class="code" href="../../d0/d55/classeris_audio_analyze_f_f_t1024_a21d7f8bf6b0b75d69d0ddf4e4f988879.html#a21d7f8bf6b0b75d69d0ddf4e4f988879">subsample_by</a>) * (<a class="code" href="../../d0/d55/classeris_audio_analyze_f_f_t1024_afee01517c1aac8bee46725a5ea8e1acd.html#afee01517c1aac8bee46725a5ea8e1acd">BLOCKS_PER_FFT</a> - <a class="code" href="../../d0/d55/classeris_audio_analyze_f_f_t1024_a13275ffa5b4e3b8ea5a2ececcd8689d8.html#a13275ffa5b4e3b8ea5a2ececcd8689d8">BLOCK_REFRESH_SIZE</a>) * <span class="keyword">sizeof</span>(int16_t));</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;        }</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160; </div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    }</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;}</div>
<div class="ttc" id="a_audio_stream_8h_ad762f9826d4325643328dc53fae4fcb6_html_ad762f9826d4325643328dc53fae4fcb6"><div class="ttname"><a href="../../df/d6c/_audio_stream_8h_ad762f9826d4325643328dc53fae4fcb6.html#ad762f9826d4325643328dc53fae4fcb6">AUDIO_BLOCK_SAMPLES</a></div><div class="ttdeci">#define AUDIO_BLOCK_SAMPLES</div><div class="ttdoc">modified version from lib basline</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d6c/_audio_stream_8h_source.html#l00058">AudioStream.h:58</a></div></div>
<div class="ttc" id="a_creative_01_commons_01_attribution_014_80_01_international_01_public_01_license_8txt_a497e3d0ae5481c638bca24b31d7fd29c_html_a497e3d0ae5481c638bca24b31d7fd29c"><div class="ttname"><a href="../../de/d24/_creative_01_commons_01_attribution_014_80_01_international_01_public_01_license_8txt_a497e3d0ae5481c638bca24b31d7fd29c.html#a497e3d0ae5481c638bca24b31d7fd29c">b</a></div><div class="ttdeci">Creative Commons Attribution International Public License By exercising the Licensed You accept and agree to be bound by the terms and conditions of this Creative Commons Attribution International Public You are granted the Licensed Rights in consideration of Your acceptance of these terms and and the Licensor grants You such rights in consideration of benefits the Licensor receives from making the Licensed Material available under these terms and conditions Section  Definitions Adapted Material means material subject to Copyright and Similar Rights that is derived from or based upon the Licensed Material and in which the Licensed Material is or otherwise modified in a manner requiring permission under the Copyright and Similar Rights held by the Licensor For purposes of this Public where the Licensed Material is a musical or sound Adapted Material is always produced where the Licensed Material is synched in timed relation with a moving image Adapter s License means the license You apply to Your Copyright and Similar Rights in Your contributions to Adapted Material in accordance with the terms and conditions of this Public License Copyright and Similar Rights means copyright and or similar rights closely related to copyright without sound and Sui Generis Database without regard to how the rights are labeled or categorized For purposes of this Public the rights specified in Section() b(1) -(2) are not Copyright and Similar Rights. Effective Technological Measures means those measures that</div></div>
<div class="ttc" id="a_eris_globals_8h_afd28d6122a77394af9280cd72366345f_html_afd28d6122a77394af9280cd72366345f"><div class="ttname"><a href="../../db/d46/_eris_globals_8h_afd28d6122a77394af9280cd72366345f.html#afd28d6122a77394af9280cd72366345f">p</a></div><div class="ttdeci">const char PROGMEM p[][16]</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d46/_eris_globals_8h_source.html#l00201">ErisGlobals.h:201</a></div></div>
<div class="ttc" id="aclass_audio_stream_a29a40aab8fe15aeee2f0a131da381424_html_a29a40aab8fe15aeee2f0a131da381424"><div class="ttname"><a href="../../d5/d96/class_audio_stream_a29a40aab8fe15aeee2f0a131da381424.html#a29a40aab8fe15aeee2f0a131da381424">AudioStream::release</a></div><div class="ttdeci">static void release(audio_block_t *block)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d7e/_audio_stream_8cpp_source.html#l00135">AudioStream.cpp:135</a></div></div>
<div class="ttc" id="aclass_audio_stream_a9599ba022ef3e214243ce4dee9717019_html_a9599ba022ef3e214243ce4dee9717019"><div class="ttname"><a href="../../d5/d96/class_audio_stream_a9599ba022ef3e214243ce4dee9717019.html#a9599ba022ef3e214243ce4dee9717019">AudioStream::receiveReadOnly</a></div><div class="ttdeci">audio_block_t * receiveReadOnly(unsigned int index=0)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d7e/_audio_stream_8cpp_source.html#l00176">AudioStream.cpp:176</a></div></div>
<div class="ttc" id="aclasseris_audio_analyze_f_f_t1024_a030afe911464dfa088492c820bf122bf_html_a030afe911464dfa088492c820bf122bf"><div class="ttname"><a href="../../d0/d55/classeris_audio_analyze_f_f_t1024_a030afe911464dfa088492c820bf122bf.html#a030afe911464dfa088492c820bf122bf">erisAudioAnalyzeFFT1024::subsample_highfreqrange</a></div><div class="ttdeci">uint16_t subsample_highfreqrange</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfc/eris__analyze__fft1024_8h_source.html#l00361">eris_analyze_fft1024.h:361</a></div></div>
<div class="ttc" id="aclasseris_audio_analyze_f_f_t1024_a13275ffa5b4e3b8ea5a2ececcd8689d8_html_a13275ffa5b4e3b8ea5a2ececcd8689d8"><div class="ttname"><a href="../../d0/d55/classeris_audio_analyze_f_f_t1024_a13275ffa5b4e3b8ea5a2ececcd8689d8.html#a13275ffa5b4e3b8ea5a2ececcd8689d8">erisAudioAnalyzeFFT1024::BLOCK_REFRESH_SIZE</a></div><div class="ttdeci">uint16_t BLOCK_REFRESH_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfc/eris__analyze__fft1024_8h_source.html#l00359">eris_analyze_fft1024.h:359</a></div></div>
<div class="ttc" id="aclasseris_audio_analyze_f_f_t1024_a21d7f8bf6b0b75d69d0ddf4e4f988879_html_a21d7f8bf6b0b75d69d0ddf4e4f988879"><div class="ttname"><a href="../../d0/d55/classeris_audio_analyze_f_f_t1024_a21d7f8bf6b0b75d69d0ddf4e4f988879.html#a21d7f8bf6b0b75d69d0ddf4e4f988879">erisAudioAnalyzeFFT1024::subsample_by</a></div><div class="ttdeci">int subsample_by</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfc/eris__analyze__fft1024_8h_source.html#l00356">eris_analyze_fft1024.h:356</a></div></div>
<div class="ttc" id="aclasseris_audio_analyze_f_f_t1024_a2fd4c8c1a3c0fbd59f741442d01cfc56_html_a2fd4c8c1a3c0fbd59f741442d01cfc56"><div class="ttname"><a href="../../d0/d55/classeris_audio_analyze_f_f_t1024_a2fd4c8c1a3c0fbd59f741442d01cfc56.html#a2fd4c8c1a3c0fbd59f741442d01cfc56">erisAudioAnalyzeFFT1024::SAMPLING_INDEX</a></div><div class="ttdeci">int SAMPLING_INDEX</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfc/eris__analyze__fft1024_8h_source.html#l00357">eris_analyze_fft1024.h:357</a></div></div>
<div class="ttc" id="aclasseris_audio_analyze_f_f_t1024_a4984b3fda16edc12b3b12abf302a5a04_html_a4984b3fda16edc12b3b12abf302a5a04"><div class="ttname"><a href="../../d0/d55/classeris_audio_analyze_f_f_t1024_a4984b3fda16edc12b3b12abf302a5a04.html#a4984b3fda16edc12b3b12abf302a5a04">erisAudioAnalyzeFFT1024::update</a></div><div class="ttdeci">virtual void update(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d78/eris__analyze__fft1024_8cpp_source.html#l00173">eris_analyze_fft1024.cpp:173</a></div></div>
<div class="ttc" id="aclasseris_audio_analyze_f_f_t1024_a4ab75e9715a7ed5e4839599f3720299d_html_a4ab75e9715a7ed5e4839599f3720299d"><div class="ttname"><a href="../../d0/d55/classeris_audio_analyze_f_f_t1024_a4ab75e9715a7ed5e4839599f3720299d.html#a4ab75e9715a7ed5e4839599f3720299d">erisAudioAnalyzeFFT1024::copy_to_fft_buffer</a></div><div class="ttdeci">void copy_to_fft_buffer(void *destination, const void *source, int subsample)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d78/eris__analyze__fft1024_8cpp_source.html#l00097">eris_analyze_fft1024.cpp:97</a></div></div>
<div class="ttc" id="aclasseris_audio_analyze_f_f_t1024_a50000ac8856adf1d02c82188bedb5868_html_a50000ac8856adf1d02c82188bedb5868"><div class="ttname"><a href="../../d0/d55/classeris_audio_analyze_f_f_t1024_a50000ac8856adf1d02c82188bedb5868.html#a50000ac8856adf1d02c82188bedb5868">erisAudioAnalyzeFFT1024::MEM_STEP</a></div><div class="ttdeci">uint16_t MEM_STEP</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfc/eris__analyze__fft1024_8h_source.html#l00355">eris_analyze_fft1024.h:355</a></div></div>
<div class="ttc" id="aclasseris_audio_analyze_f_f_t1024_a57c40498a4375d38bc4c05b77fe763ed_html_a57c40498a4375d38bc4c05b77fe763ed"><div class="ttname"><a href="../../d0/d55/classeris_audio_analyze_f_f_t1024_a57c40498a4375d38bc4c05b77fe763ed.html#a57c40498a4375d38bc4c05b77fe763ed">erisAudioAnalyzeFFT1024::sample_block</a></div><div class="ttdeci">uint16_t sample_block</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfc/eris__analyze__fft1024_8h_source.html#l00353">eris_analyze_fft1024.h:353</a></div></div>
<div class="ttc" id="aclasseris_audio_analyze_f_f_t1024_a85ffb58a9a40df085141b0b836f3008a_html_a85ffb58a9a40df085141b0b836f3008a"><div class="ttname"><a href="../../d0/d55/classeris_audio_analyze_f_f_t1024_a85ffb58a9a40df085141b0b836f3008a.html#a85ffb58a9a40df085141b0b836f3008a">erisAudioAnalyzeFFT1024::window_f32</a></div><div class="ttdeci">const float32_t * window_f32</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfc/eris__analyze__fft1024_8h_source.html#l00350">eris_analyze_fft1024.h:350</a></div></div>
<div class="ttc" id="aclasseris_audio_analyze_f_f_t1024_a91889d0bb480235cc3e845e27c663a64_html_a91889d0bb480235cc3e845e27c663a64"><div class="ttname"><a href="../../d0/d55/classeris_audio_analyze_f_f_t1024_a91889d0bb480235cc3e845e27c663a64.html#a91889d0bb480235cc3e845e27c663a64">erisAudioAnalyzeFFT1024::subsample_lowfreqrange</a></div><div class="ttdeci">uint16_t subsample_lowfreqrange</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfc/eris__analyze__fft1024_8h_source.html#l00360">eris_analyze_fft1024.h:360</a></div></div>
<div class="ttc" id="aclasseris_audio_analyze_f_f_t1024_aa46aeffc013d22a7c2684e967eb5d5d1_html_aa46aeffc013d22a7c2684e967eb5d5d1"><div class="ttname"><a href="../../d0/d55/classeris_audio_analyze_f_f_t1024_aa46aeffc013d22a7c2684e967eb5d5d1.html#aa46aeffc013d22a7c2684e967eb5d5d1">erisAudioAnalyzeFFT1024::fft_inst</a></div><div class="ttdeci">arm_cfft_radix4_instance_f32 fft_inst</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfc/eris__analyze__fft1024_8h_source.html#l00369">eris_analyze_fft1024.h:369</a></div></div>
<div class="ttc" id="aclasseris_audio_analyze_f_f_t1024_aa912b4a80d03e8ed2bea94f02361b73d_html_aa912b4a80d03e8ed2bea94f02361b73d"><div class="ttname"><a href="../../d0/d55/classeris_audio_analyze_f_f_t1024_aa912b4a80d03e8ed2bea94f02361b73d.html#aa912b4a80d03e8ed2bea94f02361b73d">erisAudioAnalyzeFFT1024::window</a></div><div class="ttdeci">const int16_t * window</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfc/eris__analyze__fft1024_8h_source.html#l00349">eris_analyze_fft1024.h:349</a></div></div>
<div class="ttc" id="aclasseris_audio_analyze_f_f_t1024_abe1ae7071ba1322a30d29cbd0f87600a_html_abe1ae7071ba1322a30d29cbd0f87600a"><div class="ttname"><a href="../../d0/d55/classeris_audio_analyze_f_f_t1024_abe1ae7071ba1322a30d29cbd0f87600a.html#abe1ae7071ba1322a30d29cbd0f87600a">erisAudioAnalyzeFFT1024::is_analyzed</a></div><div class="ttdeci">volatile bool is_analyzed</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfc/eris__analyze__fft1024_8h_source.html#l00365">eris_analyze_fft1024.h:365</a></div></div>
<div class="ttc" id="aclasseris_audio_analyze_f_f_t1024_adaa8219e3ba39881ca0e59eaa85e96f8_html_adaa8219e3ba39881ca0e59eaa85e96f8"><div class="ttname"><a href="../../d0/d55/classeris_audio_analyze_f_f_t1024_adaa8219e3ba39881ca0e59eaa85e96f8.html#adaa8219e3ba39881ca0e59eaa85e96f8">erisAudioAnalyzeFFT1024::analyze</a></div><div class="ttdeci">void analyze(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d78/eris__analyze__fft1024_8cpp_source.html#l00143">eris_analyze_fft1024.cpp:143</a></div></div>
<div class="ttc" id="aclasseris_audio_analyze_f_f_t1024_ae0014e691b676a2ff446fee87bf825b8_html_ae0014e691b676a2ff446fee87bf825b8"><div class="ttname"><a href="../../d0/d55/classeris_audio_analyze_f_f_t1024_ae0014e691b676a2ff446fee87bf825b8.html#ae0014e691b676a2ff446fee87bf825b8">erisAudioAnalyzeFFT1024::enabled</a></div><div class="ttdeci">bool enabled</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfc/eris__analyze__fft1024_8h_source.html#l00354">eris_analyze_fft1024.h:354</a></div></div>
<div class="ttc" id="aclasseris_audio_analyze_f_f_t1024_ae56c5b2ce09ec1d604c76e0dbedd5336_html_ae56c5b2ce09ec1d604c76e0dbedd5336"><div class="ttname"><a href="../../d0/d55/classeris_audio_analyze_f_f_t1024_ae56c5b2ce09ec1d604c76e0dbedd5336.html#ae56c5b2ce09ec1d604c76e0dbedd5336">erisAudioAnalyzeFFT1024::short_name_lookup</a></div><div class="ttdeci">static const char * short_name_lookup</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfc/eris__analyze__fft1024_8h_source.html#l00352">eris_analyze_fft1024.h:352</a></div></div>
<div class="ttc" id="aclasseris_audio_analyze_f_f_t1024_ae5ad1f76be2a9ed7c8479838f0783f22_html_ae5ad1f76be2a9ed7c8479838f0783f22"><div class="ttname"><a href="../../d0/d55/classeris_audio_analyze_f_f_t1024_ae5ad1f76be2a9ed7c8479838f0783f22.html#ae5ad1f76be2a9ed7c8479838f0783f22">erisAudioAnalyzeFFT1024::ssr</a></div><div class="ttdeci">subsample_range ssr</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfc/eris__analyze__fft1024_8h_source.html#l00362">eris_analyze_fft1024.h:362</a></div></div>
<div class="ttc" id="aclasseris_audio_analyze_f_f_t1024_aea6497b66755dd3d6f96ae3286f15927_html_aea6497b66755dd3d6f96ae3286f15927"><div class="ttname"><a href="../../d0/d55/classeris_audio_analyze_f_f_t1024_aea6497b66755dd3d6f96ae3286f15927.html#aea6497b66755dd3d6f96ae3286f15927">erisAudioAnalyzeFFT1024::outputflag</a></div><div class="ttdeci">volatile bool outputflag</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfc/eris__analyze__fft1024_8h_source.html#l00364">eris_analyze_fft1024.h:364</a></div></div>
<div class="ttc" id="aclasseris_audio_analyze_f_f_t1024_aedd9781ee771b0a277277871ec5a0c36_html_aedd9781ee771b0a277277871ec5a0c36"><div class="ttname"><a href="../../d0/d55/classeris_audio_analyze_f_f_t1024_aedd9781ee771b0a277277871ec5a0c36.html#aedd9781ee771b0a277277871ec5a0c36">erisAudioAnalyzeFFT1024::capture</a></div><div class="ttdeci">bool capture(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d78/eris__analyze__fft1024_8cpp_source.html#l00136">eris_analyze_fft1024.cpp:136</a></div></div>
<div class="ttc" id="aclasseris_audio_analyze_f_f_t1024_afee01517c1aac8bee46725a5ea8e1acd_html_afee01517c1aac8bee46725a5ea8e1acd"><div class="ttname"><a href="../../d0/d55/classeris_audio_analyze_f_f_t1024_afee01517c1aac8bee46725a5ea8e1acd.html#afee01517c1aac8bee46725a5ea8e1acd">erisAudioAnalyzeFFT1024::BLOCKS_PER_FFT</a></div><div class="ttdeci">uint16_t BLOCKS_PER_FFT</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfc/eris__analyze__fft1024_8h_source.html#l00358">eris_analyze_fft1024.h:358</a></div></div>
<div class="ttc" id="aeris__analyze__fft1024_8cpp_a2531887360a2419a3ec3ac88dbd74fd1_html_a2531887360a2419a3ec3ac88dbd74fd1"><div class="ttname"><a href="../../d7/d78/eris__analyze__fft1024_8cpp_a2531887360a2419a3ec3ac88dbd74fd1.html#a2531887360a2419a3ec3ac88dbd74fd1">apply_window_to_fft_buffer_f32</a></div><div class="ttdeci">static void apply_window_to_fft_buffer_f32(float32_t *buffer, const float32_t *window)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d78/eris__analyze__fft1024_8cpp_source.html#l00124">eris_analyze_fft1024.cpp:124</a></div></div>
<div class="ttc" id="aeris__analyze__fft1024_8cpp_a2cefdbd0c6b27b7e8dbcf4d513d7c1fd_html_a2cefdbd0c6b27b7e8dbcf4d513d7c1fd"><div class="ttname"><a href="../../d7/d78/eris__analyze__fft1024_8cpp_a2cefdbd0c6b27b7e8dbcf4d513d7c1fd.html#a2cefdbd0c6b27b7e8dbcf4d513d7c1fd">normalized_atan2</a></div><div class="ttdeci">float normalized_atan2(float y, float x)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d78/eris__analyze__fft1024_8cpp_source.html#l00052">eris_analyze_fft1024.cpp:52</a></div></div>
<div class="ttc" id="aeris__analyze__fft1024_8h_af1f4ed6c31e28ce8075c254e6ed3ab18_html_af1f4ed6c31e28ce8075c254e6ed3ab18a5600bd44fc82db1c9a04eacb575b576f"><div class="ttname"><a href="../../d4/dfc/eris__analyze__fft1024_8h_af1f4ed6c31e28ce8075c254e6ed3ab18.html#af1f4ed6c31e28ce8075c254e6ed3ab18a5600bd44fc82db1c9a04eacb575b576f">SS_LOWFREQ</a></div><div class="ttdeci">@ SS_LOWFREQ</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfc/eris__analyze__fft1024_8h_source.html#l00052">eris_analyze_fft1024.h:52</a></div></div>
<div class="ttc" id="aeris__analyze__fft1024_8h_af1f4ed6c31e28ce8075c254e6ed3ab18_html_af1f4ed6c31e28ce8075c254e6ed3ab18aac99589a7b422519f7ad7bfdacfa823b"><div class="ttname"><a href="../../d4/dfc/eris__analyze__fft1024_8h_af1f4ed6c31e28ce8075c254e6ed3ab18.html#af1f4ed6c31e28ce8075c254e6ed3ab18aac99589a7b422519f7ad7bfdacfa823b">SS_HIGHFREQ</a></div><div class="ttdeci">@ SS_HIGHFREQ</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfc/eris__analyze__fft1024_8h_source.html#l00052">eris_analyze_fft1024.h:52</a></div></div>
<div class="ttc" id="aeris__analyze__fft1024_8h_html"><div class="ttname"><a href="../../d4/dfc/eris__analyze__fft1024_8h.html">eris_analyze_fft1024.h</a></div></div>
<div class="ttc" id="astructaudio__block__struct_a68d5c70bc46a92800b24bd278dfec719_html_a68d5c70bc46a92800b24bd278dfec719"><div class="ttname"><a href="../../de/dd6/structaudio__block__struct_a68d5c70bc46a92800b24bd278dfec719.html#a68d5c70bc46a92800b24bd278dfec719">audio_block_struct::data</a></div><div class="ttdeci">int16_t data[AUDIO_BLOCK_SAMPLES]</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d6c/_audio_stream_8h_source.html#l00078">AudioStream.h:78</a></div></div>
<div class="ttc" id="astructaudio__block__struct_html"><div class="ttname"><a href="../../de/dd6/structaudio__block__struct.html">audio_block_struct</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d6c/_audio_stream_8h_source.html#l00074">AudioStream.h:74</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_607444457ce7ff98031c3752bb27f7b6.html">ERISCore</a></li><li class="navelem"><a class="el" href="../../dir_5b5543e87200f107623567781f7f5b13.html">lib</a></li><li class="navelem"><a class="el" href="../../dir_d72faa1937f9f5039d6273b8fa1c3fff.html">Audio</a></li><li class="navelem"><a class="el" href="../../d7/d78/eris__analyze__fft1024_8cpp.html">eris_analyze_fft1024.cpp</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
